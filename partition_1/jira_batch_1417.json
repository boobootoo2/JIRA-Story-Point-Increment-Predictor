[
  {
    "key": "CWD-5361",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-02-13T00:47:12.000+0000",
      "created": "2019-02-13T00:37:34.000+0000",
      "description": "Various rest resources in Atlassian Crowd before version 3.2.7 and from version 3.3.0 before version 3.3.4 allow remote attackers to authenticate using an expired user session via an insufficient session expiration vulnerability.",
      "summary": "Insufficient Session Expiration of user sessions - CVE-2018-20238"
    }
  },
  {
    "key": "CWD-5360",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-02-12T22:43:42.000+0000",
      "description": "In the User management screen of Crowd, searching defaults to \"All\" users. But the fact is that for 95% of searches or more, the searcher is not really interested in inactive users and doesn't want them in the results. We deal with active users the vast majority of the time.\u00a0\r\n\r\nIt's not hard to click the \"Active\" setting to what you want, but to have to do it in 19 of every 20 searches is a nuisance. For best UI design, you default to what the majority of searchers want to see the majority of the time.\r\n\r\nPlease consider this modification for future releases. Or perhaps allowing us to configure what the default should be.\r\n\r\nThanks",
      "summary": "User searches should default to \"Active\" users, not \"All\" users"
    }
  },
  {
    "key": "CWD-5359",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-09-29T09:53:27.000+0000",
      "created": "2019-02-12T09:25:18.000+0000",
      "description": "h3. Summary\r\nWindows Service parameters contains a break line parameter.\r\nAs a result, any parameter defined after the break line will not be registered by Crowd.\r\n\r\nh3. Environment\r\n* Crowd 3.3.3\r\n* Windows Service\r\n\r\nh3. Steps to Reproduce\r\n# Install Crowd 3.3.3\r\n# Follow the instructions in [Installing Crowd as a Windows Service|https://confluence.atlassian.com/crowd/installing-crowd-as-a-windows-service-82870454.html] to install Crowd as a service\r\n# Check the registry\r\n\r\nh3. Expected Results\r\nThere is no break line\r\n\r\nh3. Actual Results\r\nThere is a break line in the parameters\r\n !CWD-5359.png|thumbnail! \r\n\r\nh3. Notes\r\n# Everything that's defined after the break line does not get registered in Crowd.\r\n# From the example above, currently the encoding setting \"-Dfile.encoding=UTF-8\" will not be registered in Crowd\r\n# The following was taken from application.xml taken from Crowd that was started by through the service:\r\n{code}\r\n<virtual-machine-arguments>-Dcatalina.home=D:\\Crowd\\Install\\atlassian-crowd-3.3.3\\apache-tomcat -Dcatalina.base=D:\\Crowd\\Install\\atlassian-crowd-3.3.3\\apache-tomcat -Dignore.endorsed.dirs=D:\\Crowd\\Install\\atlassian-crowd-3.3.3\\apache-tomcat\\endorsed -Djava.io.tmpdir=D:\\Crowd\\Install\\atlassian-crowd-3.3.3\\apache-tomcat\\temp -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djava.util.logging.config.file=D:\\Crowd\\Install\\atlassian-crowd-3.3.3\\apache-tomcat\\conf\\logging.properties exit abort -Xms128m -Xmx256m</virtual-machine-arguments>\r\n{code}\r\n# While the following was taken from application.xml taken from Crowd that was started manually :\r\n{code}\r\n<virtual-machine-arguments>-Djava.util.logging.config.file=D:\\Crowd\\Install\\atlassian-crowd-3.3.3\\apache-tomcat\\conf\\logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Xms128m -Xmx512m -Dfile.encoding=UTF-8 -Djdk.tls.ephemeralDHKeySize=2048 -Djava.protocol.handler.pkgs=org.apache.catalina.webresources -Dignore.endorsed.dirs= -Dcatalina.base=D:\\Crowd\\Install\\atlassian-crowd-3.3.3\\apache-tomcat -Dcatalina.home=D:\\Crowd\\Install\\atlassian-crowd-3.3.3\\apache-tomcat -Djava.io.tmpdir=D:\\Crowd\\Install\\atlassian-crowd-3.3.3\\apache-tomcat\\temp</virtual-machine-arguments>\r\n{code}\r\n\r\nTake note that the parameter *-Dfile.encoding=UTF-8* is not included in the Crowd that's started by the service\r\n\r\nh3.Workaround\r\nDeleting the break line from the registry manually helped",
      "summary": "Windows Service parameters contains a break line parameter"
    }
  },
  {
    "key": "CWD-5358",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-03-28T14:04:44.000+0000",
      "created": "2019-02-11T09:31:53.000+0000",
      "description": "h3. Note regarding fix\r\n\r\nThis issue has been fixed in Crowd 3.4.3 as well as 3.5.0. However those Crowd versions will only set the correct column types on newly created columns. If upgrading from an affected version (3.3.0-3.4.0) it's important to check for varchar, clob and text columns in the database and *manually change them to the appropriate types.*\r\nh3. Issue Summary\r\n\r\nPrior to 3.3, customers could use our custom *SQLServerIntlDialect* and tables would be created as *nvarchar*, instead of MS SQL default *varchar*.\r\n Starting with Crowd 3.,3 db schema creation process is using liquibase, as a result, the dialect is not respected anymore and tables being created as varchar or converted to varchar during an upgrade.\r\nh3. Environment\r\n\r\nCrowd 3.3\r\n Ms SQL\r\nh3. Expected results\r\n\r\nWhen using *SQLServerIntlDialect* dialect, tables are created with nvarchar columns allowing them to store Unicode characters.\r\nh3. Actual Results\r\n\r\nTables are created with MSSQL default varchar\r\n During an upgrade from earlier versions, if columns were nvarchar, the upgrade will convert them to varchar replacing Unicode characters already stored in the tables in the process.\r\nh3. Workaround\r\n\r\nThere is no workaround to prevent this, but columns can be manually changed to nvarchar after the upgrade/installation.",
      "summary": "During db schema creation on 3.3 all tables will be created in varchar"
    }
  },
  {
    "key": "CWD-5357",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-02-07T22:51:33.000+0000",
      "description": "{panel:title=Issue Obsolete}\r\nGroup creation with duplicate name is now prohibited in Azure AD\r\n\r\n[https://docs.microsoft.com/bs-latn-ba/azure/active-directory/fundamentals/active-directory-groups-create-azure-portal]\r\n{panel}\r\nh5. Issue Summary\r\n\r\nCrowd can't sync when there are duplicate groups in AzureAD, as per mentioned in the following Documentation: [Configuring Azure Active Directory - Atlassian Documentation|https://confluence.atlassian.com/crowd/configuring-azure-active-directory-935372375.html]\r\n{quote}In Azure AD, you can have multiple groups with the same name (displayName), but it's not supported in Crowd and results in a failing synchronization. Make sure you change your Azure AD group names to unique ones.\r\n{quote}\r\nCrowd needs to use the DN to distinguish between the groups that appear to be duplicated. [Azure AD allows duplicate group names - Morgan Simonsen's Blog|https://morgansimonsen.com/2016/06/28/azure-ad-allows-duplicate-group-names]\r\n{quote}Active Directory is based on LDAP and in the LDAP naming scheme an object may have the same Relative Distinguished Name (RDN), as long as the Distinguished Name (DN) is unique. In this case the RDN is the leaf name and the DN is the fully qualified name. So you can have two users named John Doe as long as they do not both reside within the same Organizational Unit (OU), or location, in the directory.\r\n{quote}\r\nh5. Environment\r\n\r\nAzureAD & Crowd 3.1.2\r\nh5. Expected Results\r\n\r\nsynchronization succeded\r\nh5. Actual Results\r\n\r\nFailure to finish sync.\r\n The below exception is thrown in the atlassian-crowd.log file:\r\n{code:java}\r\n2018-11-15 11:04:47,308 Caesium-2-1 ERROR [hibernate.batch.hibernate5.Hibernate5BatchProcessor] Could not process class com.atlassian.crowd.model.group.InternalGroup: com.atlassian.crowd.model.group.InternalGroup@53977e56[id=2050678,name=groupOne,type=GROUP,active=true,description=description,lowerName=groupone,createdDate=Thu Nov 15 11:04:46 UTC 2018,updatedDate=Thu Nov 15 11:04:46 UTC 2018,directoryId=557057,externalId=5c432810-6d7e-497e-af41-195301e20c59]\r\njavax.persistence.PersistenceException: org.hibernate.exception.ConstraintViolationException: could not execute batch\r\n\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:147)\r\n\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:155)\r\n\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:162)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1441)\r\n\tat org.hibernate.internal.SessionImpl.flush(SessionImpl.java:1421)\r\n\tat com.atlassian.crowd.util.persistence.hibernate.batch.hibernate5.Hibernate5BatchProcessor.flushSession(Hibernate5BatchProcessor.java:51)\r\n\tat com.atlassian.crowd.util.persistence.hibernate.batch.hibernate5.AbstractHibernateBatchProcessor.commitTransaction(AbstractHibernateBatchProcessor.java:55)\r\n\tat com.atlassian.crowd.util.persistence.hibernate.batch.hibernate5.AbstractHibernateBatchProcessor.afterProcessIndividual(AbstractHibernateBatchProcessor.java:22)\r\n\tat com.atlassian.crowd.util.persistence.hibernate.batch.AbstractBatchProcessor.processIndividual(AbstractBatchProcessor.java:173)\r\n\tat com.atlassian.crowd.util.persistence.hibernate.batch.AbstractBatchProcessor.processBatch(AbstractBatchProcessor.java:155)\r\n\tat com.atlassian.crowd.util.persistence.hibernate.batch.AbstractBatchProcessor.execute(AbstractBatchProcessor.java:125)\r\n\tat com.atlassian.crowd.dao.group.GroupDAOHibernate.addAll(GroupDAOHibernate.java:77)\r\n\tat com.atlassian.crowd.directory.CachingDirectory.addAllGroups(CachingDirectory.java:122)\r\n\tat com.atlassian.crowd.directory.DbCachingRemoteChangeOperations.addGroups(DbCachingRemoteChangeOperations.java:482)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:333)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:213)\r\n\tat com.sun.proxy.$Proxy500.addGroups(Unknown Source)\r\n\tat com.atlassian.crowd.directory.DirectoryCacheImplUsingChangeOperations.addOrUpdateCachedGroups(DirectoryCacheImplUsingChangeOperations.java:84)\r\n\tat com.atlassian.crowd.directory.cache.DeltaQueryCacheRefresher.synchroniseAllGroups(DeltaQueryCacheRefresher.java:326)\r\n\tat com.atlassian.crowd.directory.cache.DeltaQueryCacheRefresher.synchroniseAll(DeltaQueryCacheRefresher.java:91)\r\n\tat com.atlassian.crowd.directory.DbCachingRemoteDirectory.synchroniseCache(DbCachingRemoteDirectory.java:968)\r\n\tat com.atlassian.crowd.manager.directory.DirectorySynchroniserImpl.synchronise(DirectorySynchroniserImpl.java:71)\r\n\tat sun.reflect.GeneratedMethodAccessor850.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:333)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:213)\r\n\tat com.sun.proxy.$Proxy83.synchronise(Unknown Source)\r\n\tat com.atlassian.crowd.directory.DbCachingDirectoryPoller.pollChanges(DbCachingDirectoryPoller.java:45)\r\n\tat com.atlassian.crowd.manager.directory.monitor.poller.DirectoryPollerJobRunner.runJob(DirectoryPollerJobRunner.java:85)\r\n\tat com.atlassian.scheduler.core.JobLauncher.runJob(JobLauncher.java:153)\r\n\tat com.atlassian.scheduler.core.JobLauncher.launchAndBuildResponse(JobLauncher.java:118)\r\n\tat com.atlassian.scheduler.core.JobLauncher.launch(JobLauncher.java:97)\r\n\tat com.atlassian.scheduler.caesium.impl.CaesiumSchedulerService.launchJob(CaesiumSchedulerService.java:443)\r\n\tat com.atlassian.scheduler.caesium.impl.CaesiumSchedulerService.executeClusteredJob(CaesiumSchedulerService.java:438)\r\n\tat com.atlassian.scheduler.caesium.impl.CaesiumSchedulerService.executeClusteredJobWithRecoveryGuard(CaesiumSchedulerService.java:462)\r\n\tat com.atlassian.scheduler.caesium.impl.CaesiumSchedulerService.executeQueuedJob(CaesiumSchedulerService.java:390)\r\n\tat com.atlassian.scheduler.caesium.impl.CaesiumSchedulerService$1.consume(CaesiumSchedulerService.java:285)\r\n\tat com.atlassian.scheduler.caesium.impl.CaesiumSchedulerService$1.consume(CaesiumSchedulerService.java:282)\r\n\tat com.atlassian.scheduler.caesium.impl.SchedulerQueueWorker.executeJob(SchedulerQueueWorker.java:65)\r\n\tat com.atlassian.scheduler.caesium.impl.SchedulerQueueWorker.executeNextJob(SchedulerQueueWorker.java:59)\r\n\tat com.atlassian.scheduler.caesium.impl.SchedulerQueueWorker.run(SchedulerQueueWorker.java:34)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute batch\r\n\tat org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:112)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:111)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchingBatch.performExecution(BatchingBatch.java:121)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchingBatch.doExecuteBatch(BatchingBatch.java:97)\r\n\tat org.hibernate.engine.jdbc.batch.internal.AbstractBatchImpl.execute(AbstractBatchImpl.java:147)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.executeBatch(JdbcCoordinatorImpl.java:206)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:618)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:463)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:337)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1435)\r\n\t... 55 more\r\nCaused by: java.sql.BatchUpdateException: Batch entry 0 insert into cwd_group (group_name, lower_group_name, active, is_local, created_date, updated_date, description, group_type, directory_id, external_id, id) values ('groupOne', 'groupone', 'T', 'F', '2018-11-15 11:04:46.993000+00', '2018-11-15 11:04:46.993000+00', 'description', 'GROUP', 557057, '5c432810-6d7e-497e-af41-195301e20c59', 2050678) was aborted: ERROR: duplicate key value violates unique constraint \"uk_group_name_dir_id\"\r\n  Detail: Key (lower_group_name, directory_id)=(groupone, 557057) already exists.\r\n  Location: File: nbtinsert.c, Routine: _bt_check_unique, Line: 433\r\n  Server SQLState: 23505  Call getNextException to see other errors in the batch.\r\n\tat org.postgresql.jdbc.BatchResultHandler.handleError(BatchResultHandler.java:148)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2190)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:472)\r\n\tat org.postgresql.jdbc.PgStatement.executeBatch(PgStatement.java:791)\r\n\tat org.postgresql.jdbc.PgPreparedStatement.executeBatch(PgPreparedStatement.java:1547)\r\n\tat com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeBatch(NewProxyPreparedStatement.java:1135)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchingBatch.performExecution(BatchingBatch.java:111)\r\n\t... 63 more\r\n{code}\r\nh5. Workaround\r\n * Customers have to purchase additional Add-Ons/App to sync AzureAD, specifically [Office 365 Directory Connector for Crowd (ODCC) Cleito|https://www.cleito.com/products/odcc/], to get AzureAD to sync properly.\r\n * Ensure that there are no duplicated groups in Azure AD side\r\n * Find the duplicated groups from the error logs (From the above example, it's groupOne) and rename it to something unique\r\n\r\nh5. Suggestion:\r\n\r\nDuplicated Azure AD groups should be imported with a suffix generated from another property of the AD object.\r\nh5. Related Feature requests:\r\n * CWD-5019 Ability to Filter users and groups For AzureAD\r\n * CWD-5142 Allow Crowd to pull different Azure AD attributes",
      "summary": "AzureAD sync errors out when duplicate groups are encountered"
    }
  },
  {
    "key": "CWD-5355",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-04-27T11:56:21.000+0000",
      "created": "2019-02-07T08:48:13.000+0000",
      "description": "h3. Problem Definition\r\n\r\nMicrosoft SQL Server 2012, 2014, 2016 are officially supported in Crowd: [https://confluence.atlassian.com/display/CROWD/Supported+Platforms]\r\nh3. Suggested Solution\r\n\r\nAdd Microsoft SQL Server 2017 as supported databases for Crowd.",
      "summary": "Official support for Microsoft SQL Server 2017"
    }
  },
  {
    "key": "CWD-5354",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-03-22T13:21:06.000+0000",
      "created": "2019-02-01T15:19:42.000+0000",
      "description": "h3. Issue Summary\r\nSpecial Characters such as hashtag (#), ampersand (&), or percentage (%) in group names are not encoded properly and it will break functions such as {{viewmembers.action}}.\r\n\r\nh3. Steps to Reproduce\r\n# Install a brand new Crowd version 3.3.3\r\n# Create a group name {{a&b}}\r\n# View the group\r\n#* The URL is {{http://localhost:8095/crowd/console/secure/group/view!execute.action?name=a%26b&directoryID=163841}}, you'll see that the ampersand (&) is being encoded properly to {{%26}}\r\n# Click on \"Direct Member\"\r\n#* The expected URL is {{http://localhost:8095/crowd/console/secure/group/viewmembers.action?groupName=a&b&directoryID=163841}}, you'll see that the ampersand (&) is NOT being encoded properly to {{%26}}\r\n\r\nh3. Expected Results\r\nCrowd will display group member of group *a&b*\r\n\r\nh3. Actual Results\r\nCrowd display group member of group *a* instead because of the URL encoding issue.\r\n\r\nThe below exception is thrown in the {{atlassian-crowd.log}} file:\r\n{noformat}\r\n2019-02-01 22:40:04,990 http-nio-8095-exec-9 ERROR [console.action.group.ViewGroupMembers] Directory <-1> does not exist\r\ncom.atlassian.crowd.exception.DirectoryNotFoundException: Directory <-1> does not exist\r\n\tat com.atlassian.crowd.dao.directory.DirectoryDAOHibernate.findById(DirectoryDAOHibernate.java:52)\r\n\tat com.atlassian.crowd.dao.directory.DirectoryDAOHibernate.findById(DirectoryDAOHibernate.java:26)\r\n\tat com.atlassian.crowd.manager.directory.DirectoryManagerGeneric.findDirectoryById(DirectoryManagerGeneric.java:156)\r\n\tat com.atlassian.crowd.manager.recovery.RecoveryModeAwareDirectoryManager.findDirectoryById(RecoveryModeAwareDirectoryManager.java:52)\r\n\tat sun.reflect.GeneratedMethodAccessor597.invoke(Unknown Source)\r\n{noformat}\r\n(i) If the {{groupName}} argument in the URL is not encoded properly, {{directoryID}} argument will not be able to get through which result in the error above.\r\n\r\n\r\n\r\nh3. Workaround\r\nManually modify the un-encoded character in the URL.\r\n\r\nFor example, the following URL is broken because the ampersand (&) is NOT being encoded properly to {{%26}}\r\n* http://localhost:8095/crowd/console/secure/group/viewmembers.action?groupName=a&b&directoryID=163841\r\n\r\nChange the ampersand (&) to {{%26}} like so:\r\n* http://localhost:8095/crowd/console/secure/group/viewmembers.action?groupName=a%26b&directoryID=163841\r\n\r\nYou should now be able see the members of *a&b* group now.",
      "summary": "Some special characters in group names are preventing viewmembers.action to work properly"
    }
  },
  {
    "key": "CWD-5353",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-02-01T14:51:46.000+0000",
      "description": "Users with diacritics. E.g. KR\u016e\u010cEK are stored without diacritics Krucek when using MSSQL, even with SQL_Latin1_General_CP1_CS_AS collation.\r\n\r\n !screenshot-1.png|thumbnail! \r\n\r\n\r\n\r\n\r\n\r\n\r\nBut, if we're using Mysql, utf-8 collation, it working just fine:\r\n\r\n !screenshot-2.png|thumbnail! \r\n\r\n\r\nh3. Workaround\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Crowd does not support diacritics when using MSSQL"
    }
  },
  {
    "key": "CWD-5352",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-05-23T12:21:23.000+0000",
      "created": "2019-01-30T14:47:39.000+0000",
      "description": "h3. Issue Summary\r\n\r\nsession.tokenkey value sometimes generated with quotes. This can impact the SSO experience by unexpectedly overwriting cookies\r\n\r\nh3. Environment\r\n * Crowd 3.3.3\r\n * Confluence any version\r\n\r\nh3. Steps to Reproduce\r\n # Connect Confluence and Crowd with SSO\r\n # Login to Confluence as Crowd users\r\n # Go to Browser Console, to check the session cookies generated\r\n\r\nh3. Expected Results\r\n\r\nSession.tokenkey (or crowd.token_key) value will not have quotes\r\nh3. Actual Results\r\n\r\nSession.tokenkey (or crowd.token_key) values will have quotes when an _equal_(=) sign exist in the token\r\n !tokenkey.png|thumbnail! \r\n (i) Looking into the HAR file, the token with quotes will have 1 pair of quotes being _escaped_ that look something like this:\r\n{code:java}\r\n              \"name\": \"crowd.token_key\",\r\n              \"value\": \"\\\"xxxxxxxxxxxxxxxxx=\\\"\",\r\n{code}\r\nh3. Notes\r\n * This issue not seen without SSO\r\n * This issue does not exists in Crowd version 3.2.5\r\n\r\nh3. Workaround\r\n * As the Token is being generated randomly, the affected user can try to *Log Out* and *re-Log In* again to get a new token generated.\r\n * (!) There are still chances that after re-logging the user still get another token with an _equal_(=) symbol in it and hitting into the same issue",
      "summary": "session.tokenkey value randomly generated with quotes causing login issues to applications"
    }
  },
  {
    "key": "CWD-5351",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-01-29T18:31:33.000+0000",
      "description": "Crowd, as the Atlassian's enterprise identity management application, could make use of additional password constraints. \r\n\r\nIt would be nice to have in Crowd a password similarity policy, just like we have in [Jira|https://confluence.atlassian.com/adminjiraserver/manage-password-security-938847028.html].",
      "summary": "Add password similarity check"
    }
  },
  {
    "key": "CWD-5350",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-01-17T16:46:17.000+0000",
      "description": "h3. Issue Summary\r\n\r\nIf you have delegated LDAP configured on an application with embedded Crowd such as Confluence, you have the option to create a user in the directory prior to authentication. However, if a user does not exist in the LDAP search filters for either user or group, it will still report in the logs there is an invalid password.\r\n\r\nh3. Environment\r\n\r\n- This was observed on Confluence 6.6.7 using embededed Crowd.\r\n\r\nh3. Steps to Reproduce\r\n\r\n # Create a user that will be picked up by user search criteria on a delegated LDAP user directory. For Confluence, this guide sets it up in the way we observed the bug: [Connecting to an Internal Directory with LDAP Authentication|https://confluence.atlassian.com/doc/connecting-to-an-internal-directory-with-ldap-authentication-229838462.html]. In our tests, \"Copy User on Login\" is set to *disabled*.\r\n# Set up the LDAP attributes for the user as needed\r\n# Implement a user search filter that will pick up that user's account\r\n# Implement a group search filter that will NOT pick up that user's account\r\n# Create the user account locally in Confluence and assign it to the delegated LDAP user directory. You can use any password when creating this account\r\n# In a new session, attempt to login as the user with the correct user name and their LDAP bind password\r\n\r\nh3. Expected Results\r\n\r\n- In the UI, it will return a failed login (invalid username/password)\r\n- In the application logs, it will note that the LDAP group membership lookup did not find the user, then return a failed authentication error\r\n\r\nh3. Actual Results\r\n\r\n- In the UI, it will return a failed login (invalid username/password combo)\r\n- In the application logs, it will return an 'invalid password' error:\r\n\r\n{code}\r\n2019-01-02 14:36:41,904 DEBUG [http-nio-8090-exec-5] [crowd.embedded.atlassianuser.EmbeddedCrowdAuthenticator] authenticate Authenticating user 'testuser' by password\r\n\r\n...\r\n\r\n2019-01-02 14:36:42,427 DEBUG [http-nio-8090-exec-5] [crowd.embedded.atlassianuser.EmbeddedCrowdAuthenticator] authenticate Authentication failed for username 'testuser' because the password was incorrect.\r\n2019-01-02 14:36:42,428 DEBUG [http-nio-8090-exec-5] [atlassian.seraph.auth.DefaultAuthenticator] login login : 'confluencetestuk' has not been authenticated\r\n2019-01-02 14:36:42,428 INFO [http-nio-8090-exec-5] [atlassian.seraph.auth.DefaultAuthenticator] login login : 'testuser' could not be authenticated with the given password\r\n2019-01-02 14:36:42,428 WARN [http-nio-8090-exec-5] [atlassian.seraph.auth.DefaultAuthenticator] login login : 'testuser' tried to login but they do not have USE permission or weren't found. Deleting remember me cookie.\r\n -- referer: https://<confluence-base-url>/confluence/dologin.action | url: /confluence/dologin.action | traceId: 716763ea83a9369f\r\n{code}\r\n\r\n- The true root cause of the above error message is when checking the LDAP for authentication privilege, the user was found in the user filter search, but did not appear in the group filter search. This is not mentioned in these logs.\r\n\r\nh3. Workaround\r\n\r\n- Currently there is no known workaround for this behavior. However, if you suspect authentication issues in a delegated LDAP setup, please check your user and group filters for the connector if you are getting \"invalid password\" errors in the logs when you know them to be correct on the LDAP side.",
      "summary": "\"Invalid password\" message in embedded Crowd for Delegated LDAP obscures root cause of issue"
    }
  },
  {
    "key": "CWD-5349",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-08-13T07:00:20.000+0000",
      "created": "2019-01-17T01:35:57.000+0000",
      "description": "h4. Problem Statement\r\n'Password will expire' notification is sent instead of the expired password with '- days' \r\n\r\nh4. Steps to reproduce\r\n# Go to Directories > Select the 'Directory' > *Configuration*\r\n# Set the details as below:\r\n !screenshot-3.png|thumbnail! \r\n# Go to a test user account >*Attributes\r\n# Set the 'passwordLastChanged' to 24th Dec 2018 as below:\r\n !screenshot-1.png|thumbnail! \r\n\r\nh4. Actual Outcome:\r\n'Password will expire' notification sent to the user eventhough the password has expired (with '-' days to expire):\r\n !screenshot-2.png|thumbnail! \r\n\r\nh4. Expected Outcome\r\nNotifications must not be sent out for expired passwords.",
      "summary": "Password expiry mail notifications are sent to users with expired passwords"
    }
  },
  {
    "key": "CWD-5348",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-01-14T08:22:02.000+0000",
      "created": "2019-01-14T08:02:52.000+0000",
      "description": "h3. Issue Summary\r\n\r\nWhen sending password expiry reminder emails Crowd does not take into account the \"active\" flag of the user and sends emails to inactive users as well\r\nh3. Steps to Reproduce\r\n # Configure password expiry email notifications\r\n # Ensure there's an inactive user within the notification period\r\n\r\nh3. Expected Results\r\n\r\nThe user shouldn't get an email because they're inactive. As inactive users cannot log in, reminding them that their password will expire does not make much sense.\r\nh3. Actual Results\r\n\r\nThe user is not notified.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Password expiry mail notifications are sent to inactive users"
    }
  },
  {
    "key": "CWD-5347",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-01-10T23:35:20.000+0000",
      "description": "h3. Problem Definition\r\nCurrently there is no way to manage Trello users in Crowd. \r\n\r\nh3. Suggested Solution\r\nCreate an integration to manage Trello user accounts in Crowd. \r\n\r\nh3. Why this is important\r\nOrganizations who use the full Atlassian stack and Trello with Crowd might need to manage all users in a single directory. Implementing a Crowd integration would allow administrators to manage users across all Atlassian applications. \r\n",
      "summary": "Create a Trello integration for Crowd"
    }
  },
  {
    "key": "CWD-5343",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-01-05T17:49:49.000+0000",
      "description": "Actually any groups which are available in crowd are synchronized with each connected application.\u00a0As a crowd system admin I would like to select the groups which have to be synchronized with a given application.\r\n\r\nI am using crowd 3.3.2 data center.\u00a0",
      "summary": "Synchronize group between crowd and  connected applications "
    }
  },
  {
    "key": "CWD-5341",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-03-22T13:21:20.000+0000",
      "created": "2019-01-04T11:18:46.000+0000",
      "description": "h3. Issue Summary\r\nGroup is not found when the group name contains & (ampersand).\r\n\r\n\r\nh3. Steps to Reproduce\r\n# Create a group name with {{testgroup3 & testgroup4}}\r\n# Sync the group to Crowd\r\n# Go to the {{Group}} page\r\n# Click the group\r\n# Click the {{Direct member}} tabe\r\n# You will notice that the group is changed from {{testgroup3 & testgroup4}} to {{testgroup3}}\r\n# Click to the {{Details}} tab and a error appear.\r\n [^Recording #48.mp4] \r\n\r\n\r\nh3. Expected Results\r\nNo error appears\r\n\r\nh3. Actual Results\r\nGroup no found error appear\r\n\r\nh3. Workaround\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Problem with & ampersand in group names"
    }
  },
  {
    "key": "CWD-5338",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-12-27T08:11:06.000+0000",
      "description": "We are using several Atlassian products (at least: Jira, Confluence, Bamboo, BitBucket, Crowd). All these products are hosted by ourselves.\r\n\r\nAs an Atlassian administrator / user I would like to see the current running version without authentication.\r\n\r\nFor Confluence and Jira I open the login page and parse:\r\n{quote}<meta name=\"ajs-version-number\" content=\"<version>\">\r\n{quote}\r\nbut Bamboo, Bitbucket and Crowd doesn't have this line at the login page (or at any page).\r\n\r\nCould the same line also be implemented for the rest of the products?",
      "summary": "Request running version without authentication"
    }
  },
  {
    "key": "CWD-5335",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-12-25T07:33:23.000+0000",
      "description": "The whole sync process fails, if one user entry is corrupt, e.g.\r\nif the field \"User name attribute required\" is empty for one user.\r\n\r\nExpected behaviour: a single corrupt entry should not stop the whole synchronization process. Instead, the corrupt entry should not be synchronized, an error should be logged (or via shown UI) and the sync should proceed.",
      "summary": "Directory Sync fails if a single user lacks username"
    }
  },
  {
    "key": "CWD-5334",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-01-09T13:50:16.000+0000",
      "created": "2018-12-24T09:36:03.000+0000",
      "description": "If any of the users eligible for getting a password expiry notification email have a null email, the password expiry notification sending will fail. Some emails might be sent, depending on the batch in which the users with null emails have appeared, however none of the users from the batch with null users onwards will receive any notifications.\r\n\r\nWhile technically users without emails are invalid data, they shouldn't cause users with correct emails to not receive email notifications about password expiry.",
      "summary": "Password expiry mail notification sending fails for users with null email"
    }
  },
  {
    "key": "CWD-5330",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2018-12-20T10:24:00.000+0000",
      "created": "2018-12-19T10:12:17.000+0000",
      "description": "Crowd does not log the cause of abnormal password expiry notification email batch job. While this does not apply to all possible ways of abnormal termination, there are numerous ways where the job would be terminated without leaving sufficient information to troubleshoot.",
      "summary": "Crowd does not correctly log abnormal terminations of password expiry mail sending"
    }
  },
  {
    "key": "CWD-5328",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-12-18T14:30:18.000+0000",
      "description": "The current c3p0 version lacks certain attributes that JMX monitoring tools (ie Prometheus-JMX) expect, making these not usable with Crowd.",
      "summary": "Upgrade c3p0 to 9.5.x"
    }
  },
  {
    "key": "CWD-5325",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-12-14T22:40:32.000+0000",
      "description": "h2. Summary\r\nCreating a user in a Delegated Authentication type of user directory currently requires the administrator to fill in several required fields, including password. However, since the user will be coming from an external LDAP server, the local password is actually never used. Crowd should not prompt the admin for this information.\r\n\r\nThis appears to be a regression (or related to) the following issues:\r\n* https://jira.atlassian.com/browse/CWD-2316 - Originally fixed in 2.2.2\r\n* https://jira.atlassian.com/browse/CWD-2977 - Originally fixed in 2.5.3\r\n* https://jira.atlassian.com/browse/CWD-3660 - Originally fixed in 2.7.2\r\n\r\nh2. Steps to reproduce\r\n# In Crowd, create a Directory of \"Delegated Authentication\" type\r\n# Create a user, and choose to place the user in the Delegated directory\r\n\r\nh2. Expected behavior\r\nFields to set the password are not shown\r\n\r\nh2. Actual behavior\r\nFields to set the password are shown and are marked as required",
      "summary": "Creating users locally in Delegated Auth directories should not require admin to supply a password"
    }
  },
  {
    "key": "CWD-5324",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-12-14T19:06:12.000+0000",
      "description": "h4. Problem Statement\r\nCurrently, syncing Crowd with remote Crowd server does not provide an option to filter out users.\r\n\r\nh4. Suggestion\r\nWe have encountered a use-case where the customer wants to filter out users while syncing a Crowd server with remote Crowd server. \r\nh5. Environment setup\r\n* One Crowd server (Crowd1) is syncing all the users from the Org directory\r\n* Another Crowd server (Crowd2) syncs users from (Crowd1)\r\n* The use-case is to filter out users while syncing Crowd2 with Crowd1\r\n\r\nh4. Workaround\r\nThere is no possible workaround as of now. \r\n\r\n\r\n\r\n\r\n",
      "summary": "Option to filter users while syncing Crowd to remote Crowd server"
    }
  },
  {
    "key": "CWD-5323",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-01-10T08:36:55.000+0000",
      "created": "2018-12-14T16:28:26.000+0000",
      "description": "In full sync mode, groups with duplicated names are dropped. However they're not dropped in incremental sync. This may cause the incremental sync to fail.\r\n\r\nSteps leading to an error:\r\n # Duplicated groups in AD are created.\r\n # Directory in Crowd is created.\r\n # Initially it'll do full sync, but the duplicated names won't be synced.\r\n # Incremental sync will see that the GUIDs of those duplicated groups are missing.\r\n # It'll ask for data since the last full sync. Duplicated groups were created before last sync, so they won't be returned.\r\n # Incremental sync will fail, because it doesn't see the missing GUIDs in the delta results.",
      "summary": "Duplicated group names break incremental sync"
    }
  },
  {
    "key": "CWD-5322",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-12-14T10:11:51.000+0000",
      "description": "Currently there is existing feature request CWD-677 to add multi factor authentication for Crowd. Please also add an option to integrate Crowd with platform MFA like  [Azure Multi-Factor Authentication|https://docs.microsoft.com/en-us/azure/active-directory/authentication/concept-mfa-howitworks]",
      "summary": "add support for Azure Multi-factor authentication "
    }
  },
  {
    "key": "CWD-5320",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-07-05T08:03:40.000+0000",
      "created": "2018-12-12T12:25:10.000+0000",
      "description": "When Crowd synchronises users for the very first time from Azure AD it will recognise \"active\" state of users correctly. Unfortunately, on next synchronisations Crowd ignores changes to these statuses, so once they are set, they will never change.",
      "summary": "Crowd silently ignores changes to active status of users in Azure AD."
    }
  },
  {
    "key": "CWD-5311",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-12-03T05:10:38.000+0000",
      "description": "h3.Steps to reproduce issue\r\n\r\n# Install Crowd 3.3.2\r\n# Add an entry in /etc/hosts that has an underscore character\r\n{code}\r\n127.0.0.1 my_ad_server\r\n{code}\r\n#* Assuming you have your AD server on 127.0.0.1 (or put the IP address of where AD server is located)\r\n# Add in a new User Directory in Crowd pointing to *my_ad_server*\r\n# This all adds okay (/)\r\n\r\n *What happened...* \r\n\r\n # When editing an existing LDAP User Directory in Crowd 3.3.2, the hostname entry is blank when the hostname contained an underscore (x)\r\n\r\n *What should have happened...*\r\n\r\n# The Hostname field should have displayed the Hostname of the LDAP Server even when it contains an underscore\r\n\r\n\r\n*Root cause*\r\n\r\nThe LDAP hostname is stored as ldap://<ldap_host>:<port_number> in the single *ldap.url* field in the *cwd_directory_attribute table*.\r\n\r\nIt appears this is parsed back out into the Front End User Directory screen / *Hostname* and *Port* fields.\r\n\r\nWhen the *ldap.url* contains an underscore in the LDAP hostname, it is not parsed into the front end resulting in a blank hostname field.\r\n\r\n*Work around*\r\n\r\nRe-enter the hostname of the AD server if you wish to make any changes in order to save the User Directory configuration changes.\r\n\r\n*System Impact*\r\n\r\nThis issue does not appear the synchronisation of the User Directory and only affects the displaying of the User Directory details screen.",
      "summary": "LDAP hostname containing an underscore is empty when editing existing User Directory details"
    }
  },
  {
    "key": "CWD-5310",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-11-30T15:45:55.000+0000",
      "description": "Currently, it's not possible to exclude the Crowd native app registration from Multi-Factor Authentication (MFA) in Azure AD. \r\n\r\nThe request is to enable Crowd interoperability with Azure AD Conditional Access policies.\r\n",
      "summary": "Enable Crowd interoperability with Azure AD Conditional Access policies (multi-factor authentication)"
    }
  },
  {
    "key": "CWD-5309",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-04-07T08:44:21.000+0000",
      "created": "2018-11-30T10:47:56.000+0000",
      "description": null,
      "summary": "Password expiration reminder is sent to disabled users"
    }
  },
  {
    "key": "CWD-5308",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-01-10T08:37:06.000+0000",
      "created": "2018-11-28T11:32:24.000+0000",
      "description": "If the local group is created and then the group with same name is created in LDAP then incremental synchronisation will be broken.\r\n\r\nThe reason:\r\n * Local group is never updated from remote LDAP. So the first incremental sync will ignore remote group.\r\n * Incremental sync asks for missing GUIDs, then asks for delta. All missing GUIDs have to appear in delta. Since the GUID was in the delta of the previous run, it won't appear in the current delta, and the sync will fail.\r\n * The process will fall back to full sync. Again the remote group will be fetched, but won't be updated locally.\r\n * The next incremental run will fail again.\r\n\r\n\u00a0\r\n\r\nStack trace below. Please note that log message \"Problems while looking up users\" is misleading - it's code copy-paste and it should say \"groups\" not \"users\".\r\n\r\ncom.atlassian.crowd.directory.ldap.cache.UsnChangedCacheRefresherIncSyncException: Problems while looking up users by objectGUID in ActiveDirectory detected, falling back to a full sync.com.atlassian.crowd.directory.ldap.cache.UsnChangedCacheRefresherIncSyncException: Problems while looking up users by objectGUID in ActiveDirectory detected, falling back to a full sync. at com.atlassian.crowd.directory.synchronisation.cache.UsnChangedCacheRefresher.lambda$synchroniseGroupChanges$4(UsnChangedCacheRefresher.java:451) at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193) at java.util.Iterator.forEachRemaining(Iterator.java:116) at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801) at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481) at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471) at java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708) at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499) at com.atlassian.crowd.directory.synchronisation.cache.UsnChangedCacheRefresher.synchroniseGroupChanges(UsnChangedCacheRefresher.java:458) at com.atlassian.crowd.directory.synchronisation.cache.UsnChangedCacheRefresher.synchroniseChanges(UsnChangedCacheRefresher.java:111) at com.atlassian.crowd.directory.DbCachingRemoteDirectory.synchroniseCache(DbCachingRemoteDirectory.java:1006) at com.atlassian.crowd.manager.directory.DirectorySynchroniserImpl.lambda$synchronise$0(DirectorySynchroniserImpl.java:80) at com.atlassian.crowd.audit.AuditLogContextInternalImpl.withAuditLogSource(AuditLogContextInternalImpl.java:52) at com.atlassian.crowd.manager.directory.DirectorySynchroniserImpl.synchronise(DirectorySynchroniserImpl.java:78) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:333) at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190) at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157) at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99) at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282) at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96) at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:213) at com.sun.proxy.$Proxy69.synchronise(Unknown Source) at com.atlassian.crowd.directory.DbCachingDirectoryPoller.pollChanges(DbCachingDirectoryPoller.java:45) at com.atlassian.crowd.manager.directory.monitor.poller.DirectoryPollerJobRunner.runJob(DirectoryPollerJobRunner.java:85) at com.atlassian.scheduler.core.JobLauncher.runJob(JobLauncher.java:153) at com.atlassian.scheduler.core.JobLauncher.launchAndBuildResponse(JobLauncher.java:118) at com.atlassian.scheduler.core.JobLauncher.launch(JobLauncher.java:97) at com.atlassian.scheduler.caesium.impl.CaesiumSchedulerService.launchJob(CaesiumSchedulerService.java:443) at com.atlassian.scheduler.caesium.impl.CaesiumSchedulerService.executeClusteredJob(CaesiumSchedulerService.java:438) at com.atlassian.scheduler.caesium.impl.CaesiumSchedulerService.executeClusteredJobWithRecoveryGuard(CaesiumSchedulerService.java:462) at com.atlassian.scheduler.caesium.impl.CaesiumSchedulerService.executeQueuedJob(CaesiumSchedulerService.java:390) at com.atlassian.scheduler.caesium.impl.CaesiumSchedulerService$1.consume(CaesiumSchedulerService.java:285) at com.atlassian.scheduler.caesium.impl.CaesiumSchedulerService$1.consume(CaesiumSchedulerService.java:282) at com.atlassian.scheduler.caesium.impl.SchedulerQueueWorker.executeJob(SchedulerQueueWorker.java:65) at com.atlassian.scheduler.caesium.impl.SchedulerQueueWorker.executeNextJob(SchedulerQueueWorker.java:59) at com.atlassian.scheduler.caesium.impl.SchedulerQueueWorker.run(SchedulerQueueWorker.java:34) at java.lang.Thread.run(Thread.java:748)",
      "summary": "Local group with same name breaks incremental sync"
    }
  },
  {
    "key": "CWD-5305",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-11-22T08:10:22.000+0000",
      "description": "h3. Description\r\nWhen the user has multiple directories in Crowd Application and disables the add group permission for the top directory in the Crowd Application, the group are still created in the top directory when admin add the user from top directory to a group from lower position directory.\r\n\r\n*Steps to reproduce*\r\n# Add 2 directory in Crowd.\r\n*Directory 1*\r\n_user 1\r\nuser 2\r\nbasegroup1_\r\ngroup2\r\n*Directory 2*\r\n_basegroup2\r\ngroup3_\r\n# Create a JIRA application in Crowd\r\n# In JIRA application (In Crowd), go to the _Permission_ tab\r\n!applicationdirectorypermission1.png|thumbnail!  \r\n!applicationdirectorypermission2.png|thumbnail! \r\n !crowddirectorypermission1.png|thumbnail!  \r\n!crowddirectorypermission2.png|thumbnail! \r\n# Disable the _Add Group_ permission and enable the _modify group_ permission for _Directory 1_ and _Directory 2_\r\n# Connect Crowd to JIRA and configure it as _read/write_ \r\n !jiradirectory.png|thumbnail! \r\n# Perform synchronization\r\n# In JIRA, try to add the _user2_ from _Directory 1_ to _group3_ from _Directory 2_\r\n# The user is successfully added to _group3_ in JIRA and a new group name _group3_ is created in the _Directory 1_\r\n(i) For details, please review the following video\r\n [^Recording #47.mp4] \r\n\r\nExpected behavior\r\nThe _group3_ is not created in _Directory 1_\r\n\r\nActual Behavior\r\n_group3_ is created in _Directory 1_",
      "summary": "Group are created in the directory eventhough the admin has disable the add group permission in the application directory permission page."
    }
  },
  {
    "key": "CWD-5304",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-11-21T18:26:00.000+0000",
      "description": "h3. Summary\r\nChanges to a node in a Crowd Data Center cluster can cause a duplicate entry to be seen in the clustering admin page *<crowd-base-url>crowd/plugins/servlet/cluster-monitoring*. This is particularly confusing because it appears as if 3 nodes were in the cluster when really there are only 2. (see screenshot)\r\n\r\nh3. Environment\r\n* Crowd\r\n* Data Center\r\n\r\nh3. Steps to Reproduce\r\n# Create node 1 in a Crowd Data center environment with DC License via these steps https://confluence.atlassian.com/crowd/installing-crowd-data-center-935369773.html\r\n# Configure and bring up node 2\r\n# Visit the cluster page and note that two nodes appear in the cluster: *{{<crowd-base-url>crowd/plugins/servlet/cluster-monitoring}}*\r\n# Visit the node 1 install directory *{{<crowd-install>/apache-tomcat/bin}}* and edit *{{setenv.sh}}* file \r\n# Note the following values *{{JAVA_OPTS=\"-Xms128m -Xmx512m}}*. Edit the file and change* -Xms128m* to *-Xms512m*\r\n# Save the file and restart Crowd on Node 1\r\n# When the node is online, visit the clustering page: *{{<crowd-base-url>crowd/plugins/servlet/cluster-monitoring}}*\r\n\r\nh3. Expected Results\r\nYou will see both nodes in the cluster\r\n\r\nh3. Actual Results\r\nA duplicate entry appears for Node 1 and it appears as if three nodes are in the cluster instead of two. \r\n\r\n h3.Workaround\r\nThe duplicate entry will eventually disappear from the clustering page.\r\n\r\nh3. Notes\r\nThe screenshots are a before and after snapshot of the cluster page",
      "summary": "Changes to  node configuration can temporarily cause a duplicate node entry on the clustering page"
    }
  },
  {
    "key": "CWD-5301",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-09-17T08:53:31.000+0000",
      "created": "2018-11-19T14:58:28.000+0000",
      "description": "When calling com.atlassian.crowd.directory.RFC4519Directory#findDirectMembersOfGroup with an unresolvable DN an empty list will be returned. However when this is called on a MicrosoftActiveDirectory instance and primary group support is enabled, this will throw javax.naming.NameNotFoundException. While the superclass' method checks for the group being missing, the subclass assumes it exists.",
      "summary": "Inconsistent behavior of findDirectMembersOfGroup depending on primary group setting"
    }
  },
  {
    "key": "CWD-5298",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-02-12T13:13:16.000+0000",
      "created": "2018-11-16T18:12:21.000+0000",
      "description": "h3. Summary\r\n\r\nUsers, when created in remote crowd and automatic assigned group on first login configured, can be locked out of applications if the auto assign group contains the application level permissions to login under certain circumstances.\r\n\r\nh3. Environment\r\nReproduced with\r\n* Crowd 3.1.2\r\n* Fisheye/Crucible 4.6.0\r\n* Bitbucket Server 5.15.0 \r\n\r\nh3. Steps to Reproduce\r\n # Configure External application (Fisheye/Crucible and Bitbucket were tested) have a group that grants global access. (Fisheye-user, or Bitbucket-user)\r\n # Connect Crowd as remote user directory with the action of \"Automatically assigned groups\" set to add the group mentioned above respectively\r\n # Add a user under the respective applications\r\n # Synchronize the External application with crowd\r\n ** Confirm user is present in user listing in the external application\r\n # Attempt to login with user on external application\r\n\r\nh3. Expected Results\r\nUser authenticates to external application, inheriting the necessary group and the ability to login\r\n\r\nh3. Actual Results\r\nResults in \"Password incorrect or unknown user\" error continuously\r\nThe group in question is applied to the user but the user's ability to actually login is not present as expected.  \r\n!User with group but not access..png|thumbnail! \r\n\r\n*Note*\r\nThe group \"fisheye-users\" existed and had global permissions set before the sync.\r\n\r\nh3.Workaround\r\nTriggering a Full (not incremental) Sync to Crowd will correct the user attributes, updating the \"no-access\" to \"Fisheye User\" or \"Bitbucket User\" respectively. (This can be done by disabling/re-enabling the Crowd directory within the external application).\r\nA restart of the external application (triggers a full sync on startup)\r\n\r\nh5. Prevent the issue\r\nDuring replication steps, if step 4 is skipped, the issue will not appear as the user will not be present and first time login will work.",
      "summary": "User unable to inherit automatically assigned group/permissions under specific scenario"
    }
  },
  {
    "key": "CWD-5296",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-01-23T10:28:15.000+0000",
      "created": "2018-11-14T16:44:30.000+0000",
      "description": "The following page is not being properly loaded: https://confluence.atlassian.com/crowd/configuring-an-ssl-certificate-for-microsoft-active-directory-63504388.html\r\n\r\n{quote}\r\nOn this page:\r\n\r\nError rendering macro 'includeplus' : The connection between CROWD and USERMAN does not exist anymore.\r\n{quote}\r\n\r\nh3. Workaround\r\nUse the 3.2 version of the document: https://confluence.atlassian.com/crowd032/administration-guide/managing-directories/adding-a-directory/configuring-an-ldap-directory-connector/configuring-an-ssl-certificate-for-microsoft-active-directory",
      "summary": "Broken document (missing macro 'includeplus')"
    }
  },
  {
    "key": "CWD-5295",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-02-12T13:13:38.000+0000",
      "created": "2018-11-14T09:40:22.000+0000",
      "description": "My question refers HipChat DataCenter\r\n\r\n\u00a0\r\n\r\nWe use HipChat DataCenter Server\r\n\r\nCompany policy requires we cannot keep any message outside\r\n\r\nWe must have our own server\r\n\r\n\u00a0\r\n\r\nNow It is the question\r\n\r\n\u00a0\r\n\r\nHow to migrate HipChat into Slack server\r\n\r\nIs it possible\r\n\r\nIf not what is the alternative ?\u00a0\u00a0",
      "summary": "migrate hipchat server into slack"
    }
  },
  {
    "key": "CWD-5292",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-11-09T23:12:31.000+0000",
      "description": "h3. Summary\r\n\r\nThere is no current method to perform a Zero Downtime upgrade for Crowd as there is for Jira (ex: [Managing zero downtime upgrades|https://confluence.atlassian.com/adminjiraserver073/managing-zero-downtime-upgrades-861253112.html]). This is particularly important for Crowd instances that have several Atlassian products connected to Crowd, leaving the applications vulnerable to downtime while the upgrade process is running.\r\n\r\n\r\nh3. Workaround\r\n\r\nIf a customer would like to proceed with the upgrade without having to shut down the application, they will have to restore an XML backup to the new version of Crowd, ensure the new instance is working correctly, and then point all the apps to the new version. This would be a similar process to [Migrating Crowd Between Servers|https://confluence.atlassian.com/crowd/migrating-crowd-between-servers-283642636.html].",
      "summary": "Zero downtime upgrades for Crowd"
    }
  },
  {
    "key": "CWD-5287",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-10-31T12:14:52.000+0000",
      "description": "During the XML backup process, Crowd does not export any information about users from connector directories. If the connector directories manage their user status locally (either Microsoft Active Directory with local user status enabled or any other LDAP directory), this information will not be saved in the backup. As a consequence, all local user status modifications will not be stored in the backup\r\n\r\n*Step to reproduce:*\r\n# create a new connector directory\r\n# Tick the \"Manage status locally\" Option if Active Directory was chosen\r\n# Disable any of the users after the full sync \r\n# Create a xml backup\r\n# Upgrade or install Crowd with the XML backup\r\n\r\n*Expected behavior*\r\nAll the disabled locally user should be disabled in the new Crowd\r\n\r\n*Actual behavior*:\r\nThe disabled user is still active. \r\n\r\n*Additional notes*:\r\nCustomers may hit their license user limit after migrating Crowd due to this bug.",
      "summary": "XML backup does not include user status for connector directories with local user status management"
    }
  },
  {
    "key": "CWD-5285",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-10-26T15:08:25.000+0000",
      "description": "h2. Problem Statement\r\nIncremental sync will never work with any other attribute apart from {{ObjectGUID}} for *User Unique Identifier Attribute* parameter in the configuration. It attempts full sync every single time.\r\n\r\nh2. Steps to Reproduce\r\n# Provision a Microsoft Active Directory server.\r\n# Create a {{CONNECTOR}} directory.\r\n# Fill in the necessary value in the configuration for connection to the AD server.\r\n# Make sure to enable both _Enable incremental sync_ and _Cache enabled_ options.\r\n# Under the _Configuration_ tab, set {{User unique identifier attribute}} to other attribute apart from {{ObjectGUID}} e.g. {{sAMAccountName}}.\r\n# Save the configuration and hit the {{Synchronise Now}} button.\r\n# Observe the result.\r\n\r\nh2. Expected Behavior\r\nIncremental sync kicks in and completes successfully.\r\n\r\nh2. Actual Behavior\r\nIncremental sync kept failing with either of the following errors. However, full sync works fine.\r\nh5. Failed to fetch user\r\n{code}\r\n2018-10-26 10:09:49,025 Caesium-2-2 WARN [directory.synchronisation.cache.UsnChangedCacheRefresher] Failed to fetch user by objectGUID 'crowd-users' from ActiveDirectory\r\n2018-10-26 10:09:49,025 Caesium-2-2 ERROR [atlassian.crowd.directory.DbCachingRemoteDirectory] Incremental synchronisation for directory [ 1769473 ] was unexpectedly interrupted, falling back to a full synchronisation\r\ncom.atlassian.crowd.directory.ldap.cache.UsnChangedCacheRefresherIncSyncException: Problems while looking up users by objectGUID in ActiveDirectory detected, falling back to a full sync.\r\n{code}\r\nh5. GUID should be of length 32\r\n{code}\r\n2018-10-25 09:23:14,340 Caesium-2-1 ERROR [atlassian.crowd.directory.DbCachingRemoteDirectory] Incremental synchronisation for directory [ 49577985 ] was unexpectedly interrupted, falling back to a full synchronisation\r\njava.lang.IllegalArgumentException: guid should be of length 32 (as encoded by getGUIDAsString)\r\n{code}",
      "summary": "Incremental Sync Does Not Work with Non Default User Unique Identifier Attribute ObjectGUID"
    }
  },
  {
    "key": "CWD-5284",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-01-23T10:35:55.000+0000",
      "created": "2018-10-26T09:53:45.000+0000",
      "description": "Hello Atlassian Team,\r\n\r\nwe are tracking down performance issues on our Crowd instance at the moment. Can you please check optimization on this cross join statement that is regularly reported as expensive query?\r\n\r\n\u00a0\r\nselect +internalgr0_.id+ as id1_22_, internalgr0_.group_name as group_na2_22_, internalgr0_.lower_group_name as lower_gr3_22_, internalgr0_.active as active4_22_, internalgr0_.is_local as is_local5_22_, internalgr0_.created_date as created_6_22_, internalgr0_.updated_date as updated_7_22_, internalgr0_.description as descript8_22_, internalgr0_.group_type as group_ty9_22_, internalgr0_.directory_id as directo10_22_, internalgr0_.external_id as externa11_22_ from cwd_group internalgr0_ {color:#b91a3e}cross join{color} cwd_membership internalme1_ where internalgr0_.id=internalme1_.child_id and internalme1_.lower_parent_name= @P0\u00a0\u00a0and internalme1_.membership_type= @P1\u00a0\u00a0and internalme1_.directory_id= @P2\u00a0\u00a0and internalme1_.group_type= @P3\u00a0\u00a0order by internalgr0_.lower_group_name 74 42 crowd 44 0 0 +5154+ 0 +1088+ 0 +1024+\r\n\u00a0\r\n{color:#172b4d}Please check as well the following crowd index recommendations and advise.{color}\r\n\u00a0\r\nSELECT\u00a0 TOP 8\r\n\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[Total cost]\u00a0 = ROUND(avg_total_user_cost * avg_user_impact * (user_seeks + user_scans),0)\r\n\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0, avg_user_impact -- Query costs would be reduced on average by this value.\r\n\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 , Tabelle = statement\r\n\r\n\u00a0\u00a0\u00a0\u00a0\u00a0 \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0, [Equality Cloumns] = equality_columns\r\n\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0, [Inequality Cloumns] = inequality_columns\r\n\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 , [Include Cloumns] = included_columns\r\n\r\nFROM\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 sys.dm_db_missing_index_groups g\r\n\r\nINNER JOIN\u00a0 sys.dm_db_missing_index_group_stats s ON s.group_handle = g.index_group_handle\r\n\r\nINNER JOIN\u00a0 sys.dm_db_missing_index_details d ON d.index_handle = g.index_handle\r\n\r\nORDER BY [Total cost] DESC;\r\n\r\n\u00a0\r\n|Total cost|avg_user_impact|Tabelle|Equality Cloumns|Inequality Cloumns|Include Cloumns|\r\n|105924509|96,06|[crowd].[dbo].[cwd_membership]|[directory_id]|NULL|[child_id], [membership_type], [group_type], [lower_parent_name]|\r\n|71847352|83,42|[crowd].[dbo].[cwd_membership]|[directory_id]|NULL|[id], [parent_id], [child_id], [membership_type], [group_type], [parent_name], [lower_parent_name], [child_name], [lower_child_name], [created_date]|\r\n|21626875|89,27|[crowd].[dbo].[cwd_membership]|[directory_id]|NULL|[membership_type], [group_type], [lower_parent_name], [child_name], [lower_child_name]|\r\n|6215180|86,31|[crowd].[dbo].[cwd_membership]|[directory_id]|NULL|[membership_type], [group_type], [parent_name], [lower_parent_name], [lower_child_name]|\r\n|1156826|55,29|[crowd].[dbo].[cwd_user]|[directory_id]|NULL|[id], [user_name], [lower_user_name], [active], [created_date], [updated_date], [first_name], [lower_first_name], [last_name], [lower_last_name], [display_name], [lower_display_name], [email_address], [lower_email_address], [credential], [external_id]|\r\n|219631|51,56|[jira].[dbo].[propertyentry]|[ENTITY_NAME], [ENTITY_ID]|NULL|NULL|\u00a0|\r\n|194008|95,95|[jira].[dbo].[customfield]|[cfname]|NULL|NULL|\u00a0|\r\n|174272|84,43|[crowd].[dbo].[cwd_group]|[directory_id]|NULL|[id], [group_name], [lower_group_name], [active], [is_local], [created_date], [updated_date], [description], [group_type], [external_id]|\r\n\r\n\u00a0\r\n\r\nKind rgds,\r\n\r\nJan",
      "summary": "Performance optimization"
    }
  },
  {
    "key": "CWD-5283",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-10-25T09:22:31.000+0000",
      "description": "Currently, when using CrowdID with Crowd Data Center you will need to make sure that only one node is running CrowdID. However, this doesn't provide High Availability (HA) in case the node is unavailable. \r\n\r\n",
      "summary": "Support CrowdID Cluster/Data Center"
    }
  },
  {
    "key": "CWD-5282",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2018-10-17T13:29:28.000+0000",
      "created": "2018-10-12T20:57:42.000+0000",
      "description": "AUI 7 is no doubt the best update to AUI because it looks so much more modern than the current version used in Crowd. In order to align it with other products, AUI should be upgraded. Related tweet: [https://twitter.com/dylanfps/status/1032539276670652416?s=21]\u00a0",
      "summary": "Upgrade to AUI 7 (ADG3)"
    }
  },
  {
    "key": "CWD-5281",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-10-12T08:28:35.000+0000",
      "description": null,
      "summary": "New supported platform"
    }
  },
  {
    "key": "CWD-5278",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2018-10-17T14:23:36.000+0000",
      "created": "2018-10-11T18:40:11.000+0000",
      "description": "h2. Steps to reproduce\r\n\r\n# Install any supported version of Crowd on Microsoft SQL Server;\r\n# Attempt to upgrade to Crowd 3.3.0 using any available method (XML import or database);\r\n\r\nh5. Expected results\r\n\r\nUpgrade completes successfully.\r\n\r\nh5. Actual results\r\n\r\nThe liquibase library queries the SYS.INDEXES object with uppercase, though it defaults to sys.indexes in lowecase in MSSQL.\r\n\r\nTherefore, the upgrade fails and the following error appears in the application logs:\r\n\r\n{code}\r\n2018-10-03 10:01:33,066 localhost-startStop-1 ERROR [crowd.console.listener.StartupListener] Failed to initialise Crowd container\r\njava.lang.RuntimeException: liquibase.exception.MigrationFailedException: Migration failed for change set liquibase/bootstrap/06_cwd_user.xml::EMBCWD-300: drop idx_user_lower_display_name before mutating constraints::crowd:\r\n     Reason: \r\n          liquibase/master.xml : Index Exists Precondition: idx_user_lower_display_name on cwd_user : Invalid object name 'SYS.INDEXES'.\r\n\r\n...\r\n\r\nCaused by: java.sql.SQLException: Invalid object name 'SYS.INDEXES'.\r\n    at net.sourceforge.jtds.jdbc.SQLDiagnostic.addDiagnostic(SQLDiagnostic.java:372)\r\n    at net.sourceforge.jtds.jdbc.TdsCore.tdsErrorToken(TdsCore.java:2988)\r\n    at net.sourceforge.jtds.jdbc.TdsCore.nextToken(TdsCore.java:2421)\r\n    at net.sourceforge.jtds.jdbc.TdsCore.getMoreResults(TdsCore.java:671)\r\n    at net.sourceforge.jtds.jdbc.JtdsStatement.executeSQLQuery(JtdsStatement.java:505)\r\n    at net.sourceforge.jtds.jdbc.JtdsStatement.executeQuery(JtdsStatement.java:1427)\r\n{code}\r\n\r\n*Workaround*\r\n\r\nRename the affected objects to match the uppercase query.\r\n\r\nOr upgrade to 3.2.5 instead.",
      "summary": "Upgrade to Crowd 3.3.0 on MS SQL Server fails due to liquibase exception"
    }
  },
  {
    "key": "CWD-5277",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-10-11T15:23:27.000+0000",
      "description": "Since Crowd 2.12, Crowd has an Audit log: https://jira.atlassian.com/browse/CWD-538\r\n\r\nh3. Current behavior\r\nIt seems like user deletion and user creation are not displayed consistently in the audit logs:\r\n# User Creation will be displayed as \"Username (Display Name)\"\r\n# User Deletion will be displayed as \"Username\"\r\n !capture0.png|thumbnail! \r\n# However, it seems like only the *latest* user creation will be displayed as \"Username (Display Name)\", as the previous user creation will be displayed as \"Username\"\r\n !Capture1.PNG|thumbnail!  \r\n!Capture2.PNG|thumbnail! \r\n\r\nh3. Expected behavior\r\nHaving a consistent display throughout the Audit log, as it could be quite misleading, and mistaken for completely different user set.",
      "summary": "Consistent Audit Log display on User Creation/Deletion"
    }
  },
  {
    "key": "CWD-5275",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-10-10T12:04:46.000+0000",
      "description": "h3. Summary\r\n# In the documentation, https://confluence.atlassian.com/crowd/adding-a-group-20807693.html, it mentions this flag correspond to access \r\n{quote}\r\nOnly deselect this if you wish to deny access to all members of the group.\r\n{quote} \r\n# However in this bug report: https://jira.atlassian.com/browse/CWD-4571, it explains otherwise:\r\n{quote}\r\nThe active/inactive flag of a group does not have any special semantics in Crowd (see CWD-2033). In particular, it does not have any effect on the ability of the group members to authenticate.   \r\n{quote}\r\n# We checked that this *flag will be propagated into applications* but up to the application to use it for something (other than authentication purpose)'\r\n\r\nh3. Please help with\r\nClarify what the flag is expected for in the documentation https://confluence.atlassian.com/crowd/adding-a-group-20807693.html",
      "summary": "Update documentation about \"Active\" groups"
    }
  },
  {
    "key": "CWD-5274",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-10-09T21:52:20.000+0000",
      "description": "It is possible to have a Crowd Data Center cluster where nodes have different Crowd versions. For instance, you can have a two node cluster where one node is running Crowd 3.1.1, and the other is running Crowd 3.1.2. Our documentation states that the nodes must have the same version, but we should also have startup checks that make sure the nodes are on the same version.",
      "summary": "Crowd Data Center should not allow nodes to have different Crowd versions"
    }
  },
  {
    "key": "CWD-5271",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2018-10-12T09:05:40.000+0000",
      "created": "2018-10-04T14:59:11.000+0000",
      "description": "When we use delegated authentication and when the user is deleted in remote directory, copy of the user in Crowd will be disabled.\r\n\r\nIt would be beneficial to have and option in connector in this case to either anonimize data for this user, or delete user.\r\n\r\nThis feature is mostly required because of the the GDPR requirements.",
      "summary": "An option for handling deleted users from delegated directory in Crowd DB."
    }
  },
  {
    "key": "CWD-5270",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2018-10-17T12:45:34.000+0000",
      "created": "2018-09-28T10:12:56.000+0000",
      "description": "h2. Summary\r\n\r\nWhen upgrading to Crowd 3.3, *ORA-02429* errors will be thrown when indexes cannot be removed.\r\n\r\nh2. Steps to Reproduce\r\n\r\n# Install Crowd 3.2, using an Oracle DB\r\n# Attempt to Upgrade to Crowd 3.3 using the [Automatic Database Upgrade|https://confluence.atlassian.com/crowd/upgrading-crowd-via-automatic-database-upgrade-213519474.html] process\r\n\r\nh2. Expected Outcome\r\n\r\nCrowd will upgrade to 3.3\r\n\r\nh2. Observed Outcome\r\n\r\nAn error will be thrown when an index cannot be dropped:\r\n{code}\r\nCaused by: Error : 2429, Position : 21, Sql = DROP INDEX CROWDUSER.idx_expirable_user_token_key, OriginalSql = DROP INDEX CROWDUSER.idx_expirable_user_token_key, Error Msg = ORA-02429: cannot drop index used for enforcement of unique/primary key\r\n\tat oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:498)\r\n{code}\r\n\r\nh2. Workaround\r\n\r\n# Shut down Crowd\r\n# There are 2 indexes that will throw an error during the upgrade, so we'll manually remove them:\r\n{code}\r\nALTER TABLE CWD_EXPIRABLE_USER_TOKEN DROP CONSTRAINT UK_EXPIRABLE_USER_TOKEN;\r\nALTER TABLE CWD_WEBHOOK DROP CONSTRAINT UK_WEBHOOK_URL_APP;\r\n{code}\r\n# Commit the change (if needed)\r\n# Start the new Crowd, and the upgrade should now complete",
      "summary": "Crowd Upgrade Fails Due to ORA-02429 Error"
    }
  },
  {
    "key": "CWD-5267",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2018-10-04T08:42:14.000+0000",
      "created": "2018-09-26T00:36:16.000+0000",
      "description": "Adding a option when using Crowd that only users and groups from a directory are show in the connected applications management interface that can authenticate. Any extraneous groups that are not authenticated would not show in the connected application leaving a cleaner interface without extra information from a unified directory.\r\n\r\n\u00a0\r\n\r\nCurrent behavior example: The Crowd connector to Confluence specifies under Directories and Group \"Who Can Authenticate\" only groups with the name Confluence in them. Confluence administrators looking at the member management in the Confluence administration can see Jira groups even though those groups are not allowed for authentication on the Crowd Confluence connector. Members of all groups show up in the user list with their respective group memberships. The application administrators have many extraneous users and groups they will not be using.\r\n\r\n\u00a0\r\n\r\nDesired behavior example: The administrator selects an additional option in the Crowd connector to only synchronize groups who can authenticate. The Confluence administration panel would show the groups who can authenticate and only users who are members (or nested members) of these groups.",
      "summary": "Option to Sync Only Authenticated Groups and Users To Applications"
    }
  },
  {
    "key": "CWD-5266",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-09-25T20:16:23.000+0000",
      "description": "start_crowd.sh is fine, but stop_crowd.sh always throw a error. see below:\r\n\r\n[root@ip-172-31-9-121 atlassian-crowd-3.2.3]# ./start_crowd.sh[root@ip-172-31-9-121 atlassian-crowd-3.2.3]# ./start_crowd.shTo run Crowd in the foreground, start the server with ./start_crowd.sh -fgUsing CATALINA_BASE: \u00a0 /opt/atlassian/atlassian-crowd-3.2.3/apache-tomcatUsing CATALINA_HOME: \u00a0 /opt/atlassian/atlassian-crowd-3.2.3/apache-tomcatUsing CATALINA_TMPDIR: /opt/atlassian/atlassian-crowd-3.2.3/apache-tomcat/tempUsing JRE_HOME: \u00a0 \u00a0 \u00a0 \u00a0/usr/java/jdk1.8.0_121/Using CLASSPATH: \u00a0 \u00a0 \u00a0 /opt/atlassian/atlassian-crowd-3.2.3/apache-tomcat/bin/bootstrap.jar:/opt/atlassian/atlassian-crowd-3.2.3/apache-tomcat/bin/tomcat-juli.jarUsing CATALINA_PID: \u00a0 \u00a0/opt/atlassian/atlassian-crowd-3.2.3/apache-tomcat/work/catalina.pidTomcat started.[root@ip-172-31-9-121 atlassian-crowd-3.2.3]# ./stop_crowd.shUsing CATALINA_BASE: \u00a0 /opt/atlassian/atlassian-crowd-3.2.3/apache-tomcatUsing CATALINA_HOME: \u00a0 /opt/atlassian/atlassian-crowd-3.2.3/apache-tomcatUsing CATALINA_TMPDIR: /opt/atlassian/atlassian-crowd-3.2.3/apache-tomcat/tempUsing JRE_HOME: \u00a0 \u00a0 \u00a0 \u00a0/usr/java/jdk1.8.0_121/Using CLASSPATH: \u00a0 \u00a0 \u00a0 /opt/atlassian/atlassian-crowd-3.2.3/apache-tomcat/bin/bootstrap.jar:/opt/atlassian/atlassian-crowd-3.2.3/apache-tomcat/bin/tomcat-juli.jarUsing CATALINA_PID: \u00a0 \u00a0/opt/atlassian/atlassian-crowd-3.2.3/apache-tomcat/work/catalina.pidSep 25, 2018 8:14:00 PM org.apache.catalina.startup.Catalina stopServerSEVERE: Could not contact [localhost:[8020]]. Tomcat may not be running.Sep 25, 2018 8:14:00 PM org.apache.catalina.startup.Catalina stopServerSEVERE: Catalina.stop:java.net.ConnectException: Connection refused (Connection refused) at java.net.PlainSocketImpl.socketConnect(Native Method) at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) at java.net.Socket.connect(Socket.java:589) at java.net.Socket.connect(Socket.java:538) at java.net.Socket.<init>(Socket.java:434) at java.net.Socket.<init>(Socket.java:211) at org.apache.catalina.startup.Catalina.stopServer(Catalina.java:477) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.apache.catalina.startup.Bootstrap.stopServer(Bootstrap.java:408) at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:497)\r\nThe stop command failed. Attempting to signal the process to stop through OS signal.Tomcat stopped.",
      "summary": "stop_crowd.sh throws java.net.Connection error"
    }
  },
  {
    "key": "CWD-5265",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-09-25T15:23:33.000+0000",
      "description": "A method to determine of a user-group association exists could greatly help third-party authenticators making use of Crowd.\u00a0 Querying groups associated with a user is expensive if the user is a member of too many groups, and querying users in a group is expensive, if a group has too many users.\u00a0 If the user and group is known, it is better to check if the user group association exists and have a boolean response.",
      "summary": "REST API function to determine if user is a member of a group"
    }
  },
  {
    "key": "CWD-5261",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-09-21T19:45:21.000+0000",
      "description": "Currently, we offer Data Center apps on Azure for the following products\r\n * [Jira Software|https://azuremarketplace.microsoft.com/en-us/marketplace/apps/atlassian.jira-data-center]\r\n * [Confluence|https://azuremarketplace.microsoft.com/en-us/marketplace/apps/atlassian.confluence-data-center?tab=Overview]\r\n\r\nIt would be awesome to have the deployment app for Crowd Data Center to further integrate the Atlassian suite.",
      "summary": "Create Crowd Data Center deployment app in Azure marketplace"
    }
  },
  {
    "key": "CWD-5260",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-09-21T13:44:03.000+0000",
      "description": "h3. Step to reproduce the issue \r\n# Set up a delegated User directory Crowd or Confluence that connected to MSSQL server as the database.\r\n# Try to login/ logout with the same user a couple times. \r\n\r\nh3. Expected behavior\r\nAfter the first login, since we're using the same user, we should not need to update the row in the cwd_user table. \r\n\r\nh3. Actual Behaviour \r\nThe following example query is being fired on every login although all user info remain the same:\r\n{code}\r\nupdate cwd_user SET user_name=?, lower_user_name=?, active=T, created_date=?, updated_date=?, first_name=?, lower_first_name=?, last_name=?, lower_last_name=?, display_name=?, lower_display_name=?, email_address=?, lower_email_address=?, external_id=?, directory_id=?, credential='nopass' WHERE id=?;\r\n{code}\r\nwhich triggers the clustered index update on the MSSQL server as it is considered as an row update.\r\n !explain.png|thumbnail! \r\nThis is causing a resource spike on the database when there is a lot of user login at the same time.",
      "summary": "Delegated user authentication cause high load on MSSQL server"
    }
  },
  {
    "key": "CWD-5259",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2018-10-04T08:58:26.000+0000",
      "created": "2018-09-20T08:39:20.000+0000",
      "description": "Create netBanking Integration",
      "summary": "Create NetBanking Integration"
    }
  },
  {
    "key": "CWD-5258",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-02-17T22:32:15.000+0000",
      "created": "2018-09-18T19:11:33.000+0000",
      "description": "Currently, the only Docker images available for Crowd are unsupported. We would like to request that Docker images are provided by Atlassian in a supportable format. ",
      "summary": "Support Docker for Crowd"
    }
  },
  {
    "key": "CWD-5256",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2018-10-17T12:44:05.000+0000",
      "created": "2018-09-14T09:14:44.000+0000",
      "description": "Currently incremental sync on Active Directory will fail when local groups are enabled, this is a new bug introduced in Crowd 3.2\r\n\r\nSteps to Reproduce:\r\n # Have an Active Directory with incremental sync enabled\r\n # Enable Local groups\r\n # Add at least one local group\r\n\r\nFull synchronization will complete successfully, but incremental syncs will fail with the following exception in the logs\r\n{code:java}\r\ncom.atlassian.crowd.directory.ldap.cache.UsnChangedCacheRefresherIncSyncException: Cache returned different number of guids and groups (possible reason is overlapping guids in cache, most likely null/empty values).\r\n        at com.atlassian.crowd.directory.synchronisation.cache.UsnChangedCacheRefresher.validateAndReturnGroupGuidsToAddAndDelete(UsnChangedCacheRefresher.java:380)\r\n        at com.atlassian.crowd.directory.synchronisation.cache.UsnChangedCacheRefresher.synchroniseGroupChanges(UsnChangedCacheRefresher.java:406)\r\n        at com.atlassian.crowd.directory.synchronisation.cache.UsnChangedCacheRefresher.synchroniseChanges(UsnChangedCacheRefresher.java:111)\r\n        at com.atlassian.crowd.directory.DbCachingRemoteDirectory.synchroniseCache(DbCachingRemoteDirectory.java:1006)\r\n        at com.atlassian.crowd.manager.directory.DirectorySynchroniserImpl.lambda$synchronise$0(DirectorySynchroniserImpl.java:80)\r\n        at com.atlassian.crowd.audit.AuditLogContextInternalImpl.withAuditLogSource(AuditLogContextInternalImpl.java:52)\r\n        at com.atlassian.crowd.manager.directory.DirectorySynchroniserImpl.synchronise(DirectorySynchroniserImpl.java:78)\r\n        at sun.reflect.GeneratedMethodAccessor1383.invoke(Unknown Source)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:333)\r\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)\r\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\r\n        at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)\r\n        at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)\r\n        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)\r\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:213)\r\n        at com.sun.proxy.$Proxy68.synchronise(Unknown Source)\r\n        at com.atlassian.crowd.directory.DbCachingDirectoryPoller.pollChanges(DbCachingDirectoryPoller.java:45)\r\n        at com.atlassian.crowd.manager.directory.monitor.poller.DirectoryPollerJobRunner.runJob(DirectoryPollerJobRunner.java:85)\r\n        at com.atlassian.scheduler.core.JobLauncher.runJob(JobLauncher.java:153)\r\n        at com.atlassian.scheduler.core.JobLauncher.launchAndBuildResponse(JobLauncher.java:118)\r\n        at com.atlassian.scheduler.core.JobLauncher.launch(JobLauncher.java:97)\r\n        at com.atlassian.scheduler.caesium.impl.CaesiumSchedulerService.launchJob(CaesiumSchedulerService.java:443)\r\n        at com.atlassian.scheduler.caesium.impl.CaesiumSchedulerService.executeClusteredJob(CaesiumSchedulerService.java:438)\r\n        at com.atlassian.scheduler.caesium.impl.CaesiumSchedulerService.executeClusteredJobWithRecoveryGuard(CaesiumSchedulerService.java:462)\r\n        at com.atlassian.scheduler.caesium.impl.CaesiumSchedulerService.executeQueuedJob(CaesiumSchedulerService.java:390)\r\n        at com.atlassian.scheduler.caesium.impl.CaesiumSchedulerService$1.consume(CaesiumSchedulerService.java:285)\r\n        at com.atlassian.scheduler.caesium.impl.CaesiumSchedulerService$1.consume(CaesiumSchedulerService.java:282)\r\n        at com.atlassian.scheduler.caesium.impl.SchedulerQueueWorker.executeJob(SchedulerQueueWorker.java:65)\r\n        at com.atlassian.scheduler.caesium.impl.SchedulerQueueWorker.executeNextJob(SchedulerQueueWorker.java:59)\r\n        at com.atlassian.scheduler.caesium.impl.SchedulerQueueWorker.run(SchedulerQueueWorker.java:34)\r\n        at java.lang.Thread.run(Thread.java:748)\r\n{code}",
      "summary": "Incremental Sync in Active Directory fails when local groups are enabled"
    }
  },
  {
    "key": "CWD-5255",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2018-10-04T09:06:20.000+0000",
      "created": "2018-09-13T09:26:38.000+0000",
      "description": "h2. Summary\r\n\r\nIf 'Synchronize user details' is disabled on a delegated directory, and a user is renamed in that remote directory, then Crowd will create a duplicate user, despite the external ID being the same.\r\n\r\nh2. Steps to Replicate\r\n\r\n# Set up a delegated directory in Crowd\r\n# Uncheck 'Synchronize user details'\r\n# Set a 'User unique identifier attribute' in Crowd to be a unique field other than the user ID\r\n# Create a user on the remote directory, i.e. {{test_user}}.  \r\n# Log in to a connected application (Jira/Confluence, etc)\r\n# In the remote directory, re-name the user to {{test_user2}}\r\n# Log in to a connected application with the updated user\r\n\r\nh2. Expected Behavior\r\n\r\nBecause the user has an external ID, Crowd should use this to validate that the user already exists, and has just been renamed\r\n\r\nh2. Observed Behavior\r\n\r\nCrowd ignores the unique identifier, and creates a new user.  The UI will now show the same user twice (old username and new username), and there will be 2 entries in the database.\r\n\r\nh2. Observed Behavior when synchronizing to other Applications\r\n* In Confluence: After a sync, the user test_user and test_user2 will appear alternately in the User list",
      "summary": "Duplicate users created in delegated directories if 'Synchronize user details' is disabled"
    }
  },
  {
    "key": "CWD-5254",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-02-14T14:44:04.000+0000",
      "created": "2018-09-11T22:21:42.000+0000",
      "description": "Crowd received a UI revamp based on Atlassian Design Guidelines (ADG) back in 2014 with the release of [version 2.8|https://confluence.atlassian.com/crowd/crowd-2-8-release-notes-652444090.html]. However, many pages of the [official Crowd documentation|https://confluence.atlassian.com/crowd/crowd-documentation-16482400.html] still show pre-ADG screenshots. These ought to be updated to better reflect the current user experience.\r\n\r\n* https://confluence.atlassian.com/crowd/adding-a-directory-18579549.html\r\n* https://confluence.atlassian.com/crowd/using-the-directory-browser-18579548.html\r\n* https://confluence.atlassian.com/crowd/configuring-a-remote-crowd-directory-271945311.html\r\n* https://confluence.atlassian.com/crowd/configuring-a-custom-directory-connector-18579552.html\r\n* https://confluence.atlassian.com/crowd/configuring-caching-for-an-ldap-directory-174227697.html\r\n* https://confluence.atlassian.com/crowd/importing-users-and-groups-into-a-directory-25788445.html\r\n* https://confluence.atlassian.com/crowd/using-the-application-browser-18579590.html\r\n* https://confluence.atlassian.com/crowd/adding-an-application-18579591.html\r\n* https://confluence.atlassian.com/crowd/integrating-crowd-with-atlassian-confluence-198573.html\r\n* https://confluence.atlassian.com/crowd/specifying-an-application-s-directory-permissions-102596852.html\r\n* https://confluence.atlassian.com/crowd/example-of-directory-permissions-104824971.html\r\n* https://confluence.atlassian.com/crowd/viewing-users-in-directories-mapped-to-an-application-194805964.html\r\n* https://confluence.atlassian.com/crowd/specifying-which-groups-can-access-an-application-25788430.html\r\n* https://confluence.atlassian.com/crowd/specifying-an-application-s-address-or-hostname-25788433.html\r\n* https://confluence.atlassian.com/crowd/testing-a-user-s-login-to-an-application-103088399.html\r\n* https://confluence.atlassian.com/crowd/enforcing-lower-case-usernames-and-groups-for-an-application-179446857.html\r\n* https://confluence.atlassian.com/crowd/managing-an-application-s-session-25788425.html\r\n* https://confluence.atlassian.com/crowd/configuring-options-for-an-application-194806179.html\r\n\r\n(There may be more pages than these, but these are the ones I was able to find)",
      "summary": "Screenshots in Crowd documentation are pre-ADG makeover and should be updated"
    }
  },
  {
    "key": "CWD-5253",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-11-26T02:11:02.000+0000",
      "created": "2018-09-06T19:38:25.000+0000",
      "description": "h5. Problem Definition\r\nWhen the license limit is exceed, Crowd locks up and prevents authentication until the license is upgraded.\r\n\r\nh5. Suggested Solution\r\nTo prevent outages, it would be very useful to prevent this from happening in the first place, and displaying a warning when a user will cause the license to go over the limit. \r\n\r\nh5. Notes\r\n\r\nThere currently is a warning email when 90% of the license count is being used up: [Licensing|https://confluence.atlassian.com/crowd/licensing-17956964.html#Licensing-WarningwhenNumberofUsersapproachesLicenseLimit].",
      "summary": "Allow Crowd admins to disable / remove users when the license limit is exceeded"
    }
  },
  {
    "key": "CWD-5251",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-03-18T13:59:40.000+0000",
      "created": "2018-09-05T16:43:10.000+0000",
      "description": "A new feature to delegate group administration to users is available in upcoming 3.3 version but restricted to DataCenter license.\r\n\r\nPlease make it available also to Server version.",
      "summary": "make group administration feature available to server version"
    }
  },
  {
    "key": "CWD-5250",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-09-05T14:56:32.000+0000",
      "description": "h3. Summary\r\n\r\nWhen {{cookie.tokenkey}} is missing in product's {{crowd.properties}} the value will be pulled from Crowd's {{/rest/config/cookie}} endpoint every time authentication check happens.\r\n\r\n{{cookie.tokenkey}} is an optional configuration and it should be safe to not define it, but at the same time it adds a lot of unnecessery communication load. Making it cached on server side for few minutes could address this problem.\r\n\r\nh3. Workaround\r\nSet the {{cookie.tokenkey}} to the value configured in the Crowd server. This is detailed in [The crowd.properties file|https://confluence.atlassian.com/display/CROWD/The+crowd.properties+file]. Specifically:\r\nAn example of this configuration:\r\n{code:XML}\r\n...\r\ncookie.tokenkey=crowd.token_key\r\n{code}",
      "summary": "Cache cookie.tokenkey pulled from Crowd's /rest/config/cookie"
    }
  },
  {
    "key": "CWD-5248",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-08-28T11:28:21.000+0000",
      "description": "Currently, there isn't an updated list of Crowd build numbers (and the version that they are for) available in our documentation. It'd be great if we could get this, so that it can be used as a point of reference in the future.\r\n\r\nReason: \r\nUsers are affected by the issue described here: [Error: \"Table 'crowd.REMOTEGROUP' doesn't exist\" After Migrating Crowd Database From Another Server|https://confluence.atlassian.com/pages/viewpage.action?pageId=726564970]\r\n\r\nCurrent outdated list: \r\n[Crowd Build and Version Numbers Reference|https://confluence.atlassian.com/pages/viewpage.action?pageId=703401603]\r\n\r\nExpected behavior:\r\nHave a list of Crowd's build number similar to the following page: [Confluence build information|https://developer.atlassian.com/server/confluence/confluence-build-information]\r\n\r\n",
      "summary": "List of Crowd build numbers"
    }
  },
  {
    "key": "CWD-5246",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-08-27T23:52:16.000+0000",
      "description": "Copied from: https://jira.atlassian.com/browse/BSERV-11085\r\nh3. Steps to reproduce\r\n # Add user directory, and in the User Schema Settings, set the \u00a0Unique ID Attribute to UserPrincipalName\r\n # Add users from an AD to an internal group\r\n # Login with the user from AD to get Last Authenticated time and logout\r\n # Login as admin and edit the user directory setting, and from the User Schema Settings, change the\u00a0Unique ID Attribute to objectGUID\r\n # Save and sync\r\n\r\nh3. Expected result\r\n\r\nSynchronization is successful, the users Last Authenticated Time is preserved, and the users in internal groups are preserved.\r\nh3. Actual result\r\n\r\nSynchronization is successful,\u00a0*however*, the users Last Authenticated Time is\u00a0*unknown*, AD users are\u00a0*removed*\u00a0from the internal groups",
      "summary": "After updating user directory attribute, Last Authenticated Time, and AD users are removed from internal groups"
    }
  },
  {
    "key": "CWD-5245",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-08-27T12:27:31.000+0000",
      "description": "h3. Summary\r\nOn authentication Crowd doesn't search for nested memberships, it searches only for the direct ones with Sun Directory Server Enterprise Edition\r\n\r\nh3. Environment\r\n* Crowd 3.2.3\r\n* Active Directory - Sun Directory Server Enterprise Edition\r\n* On AD, create relationship like this (nested membership:\r\n{panel}\r\nadministrators\r\n1st level -> something\r\n1st level -> operating\r\n2nd level -> theuser\r\n2nd level -> testuser\r\n{panel}\r\n\r\nh3. Steps to Reproduce\r\n# Create Connection to AD.\r\n# Enable option \"Synchronise group memberships when logging in: Every time a user logs in\"\r\n# Enable nested groups.\r\n# Synchronise users.\r\n# Try to login to Crowd with user that has nested groups.\r\n\r\nh3. Expected Results\r\nUser will be logged in and all groups, nested and first level groups will be visible for that user.\r\n\r\nh3. Actual Results\r\nUser will only have 1st level groups and not nested ones.\r\n\r\nh3. Notes\r\nThis looks like regression as the behavior is not observable in Crowd 2.6.4.\r\n\r\nh3.Workaround\r\nNo known workaround at the moment.",
      "summary": "On authentication Crowd doesn't search for nested memberships, it searches only for the direct ones with Sun Directory Server Enterprise Edition"
    }
  },
  {
    "key": "CWD-5243",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-08-24T18:24:42.000+0000",
      "description": "h3. Summarized Description\r\n\r\n{color:#0747a6}As a{color} customer,\u00a0{color:#0747a6}I want{color} Crowd to remove automatically the users from {{automatic assigned group}} when I remove them from the {{application access group}} in AD, {color:#0747a6}so that{color} I don't have to do it manually and consider the right number of users when acquiring or renewing my licenses.\r\nh3. Problem Definition\r\n\r\nThis Feature Request involves:\r\n * [application access group|https://confluence.atlassian.com/crowd/specifying-which-groups-can-access-an-application-25788430.html]\r\n and\r\n * [automatic assigned group|https://confluence.atlassian.com/crowd/automatically-assigning-users-to-groups-194806197.html]\r\n\r\nWhen a user is removed from a group on Microsoft Active Directory (or any Directory Server), which is listed in Crowd as an {{application access group}}, customer expects that they are removed automatically from {{automatic assigned group}} as well, which is not happening at the moment.\r\n\r\nAs {{application access groups}} would contain allowed users for the application, if they're removed from it, the {{automatic assigned group}} should not contain a user that would not require a license anymore, [as suggested in the documentation|https://confluence.atlassian.com/crowd/automatically-assigning-users-to-groups-194806197.html]:\r\n{quote}Using automatically assigned groups per application allows you to optimize yours products license usage, as only users that authenticated to an application would be assigned a license.\r\n{quote}\r\nh3. Suggested Solution\r\n\r\nCrowd could:\r\n # Have a parameter for admin to select if a user removed from {{application access group}} should also be removed from {{automatic assigned group}}\r\n # If that parameter is selected, Crowd should periodically check {{application access group}} to see if any user was removed from it, and remove it from {{automatic assigned group}}, if listed there\r\n\r\nh3. Why this is important\r\n\r\nCustomers rely on {{automatic assigned group}} to acquire licenses for their applications, so, we should provide an accurate information regarding who can use their software versus who actually uses it.\r\nh3. Workaround\r\n\r\nCustomer can have an internal manual process for removing users from both groups manually.",
      "summary": "Automatically remove users from assigned group when users are removed from application access group"
    }
  },
  {
    "key": "CWD-5242",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-03-13T13:42:09.000+0000",
      "created": "2018-08-23T15:26:32.000+0000",
      "description": "AUI 7 is no doubt the best update to AUI because it looks so much more modern than the current version used in Crowd. In order to align it with other products, AUI should be upgraded. Related tweet: [https://twitter.com/dylanfps/status/1032539276670652416?s=21]\u00a0",
      "summary": "Upgrade AUI to 7.X (ADG3)"
    }
  },
  {
    "key": "CWD-5241",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-06-22T12:36:50.000+0000",
      "created": "2018-08-23T09:50:45.000+0000",
      "description": "PostgreSQL 10 was released in 2017: [https://www.postgresql.org/about/news/1786/]. Currently Crowd supports only PostgreSQL up to version 9.6. This feature request is to add support for PostgreSQL 10, as clients will want to run the newer versions to keep up with development and features. Ubuntu 18.04 LTS, for example, only ships PostgreSQL 10.",
      "summary": "Support for PostgreSQL 10"
    }
  },
  {
    "key": "CWD-5240",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2018-08-30T11:00:16.000+0000",
      "created": "2018-08-22T21:07:07.000+0000",
      "description": "On August 22, the Apache Software Foundation\u00a0[announced|https://cwiki.apache.org/confluence/display/WW/S2-057]\u00a0a remote code execution vulnerability in Struts, called CVE-2018-11776. After investigating, we have determined that Crowd is not affected by this vulnerability.\u00a0While Crowd do use Struts, it is not configured in a way that would leave it susceptible to this bug.\u00a0However, as an extra precaution that is in-line with industry best practices,\u00a0we are updating Struts in Crowd to the latest version.",
      "summary": "Upgrade Struts with CVE-2018-11776 fixed"
    }
  },
  {
    "key": "CWD-5237",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-08-20T06:39:14.000+0000",
      "created": "2018-08-21T19:33:31.000+0000",
      "description": "h2. Summary\r\nIn Crowd, there are certain membership searches which appear to rely on *case-sensitive* username matching between the {{cwd_user}} and {{cwd_membership}} tables (more specifically between *{{cwd_membership.child_name}}* and *{{cwd_user.user_name}}* columns). This leads to inconsistent results between views if for whatever reason the two tables do not have the same casing for a given user.\r\n\r\nCrowd's {{cwd_membership}} table has a {{lower_child_name}} column, and it should either use that instead to match {{cwd_user.lower_user_name}}, OR, preferably, use the child_id value instead since that references the primary key of {{cwd_user}}. A number of columns in {{cwd_membership}} appear to be holding redundant info that are already stored in {{cwd_user}}, rather than simply referencing {{cwd_user}} using the user's ID.\r\n\r\nh2. Steps to reproduce\r\nThe below example attempts to show one of the inconsistencies caused by differing username casing between the {{cwd_user}} and {{cwd_membership}} tables. This is a based on a similar issue observed in a support request on a customer instance:\r\n# In Crowd, create local user \"myuser\" and local group \"mygroup\"\r\n# Place \"myuser\" into \"mygroup\"\r\n# In the database, run the following query to purposely change the casing of the {{child_name}} column in the {{cwd_membership}} table:\r\n{code}\r\nUPDATE cwd_membership SET child_name = 'MYUSER' WHERE lower_child_name = 'myuser';\r\n{code}\r\n# In the Crowd UI, go to Groups > mygroup > Direct Members tab. *Note that the user \"myuser\" is still listed here as a member*\r\n# Click the \"Remove users\" button, leave the search field blank and click \"Search\"\r\n\r\nh2. Expected behavior\r\nThe user \"myuser\" should be returned, as this user is a member of \"mygroup\"\r\n\r\nh2. Actual behavior\r\nNo users are returned, because the value in {{cwd_membership.child_name}} (\"MYGROUP\") does not match that of {{cwd_user.user_name}} (\"mygroup\")\r\n\r\nh2. Workaround\r\n(!) The workaround below uses SQL to locate inconsistencies in usernames, and updates them in bulk. It is very important that you backup your database before any modifications, test these queries on a lower environment, have a rollback plan. These queries were written with Postgresql, and if you're using a different DBMS you may need to modify some of the queries to the syntax of that DBMS. *Crowd should be shutdown while these queries are being executed.*\r\n# Run this query to find inconsistencies between the two tables:\r\n{code}\r\nSELECT m.child_name, m.lower_child_name, u.user_name, u.lower_user_name, u.id\r\nFROM cwd_membership m\r\nJOIN cwd_user u\r\n  ON m.child_id = u.id\r\nWHERE membership_type = 'GROUP_USER'\r\n  AND m.child_name <> u.user_name;\r\n{code}\r\n# Run this query to update the {{cwd_membership}} table in order to resolve the inconsistencies\r\n{code}\r\nUPDATE cwd_membership m\r\nSET child_name = u.user_name\r\nFROM cwd_user u\r\nWHERE m.child_id = u.id\r\n  AND m.membership_type = 'GROUP_USER'\r\n  AND m.child_name <> u.user_name;\r\n{code}",
      "summary": "Crowd returns inconsistent group membership search results due to letter casing differences in the username"
    }
  },
  {
    "key": "CWD-5231",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-04-24T08:16:37.000+0000",
      "created": "2018-08-13T06:33:33.000+0000",
      "description": "h2. Summary\r\n\r\nAdding a blank list of users to a group in Crowd results in an HTML 500 error, plus an unhelpful entry in the Crowd logs.\r\nh2. Steps to Reproduce\r\n # Send a REST API call to [add users to a group|https://docs.atlassian.com/atlassian-crowd/3.2.3/REST/#usermanagement/1/group-addUserAsDirectGroupMember], but pass an empty list of users\r\n\r\n{code:java}\r\n /crowd/rest/usermanagement/1/group/user/direct?groupname=GROUP_NAME_HERE{code}\r\nh2. Expected Results\r\n\r\nAn error will be returned that no users were provided\r\nh2. Actual Results\r\n * The Crowd logs will show:\r\n{code:java}\r\n2018-08-06 17:04:03,565 http-nio-8095-exec-70 ERROR [common.error.jersey.ThrowableExceptionMapper] Uncaught exception thrown by REST service: The validated object is null\r\n java.lang.NullPointerException: The validated object is null\r\n at org.apache.commons.lang3.Validate.notNull(Validate.java:225)\r\n at org.apache.commons.lang3.Validate.notNull(Validate.java:206)\r\n at com.atlassian.crowd.manager.application.AliasManagerImpl.findUsernameByAlias(AliasManagerImpl.java:38)\r\n at sun.reflect.GeneratedMethodAccessor539.invoke(Unknown Source)\r\n at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n at java.lang.reflect.Method.invoke(Method.java:498)\r\n{code}\r\n\r\n * The access logs will show a 500 error:\r\n{code:java}\r\n[06/Aug/2018:17:04:03 +0200] Go-http-client/1.1 123.456.789.20 123.456.789.123 POST POST /crowd/rest/usermanagement/1/group/user/direct?groupname=GROUP_NAME_HERE HTTP/1.1 2767 500 http-nio-8095-exec-70 -\r\n{code}",
      "summary": "Adding no users to a group raises HTML 500 error"
    }
  },
  {
    "key": "CWD-5228",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-08-02T14:53:26.000+0000",
      "description": "It would be a great feature to have the option \"Lower case output\" to include the email address as well, not only users and groups. \r\n\r\nThis request is based on the following bug: \r\n\r\n* [JSDSERVER-4868 - Email address becomes case sensitive when sharing ticket with other customer since JSD 3.3.0|https://jira.atlassian.com/browse/JSDSERVER-4868]\r\n\r\nThat could be prevented if the \"Lower case output\" option was available for email addresses. ",
      "summary": "Have \"Lower case output\" available for email addresses as well"
    }
  },
  {
    "key": "CWD-5227",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-07-31T18:33:51.000+0000",
      "description": "Tomcat 9 is the current stable release with a number of stability improvements and support for more recent standards. \r\nCrowd should first ensure that it works with Tomcat 9 and then upgrade the standalone distribution.",
      "summary": "Upgrade to Tomcat 9.x"
    }
  },
  {
    "key": "CWD-5223",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-07-27T08:38:04.000+0000",
      "description": "h3. Summary\r\nThe article on [Configuring Confluence with NTLM SSO|https://confluence.atlassian.com/pages/viewpage.action?pageId=849055111] is linking to an add-on that is no longer in service: \r\n\r\n[Confluence NTLM Authenticator|https://studio.plugins.atlassian.com/wiki/display/NTLM/Confluence+NTLM+Authenticator]\r\n\r\nI'm not able to find it elsewhere, such as Marketplace.\r\n\r\nIn addition, it wasn't immediately obvious that this article is part of the Crowd documentation (and an outdated one at that). The only mentions of Crowd are in the breadcrumbs, the URL, and in the introduction.\r\n\r\nSee this [Community post|https://community.atlassian.com/t5/Confluence-questions/Incorrect-information-for-setting-up-NTLM-auth/qaq-p/853127].\r\n\r\nh3. Suggested Solution\r\nEither remove the document (as I've seen [users mention this doesn't work with Confluence beyond 4.0|https://community.atlassian.com/t5/Confluence-questions/NTLM-Authenticator-does-not-work-any-more-with-Confluence-4-x/qaq-p/307782]) or update it with another solution that doesn't involve the no longer active add-on.",
      "summary": "NTLM SSO with Confluence documentation mentions add-on that is no longer available"
    }
  },
  {
    "key": "CWD-5220",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-07-25T22:11:56.000+0000",
      "description": "The page describing how to add and configure an Application is Crowd is really outdated, but the version picker shows always the latest version (currently 3.2).\r\n\r\n- https://confluence.atlassian.com/crowd/adding-an-application-18579591.html\r\n\r\nSince Crowd 3.0, there are many extra fields and features that are not covered in the documentation. Also, the screenshots seem to be from versions that are not even supported anymore.\r\n\r\nIf updating the whole doc is not possible at the moment, I believe we should at least remove the latest versions as it may cause a lot of confusion when using the doc as reference. ",
      "summary": "Crowd \"Applications\" reference is outdated"
    }
  },
  {
    "key": "CWD-5218",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-07-20T11:31:48.000+0000",
      "description": "I want Crowd to be able to connect to the SAML IDP as an example Centrify, Okta or OneLogin to provide delegated sign-on for Atlassian products so that my other Atlassian products like Jira, Confluence or Bitbucket can utilize it and be connected to the SAML IDP through Crowd.\r\n",
      "summary": "Integration between Crowd and SAML IDPs"
    }
  },
  {
    "key": "CWD-5217",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-07-20T09:57:39.000+0000",
      "description": "Today, you can assign your users to groups in Crowd. This impacts permissions and defines who can authenticate to your products, but does not provide visibility into whether a user has access to a specific Jira project, Confluence space or Bitbucket repository.\r\n\r\nAs an admin I would like to see and manage in future all of my users permissions across my Atlassian products in a single location.\r\n\r\nI would like to see to which specific applications a user has access among my Atlassian products. This would include access to specific projects, spaces and seeing the impact of adding a user to a group with its permission schemes.\r\n\r\n\r\n",
      "summary": "Permissions visibility across all Atlassian products in Crowd"
    }
  },
  {
    "key": "CWD-5216",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-07-24T14:12:17.000+0000",
      "created": "2018-07-19T15:35:37.000+0000",
      "description": "h3. Summary\r\nThe current Crowd documentation for enabling access logs [How do I enable Access Logging for Crowd?|https://confluence.atlassian.com/crowdkb/how-do-i-enable-access-logging-for-crowd-753893970.html/] suggests that adding the {{%\\{X-AUSERNAME\\}o}} attribute in the Tomcat Valve will record the username in the access logs. However, after testing, this is not working as _documented_ because the header {{%\\{X-AUSERNAME\\}o}} does not exist in the Crowd requests.\r\n\r\n\r\nh3. Steps to Reproduce\r\n# Install a vanilla Crowd instance\r\n# Enable access logging by following the steps described in this KB [How do I enable Access Logging for Crowd?|https://confluence.atlassian.com/crowdkb/how-do-i-enable-access-logging-for-crowd-753893970.html/]\r\n# Restart Crowd for the changes to take effect\r\n# Access the Crowd login page\r\n# Check the newly created access log file\r\n\r\nh3. Expected Results\r\nAccording to the documentation, the username should be documented with the incoming requests\r\n\r\nh3. Actual Results\r\nThe username is empty in all the requests \r\n\r\nh3. Workaround\r\nThere is no workaround at the moment",
      "summary": "Crowd access logs does not log the username"
    }
  },
  {
    "key": "CWD-5215",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2018-07-26T08:49:00.000+0000",
      "created": "2018-07-18T08:15:18.000+0000",
      "description": "UserRenamedEvent.oldUserName == UserRenamedEvent.user.userName which is wrong",
      "summary": "UserRenamedEvent.oldUserName has new name value"
    }
  },
  {
    "key": "CWD-5213",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-08-20T06:15:11.000+0000",
      "created": "2018-07-16T02:00:01.000+0000",
      "description": "h2. *Summary of Issue*\r\n\r\nWhen Crowd makes a connection to Azure AD and the connection locks up, the connection does not time out and various threads and the LDAP Sync thread remain permanently stuck.\r\n\r\nh2. *Symptoms*\r\n\r\n* User and Groups stop syncing from Azure AD into Crowd\r\n\r\nThe synchronisation status for the User Directory is frozen:\r\n\r\n !frozen_sync_status.jpg|thumbnail! \r\n\r\nh2. *Expected result*\r\n\r\nAny connection failures from *Crowd* (or the *adal4j* library) to Azure AD should time out and retry the connection later.\r\n\r\nh2. *Actual result*\r\n\r\nThe LDAP sync thread initiates the sync and just blocks on the SSL connection (to Azure AD).\r\nBased on the Thread Dumps, it appears that all HTTP threads are also blocked on the on the SSL connection (to Azure AD).\r\n\r\nh2. *Diagnosis*\r\n\r\nCapture [Thread Dumps|https://confluence.atlassian.com/confkb/troubleshooting-confluence-performance-issues-with-thread-dumps-688882387.html] of the Crowd process.\r\n\r\nThe LDAP Caesium sync thread will be blocking:\r\n\r\n{code}\r\n\"Caesium-2-2\" daemon prio=5 tid=0x000000000000004b nid=0 waiting on condition \r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for <0x000000003461f0d7> (a java.util.concurrent.FutureTask)\r\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\r\n\tat java.util.concurrent.FutureTask.awaitDone(FutureTask.java:429)\r\n\tat java.util.concurrent.FutureTask.get(FutureTask.java:191)\r\n\tat com.atlassian.crowd.directory.cache.DeltaQueryCacheRefresher.synchroniseChanges(DeltaQueryCacheRefresher.java:145)\r\n\tat com.atlassian.crowd.directory.DbCachingRemoteDirectory.synchroniseCache(DbCachingRemoteDirectory.java:961)\r\n\tat com.atlassian.crowd.manager.directory.DirectorySynchroniserImpl.synchronise(DirectorySynchroniserImpl.java:71)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:333)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:213)\r\n\tat com.sun.proxy.$Proxy66.synchronise(Unknown Source)\r\n\tat com.atlassian.crowd.directory.DbCachingDirectoryPoller.pollChanges(DbCachingDirectoryPoller.java:45)\r\n\tat com.atlassian.crowd.manager.directory.monitor.poller.DirectoryPollerJobRunner.runJob(DirectoryPollerJobRunner.java:85)\r\n\tat com.atlassian.scheduler.core.JobLauncher.runJob(JobLauncher.java:153)\r\n\tat com.atlassian.scheduler.core.JobLauncher.launchAndBuildResponse(JobLauncher.java:118)\r\n\tat com.atlassian.scheduler.core.JobLauncher.launch(JobLauncher.java:97)\r\n\tat com.atlassian.scheduler.caesium.impl.CaesiumSchedulerService.launchJob(CaesiumSchedulerService.java:443)\r\n\tat com.atlassian.scheduler.caesium.impl.CaesiumSchedulerService.executeClusteredJob(CaesiumSchedulerService.java:438)\r\n\tat com.atlassian.scheduler.caesium.impl.CaesiumSchedulerService.executeClusteredJobWithRecoveryGuard(CaesiumSchedulerService.java:462)\r\n\tat com.atlassian.scheduler.caesium.impl.CaesiumSchedulerService.executeQueuedJob(CaesiumSchedulerService.java:390)\r\n\tat com.atlassian.scheduler.caesium.impl.CaesiumSchedulerService$1.consume(CaesiumSchedulerService.java:285)\r\n\tat com.atlassian.scheduler.caesium.impl.CaesiumSchedulerService$1.consume(CaesiumSchedulerService.java:282)\r\n\tat com.atlassian.scheduler.caesium.impl.SchedulerQueueWorker.executeJob(SchedulerQueueWorker.java:65)\r\n\tat com.atlassian.scheduler.caesium.impl.SchedulerQueueWorker.executeNextJob(SchedulerQueueWorker.java:59)\r\n\tat com.atlassian.scheduler.caesium.impl.SchedulerQueueWorker.run(SchedulerQueueWorker.java:34)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\n{code}\r\n\r\nVarious other threads will be blocking on SSL waiting for data from Azure AD:\r\n\r\n{code}\r\n\"DeltaQueryCacheRefresher-9928705:thread-2\" prio=5 tid=0x00000000000001c1 nid=0 runnable \r\n   java.lang.Thread.State: RUNNABLE\r\n\tat java.net.SocketInputStream.socketRead0(Native Method)\r\n\tat java.net.SocketInputStream.socketRead(SocketInputStream.java:116)\r\n\tat java.net.SocketInputStream.read(SocketInputStream.java:170)\r\n\tat java.net.SocketInputStream.read(SocketInputStream.java:141)\r\n\tat sun.security.ssl.InputRecord.readFully(InputRecord.java:465)\r\n\tat sun.security.ssl.InputRecord.readV3Record(InputRecord.java:593)\r\n\tat sun.security.ssl.InputRecord.read(InputRecord.java:532)\r\n\tat sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:961)\r\n\t- locked <0x0000000001858f35> (a java.lang.Object)\r\n\tat sun.security.ssl.SSLSocketImpl.readDataRecord(SSLSocketImpl.java:918)\r\n\tat sun.security.ssl.AppInputStream.read(AppInputStream.java:105)\r\n\t- locked <0x000000004d888194> (a sun.security.ssl.AppInputStream)\r\n\tat java.io.BufferedInputStream.fill(BufferedInputStream.java:246)\r\n\tat java.io.BufferedInputStream.read1(BufferedInputStream.java:286)\r\n\tat java.io.BufferedInputStream.read(BufferedInputStream.java:345)\r\n\t- locked <0x000000002fcca5bb> (a java.io.BufferedInputStream)\r\n\tat sun.net.www.http.HttpClient.parseHTTPHeader(HttpClient.java:704)\r\n\tat sun.net.www.http.HttpClient.parseHTTP(HttpClient.java:647)\r\n\tat sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1535)\r\n\t- locked <0x0000000074ae888a> (a sun.net.www.protocol.https.DelegateHttpsURLConnection)\r\n\tat sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1440)\r\n\t- locked <0x0000000074ae888a> (a sun.net.www.protocol.https.DelegateHttpsURLConnection)\r\n\tat java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:480)\r\n\tat sun.net.www.protocol.https.HttpsURLConnectionImpl.getResponseCode(HttpsURLConnectionImpl.java:338)\r\n\tat com.sun.jersey.client.urlconnection.URLConnectionClientHandler._invoke(URLConnectionClientHandler.java:253)\r\n\tat com.sun.jersey.client.urlconnection.URLConnectionClientHandler.handle(URLConnectionClientHandler.java:153)\r\n\tat com.atlassian.crowd.directory.authentication.AzureAdTokenRefresher.handle(AzureAdTokenRefresher.java:39)\r\n\tat com.atlassian.crowd.directory.authentication.AzureAdRefreshTokenFilter.handle(AzureAdRefreshTokenFilter.java:22)\r\n\tat com.sun.jersey.api.client.Client.handle(Client.java:652)\r\n\tat com.sun.jersey.api.client.WebResource.handle(WebResource.java:682)\r\n\tat com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74)\r\n\tat com.sun.jersey.api.client.WebResource$Builder.get(WebResource.java:509)\r\n\tat com.atlassian.crowd.directory.rest.AzureAdRestClient.lambda$getNextPage$7(AzureAdRestClient.java:123)\r\n\tat com.atlassian.crowd.directory.rest.AzureAdRestClient$$Lambda$435/1961017936.get(Unknown Source)\r\n\tat com.atlassian.crowd.directory.rest.AzureAdRestClient.handleRequest(AzureAdRestClient.java:133)\r\n\tat com.atlassian.crowd.directory.rest.AzureAdRestClient.getNextPage(AzureAdRestClient.java:123)\r\n\tat com.atlassian.crowd.directory.rest.AzureAdPagingWrapper.fetchAllDeltaQueryResults(AzureAdPagingWrapper.java:104)\r\n\tat com.atlassian.crowd.directory.AzureAdDirectory.performGroupsDeltaQuery(AzureAdDirectory.java:515)\r\n\tat com.atlassian.crowd.directory.cache.DeltaQueryCacheRefresher$$Lambda$434/936732505.call(Unknown Source)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\n{code}\r\n\r\n{code}\r\n\"http-nio-8095-exec-28\" daemon prio=5 tid=0x000000000000007d nid=0 runnable \r\n   java.lang.Thread.State: RUNNABLE\r\n\tat java.net.SocketInputStream.socketRead0(Native Method)\r\n\tat java.net.SocketInputStream.socketRead(SocketInputStream.java:116)\r\n\tat java.net.SocketInputStream.read(SocketInputStream.java:170)\r\n\tat java.net.SocketInputStream.read(SocketInputStream.java:141)\r\n\tat sun.security.ssl.InputRecord.readFully(InputRecord.java:465)\r\n\tat sun.security.ssl.InputRecord.readV3Record(InputRecord.java:593)\r\n\tat sun.security.ssl.InputRecord.read(InputRecord.java:529)\r\n\tat sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:961)\r\n\t- locked <0x000000002f0cb643> (a java.lang.Object)\r\n\tat sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1363)\r\n\t- locked <0x000000002f9dc610> (a java.lang.Object)\r\n\tat sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1391)\r\n\tat sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1375)\r\n\tat sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:563)\r\n\tat sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:185)\r\n\tat sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1512)\r\n\t- locked <0x000000002d31c8ee> (a sun.net.www.protocol.https.DelegateHttpsURLConnection)\r\n\tat sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1440)\r\n\t- locked <0x000000002d31c8ee> (a sun.net.www.protocol.https.DelegateHttpsURLConnection)\r\n\tat java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:480)\r\n\tat sun.net.www.protocol.https.HttpsURLConnectionImpl.getResponseCode(HttpsURLConnectionImpl.java:338)\r\n\tat com.sun.jersey.client.urlconnection.URLConnectionClientHandler._invoke(URLConnectionClientHandler.java:253)\r\n\tat com.sun.jersey.client.urlconnection.URLConnectionClientHandler.handle(URLConnectionClientHandler.java:153)\r\n\tat com.atlassian.crowd.directory.authentication.AzureAdTokenRefresher.handle(AzureAdTokenRefresher.java:39)\r\n\tat com.atlassian.crowd.directory.authentication.AzureAdRefreshTokenFilter.handle(AzureAdRefreshTokenFilter.java:22)\r\n\tat com.sun.jersey.api.client.Client.handle(Client.java:652)\r\n\tat com.sun.jersey.api.client.WebResource.handle(WebResource.java:682)\r\n\tat com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74)\r\n\tat com.sun.jersey.api.client.WebResource$Builder.get(WebResource.java:509)\r\n\tat com.atlassian.crowd.directory.rest.AzureAdRestClient.lambda$searchUsers$0(AzureAdRestClient.java:58)\r\n\tat com.atlassian.crowd.directory.rest.AzureAdRestClient$$Lambda$349/1569454165.get(Unknown Source)\r\n\tat com.atlassian.crowd.directory.rest.AzureAdRestClient.handleRequest(AzureAdRestClient.java:133)\r\n\tat com.atlassian.crowd.directory.rest.AzureAdRestClient.searchUsers(AzureAdRestClient.java:54)\r\n\tat com.atlassian.crowd.directory.AzureAdDirectory.findUserByName(AzureAdDirectory.java:181)\r\n\tat com.atlassian.crowd.directory.AzureAdDirectory.authenticate(AzureAdDirectory.java:207)\r\n\tat com.atlassian.crowd.directory.DbCachingRemoteDirectory.authenticateAndUpdateInternalUser(DbCachingRemoteDirectory.java:228)\r\n\tat com.atlassian.crowd.directory.DbCachingRemoteDirectory.performAuthenticationAndUpdateAttributes(DbCachingRemoteDirectory.java:168)\r\n\tat com.atlassian.crowd.directory.DbCachingRemoteDirectory.authenticate(DbCachingRemoteDirectory.java:148)\r\n\tat com.atlassian.crowd.manager.directory.DirectoryManagerGeneric.authenticateUser(DirectoryManagerGeneric.java:283)\r\n...\r\n..\r\n{code}\r\n\r\n{code}\r\n\"http-nio-8095-exec-15\" daemon prio=5 tid=0x000000000000006b nid=0 runnable \r\n   java.lang.Thread.State: RUNNABLE\r\n\tat java.net.SocketInputStream.socketRead0(Native Method)\r\n\tat java.net.SocketInputStream.socketRead(SocketInputStream.java:116)\r\n\tat java.net.SocketInputStream.read(SocketInputStream.java:170)\r\n\tat java.net.SocketInputStream.read(SocketInputStream.java:141)\r\n\tat sun.security.ssl.InputRecord.readFully(InputRecord.java:465)\r\n\tat sun.security.ssl.InputRecord.readV3Record(InputRecord.java:593)\r\n\tat sun.security.ssl.InputRecord.read(InputRecord.java:529)\r\n\tat sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:961)\r\n\t- locked <0x000000006f8ff5a0> (a java.lang.Object)\r\n\tat sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1363)\r\n\t- locked <0x0000000037834c51> (a java.lang.Object)\r\n\tat sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1391)\r\n\tat sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1375)\r\n\tat sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:563)\r\n\tat sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:185)\r\n\tat sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1282)\r\n\t- locked <0x00000000503f1531> (a sun.net.www.protocol.https.DelegateHttpsURLConnection)\r\n\tat sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1257)\r\n\t- locked <0x00000000503f1531> (a sun.net.www.protocol.https.DelegateHttpsURLConnection)\r\n\tat sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:250)\r\n\t- locked <0x00000000214b135b> (a sun.net.www.protocol.https.HttpsURLConnectionImpl)\r\n\tat com.microsoft.aad.adal4j.AdalOAuthRequest.configureHeaderAndExecuteOAuthCall(AdalOAuthRequest.java:143)\r\n\tat com.microsoft.aad.adal4j.AdalOAuthRequest.send(AdalOAuthRequest.java:82)\r\n\tat com.microsoft.aad.adal4j.AdalTokenRequest.executeOAuthRequestAndProcessResponse(AdalTokenRequest.java:79)\r\n\tat com.microsoft.aad.adal4j.AuthenticationContext.acquireTokenCommon(AuthenticationContext.java:816)\r\n\tat com.microsoft.aad.adal4j.AuthenticationContext.access$100(AuthenticationContext.java:64)\r\n\tat com.microsoft.aad.adal4j.AuthenticationContext$1.call(AuthenticationContext.java:172)\r\n\tat com.microsoft.aad.adal4j.AuthenticationContext$1.call(AuthenticationContext.java:161)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\tat com.google.common.util.concurrent.MoreExecutors$DirectExecutorService.execute(MoreExecutors.java:299)\r\n\tat java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)\r\n\tat com.google.common.util.concurrent.AbstractListeningExecutorService.submit(AbstractListeningExecutorService.java:58)\r\n\tat com.google.common.util.concurrent.AbstractListeningExecutorService.submit(AbstractListeningExecutorService.java:37)\r\n\tat com.microsoft.aad.adal4j.AuthenticationContext.acquireToken(AuthenticationContext.java:161)\r\n\tat com.microsoft.aad.adal4j.AuthenticationContext.acquireToken(AuthenticationContext.java:357)\r\n\tat com.atlassian.crowd.directory.authentication.impl.SameThreadAdalAuthenticator.getAdalAuthenticationToken(SameThreadAdalAuthenticator.java:40)\r\n\tat com.atlassian.crowd.directory.rest.DefaultAzureAdRestClientFactory$1.load(DefaultAzureAdRestClientFactory.java:59)\r\n\tat com.atlassian.crowd.directory.rest.DefaultAzureAdRestClientFactory$1.load(DefaultAzureAdRestClientFactory.java:55)\r\n\tat com.google.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3527)\r\n\tat com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2319)\r\n\tat com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2282)\r\n\t- locked <0x0000000031f9d027> (a com.google.common.cache.LocalCache$StrongEntry)\r\n\tat com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2197)\r\n\tat com.google.common.cache.LocalCache.get(LocalCache.java:3937)\r\n\tat com.google.common.cache.LocalCache.getOrLoad(LocalCache.java:3941)\r\n\tat com.google.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:4824)\r\n\tat com.google.common.cache.LocalCache$LocalLoadingCache.getUnchecked(LocalCache.java:4830)\r\n\tat com.atlassian.crowd.directory.authentication.AzureAdTokenRefresher.setTokenInRequest(AzureAdTokenRefresher.java:53)\r\n\tat com.atlassian.crowd.directory.authentication.AzureAdTokenRefresher.handle(AzureAdTokenRefresher.java:38)\r\n\tat com.atlassian.crowd.directory.authentication.AzureAdRefreshTokenFilter.handle(AzureAdRefreshTokenFilter.java:22)\r\n\tat com.sun.jersey.api.client.Client.handle(Client.java:652)\r\n\tat com.sun.jersey.api.client.WebResource.handle(WebResource.java:682)\r\n\tat com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74)\r\n\tat com.sun.jersey.api.client.WebResource$Builder.get(WebResource.java:509)\r\n\tat com.atlassian.crowd.directory.rest.AzureAdRestClient.lambda$searchUsers$0(AzureAdRestClient.java:58)\r\n\tat com.atlassian.crowd.directory.rest.AzureAdRestClient$$Lambda$349/1569454165.get(Unknown Source)\r\n\tat com.atlassian.crowd.directory.rest.AzureAdRestClient.handleRequest(AzureAdRestClient.java:133)\r\n\tat com.atlassian.crowd.directory.rest.AzureAdRestClient.searchUsers(AzureAdRestClient.java:54)\r\n\tat com.atlassian.crowd.directory.AzureAdDirectory.findUserByName(AzureAdDirectory.java:181)\r\n\tat com.atlassian.crowd.directory.AzureAdDirectory.authenticate(AzureAdDirectory.java:207)\r\n\tat com.atlassian.crowd.directory.DbCachingRemoteDirectory.authenticateAndUpdateInternalUser(DbCachingRemoteDirectory.java:228)\r\n\tat com.atlassian.crowd.directory.DbCachingRemoteDirectory.performAuthenticationAndUpdateAttributes(DbCachingRemoteDirectory.java:168)\r\n\tat com.atlassian.crowd.directory.DbCachingRemoteDirectory.authenticate(DbCachingRemoteDirectory.java:148)\r\n\tat com.atlassian.crowd.manager.directory.DirectoryManagerGeneric.authenticateUser(DirectoryManagerGeneric.java:283)\r\n...\r\n..\r\n{code}\r\n\r\nh2. *Work around*\r\n\r\nThe default time out when connecting to Azure AD is currently infinity so it will just permanently block waiting for data from Azure AD SSL connection.\r\n\r\n* Restarting Crowd will allow Crowd to re-initiate connections to Azure AD\r\n",
      "summary": "Crowd does not time out Azure AD connection if connection from Crowd to Azure AD locks up"
    }
  },
  {
    "key": "CWD-5212",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2018-07-20T11:41:47.000+0000",
      "created": "2018-07-13T08:51:17.000+0000",
      "description": "h3. Environment\r\n\r\n* Crowd 2.12.0+ with external directory\r\n* Oracle DB\r\n* Connected application such as Confluence or BitBucket\r\n\r\nh3. Issue\r\n\r\nWhen users from an external directory who have an empty mandatory field (such as email), log in to a connected application, Crowd will add a new entry to the Audit Log showing the email address was updated.  However, no update occurs.  The update shows as changing \" \" to \" \".\r\n\r\nh3. Cause\r\n\r\nOracle DBs treat empty strings as nulls, but LDAP treats them as empty string.  So, when comparing the information received from the external directory to what is in the Crowd DB, there is a mismatch between the empty string and null, so Crowd attempts to \"update\" the field, and adds an entry to the audit log showing it did so.",
      "summary": "Audit Log Shows Updates to Null/Empty Fields When Using Oracle DB"
    }
  },
  {
    "key": "CWD-5211",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-07-13T00:34:25.000+0000",
      "description": "h2. Problem summary\r\nIn the process of setting up the new LDAP Connector directory, an administrator is very likely to save the directory before it is fully configured. This will inadvertently trigger a sync against LDAP using default attributes and filters, which are very broad. Given a large enough LDAP, this \"accidental sync\" has the potential to process for a very long time, consuming resources on the Crowd and database servers, and potentially impact all Crowd-related activity.\r\n\r\nh2. Steps to reproduce\r\nThe below is a common workflow in setting up a new LDAP Connector directory:\r\n# First select a directory type (select Connector radio button) and hit the Next button.\r\n# You will be taken to the \"Details\" tab in the next screen. Fill in the details and hit the blue \"Continue\" button:\r\n\\\\\r\n  !details.png|thumbnail! \r\n\\\\\r\n# You will be taken to the \"Connector\" tab, and be shown an error, because not all required details have been filled in. Fill in all the details (base DN and bind credentials) and hit Continue at the bottom\r\n\\\\\r\n  !connector1.png|thumbnail!  !connector2.png|thumbnail!\r\n\\\\\r\n# You will now be taken to the \"Configuration\" tab where you can further tune details such as user and group search filters. Fill these out and hit Continue once more\r\n\r\nh2. Expected behavior\r\nThe new directory is not actually added to the database *until all tabs have been filled/reviewed by the administrator*\r\n\r\nh2. Actual behavior\r\nAfter hitting \"Continue\" on Step 3, despite the admin not yet having customized the \"Configuration\" tab, the directory has been committed to the database. A sync automatically starts shortly after, using the default attributes and search filters. These default filters are very broad and are likely to pull in ALL users and groups within the scope of the base DN set in Step 2.\r\n\r\nAssuming this sync finishes, the following sync will take place using the actual intended filters configured in Step 4. If the intended filters are very restrictive, then Crowd will need to perform expensive database updates to \"undo\" all the changes from the first sync. This can take an even longer time than the first sync due to CWD-5098.\r\n\r\nh2. Additional notes\r\nCrowd actually tries once to add the directory to the database after clicking Continue in Step 2, but is blocked due to not having required attributes. After Step 3, however, it has everything it needs to successfully add the directory due to the pre-populated attributes and filters.\r\n\r\nh2. Workaround\r\nWhen setting up a new LDAP Connector, instead of using the \"Continue\" buttons, manually click on each tab (Details, Connector, Configuration, Permissions). *Do not click Continue on any tab until ALL intended configurations are in place.* As soon as Continue is clicked, Crowd will attempt to commit the directory to the database and start a sync if it is successful.",
      "summary": "UI to add new Connector is confusing and can inadvertently trigger very long syncs"
    }
  },
  {
    "key": "CWD-5210",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-07-12T15:58:06.000+0000",
      "description": "As a Crowd administrator I would like to have the ability to enter notes regarding the user such as description of department the user works in or when changes have been made to that user group configuration an area to comment as to why that change was made.\u00a0 We have multiple Crowd administrators creating new user accounts or changing user permissions.\u00a0 The new audit log feature only shows what changes were made but not why.\u00a0 An additional field where Crowd admins can add notes for other admins to see would be very helpful.\r\n\r\nSimilar to the field provided when a group is created.\u00a0\u00a0",
      "summary": "Crowd user description and notes"
    }
  },
  {
    "key": "CWD-5207",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-07-09T07:40:36.000+0000",
      "description": "The XML backup from crowd takes quite a long when the number of groups are large, the whole backup process has group exports as performance bottleneck.",
      "summary": "Improve XML export performance in case of large number of groups"
    }
  },
  {
    "key": "CWD-5203",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-07-03T12:38:06.000+0000",
      "description": "Crowd XML Import from an instance which has local groups for external LDAPs logs unique constraint violation errors during membership imports.\r\n\r\nThis is harmless bug, but it still borks in the logs, the users / groups / memberships would still be imported successfully.\r\n\r\nSteps to reproduce:\r\n # Create a new directory i.e. OpenLDAP\r\n # Select 'Mange groups locally' while creating the directory\r\n # Create two groups for example - 'Group 1' and 'Group 2'\r\n # Add a remote user from the OpenLDAP into both these groups in Crowd.\r\n # Export XML from the instance\r\n # Try importing this XML.",
      "summary": "Crowd XML Import logs constraint violation errors when importing memberships for local groups"
    }
  },
  {
    "key": "CWD-5199",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-10-01T09:51:03.000+0000",
      "created": "2018-06-27T14:23:02.000+0000",
      "description": "Since Crowd 3.2.1, logging configuration changes related Log4j has allowed Hibernate to log DDL errors while creating schema for Crowd OpenID.\r\n\r\nThis doesn't affects any Crowd or OpenID operations, and is harmless, but still it borks in the logs for post Crowd 3.2.1 startups.\r\n\r\nIt exists in versions prior to Crowd 3.2.1 as well but would not be logged, hence not visible.\r\n\r\nExample of the DDL errors in logs would be something like this:\r\n{code:java}\r\n2018-06-27 16:11:12,881 localhost-startStop-1 WARN [tool.schema.internal.ExceptionHandlerLoggedImpl] GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement2018-06-27 16:11:12,881 localhost-startStop-1 WARN [tool.schema.internal.ExceptionHandlerLoggedImpl] GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statementorg.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL via JDBC Statement at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67) at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlString(AbstractSchemaMigrator.java:525) at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlStrings(AbstractSchemaMigrator.java:470) at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applyForeignKeys(AbstractSchemaMigrator.java:429) at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.performMigration(AbstractSchemaMigrator.java:245) at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.doMigration(AbstractSchemaMigrator.java:110) at  \r\norg.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:183) at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:72) at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:309) at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:452) at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:710) at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:726) at org.springframework.orm.hibernate5.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:511) at org.springframework.orm.hibernate5.LocalSessionFactoryBean.afterPropertiesSet(LocalSessionFactoryBean.java:495) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1688) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1626) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:555) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483) at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:312) at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230) at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:308) at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197) at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:351) at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:108) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1533) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1280) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:553) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483) at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:312) at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230) at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:308) at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197) at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:761) at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:867) at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:543) at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:443) at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:325) at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:107) at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4745) at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5207) at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:752) at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:728) at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:734) at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:630) at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1842) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) at java.util.concurrent.FutureTask.run(FutureTask.java:266) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at java.lang.Thread.run(Thread.java:748)Caused by: java.sql.SQLException: Constraint already exists: FKAD5HDVSJWPAH0OJNRAAQT2VQS in statement [\u00a0 \u00a0 alter table SITEAPPROVAL\u00a0 \u00a0 \u00a0 \u00a0add constraint FKad5hdvsjwpah0ojnraaqt2vqs\u00a0 \u00a0 \u00a0 \u00a0foreign key (PROFILE_ID)\u00a0 \u00a0 \u00a0 \u00a0references PROFILE] at org.hsqldb.jdbc.Util.sqlException(Unknown Source) at org.hsqldb.jdbc.jdbcStatement.fetchResult(Unknown Source) at org.hsqldb.jdbc.jdbcStatement.execute(Unknown Source) at org.apache.tomcat.dbcp.dbcp2.DelegatingStatement.execute(DelegatingStatement.java:294) at org.apache.tomcat.dbcp.dbcp2.DelegatingStatement.execute(DelegatingStatement.java:294) at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54) ... 50 more{code}\r\n\u00a0\r\nh3. Workaround:\r\n # Shutdown Crowd\u00a0\r\n # Edit the following XML file inside Crowd's installation folder \\{CROWD_INSTALLATION_FOLDER}*/crowd-openidserver-webapp/WEB-INF/classes/applicationContext-OpenIDBootstrap.xml*\r\n\r\n # Replace the following XML element\u00a0\r\n\r\n{code:java}\r\n    <util:properties id=\"hibernateProperties\">\r\n        <prop key=\"hibernate.show_sql\">${hibernate.show_sql}</prop>\r\n        <prop key=\"hibernate.format_sql\">${hibernate.format_sql}</prop>\r\n        <prop key=\"hibernate.max_fetch_depth\">${hibernate.max_fetch_depth}</prop>\r\n        <prop key=\"hibernate.dialect\">${hibernate.dialect}</prop>\r\n        <prop key=\"hibernate.hbm2ddl.auto\">update</prop>\r\n        <!-- it can be useful to disable batching during debugging, as HSQLDB doesn't report the exact\r\n        statement which fails in batch mode -->\r\n        <prop key=\"hibernate.jdbc.batch_size\">${hibernate.jdbc.batch_size}</prop>\r\n    </util:properties>{code}\r\nwith this\r\n{code:java}\r\n<util:properties id=\"hibernateProperties\">\r\n        <prop key=\"hibernate.show_sql\">${hibernate.show_sql}</prop>\r\n        <prop key=\"hibernate.format_sql\">${hibernate.format_sql}</prop>\r\n        <prop key=\"hibernate.max_fetch_depth\">${hibernate.max_fetch_depth}</prop>\r\n        <prop key=\"hibernate.dialect\">${hibernate.dialect}</prop>\r\n        <prop key=\"hibernate.hbm2ddl.auto\">update</prop>\r\n        <prop key=\"hibernate.default_schema\">public</prop>\r\n        <!-- it can be useful to disable batching during debugging, as HSQLDB doesn't report the exact\r\n        statement which fails in batch mode -->\r\n        <prop key=\"hibernate.jdbc.batch_size\">${hibernate.jdbc.batch_size}</prop>\r\n    </util:properties>\r\n\r\n{code}\r\nRestart Crowd,and, check the startup logs, it shouldn't log the DDL errors.",
      "summary": "Crowd OpenID server startup logs DDL error from Hibernate"
    }
  },
  {
    "key": "CWD-5195",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2018-06-27T15:01:47.000+0000",
      "created": "2018-06-25T12:50:50.000+0000",
      "description": "Crowd XML Backup restore process takes a lot of time specifically while restoring memberships.\r\n\r\nSteps to reproduce:\r\n # Create a Crowd XML backup with a significant number of memberships in an internal or delegated directory\r\n # Try restoring XML backup via setup wizard or post-setup Restore view\r\n\r\nImpact:\r\n\r\nWith a crafted data set of 1000 users, 1000 groups, and 25 members per group (total 25K memberships) the import time was roughly 10-15 min on PostgreSQL, it should be under couple of mins after improvements\r\n\r\nIndicative proof for this issue is that the threads could be seen running for long times via MembershipMapper:\r\n{code:java}\r\n \"http-nio-9006-exec-22\" #73 daemon prio=5 os_prio=0 tid=0x00007efccc414000 nid=0x7b7b runnable [0x00007efc257d0000]\r\n java.lang.Thread.State: RUNNABLE\r\n at org.hibernate.engine.internal.Cascade.deleteOrphans(Cascade.java:550)\r\n at org.hibernate.engine.internal.Cascade.cascadeCollectionElements(Cascade.java:526)\r\n at org.hibernate.engine.internal.Cascade.cascadeCollection(Cascade.java:423)\r\n at org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:386)\r\n at org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:193)\r\n at org.hibernate.engine.internal.Cascade.cascade(Cascade.java:126)\r\n at org.hibernate.event.internal.AbstractFlushingEventListener.cascadeOnFlush(AbstractFlushingEventListener.java:150)\r\n at org.hibernate.event.internal.AbstractFlushingEventListener.prepareEntityFlushes(AbstractFlushingEventListener.java:141)\r\n at org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:74)\r\n at org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:44)\r\n at org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1396)\r\n at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1889)\r\n at org.hibernate.internal.CriteriaImpl.list(CriteriaImpl.java:366)\r\n at org.hibernate.internal.CriteriaImpl.uniqueResult(CriteriaImpl.java:388)\r\n at com.atlassian.crowd.dao.user.UserDAOHibernate.findByNameInternal(UserDAOHibernate.java:485)\r\n at com.atlassian.crowd.dao.user.UserDAOHibernate.findByName(UserDAOHibernate.java:174)\r\n at com.atlassian.crowd.migration.MembershipMapper.userExistsInDirectory(MembershipMapper.java:210)\r\n at com.atlassian.crowd.migration.MembershipMapper.isPlaceholderUserNeeded(MembershipMapper.java:195)\r\n at com.atlassian.crowd.migration.MembershipMapper.importXml(MembershipMapper.java:144)\r\n at com.atlassian.crowd.migration.XmlMigrator.importXml(XmlMigrator.java:40)\r\n at com.atlassian.crowd.migration.XmlMigrationManagerImpl.importXml(XmlMigrationManagerImpl.java:173)\r\n\r\nlocked <0x00000005c4291130> (a com.atlassian.crowd.migration.XmlMigrationManagerImpl)\r\n \u00a0\r\n\r\n{code}",
      "summary": "Improve XML restore speed"
    }
  },
  {
    "key": "CWD-5192",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2018-06-26T10:02:20.000+0000",
      "created": "2018-06-20T13:08:07.000+0000",
      "description": "h3. Summary\r\nAfter adding the Azure connector or doing a full synchronization all membership to the groups will not be synchronized to the Crowd from Azure AD.\r\n\r\nh3. Environment\r\n* Azure AD\r\n* Latest Crowd (tested with 3.2.1)\r\n\r\nh3. How to Replicate\r\n # Set AZURE AD directory on Crowd\r\n# After synchronization, \r\n\r\nh3. Expected Results\r\n* users, groups, and membership to the groups to be synched normally on Crowd\r\n\r\nh3. Actual results\r\n* Users and groups synched, but users are not showing under their respective groups on Crowd. \r\n\r\nh3. Notes and Resolution\r\n\r\nThe issue has been fixed in Crowd 3.0.3, 3.1.4 and 3.2.2 - please update to any of these versions to obtain the fix.\r\n\r\nIt may however occur that Crowd continues to incrementally synchronize with Azure AD, without picking up the existing memberships. In such case it's possible to force a full synchronization using the following steps:\r\n\r\n* Uncheck the \"Enable incremental sync\" checkbox\r\n* Click the \"Update\" button\r\n* Check the \"Enable incremental sync\" checkbox\r\n* Click the \"Update\" button again",
      "summary": "Azure AD synchronisation remove membership"
    }
  },
  {
    "key": "CWD-5191",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-06-20T06:52:35.000+0000",
      "description": "[https://confluence.atlassian.com/crowd/moving-to-crowd-data-center-935372358.html]\r\n In the *Adding node names* section of the documentation above it suggest using the following example:\r\n{code:java}\r\nCATALINA_OPTS=-Dcluster.node.name=node-1\r\n{code}\r\nHowever, as of the latest Crowd 3.2.1, it is still using {{JAVA_OPTS}} for the system properties:\r\n{code:java|title=setenv.sh}\r\nJAVA_OPTS=\"-Xms128m -Xmx512m -Dfile.encoding=UTF-8 $JAVA_OPTS\"\r\n\r\nexport JAVA_OPTS\r\n\r\n# set the location of the pid file\r\nif [ -z \"$CATALINA_PID\" ] ; then\r\n    if [ -n \"$CATALINA_BASE\" ] ; then\r\n        CATALINA_PID=\"$CATALINA_BASE\"/work/catalina.pid\r\n    elif [ -n \"$CATALINA_HOME\" ] ; then\r\n        CATALINA_PID=\"$CATALINA_HOME\"/work/catalina.pid\r\n    fi\r\nfi\r\nexport CATALINA_PID\r\n{code}\r\n{code:java|title=setenv.bat}\r\nset JAVA_OPTS=%JAVA_OPTS% -Xms128m -Xmx512m -Dfile.encoding=UTF-8\r\n\r\nrem Checks if the JAVA_HOME has a space in it (can cause issues)\r\nSET _marker=%JAVA_HOME: =%\r\nIF NOT \"%_marker%\" == \"%JAVA_HOME%\" ECHO JAVA_HOME \"%JAVA_HOME%\" contains spaces. Please change to a location without spaces if this causes problems.\r\n{code}\r\nh3. Suggestion\r\n\r\nSuggest to change the documentation from:\r\n{code:java}\r\nCATALINA_OPTS=-Dcluster.node.name=node-1\r\n{code}\r\nto:\r\n{code:java}\r\nJAVA_OPTS=-Dcluster.node.name=node-1\r\n{code}",
      "summary": "Update Documentation about Adding Node Name in a Crowd Cluster"
    }
  },
  {
    "key": "CWD-5189",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-06-18T13:37:46.000+0000",
      "description": "We are missing the functionality (event) to notice that a user is using a certain application.\r\n\r\nWe are using Crowd together with JIRA, Confluence etc. and with SSO enabled. Now, if a user logs in to an application, there is the\u00a0UserAuthenticationSucceededEvent (case 1). But if the user switches over to another application, he is already logged in (SSO) but certainly there is no event that indicates the usage of that application (case 2).\r\n\r\nIn the source code of Crowd, all this stuff is happening in the TokenAuthenticationManagerImpl class.\r\n\r\nFor the first case, there is the method\u00a0authenticateUser(...) that publishes the\u00a0UserAuthenticationSucceededEvent.\r\n\r\nAnd for the second case, there is the method\u00a0validateUserToken(...) that does some similar things but does not publish any event.\r\n\r\nBoth methods are calling the method\u00a0updateUserLastActivity(...) so one option would be to publish a new UserActivityEvent or something like that. Another option is to publish a new UserTokenValidatedEvent. And a third option is to the publish\u00a0UserAuthenticationSucceededEvent again, as a token validation is kind of an authentication, but this could affect the behaviour of existing plugins.\r\n\r\nPlease let me know what you think about that and if there is a change for an implementation. This should not be too hard and would be very useful for us.\r\n\r\nThank you!",
      "summary": "Event for user activity in applications"
    }
  },
  {
    "key": "CWD-5187",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2018-06-19T07:53:43.000+0000",
      "created": "2018-06-15T13:39:51.000+0000",
      "description": "Dear,\r\n\r\nI have a just a short question and because I didn't know which issue type I should use for a question I've selected Feedback. Sorry if i'm wrong.\r\n\r\nThe matter is that I should upgrade Crowd v3.0.1 to v3.3 (for the bug fix CWD-1765). But when I look I can't find the v3.3. So I think that the versions isn't yet released, though?\r\n\r\nIf yes, for when is it planned to release pls?\r\n\r\nIn the meantime I would like to upgrade my customer instance to v3.2.\u00a0\r\n\r\nBecause there are almost 6versions missing between, would it be correct to upgrade v3.0.1 directly to v3.2 or should I upgrade one per one each version in between?\r\n\r\n\u00a0\r\n\r\nThank you in advance.\r\n\r\n\u00a0\r\n\r\nKind regards.\r\n\r\nZehra Atmaca",
      "summary": "upgrade crowd v3.0.1 to v 3.3"
    }
  },
  {
    "key": "CWD-5185",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2018-08-01T13:09:19.000+0000",
      "created": "2018-06-13T13:00:31.000+0000",
      "description": "Hello,\r\n\r\nCurrently, regardless of selected login groups, all directory users are visible to the application whenever app is configured to use this directory. In certain cases, especially like integrating Crowd with Hipchat Server, it would be extremly helpful do not expose all users but only those in login groups instead, which will allow to test integration on a limited set of users even in the test environment.",
      "summary": "Improve users visibility limitation mechanism"
    }
  },
  {
    "key": "CWD-5184",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-06-12T11:52:38.000+0000",
      "description": "h2. History\r\n\r\nSince Crowd 3.1, Crowd has had the ability to [automatically assign users to groups per application|https://confluence.atlassian.com/crowd/automatically-assigning-users-to-groups-194806197.html].  This runs on the users first login to each application.\r\n\r\nh2. Suggestion\r\n\r\nMake a setting that would run the auto-assign process on _every_ login.\r\n\r\nh2. Example\r\n\r\n# Add an application in Crowd, such as Confluence or JIRA\r\n# Add an auto-assignment to a group, like _testGroup_\r\n# Login to the application.  Log out\r\n** In Crowd, your user will show that it is a member of _testGroup_\r\n# In Crowd, add another auto group assignment, like _nextGroup_\r\n# Login to the application again\r\n** In Crowd, you will still only be a member of _testGroup_, because the auto assignment process only runs on the first login.  So now an admin must either:\r\n## Manually add you to _nextGroup_, or\r\n## Reset your {{autoGroupsAdded}} and {{autoGroupsAdded.app.#####}} attributes in Crowd, which will run the auto-assign process again on your next login.\r\n",
      "summary": "Allow An Option to Assign Groups on Every Login"
    }
  },
  {
    "key": "CWD-5182",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-06-11T17:38:04.000+0000",
      "description": "h2. Summary\r\n\r\nFull Synchronisation in between Crowd and any of the Atlassian Applications fails due to multiple users with the same External ID.\r\nh2. Steps to Replicate\r\n\r\nIt is unclear how Crowd duplicate External_IDs in its database without manual intervention, but, to replicate this problem we should:\r\n # Select one of the Atlassian applications and [connect it to Crowd as the User Management platform|https://confluence.atlassian.com/doc/connecting-to-crowd-or-jira-for-user-management-229838465.html]. For this scenario, Confluence was chosen.\r\n # With that completed, add two users to Crowd, specifically to the directory where Confluence is reading users from. For this scenario, we added User1 and User2.\r\n # Open Crowd database and run the following query to set both users with the same External ID:\r\n{code:sql}\r\nupdate cwd_user set external_id = (select external_id from cwd_user where lower_user_name = 'user1')\r\nwhere lower_user_name = 'user2';\r\n{code}\r\n\r\n # With that completed, run a Synchronisation through Confluence User Directory screen, it will fail.\r\n\r\nh2. Log Evidence\r\n\r\nThe synchronisation fails due to the following error - Multiple entries with the same key:\r\n{code:java}\r\n2018-06-11 15:08:35,851 ERROR [Caesium-1-4] [atlassian.crowd.directory.DbCachingDirectoryPoller] pollChanges Error occurred while refreshing the cache for directory [ 950274 ].\r\njava.lang.IllegalArgumentException: Multiple entries with same key: 458753:3bfe6523-ba06-471a-bb77-ad2a623dc7eb=com.atlassian.crowd.model.user.InternalUser@4577c9c[id=1081348,name=user,createdDate=2018-06-11 15:07:22.002,updatedDate=2018-06-11 15:07:22.002,active=true,emailAddress=user1@userinc.com,firstName=User,lastName=Uno,displayName=User Uno,credential=com.atlassian.crowd.embedded.api.PasswordCredential@d11ef10[credential=********,encryptedCredential=true],lowerName=user1,lowerEmailAddress=user1@userinc.com,lowerFirstName=user,lowerLastName=uno,lowerDisplayName=user uno,directoryId=950274,externalId=458753:3bfe6523-ba06-471a-bb77-ad2a623dc7eb] and 458753:3bfe6523-ba06-471a-bb77-ad2a623dc7eb=com.atlassian.crowd.model.user.InternalUser@6a222bb[id=1081347,name=dude,createdDate=2018-06-11 15:07:22.002,updatedDate=2018-06-11 15:07:22.002,active=true,emailAddress=user2@userinc.com,firstName=User,lastName=Dos,displayName=User Dos Uno,credential=com.atlassian.crowd.embedded.api.PasswordCredential@39b45c78[credential=********,encryptedCredential=true],lowerName=user2,lowerEmailAddress=user2@userinc.com,lowerFirstName=user,lowerLastName=dos,lowerDisplayName=user dos,directoryId=950274,externalId=458753:3bfe6523-ba06-471a-bb77-ad2a623dc7eb]\r\n\tat com.google.common.collect.ImmutableMap.checkNoConflict(ImmutableMap.java:150)\r\n\tat com.google.common.collect.RegularImmutableMap.checkNoConflictInBucket(RegularImmutableMap.java:104)\r\n\tat com.google.common.collect.RegularImmutableMap.<init>(RegularImmutableMap.java:70)\r\n\tat com.google.common.collect.ImmutableMap$Builder.build(ImmutableMap.java:254)\r\n\tat com.atlassian.crowd.directory.DbCachingRemoteChangeOperations.mapUsersByExternalId(DbCachingRemoteChangeOperations.java:1194)\r\n\tat com.atlassian.crowd.directory.DbCachingRemoteChangeOperations.getUsersToAddAndUpdate(DbCachingRemoteChangeOperations.java:1106)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:302)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:281)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:208)\r\n\tat com.atlassian.crowd.directory.$Proxy2496.getUsersToAddAndUpdate(Unknown Source)\r\n\tat com.atlassian.crowd.directory.DirectoryCacheImplUsingChangeOperations.addOrUpdateCachedUsers(DirectoryCacheImplUsingChangeOperations.java:55)\r\n\tat com.atlassian.crowd.directory.ldap.cache.RemoteDirectoryCacheRefresher.synchroniseAllUsers(RemoteDirectoryCacheRefresher.java:88)\r\n\tat com.atlassian.crowd.directory.ldap.cache.AbstractCacheRefresher.synchroniseAll(AbstractCacheRefresher.java:56)\r\n\tat com.atlassian.crowd.directory.ldap.cache.EventTokenChangedCacheRefresher.synchroniseAll(EventTokenChangedCacheRefresher.java:69)\r\n\tat com.atlassian.crowd.directory.DbCachingRemoteDirectory.synchroniseCache(DbCachingRemoteDirectory.java:1186)\r\n\tat com.atlassian.crowd.manager.directory.DirectorySynchroniserImpl.synchronise(DirectorySynchroniserImpl.java:74)\r\n\tat com.atlassian.crowd.directory.DbCachingDirectoryPoller.pollChanges(DbCachingDirectoryPoller.java:50)\r\n\tat com.atlassian.crowd.manager.directory.monitor.poller.DirectoryPollerJobRunner.runJob(DirectoryPollerJobRunner.java:96)\r\n{code}\r\nh2. Steps to Diagnose and Workaround\r\n\r\nIn order to confirm that your instance is indeed affected by this issue, you need to see above stack trace in your logs and the query below should return results - Don't forget to replace the ID of the affected directory below:\r\n{code:sql}\r\nSELECT id, user_name, external_id, directory_id FROM cwd_user WHERE external_id IN \r\n(SELECT external_id FROM cwd_user WHERE directory_id = 'YOUR_DIRECTORY_ID_HERE' GROUP BY external_id HAVING COUNT(external_id) > 1);\r\n{code}\r\nIn case you don't have the ID of the affected directory, run the query below:\r\n{code:sql}\r\nselect * from cwd_directory;\r\n{code}\r\nOnce you have the results handy, you have to:\r\n # Access Crowd and remove the affected users from the directory Confluence (or other application) is syncing to.\r\n ## If you are using a LDAP Connector (not a Delegated Directory nor a Crowd Internal Directory), you need to run the clean-up at your LDAP too or filter the duplicated users through a LDAP query.\r\n # In case those users are not supposed to have access anymore, proceed to the next step. Else, re-add those users to Crowd and grant them access to the directory Confluence (or other application) is syncing to. This will generate new External IDs for them.\r\n # Synchronise directories through Confluence (or other application) user directory screen.\r\n\r\nh2. Suggestion\r\n\r\nPerhaps this bug can be fixed through adding a constraint under {{cwd_user}} table that specifies one {{external_id}} per {{directory_id}}. There's an unique key constraint currently that defines one {{lower_user_name}} per {{directory}}. This Feature request is logged here: https://jira.atlassian.com/browse/CWD-3882\r\nh2. Workaround\r\n # As a possible, examine the duplicate records returned by the diagnostic query above and determine which _user_name_ entry that you want to be used for the user.\r\n # For the other record of the user, set the _external_id_ to a text entry such as 'invalid'. For example:\r\n{code:sql}\r\nupdate cwd_user set external_id = 'invalid' where id = <the record ID of the entry with the user_name that shouldn't be used>;\r\n{code}",
      "summary": "Sync Failures due to duplicated External IDs"
    }
  },
  {
    "key": "CWD-5179",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-06-08T21:36:10.000+0000",
      "description": "h2. Steps to reproduce (tested in Crowd 3.2.0)\r\n # Create two internal directories, Directory1 and Directory2\r\n # Create two users in Directory1: \"USER1\" and \"user2\"\r\n # Create two users in Directory2: \"user1\" and \"user2\"\r\n # Create an application\r\n # Add Directory1 and Directory2 to the application, in that order, and set both to \"Allow all groups to authenticate\"\r\n # Go to Crowd Admin > Licensing, and recalculate user total\r\n # It will show you as *Three* active users (default admin account + \"USER1\" and \"user2\")\r\n # Now, inactive \"USER1\" and recalculate user total\r\n \u00a0\r\nh2. Expected behavior\r\n\r\nCurrent user count should be \"2\" (default admin account + \"user2\")\r\n\r\nh2. Actual behavior\r\n\r\nCurrent user count shows \"3\" (default admin account + \"user1\" + \"user2\"). According to [Effective memberships with multiple directories|https://confluence.atlassian.com/crowd/effective-memberships-with-multiple-directories-672530810.html] states the following:\r\n{quote}Inactive users\r\n\r\nThe membership schemes described above are not used when Crowd determines if a user should be able to authenticate.\r\n\r\nCrowd only checks if the user is active in the first (highest priority) directory in which they are found when determining authentication.\r\n\r\nFor example, an application in Crowd is mapped to two directories: Crowd Internal Directory (primary) and an AD Delegated Authentication Directory (secondary).\r\n\r\nUser A is inactive in the primary directory\r\n User A is active in secondary directory\r\n\r\nResult: Crowd rejects access (authentication), because user A is first found in the primary directory, and the user is inactive there.\r\n{quote}\r\nSince CWD-5025 - Duplicated users are counted twice in license if the username letter casing does not match is fixed in Crowd 3.2.0, the situation described above should not happen.",
      "summary": "Inactive users are counting as licensed users in Crowd if exists a duplicated user with a different letter casing in another directory"
    }
  },
  {
    "key": "CWD-5177",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2018-08-31T13:45:06.000+0000",
      "created": "2018-06-06T13:18:59.000+0000",
      "description": "When restoring a backup taken before Crowd 2.8.0 might cause some upgrade tasks to silently fail to execute. The effect will vary depending on how old the backup is, and might lead to the instance being unusable.\r\n\r\nThis only affects restoring from XML, normal upgrades are unaffected.\u00a0",
      "summary": "Restoring a pre-2.8.0 backup fails to run upgrade tasks"
    }
  },
  {
    "key": "CWD-5176",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-06-06T07:12:29.000+0000",
      "description": "When executing code in a plugin, and calling methods on a RemoteDirectory instance, retrieved from a DirectoryInstanceLoader, these methods get executed using the context classloader of the plugin, rather than that of the host product (which they should, as they're service objects instantiated by the product).\r\n\r\nMost of the time this doesn't prevent them from being used, but in some cases (for example when executing the method causes an LDAP interaction), having the wrong contextclassloader might cause the calls to fail with a ClassNotFoundException.\u00a0\r\n\r\nSample stacktrace:\r\n{code:java}\r\ncom.atlassian.crowd.exception.OperationFailedException: org.springframework.transaction.CannotCreateTransactionException: Could not create DirContext instance for transaction; nested exception is org.springframework.ldap.CommunicationException: Loading the socket factory; nested exception is javax.naming.CommunicationException: Loading the socket factory [Root exception is java.lang.ClassNotFoundException: com.atlassian.crowd.directory.ssl.LdapHostnameVerificationSSLSocketFactory]\r\nat com.atlassian.crowd.directory.SpringLDAPConnector.pageSearchResults(SpringLDAPConnector.java:405)\r\nat com.atlassian.crowd.directory.SpringLDAPConnector.searchEntitiesWithRequestControls(SpringLDAPConnector.java:440)\r\nat com.atlassian.crowd.directory.SpringLDAPConnector.searchEntities(SpringLDAPConnector.java:424)\r\nat com.atlassian.crowd.directory.SpringLDAPConnector.searchUserObjects(SpringLDAPConnector.java:627)\r\nat com.atlassian.crowd.directory.SpringLDAPConnector.searchUsers(SpringLDAPConnector.java:974)\r\n {code}",
      "summary": "Using RemoteDirectory methods from a plugin executes them in the plugin's classloader, rather than the host product one"
    }
  },
  {
    "key": "CWD-5175",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-06-04T19:19:12.000+0000",
      "description": "On our \"Moving to Crowd Data Center\" doc we note that the shared home can be a symbolic link: https://confluence.atlassian.com/crowd/moving-to-crowd-data-center-935372358.html\r\n\r\nOn our \"Installing Crowd Data Center\" doc we don't call that out: https://confluence.atlassian.com/crowd/installing-crowd-data-center-935369773.html\r\n\r\nThese paths are highly similar so I'd recommend that wording be clarified and ensure our tech guidance is comparable here.",
      "summary": "Clarify Crowd DC wording around Symlinks"
    }
  },
  {
    "key": "CWD-5173",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-06-22T12:36:56.000+0000",
      "created": "2018-06-04T11:08:27.000+0000",
      "description": "{panel:title=Atlassian Update - 27 March 2020|borderStyle=solid|borderColor=#3c78b5|titleBGColor=#3c78b5|bgColor=#e7f4fa}\r\nHello everyone,\r\n\r\nWe\u2019re happy to say that we getting very close to release this feature. You can expect it in the next release of Crowd Data Center.\r\n\r\nThanks again for your patience and support!\r\n\r\nWe\u2019ll let you know once the release is available. Stay tuned!\r\n\r\nBest regards,\r\n\r\nMarek Radochonski\r\n Senior Product Manager, Crowd\r\n [mradochonski@atlassian.com|mailto:mradochonski@atlassian.com]\r\n{panel}\r\n\r\n\r\nAs a Crowd administrator, I would like to manage local group memberships for users synced from Azure Active directory. Ideally, *Manage groups locally* option should be available for Azure AD.",
      "summary": "Read Only, Local Groups for Azure AD"
    }
  },
  {
    "key": "CWD-5170",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11291",
        "id": "11291",
        "key": "CWD",
        "name": "Crowd",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11291&avatarId=105192",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11291&avatarId=105192",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11291&avatarId=105192",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11291&avatarId=105192"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2018-06-01T12:41:28.000+0000",
      "description": "It would be great if we support StartTLS over SMTP connections since SMTPS is a deprecated method.",
      "summary": "Support StartTLS for SMTP Connection"
    }
  }
]