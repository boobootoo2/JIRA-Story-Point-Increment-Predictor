[
  {
    "key": "CONFSERVER-58646",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-09-02T09:03:44.000+0000",
      "created": "2019-07-30T10:58:57.000+0000",
      "description": "This has been discussed with\u00a0Mark Bereznitsky from Atlassian here: [https://community.developer.atlassian.com/t/confluence-7-0-eap-released/28060/33]\r\n{quote}The internal Confluence PDF exporter injects a webResourceIntegration bean which has an API to query the state of the CDN system (WebResourceIntegration#getCDNStrategy) and remove that from the rendered DOM.\r\n Avoiding fetching from the CDN on PDF exports is a precaution done for several reasons:\r\n\r\nSome site admins might be reluctant to open up communications from the Confluence instance to the CDN (without this, only one way traffic is needed).\r\n The way the internal PDF exporter works with web resources, there may be scenarios where such a request could poison the CDN cache with resources that we don't want to make their way to a user who views that page, for example.\r\n Adding to the whitelist is an option we're considering but it will not solve the above difficulties.\r\n\r\nI'd be happy to discuss the technical details of this but it would be better to do it in a ticket.\r\n ...\r\n{quote}\r\nAll of our exporters render content in the PDF output mode - regardless of the actual filetype (Word, PDF, ...) like this:\r\n{code:java}\r\npageContext.setOutputType(RenderContext.PDF);\r\nConversionContext conversionContext = new DefaultConversionContext(pageContext);\r\nString html = xhtmlContent.convertStorageToView(content, conversionContext)\r\n{code}\r\nSince the built-in PDF exporter also needs to handle the CDN links specifically I was wondering if it wouldn't make sense to simply disable CDN integration when rendering content in this or related output modes. Another option could be a property in the conversion context or a thread local.\r\n\r\nWhat do you think?\r\n\r\nThanks!",
      "summary": "Confluence 7.0 EAP feedback wrt. effects of CDN integration on content exports"
    }
  },
  {
    "key": "CONFSERVER-58645",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-30T07:12:51.000+0000",
      "description": "h3. Issue Summary\r\nCreating multiple Jira issues in a table that has merged row fails to create 'Jira Issue Link'\r\n\r\nh3. Environment\r\n* Application link (tested in Jira 8.2.0 & Confluence 6.15.1)\r\n\r\nh3. Steps to Reproduce \r\n(A short video has been attached)\r\n# Create a page with a table of 4 rows\r\n# Enter texts in a non-merged row:\r\n# Merge any one row and save the page\r\n# Double-click on the text and select to add 'Jira Issue'\r\n# Click on 'Create multiple issues from table'\r\n# Choose the *project* and *issue type*\r\n# Then click 'Create'\r\n\r\nh3. Expected Results\r\n !screenshot-1.png|thumbnail! \r\n\r\nh3. Actual Results\r\n !screenshot-2.png|thumbnail! \r\n\r\nh3. Workaround\r\nRemove/undo merged row and try again.\r\n !screenshot-3.png|thumbnail! ",
      "summary": "Creating multiple Jira issues in a table that has merged row fails to create 'Jira Issue Link'"
    }
  },
  {
    "key": "CONFSERVER-58644",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-30T02:23:42.000+0000",
      "description": "h3. Issue Summary\r\n\r\nExporting a page to PDF on Data Centre (i.e. via sandbox process) will produce a document with unreadable text because of broken encoding.\r\nh3. Environment\r\n\r\nData Center\r\nh3. Steps to Reproduce\r\n # Ensure that appropriate fonts are [installed|https://confluence.atlassian.com/doc/create-a-pdf-in-another-language-175473.html] before exporting to PDF\r\n # Create a page with non-English text\r\n # From the page menu select \"Export to PDF\"\r\n\r\nh3. Expected Results\r\n\r\nA PDF file is produced and all non-English text is readable.\r\nh3. Actual Results\r\n\r\nPDF is produced, but all non-English text is broken. UTF-8 is misinterpreted as Windows-1251 (if on Windows platform) or with other incorrect encodings.\r\n\r\nExample of a broken encoding:\r\n{quote}\u00d0\u2014\u00d0\u00b0\u00d03\u00d03\u20444\u00d0\u00bb\u00d03\u20444\u00d02\u00d03\u20444\u00d0o\r\n \u00d0\u00a2\u00d0\u03bc\u00d0oN\u0303\ufffdN\u0303\u201a \u00d0\u00bf\u00d03\u20444-N\u0303\u20acN\u0303\u0192N\u0303\ufffdN\u0303\ufffd\u00d0o\u00d0 \u0327.\r\n English text.\r\n c\u03273\u20444Z\u030ca\u030a\u203a1\u20442e\u0301\u00a9\u00ace\u0301\u2021\u0152a\u030a...\u00b0a\u030a\u00b7z\u030c\r\n{quote}\r\nThe name of the file contains underscores.\r\nh3. Workaround #1\r\n\r\nUse {{conversion.sandbox.java.options}} system property to propagate encoding setting to the sandbox process.\r\n\r\nFirst, we will have to discover Java propertied for the sandbox process:\r\n # Go to \"Confluence administration\" -> \"Logging and Profiling\" and enable this package in the logging settings: {{com.atlassian.confluence.impl.util.sandbox}} , use INFO level. Press the \"Save\" button at the bottom of the page\r\n # Ensure that no sandbox processes are running. If they do, then kill them\r\n # Export a page to PDF\r\n # Search for the message in the Confluence logs:\r\n {{[impl.util.sandbox.SandboxProcess] start Sandbox 0: Starting sandbox process: ...}}\r\n # Copy and save all the command line parameters that start with {{-D}}\r\n You may remove the {{com.atlassian.confluence.impl.util.sandbox}} logging now.\r\n\r\nNow we overwrite sandbox parameters with what we just found plus encoding:\r\n # [Specify|https://confluence.atlassian.com/doc/configuring-system-properties-168002854.html] {{conversion.sandbox.java.options}} system property for Confluence:\r\n{code:bash}\r\n-Dconversion.sandbox.java.options=<all Java -D options copied from the log, separated by comma>,-Dsun.jnu.encoding=UTF-8,-Dfile.encoding=UTF-8\r\n-Dsun.jnu.encoding=UTF-8\r\n-Dfile.encoding=UTF-8\r\n{code}\r\nExample (your actual parameters may be different):\r\n{code:bash}\r\n-Dconversion.sandbox.java.options=-Dhttp.proxyHost=proxy.example.com,-Dhttp.proxyPort=8080,-Dsun.jnu.encoding=UTF-8,-Dfile.encoding=UTF-8\r\n-Dsun.jnu.encoding=UTF-8\r\n-Dfile.encoding=UTF-8\r\n{code}\r\n # Restart Confluence\r\n\r\n(i) *Caveat:* If you change Confluence networking properties (proxy host, proxy port, etc), then you will have to change the {{conversion.sandbox.java.options}}, as well. The system will not pass Confluence networking properties to the sandbox process if {{conversion.sandbox.java.options}} is specified.\r\n\r\nh3. Workaround #2\r\n\r\n(!) Warning: this workaround will reduce the stability of the node and disable isolation for PDF exports. This is not recommended for a production environment. \r\n Disable sandbox process for PDF export altogether:\r\n # Specify Confluence system property: {{-Dpdf.export.sandbox.disable=true}}\r\n # Restart Confluence",
      "summary": "Exporting a page to PDF via sandbox produces documents with broken encoding"
    }
  },
  {
    "key": "CONFSERVER-58642",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-09-17T22:50:17.000+0000",
      "created": "2019-07-30T00:19:32.000+0000",
      "description": "h3. Issue Summary\r\nConfluence users can subscribe to Team Calendars and get an updated list of events from Confluence in their preferred calendar _app_ as described in [Subscribe to and from Team Calendars|https://confluence.atlassian.com/teamcal/subscribe-to-and-from-team-calendars-273285883.html].\r\nIf users subscribe to a Calendar that has events from a restricted or an inexistent Jira project (see [Add Jira Events|https://confluence.atlassian.com/teamcal/add-jira-events-241566244.html] for further information), then Confluence will throw an error instead of gracefully bypassing events associated to that project.\r\n\r\nh3. Steps to Reproduce\r\n# Install a vanilla instance of Jira Software.\r\n #* This was validated with Jira Software 7.9.2 but should not be tied to a specific Jira version.\r\n# As the Jira administrator, create a sample project.\r\n ## Go to *Projects* > *Create project* > *Create sample data*.\r\n ## Select *Project management* and click on *Next*.\r\n ## Use the following information to create the project: _Name_: {{Test Project}} ; _Key_: {{TSTPRJ}}; _Project Lead_: {{jira administrator}}\r\n# Restrict the _Browse Projects_ permissions just to Jira administrators, removing the permission to any logged user.\r\n# Create a regular Jira user, which is added just to the {{jira-software-users}} group.\r\n #* _username_: {{user001}}\r\n# Install a vanilla instance of Confluence.\r\n #* This was validated with Confluence 6.13.3 but should not be tied to a specific Confluence version.\r\n# [Install Team Calendars|https://confluence.atlassian.com/teamcal/install-team-calendars-241566248.html].\r\n #* This was validated with Team Calendars 6.0.37.\r\n# Create a regular Confluence user, which is added just to the {{confluence-users}} group.\r\n #* _username_: {{user001}}\r\n# Create an application link between Confluence and Jira.\r\n# Create a blank space: _Space Name_: {{Test-Team-Calendars}}; _Space Key_: {{TTC}}\r\n# Go to {{<Confluence Base URL>/display/TTC/calendars}} and add a new calendar.\r\n #* _Name_: {{Test Calendar}}\r\n# Within _Test Calendar_, click on *...* > *Add event*.\r\n #* Select _Event Type_: {{Jira Issue Dates}}; _Name_: {{Test Project Calendar}}; _Display_: {{JQL (advanced)}}; _JQL_: {{project = \"Test Project\"}}; _Show_: {{Issue Created Date}}\r\n #* At this point the events are added and the administrator has visibility to the events in the calendar. \r\n# As {{user001}} access {{<Confluence Base URL>/display/TTC/calendars}} and click on _Subscribe_.\r\n #* Choose _Calendar_: {{Test Calendar}}; _Calendar app_: {{iCal}}\r\n# Copy the _Team Calendars URL_ and paste it in the browser.\r\n\r\nh3. Expected Results\r\nA pop-up is given by the browser so the user can download an _.ics_ file.\r\nConfluence gracefully handles the fact the Jira project is restricted and doesn't include events from this sub-calendar, but still shows events from other sub-calendars.\r\n\r\nh3. Actual Results\r\nConfluence answers with HTTP 500 status and with a {{java.lang.NullPointerException}} to the user.\r\nAn error similar to the below is logged in {{atlassian-confluence.log}}:\r\n{code}\r\n2019-07-29 20:00:19,388 ERROR [http-nio-26133-exec-5] [extra.calendar3.calendarstore.JiraCalendarDataStore] getSubCalendarContentInternal The JQL query for project = \"Change This\" didn't return any results. Try changing the query.\r\n -- url: /c6133/rest/calendar-services/1.0/calendar/export/subcalendar/private/2e98b166a615cf7514ce8aed31452ebe922608bf.ics | traceId: ab23bcd31934a9b9 | userName: user001\r\n2019-07-29 20:00:19,390 ERROR [http-nio-26133-exec-5] [extra.calendar3.calendarstore.CalendarDataStoreCachingDecorator] load Could not load calendar content from cache key\r\n -- url: /c6133/rest/calendar-services/1.0/calendar/export/subcalendar/private/2e98b166a615cf7514ce8aed31452ebe922608bf.ics | traceId: ab23bcd31934a9b9 | userName: user001\r\ncom.atlassian.confluence.extra.calendar3.exception.CalendarException: calendar3.jira.error.jqlwrong.one\r\n\tat com.atlassian.confluence.extra.calendar3.calendarstore.AbstractJiraSubCalendarDataStore.getSubCalendarContentInternal(AbstractJiraSubCalendarDataStore.java:498)\r\n\tat com.atlassian.confluence.extra.calendar3.calendarstore.AbstractJiraSubCalendarDataStore.getSubCalendarContentInternal(AbstractJiraSubCalendarDataStore.java:80)\r\n\tat com.atlassian.confluence.extra.calendar3.calendarstore.ExternalCalendarDataStore.getSubCalendarContent(ExternalCalendarDataStore.java:54)\r\n\tat com.atlassian.confluence.extra.calendar3.calendarstore.CalendarDataStoreCachingDecorator.getSubCalendarContentFromCalendarDataStore(CalendarDataStoreCachingDecorator.java:274)\r\n\tat com.atlassian.confluence.extra.calendar3.calendarstore.CalendarDataStoreCachingDecorator.access$200(CalendarDataStoreCachingDecorator.java:63)\r\n\tat com.atlassian.confluence.extra.calendar3.calendarstore.CalendarDataStoreCachingDecorator$1.load(CalendarDataStoreCachingDecorator.java:93)\r\n\tat com.atlassian.confluence.extra.calendar3.calendarstore.CalendarDataStoreCachingDecorator$1.load(CalendarDataStoreCachingDecorator.java:80)\r\n\tat com.atlassian.cache.ehcache.LoadingCache.getFromLoader(LoadingCache.java:145)\r\n{code}\r\n\r\nThe user is unable to subscribe to the Calendar.\r\n\r\nh3. Notes\r\nThe same problem occurs if the target project is unrestricted in Jira, but had its name/key changed after the calendar was created in Confluence, invalidating the JQL query.\r\n\r\nh3. Workaround\r\nThere's no straightforward workaround to the _subscribe use case_ and still keep the original data in Confluence.\r\nThe problematic JQL can be determined by the error in Confluence log.\r\nOne of the following options can be used with their possible consequences:\r\n * If the Jira project was renamed, then search for the Calendars pointing to it and update the JQL filter.\r\n * If the Jira project was removed, then search for the event pointing to it and remove it.\r\n * If the Jira project is restricted to certain users, removing it from a _public_ calendar may be an option to certain use cases.\r\n\r\nIf applicable, exporting the calendar to an _.ics_ file as explained in [this KB|https://confluence.atlassian.com/teamcal/export-team-calendars-content-to-other-calendars-240913738.html] still works.\r\n",
      "summary": "Subscribing to Team Calendars in Confluence with events from restricted or inexistent Jira projects might fail"
    }
  },
  {
    "key": "CONFSERVER-58639",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-29T19:24:02.000+0000",
      "description": "I have several CAD groups that are happily using Confluence to document their processes and procedures and would like the Code Macro to support SystemVerilog (and Skill) to further help with their documentation.\r\n\r\nThanks!",
      "summary": "Include SystemVerilog as a Supported Language for the Confluence Code Macro"
    }
  },
  {
    "key": "CONFSERVER-58636",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-29T09:43:38.000+0000",
      "description": "h3. Issue Summary\r\n\r\nInsert markup content is broken when adding special characters\u00a0\r\nh3. Environment\r\n\r\nConfluence 6.15.6\r\nh3. Steps to Reproduce\r\n # Create new Confluence page\r\n # Add insert markup macro, choose Confluence wiki type\r\n # Include following test-cases in the macro body:\r\n\r\n 1) https protocol and path containing normal characters\r\n{noformat}\r\n \r\n[https://test/a]\r\n{noformat}\r\n2) https protocol and path containing special characters\r\n{noformat}\r\n \r\n[https://test/\u00e4]\r\n{noformat}\r\n\r\n3) ftp and path containing normal characters\r\n{noformat}\r\n \r\n[ftp://test/a]\r\n{noformat}\r\n4) \r\n ftp and path containing special characters\r\n{noformat}\r\n \r\n[ftp://test/\u00e4]\r\n {noformat}\r\n5) any other custom protocol name and path containing normal characters\r\n{noformat}\r\n \r\n[random_protocol://test/a]\r\n{noformat}\r\n5) any other custom protocol nam and path containing special characters\r\n{noformat}\r\n \r\n[random_protocol://test/\u00e4]\r\n{noformat}\r\nh3. Expected Results\r\n\r\nAll components are correctly rendered in the preview\r\nh3. Actual Results\r\n\r\nFollowing test cases are not rendered correctly:\r\n{noformat}\r\n[ftp://test/\u00e4]\r\n[random_protocol://test/a]\r\n[random_protocol://test/\u00e4]\r\n{noformat}\r\n!Screenshot_20190729_114241.png|thumbnail!\r\n\r\nh3. Workaround\r\n\r\nRequired, if there is no workaround please state:\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Insert markup content is broken when adding special characters "
    }
  },
  {
    "key": "CONFSERVER-58634",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-25T18:41:21.000+0000",
      "description": "h3. Summary  \r\n\r\n* When importing a space from Cloud to Server, if there are any upper-cased groups, they'll show up with the following message in the Server's space permission\r\n{code}\r\nCase incorrect. Correct case is: <lower-case group name>\r\n{code}\r\n\r\nh3. Environment \r\nN/A\r\n\r\nh3. Steps to Reproduce \r\n# In Confluence Cloud, create an upper-cased group. For example, Confluence-Test\r\n# Add this group in the permissions of a space\r\n## Go to *Space tools >> Permissions*\r\n## Click on the *Edit* button\r\n## Searcj for the group created and save the changes\r\n# Go to the *Content Tools >> Export* tab\r\n## Click on the option *XML* and on the *Next* button\r\n## Click on the *Export* button\r\n## Download the file\r\n# In Confluence Server, go to *General Configuration >> Backup & Restore*\r\n## Under the *Upload a site or space export file* section, click to choose a file\r\n## Click on the *Upload and import* button\r\n# Once the upload completes, access the imported space\r\n# Click on *Space tools >> Permissions*\r\n\r\nh3. Expected Results  \r\n\r\n* The groups will have been imported and, in case there was any with an upper-cased name, convert it to lower-case\r\n\r\nh3. Actual Results \r\n\r\n* Next to the group name, the following message will show up:\r\n{code}\r\nCase incorrect. Correct case is: confluence-test\r\n{code}\r\n\r\nh3. Notes \r\nN/A \r\n\r\nh3. Workaround \r\n* Create the same Cloud groups in Confluence Server, in lower-case, and replace them under the space permissions\r\n* Potential DB resolution (*DB backup first*, after updating the values, a cache cleanup from the UI might be needed): \r\n{code:sql}\r\nUPDATE spacepermissions SET permgroupname = '<correct group name>' WHERE permgroupname = '<incorrect group name>' AND spaceid = <space ID>;\r\n{code}",
      "summary": "Importing a space from Confluence Cloud that has upper-cased groups causes a permissions error message"
    }
  },
  {
    "key": "CONFSERVER-58633",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-25T15:39:25.000+0000",
      "description": "We generally have a process of creating Epics in Jira and linking them to a Confluence page that contains the detailed requirements (i.e. prior to create the Jira tickets for the work). It would be nice to have the ability to have an Excerpt type macro in confluence where you can link the excerpt to a Jira ticket and have that information displayed in the ticket. This would prevent the typical cut-and-paste problems and keeping the data in-sync. While, in principle, I think of this as being linked into the Jira Description field, it may make sense to have it as a separate field. I do realize this poses a problem, because if you have more than one Excerpt linked to a single Jira ticket, what would be the best way to display that information. I would envision it as a page tool, where the most recently updated excerpt is show on the ticket with navigation buttons to swipe through the excerpted segments. Overall, the idea is really to have a Jira ticket that has tight integration to a single Confluence page.\u00a0\u00a0",
      "summary": "Confluence Excerpt That Populates Jira Description"
    }
  },
  {
    "key": "CONFSERVER-58632",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-25T14:29:01.000+0000",
      "description": "h3. Issue Summary\r\n# Using *|\\[* in Wiki Markup previews the Wiki Markup macro in a corrupted manner instead of rendering the macro correctly.\r\n\r\nh3. Steps to Reproduce\r\n# Create a new page, and add a *Markup* from *Insert More content*.\r\n# Type the following, *|\\[*.\r\n# Instead of rendering the *Wiki Markup macro* properly, it just previews the source of the macro.\r\n** ||<ac:structured-macro ac:name=\"unmigrated-wiki-markup\" ac:schema-version=\"1\" ac:macro-id=\"fe0fa06e-af61-4e4a-992f-49590991c434\"><ac:plain-text-body><![CDATA[||[]]></ac:plain-text-body></ac:structured-macro>||\r\n\r\nh3. Expected Results\r\n# The *Wiki Markup macro* is added properly, and the value is previewed inside it.\r\n\r\nh3. Actual Results\r\n# The *Wiki Markup macro*'s source is previewed instead.\r\n\r\nh3. Workaround\r\n# Insert the *Wiki Markup macro* using |\\ followed by anything else.\r\n# Or insert the *Wiki Markup macro* by add something else before, *|\\[*.",
      "summary": "Using \"|\\[\" in Wiki Markup previews the Wiki Markup macro in a corrupted manner"
    }
  },
  {
    "key": "CONFSERVER-58631",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-25T09:40:33.000+0000",
      "description": "h3. Issue Summary\r\n\r\nAfter importing a Space that contains a user created template and a page with the *Create from Template* macro set to it, when pressing the macro button the Create window is displayed blank and no page is created.\r\nh3. Steps to Reproduce\r\n # Create a new Space;\r\n # Create a *User Created Template* via *Space tools* > *Content Tools* > *Templates* > *Create New Template*;\r\n # Create a new page in the space and insert the *Create from Template* macro, choosing the template created in step 2;\r\n # Test the macro by clicking on the \"Create From Template\" button - A new page is created from the template;\r\n # Export the space to XML via *Space tools* > *Content Tools* > *Export*;\r\n # Delete the Space via *Space tools* > *Overview* > *Delete Space*;\r\n # Import the Space via *Admin* > *Backup & Restore*;\r\n # Open the Space's page created in step 3 and click on the \"Create From Template\" button.\r\n\r\nh3. Expected Results\r\n\r\nA new page is created from the template, like in step 4 above.\r\nh3. Actual Results\r\n\r\nThe *Create* window is displayed blank. Clicking on *Next* does nothing and the only option is to click on *Close*. See image below.\r\n !CreateFromTemplate - 01 - AfterImport.png|thumbnail!\r\nh3. Workaround\r\n\r\nEdit the page with the *Create from Template* macro, select the macro and click on *Edit*, and re-select the user template in the *Edit \u2018Create from template\u2019 Macro* window.",
      "summary": "Create from Template macro, set to a user created space template, does not work after Space import"
    }
  },
  {
    "key": "CONFSERVER-58629",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-25T03:03:39.000+0000",
      "description": "To allow mail throttling (limiting number of emails sent per minute), to be configured in the Mail Server.\r\n\r\nThis is to prevent the following error:\r\n{code}\r\n421 4.3.2 Service not active [XXXXXXXXXXXXXXXXX.xxxx01.prod.outlook.com]\r\n{code}\r\n* https://campus.barracuda.com/product/emailsecuritygateway/knowledgebase/501600000013uWLAAY/how-do-i-troubleshoot-421-4-3-2-the-maximum-number-of-concurrent-connections-has-exceeded-a-limit-closing-transmission-channel/",
      "summary": "Allow mail throttling (limiting number of emails sent per minute) "
    }
  },
  {
    "key": "CONFSERVER-58628",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-09-29T04:18:13.000+0000",
      "created": "2019-07-25T01:36:01.000+0000",
      "description": "I am experiencing the same problem with SERVER as others have reported in CLOUD:\u00a0https://jira.atlassian.com/browse/CONFCLOUD-62589\r\n\r\nCLOUD has been apparently fixed ... is this also available in SERVER?\u00a0 If so as of what version?\r\n\r\nIf not yet, when?\r\n\r\n\u00a0",
      "summary": "Following a link to an anchor within another page doesn't scroll at all after getting to the other page"
    }
  },
  {
    "key": "CONFSERVER-58627",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-25T01:08:31.000+0000",
      "description": "[https://github.com/FasterXML/jackson-databind/issues/2334]\r\n\r\n\u00a0\r\n\r\nhow to fix issue?just replace old file to\u00a0Jackson-databind-2.9.9.1.jar is ok?\r\n\r\n\u00a0\r\n\r\nconfluence version:6.15.2",
      "summary": "Jackson CVE-2019-12384 how to fix confluence"
    }
  },
  {
    "key": "CONFSERVER-58626",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-24T20:54:52.000+0000",
      "description": "h5. Problem Definition\r\nCurrently, Confluence only has 1 session timeout for all of its users\r\n\r\nh5. Suggested Solution\r\nAdd a configuration in the UI to set a timeout based on a user's group membership, IP range, on top of the general session timeout.",
      "summary": "Allow multiple session timeouts"
    }
  },
  {
    "key": "CONFSERVER-58625",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-24T19:20:18.000+0000",
      "description": "Currently, in order to subscribe to an iCal style calendar, such as a Team Calendars calendar on a different Confluence instance, you are required to use a username and password when you subscribe to the calendar. It would be beneficial to be able to leverage SAML for this authentication rather than forcing the use of a username and password. There may be instances where the specific SAML implementation doesn't make it possible to use a static username and password for the authentication.",
      "summary": "Add SAML support to Team Calendars for subscribing to calendars"
    }
  },
  {
    "key": "CONFSERVER-58624",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-24T13:42:14.000+0000",
      "description": "h5. Current State\r\n\r\nCurrently when an attachment has multiple versions, all the versions *except* the latest version have *fixed* preview URL links. \r\n\r\nThese links can be obtained by:\r\n# Clicking on an attachment until it is opened in Preview Mode.\r\n# When an attachment is in this mode, you can copy the link from the browser's URL field. \r\n\r\nAs mentioned, these links are fixed for each version of an attachment except the latest version. For most of the versions, this allows users to have a constant link to refer to a particular version. This link can be shared to other users which allows those users to directly view the attachment in Preview mode. This is not the case, however, for the latest attachment version. This version will always be referred to by a temporary URL link. Which means, whenever there is a newer version, that version will take over this URL link. When this happens, the now second to latest version, will only now be assigned a fixed URL.\r\n\r\nh5. What is required \r\nThe feature that is required here is to have a feature that generates fixed URL links for all versions of attachments so that this link can be used, shared to other users. When these users click on these links, they will be automatically shown the attachment in Preview mode.\r\n\r\n\u00a0",
      "summary": "Provide a feature to generated fixed preview URL links for all attachment versions"
    }
  },
  {
    "key": "CONFSERVER-58623",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-24T09:11:53.000+0000",
      "description": "Would it be please possible to enable quick search in the Team Calendars' Events?",
      "summary": "Team Calendars - enable search in the events"
    }
  },
  {
    "key": "CONFSERVER-58622",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-24T06:43:29.000+0000",
      "description": "{panel:bgColor=#e7f4fa}\r\n  *NOTE:* This suggestion is for *Confluence Server* including *Confluence Data Center* and only specifically Aurora Serverless. Are you looking for Aurora non-serverless? [See the corresponding suggestion|https://jira.atlassian.com/browse/CONFSERVER-36248].\r\n  {panel}\r\n\r\nAmazon has developed a MySQL compatible serverless database server, [Aurora|http://aws.amazon.com/rds/aurora/], that is available for use as part of AWS. As there are many instances of Confluence installed in AWS, Aurora serverless support should be added into Confluence. According to Amazon information, Aurora is designed to be compatible with MySQL and postgresql, so that existing applications and tools can run without requiring modification.",
      "summary": "Add Support for Aurora Serverless Databases on AWS"
    }
  },
  {
    "key": "CONFSERVER-58621",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-23T15:30:02.000+0000",
      "description": "h3. Issue Summary\r\n\r\nWhile accessing Unsynced from Directory under User Management, it takes around 16+ minutes to load the results.\r\nh3. Environment\r\n\r\nConfluence 6.13.6\r\n MySQL 5.6.37\r\nh3. Steps to Reproduce\r\n # Go to\u00a0  !https://confluence.atlassian.com/support/files/790796813/947856965/1/1522298459209/cog-new.png|width=16! \u00a0\u00a0\u00a0**\u00a0>\u00a0*General Configuration*\u00a0> *Users*\r\n # Click on Unsynced from Directory\r\n # The page would take over 16+ minutes to load the first 10 sets of users on Page 1\r\n # Upon clicking page 2 in order to load another set of 10 users it would again take around 16+ minutes\r\n\r\nh3. Expected Results\r\n\r\nUpon clicking Unsynced from Directory tab the results should show up sooner.\r\nh3. Actual Results\r\n\r\nUpon clicking Unsynced from Directory tab it's taking around 16 minutes to fetch the results\r\nh3. Notes\r\n\r\nSQL logging was enabled through Logging & Profiling and clicking Unsynced from Directory tab would result in firing the below SQL Query which will be captured in {{atlassian-confluence.log}}\r\n{code:sql}\r\nselect confluence0_.user_key as user_key1_58_, confluence0_.username as username2_58_, confluence0_.lower_username as lower_us3_58_ from user_mapping confluence0_ where confluence0_.user_key<>confluence0_.username and (confluence0_.user_key<>confluence0_.lower_username and not (exists (select 1 from cwd_user internalus1_ where confluence0_.username=internalus1_.user_name)) or confluence0_.lower_username is null) order by confluence0_.username asc\r\n{code}\r\nUpon further research come across an article for\u00a0[MySQL\u00a0|https://dev.mysql.com/doc/refman/5.7/en/order-by-optimization.html#order-by-filesort]which basically tells us\u00a0that the filesort is kind of a last resort for the expensive \"order by\" query.\r\nh3. Workaround\r\n\r\nHide the Unsynced from Directory tab from the User Management Screen by adding the following script under  !https://confluence.atlassian.com/support/files/790796813/947856965/1/1522298459209/cog-new.png|width=16! \u00a0\u00a0\u00a0*>\u00a0General Configuration >\u00a0Custome HTML and then insert the script within *At the End of the Body* section.\r\n{code:java}\r\n<script>\r\n AJS.toInit(function(){\r\n    AJS.$('#unsynced-tab-link').parent().hide();\r\n });\r\n</script>\r\n{code}",
      "summary": "Unsynced from Directory tab takes too long to load"
    }
  },
  {
    "key": "CONFSERVER-58620",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-23T15:20:28.000+0000",
      "description": "h3. Problem Definition\r\nFilename for drafts include a version number that we want to maintain, but want to have Confluence also maintain a version history when uploading.\r\n\r\nh3. Suggested Solution\r\nWhen uploading a file with different filename, allow option to select existing file that it matches with to maintain version history. \r\n\r\nh3. Workaround.\r\n# Insert the file into your page by following [Display Files and Images|https://confluence.atlassian.com/conf68/display-files-and-images-947170479.html]\r\n# Preview the file by clicking on the file thumbnail or link on the page.\r\n# When previewing the file, in the top right there is an \"Upload New Version\" !https://confluence.atlassian.com/conf68/files/947170491/947170495/1/1521520378048/Upload-New-File-Version.png!\r\n# After the new version is uploaded, a pop-up will appear providing the option to add additional comments on what changes were made.",
      "summary": "As a user, I want to upload new versions of a file with a different filename and still maintain version history"
    }
  },
  {
    "key": "CONFSERVER-58619",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-02-03T02:04:27.000+0000",
      "created": "2019-07-23T14:35:11.000+0000",
      "description": "h3. Issue Summary\r\n\r\nDuplicated Companion App autostart entries on the Windows startup programs list may occasionally stop the Companion App from starting properly after system start-up. Companion App still works and can be manually started afterwards.\r\n\r\nWhat causes the duplicated startup entries to appear is still unknown, and disabling the automatic start from the Companion App settings does not remove the startup entry, although the Windows Registry still lists a single entry for the Companion App.\r\nh3. Steps to Reproduce\r\n # Simply start up the system with the Companion App automatic start configured in the application itself\r\n\r\nh3. Expected Results\r\n\r\nCompanion App would start normally.\r\nh3. Actual Results\r\n\r\nDue to the nature of this issue, it will only appear when the startup entry for the Companion App was duplicated somehow, with root causes that are still unknown. If the current machine is affected by this issue, it will yield the following results:\r\n * Starting the system will yield an error related to starting the Companion App\r\n * Companion App will not start automatically, but can be started manually\r\n * Checking the startup programs menu, there are two entries for the Companion App, but disabling the automatic start from the App itself will not remove the second entry\r\n\r\nh3. Workaround\r\n\r\nSince the second autostart entry was added to Windows by mistake, it's possible to identify it and disable it manually, to prevent the issue from happening:\r\n # Disable the Companion App's \"Launch on Startup\" option\r\n # Open the system's autostart list, and Disable (right click > \"Disable\") the remaining autostart entry for the Companion App\r\n # Enable \"Launch on Startup\" again, which will add the second (working) autostart entry\r\n\r\n\u00a0\r\n\r\n!companion_deactivated.png!",
      "summary": "Companion App occasionally does not start due to duplicated autostart entries"
    }
  },
  {
    "key": "CONFSERVER-58618",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-23T14:30:27.000+0000",
      "description": "For Jira, there is a config.sh script to set up things like https and custom keystores.\u00a0 This does not exist on Confluence and would be immensely helpful.\u00a0 Either that, or build into the initial configuration process to configure for https.\u00a0 Having to manually alter multiple .xml files is leading to confusion and failure.",
      "summary": "Add config.sh"
    }
  },
  {
    "key": "CONFSERVER-58617",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-23T14:25:01.000+0000",
      "description": "h4. Issue summary\r\n# When we create a page with diaeresis, or umlaut, like \u00e4 for example, although they are sorted alphabetically in the Page Tree, they appear at the bottom in the Page Index macro.\r\n# If that's the first character of the Page title, it does not appear in the Page Index macro at all.\r\n\r\nh4. Steps to replicate\r\n# Create pages called, Abc, Acc, and A\u00e4c, and \u00e4bc in a Space.\r\n# Add the *Page Index* macro in any page in the Space.\r\n# The A\u00e4c page will be under the Abc and Acc page.\r\n# The \u00e4bc will not be in the list of pages at all.\r\n\r\nh4. Current behavior\r\n# Diaeresis, or umlaut not sorted properly, or not at all,  in the Page Index macro.\r\n\r\nh4. Current behavior\r\n# Diaeresis, or umlaut should be listed and should be listed alphabetically in the Index macro, just like the Page Tree.\r\n\r\nh4. Workaround\r\n# None ",
      "summary": "Page Index macro does not sort diaeresis and umlaut alphabetically"
    }
  },
  {
    "key": "CONFSERVER-58616",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-23T07:34:46.000+0000",
      "description": "Currently anyone that can view a space can perform actions on the calendar view of that space including:\r\n * Adding a new calendar\r\n * Importing an existing calendar\r\n\r\nIt seems problematic that if a user can only view content in a space, that they are able to modify the calendar view. On the other hand, there is no specific \"add/edit calendar\" permission in a space like there is for pages, blogs, comments and attachments. So it is unclear how this will work. One suggestion might be that only space administrators could add or import calendars but that is changing how team calendars works. Another might be that it should follow the \"add/edit pages\" permission.\r\n\r\nIn addition to that, users can currently create calendars and associate those calendars with spaces that they may only have view permissions on. Again, a suggestion might be to only allow this for space administrators as there is no \"add/edit calendar\" permission in a space. Or perhaps it should check against the \"add/edit pages\" permission instead.",
      "summary": "Team Calendars should take space edit permissions into account"
    }
  },
  {
    "key": "CONFSERVER-58614",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-22T08:59:57.000+0000",
      "description": "h3. Issue Summary\r\n\r\nSince then file attachment (except image files like png, jpg) upload causes an issue where the attachment is always embedded within the View File Macro which results in an error while saving a page. This is seen after upgrading Confluence from 6.6.8 to 6.13.6\r\n\r\nh3. Steps to Reproduce\r\n\r\n# Create a new Page\r\n# Initiate attachment upload of a PDF or an Office document from the UI option at the top or Drag n Drop\r\n# We cans see that the attachment is already embedded within the view file macro\r\n !Screen Shot 2019-07-21 at 3.14.46 PM.png|thumbnail! \r\n# Upon saving the page, we see an error as below:\r\n  !Screen Shot 2019-07-21 at 3.12.01 PM.png|thumbnail! \r\nh3. Expected Results\r\n\r\nAttachment to be uploaded without view file macros interference or render the attachment upon page load without any errors\r\n\r\nh3. Actual Results\r\n\r\nThe below exception is thrown in the atlassian-confluence.log file:\r\n{noformat}\r\njava.lang.IllegalArgumentException: Can't convert an attachment data stream that is not FileWrapper\r\n\tat com.atlassian.confluence.plugins.conversion.impl.LocalFileSystemConversionResultSupplier.performConversionInSandbox(LocalFileSystemConversionResultSupplier.java:312)\r\n\tat com.atlassian.confluence.plugins.conversion.impl.LocalFileSystemConversionResultSupplier.getConversionResult(LocalFileSystemConversionResultSupplier.java:185)\r\n\tat com.atlassian.confluence.plugins.conversion.impl.DefaultConversionManager.getConversionResult(DefaultConversionManager.java:213)\r\n\tat sun.reflect.GeneratedMethodAccessor1922.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:333)\r\n{noformat}\r\nh3. Cause\r\nYou are running Data Center and storing attachments in DB, then PDF and MS Office documents conversion will fail (hence the broken previews). It is because all conversions for DC are performed in a sandbox.\r\nh3. Workaround\r\n * Migrate the attachment storage from DB to disk:\u00a0[Attachment Storage Configuration|https://confluence.atlassian.com/conf613/attachment-storage-configuration-964961342.html]. The DB storage is deprecated for a long time and strongly discouraged.\r\n * In addition, File View macros are\u00a0[deprecated for 6.13|https://confluence.atlassian.com/doc/end-of-support-announcements-for-confluence-210239673.html#EndofSupportAnnouncementsforConfluence-features201511]. They will be reintroduced in 7.0, but most likely with a different implementation.\r\n * Disable sandbox feature. This will avoid sandbox document conversions while generating previews. However, This solution is not recommended because it will reduce the stability and security of the data center.",
      "summary": "PDF and Office Documents fails during preview"
    }
  },
  {
    "key": "CONFSERVER-58611",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-19T20:22:20.000+0000",
      "description": "h1. The scenario\r\n\r\nI recently was making a template for our quarterly meetings.\r\n\r\nI was copy pasting from a page that already existed that we made as we went and intended to turn into a template.\r\n\r\nWe had a screenshot of our initial portfolio plan for the quarter in it and I wanted to keep that photo in the template to serve as an example when creating the next meeting note page like this one.\r\n\r\nSo I copy pasted my old page, removed content that wasn't the base, added instructional text in spots, and hit save.\u00a0 It looked like it saved just fine at first glance, however when I went to go look at it the next day the template was no where to be found. Not in the space templates, not in global templates, not in drafts, it was nowhere.\r\n\r\nSo I went to recreate it and this time after hitting saved looked for it in the template list to see it was missing. So I hit back so I could not lose my work this time and in a new tab made a simple test template. It saved correctly so I slowly added pieces of my template hitting save along the way till I found that as soon as the picture was added any changes made with adding the picture (presumably any other attachment as well, this is untested) are note saved when you hit save, they just disappear.\r\nh1. How to recreate\r\n * Create a template in a space or global confluence\r\n * Copy paste in a screenshot of something (or other image, I only tested copy paste)\r\n * Hit Save\r\n * Find that the template is missing from template list.\r\n\r\nOr edit an existing template, add a picture, hit save, then view the template and note the missing picture.\r\nh1. The suggestion\r\n\r\nIt would be nice to be able to have images in templates, especially for example purposes or other possibilities like a company logo or something.\r\n\r\nHowever, I could see how maybe templates are simply not meant to have attachments in them, in which case, at least a in confluence warning should pop up informing the user that their template can't be saved with an attachment.\r\n\r\nMaybe even give the option to remove attachments and save with one button on templates.\r\n\r\nThank you,\r\n\r\n-JJ\r\n\r\n\u00a0",
      "summary": "Allow Images in Templates (Or notify of restriction)"
    }
  },
  {
    "key": "CONFSERVER-58610",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-19T18:43:27.000+0000",
      "description": "Would it be please possible for the Confluence Team Calendars to automatically refresh to highlight the current day when they are left in a tab overnight?",
      "summary": "Confluence Calendars - Automatic Refresh of the Today "
    }
  },
  {
    "key": "CONFSERVER-58609",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-19T15:01:45.000+0000",
      "description": "h4. Problem statement\r\n\r\nThere are instances where a Space is accidentally removed from Confluence without the administrator knowing that this action is irreversible. This is mentioned on [Can I restore a recently deleted page or space?|https://confluence.atlassian.com/confkb/can-i-restore-a-recently-deleted-page-or-space-180295253.html].\r\n\r\nThe only way to restore the Space again would be to use an external site/space XML backup, or a DB dump, which is a cumbersome process just for a single space to be restored to Confluence again.\r\n\r\nh4. Suggestion\r\n\r\nSimilar to deleted Pages, allow deleted Spaces to have its own \"trash\" in the administration console where an administrator can restore/recover.\r\n\r\nh4. Workaround\r\n\r\nRestore the most recent backup on a non-Production environment, export the deleted Space and restore it the affected environment (Production, QA etc).",
      "summary": "Allow administrators to recover deleted spaces"
    }
  },
  {
    "key": "CONFSERVER-58607",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-10-15T05:28:40.000+0000",
      "created": "2019-07-19T12:46:22.000+0000",
      "description": "h3. Summary  \r\n\r\nIt is missing the translation of a sentence when you hover over the *Share* button in a Confluence page or blog post.\r\n\r\nh3. Steps to Reproduce \r\n# Go to your profile settings\r\n# Click on the *Edit* button\r\n# Change the language to *any language* and save the changes\r\n# Go to any Confluence page/blog post\r\n# Hover your cursor over the *Share button* option, on the top of the page/blog post\r\n\r\nh3. Expected Results  \r\n* The translation of the \"Share this page with others (sou k)\" sentence is shown\r\n\r\nh3. Actual Results \r\n* The tooltip is showing in English instead\r\n* Example the issue in French\r\n !Screen Shot 2019-07-19 at 09.34.40.png|thumbnail! \r\n\r\nh3. Notes \r\nWhen having the {{i18ntranslate=on}}, we can see that it has the following keys:\r\n* share.button.tooltip2.page\r\n* share.button.tooltip2\r\n\r\nWhich have been correctly set in the French JAR file:\r\n{{confluence-language-pack-fr_FR-6.15.0.rc1-20190311231818}}\r\n !screenshot-2.png|thumbnail! \r\n\r\n !screenshot-1.png|thumbnail! \r\n\r\nh3. Workaround \r\nN/A",
      "summary": "Hovering over the Share button doesn't show the correct translation to any language set"
    }
  },
  {
    "key": "CONFSERVER-58606",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-03-26T23:30:37.000+0000",
      "created": "2019-07-19T12:35:27.000+0000",
      "description": "h3. Issue Summary\r\nWhen the primary applink of JIRA is not responsive, it is impossible to add a JIRA pie chart macro on the page. The macro popup window will disappear instantly with no error message on the UR, but with the following JS error in the console: \r\n{noformat}\r\nbatch.js?locale=en-US:326 Uncaught SyntaxError: Unexpected token < in JSON at position 0\r\n    at JSON.parse (<anonymous>)\r\n    at Object.error (batch.js?build-number=7201&confluence.table.resizable=true&confluence.view.edit.transition=true&is-server-instance=true&locale=en-US:4211)\r\n    at k (batch.js?locale=en-US:195)\r\n    at Object.fireWith [as rejectWith] (batch.js?locale=en-US:196)\r\n    at c (batch.js?locale=en-US:321)\r\n    at b (batch.js?locale=en-US:333)\r\n    at Object.send (batch.js?locale=en-US:333)\r\n    at Function.ajax (batch.js?locale=en-US:326)\r\n    at Object.makeRequest (batch.js?build-number=7201&confluence.table.resizable=true&confluence.view.edit.transition=true&is-server-instance=true&locale=en-US:3883)\r\n    at Object.d [as populateStatType] (batch.js?build-number=7201&confluence.table.resizable=true&confluence.view.edit.transition=true&is-server-instance=true&locale=en-US:4211)\r\nerror @ batch.js?build-number=7201&confluence.table.resizable=true&confluence.view.edit.transition=true&is-server-instance=true&locale=en-US:4211\r\nk @ batch.js?locale=en-US:195\r\n{noformat}\r\n\r\nh3. Steps to Reproduce\r\n# Create 2 JIRA application links on Confluence. \r\n# Stop the JIRA instance of the primary applink\r\n# Open a page and try to add a pie chart macro\r\n\r\nh3. Expected Results\r\nThe macro popup window should show with the list of available JIRA server.\r\n\r\nh3. Actual Results\r\nThe popup window closes immediately without any error message as well as access the JIRA pie chart via the JIRA issue macro. \r\n\r\nh3. Notes\r\nApparently, if the user has not yet created the JIRA Oauth Token on the primary JIRA instance, we will encounter the same issue.\r\n\r\nh3. Workaround\r\n* Remove the unresponsive JIRA instance from the primary applink.\r\n* In case the JIRA instance is reachable, ask the end-user to create JIRA issue macro with the primary JIRA instance to create the Oauth Token before adding the pie chart macro.",
      "summary": "Impossible to add JIRA pie chart macro when the primary applink of JIRA is not reachable or the Oauth token expired"
    }
  },
  {
    "key": "CONFSERVER-58605",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-19T12:13:50.000+0000",
      "description": "h3. Issue Summary\r\n\r\nMoving a page to a new space fails with no warnings to the user in the UI.\r\n The URL might even show the {{moved=true}} statement, but the page remains in the same old space, under the same parent page.\r\n\r\nChecking the {{atlassian-confluence.log}}, the following entries show the move page action failed and was rolled back on the Hibernate level.\r\n{code:java}\r\n2019-07-03 02:12:49,177 ERROR [http-nio-8101-exec-82 url:/pages/movepage.action username:xxxxxx] [atlassian.confluence.event.ConfluenceEventDispatcher] run There was an exception thrown trying to dispatch event [com.atlassian.confluence.event.events.content.page.PageMoveEvent@3a567e65[theMover=ConfluenceUserImpl{name='xxxxxx', key=yyyyyyyyyy},oldSpace=Space{key='OLDSPACEKEY'},oldParentPage=page: OLD_PARENT_PAGE (111111111),oldPosition=3,movedBecauseOfParent=false,movedPageList=[page: MOVED_PAGE (1111111)],page=page: MOVED_PAGE (1111111),suppressNotifications=false,timestamp=1562091168004]] from the invoker [com.atlassian.confluence.event.ConfluenceListenerHandlersConfiguration$TimingListenerHandler$1$1@15eb0a15]\r\n -- referer: https://confluence/pages/viewpage.action?pageId=111111 | url: /pages/movepage.action | traceId: 4cb0685c76abd0f3 | userName: xxxxxx | action: movepage\r\njava.lang.RuntimeException: Listener: com.atlassian.confluence.links.RelatedContentRefactoringListener event: com.atlassian.confluence.event.events.content.page.PageMoveEvent\r\n\tat com.atlassian.event.internal.SingleParameterMethodListenerInvoker.invoke(SingleParameterMethodListenerInvoker.java:50)\r\n\tat com.atlassian.confluence.event.ConfluenceListenerHandlersConfiguration$TimingListenerHandler$1$1.invoke(ConfluenceListenerHandlersConfiguration.java:69)\r\n\tat com.atlassian.confluence.event.ConfluenceEventDispatcher$VCacheRequestContextRunnableFactory$1.lambda$run$0(ConfluenceEventDispatcher.java:93)\r\n\tat com.atlassian.confluence.vcache.VCacheRequestContextOperations.lambda$doInRequestContext$0(VCacheRequestContextOperations.java:50)\r\n\tat com.atlassian.confluence.impl.vcache.VCacheRequestContextManager.doInRequestContextInternal(VCacheRequestContextManager.java:87)\r\n\tat com.atlassian.confluence.impl.vcache.VCacheRequestContextManager.doInRequestContext(VCacheRequestContextManager.java:71)\r\n\tat com.atlassian.confluence.vcache.VCacheRequestContextOperations.doInRequestContext(VCacheRequestContextOperations.java:49)\r\n\tat com.atlassian.confluence.event.ConfluenceEventDispatcher$VCacheRequestContextRunnableFactory$1.run(ConfluenceEventDispatcher.java:93)\r\n\tat com.google.common.util.concurrent.MoreExecutors$DirectExecutor.execute(MoreExecutors.java:457)\r\n\tat com.atlassian.event.internal.AsynchronousAbleEventDispatcher.dispatch(AsynchronousAbleEventDispatcher.java:88)\r\n\tat com.atlassian.event.internal.EventPublisherImpl.invokeListeners(EventPublisherImpl.java:203)\r\n\tat com.atlassian.event.internal.EventPublisherImpl.publish(EventPublisherImpl.java:114)\r\n\tat com.atlassian.confluence.event.TimingEventPublisher.publish(TimingEventPublisher.java:64)\r\n\tat com.atlassian.confluence.pages.DefaultPageManager.publishPageMoveEvents(DefaultPageManager.java:1680)\r\n\tat com.atlassian.confluence.pages.DefaultPageManager.movePageToTopLevel(DefaultPageManager.java:884)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:302)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:281)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat com.atlassian.spring.interceptors.SpringProfilingInterceptor.invoke(SpringProfilingInterceptor.java:16)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat com.atlassian.confluence.util.profiling.ConfluenceMonitoringMethodInterceptor.invoke(ConfluenceMonitoringMethodInterceptor.java:34)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:208)\r\n\tat com.sun.proxy.$Proxy105.movePageToTopLevel(Unknown Source)\r\n\tat com.atlassian.confluence.content.service.page.MovePageToTopOfSpaceCommand.executeInternal(MovePageToTopOfSpaceCommand.java:44)\r\n\tat com.atlassian.confluence.core.service.AbstractServiceCommand$ServiceCommandState$2.execute(AbstractServiceCommand.java:148)\r\n\tat com.atlassian.confluence.core.service.AbstractServiceCommand.execute(AbstractServiceCommand.java:60)\r\n\tat sun.reflect.GeneratedMethodAccessor3816.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:302)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:281)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:208)\r\n\tat com.sun.proxy.$Proxy2837.execute(Unknown Source)\r\n\tat com.atlassian.confluence.core.service.CommandActionHelper.execute(CommandActionHelper.java:32)\r\n\tat com.atlassian.confluence.pages.actions.AbstractCommandAction.execute(AbstractCommandAction.java:28)\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:168)\r\n(...)\r\nCaused by: java.lang.NullPointerException\r\n\tat java.util.Calendar.setTime(Calendar.java:1770)\r\n\tat com.atlassian.confluence.pages.BlogPost.getPostingCalendarDate(BlogPost.java:134)\r\n\tat com.atlassian.confluence.content.render.xhtml.links.XhtmlOutgoingLinksExtractor$ContentEntityResourceHandler.getDestination(XhtmlOutgoingLinksExtractor.java:276)\r\n\tat com.atlassian.confluence.content.render.xhtml.links.XhtmlOutgoingLinksExtractor$ContentEntityResourceHandler.getDestination(XhtmlOutgoingLinksExtractor.java:243)\r\n\tat com.atlassian.confluence.content.render.xhtml.links.XhtmlOutgoingLinksExtractor$AttachmentResourceHandler.getDestination(XhtmlOutgoingLinksExtractor.java:342)\r\n\tat com.atlassian.confluence.content.render.xhtml.links.XhtmlOutgoingLinksExtractor$AttachmentResourceHandler.getDestination(XhtmlOutgoingLinksExtractor.java:313)\r\n\tat com.atlassian.confluence.content.render.xhtml.links.XhtmlOutgoingLinksExtractor.createOutgoingLink(XhtmlOutgoingLinksExtractor.java:152)\r\n\tat com.atlassian.confluence.content.render.xhtml.links.XhtmlOutgoingLinksExtractor.extract(XhtmlOutgoingLinksExtractor.java:120)\r\n\tat com.atlassian.confluence.links.DefaultLinkManager.updateOutgoingLinks(DefaultLinkManager.java:228)\r\n\tat sun.reflect.GeneratedMethodAccessor1540.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:302)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:281)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat com.atlassian.spring.interceptors.SpringProfilingInterceptor.invoke(SpringProfilingInterceptor.java:16)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat com.atlassian.confluence.util.profiling.ConfluenceMonitoringMethodInterceptor.invoke(ConfluenceMonitoringMethodInterceptor.java:34)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:208)\r\n\tat com.sun.proxy.$Proxy53.updateOutgoingLinks(Unknown Source)\r\n\tat com.atlassian.confluence.core.DefaultContentEntityManager.saveContentEntity(DefaultContentEntityManager.java:173)\r\n\tat com.atlassian.confluence.pages.DefaultPageManager.saveContentEntity(DefaultPageManager.java:1399)\r\n\tat sun.reflect.GeneratedMethodAccessor1342.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:302)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:281)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat com.atlassian.spring.interceptors.SpringProfilingInterceptor.invoke(SpringProfilingInterceptor.java:16)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat com.atlassian.confluence.util.profiling.ConfluenceMonitoringMethodInterceptor.invoke(ConfluenceMonitoringMethodInterceptor.java:34)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:208)\r\n\tat com.sun.proxy.$Proxy105.saveContentEntity(Unknown Source)\r\n\tat com.atlassian.confluence.links.DefaultRelatedContentRefactorer.persistBodyModificationToContent(DefaultRelatedContentRefactorer.java:255)\r\n\tat com.atlassian.confluence.links.DefaultRelatedContentRefactorer.updateReferrers(DefaultRelatedContentRefactorer.java:110)\r\n\tat com.atlassian.confluence.links.DefaultRelatedContentRefactorer.updateReferrersForMovingPage(DefaultRelatedContentRefactorer.java:39)\r\n\tat com.atlassian.confluence.links.RelatedContentRefactoringListener.handleEvent(RelatedContentRefactoringListener.java:38)\r\n\tat sun.reflect.GeneratedMethodAccessor4427.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat com.atlassian.event.internal.SingleParameterMethodListenerInvoker.invoke(SingleParameterMethodListenerInvoker.java:40)\r\n\t... 427 more\r\n2019-07-03 02:12:51,163 WARN [http-nio-8101-exec-82 url:/pages/movepage.action username:xxxxx] [confluence.impl.hibernate.ConfluenceHibernateTransactionManager] doRollback Performing rollback. Transactions:\r\n  ->[null]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT (Session #1627106864)\r\n -- referer: https://confluence/pages/viewpage.action?pageId=11111111 | url: /pages/movepage.action | traceId: 4cb0685c76abd0f3 | userName: xxxxx | action: movepage\r\n{code}\r\nMoving the page to a new parent within the same space works fine.\r\nh3. Environment\r\n\r\nThe issue occurred on an environment with the following characteristics:\r\n * Confluence Server 6.6.13\r\n * Oracle Database\r\n * The page to be moved has an (internal) incoming link from a Blog post\r\n\r\nh3. Steps to Reproduce\r\n # Create a _Sample Page_ within a _Source Space_.\r\n # Create a Blog post within another Space.\r\n # In the Blog post, add an outgoing link to the _Sample Page_.\r\n # Move the _Sample Page_ from the _Source Space_ to the _Target Space_.\r\n\r\nh3. Expected Results\r\n\r\nThe page is properly moved to the _Target Space_.\r\nh3. Actual Results\r\n\r\nThe page is not moved and no error nor warnings are shown to the user.\r\n\r\nThe below exception is thrown in the {{atlassian-confluence.log}} file:\r\n{code:java}\r\n2019-07-03 02:12:49,177 ERROR [http-nio-8101-exec-82 url:/pages/movepage.action username:xxxxxx] [atlassian.confluence.event.ConfluenceEventDispatcher] run There was an exception thrown trying to dispatch event [com.atlassian.confluence.event.events.content.page.PageMoveEvent@3a567e65[theMover=ConfluenceUserImpl{name='xxxxxx', key=yyyyyyyyyy},oldSpace=Space{key='OLDSPACEKEY'},oldParentPage=page: OLD_PARENT_PAGE (111111111),oldPosition=3,movedBecauseOfParent=false,movedPageList=[page: MOVED_PAGE (1111111)],page=page: MOVED_PAGE (1111111),suppressNotifications=false,timestamp=1562091168004]] from the invoker [com.atlassian.confluence.event.ConfluenceListenerHandlersConfiguration$TimingListenerHandler$1$1@15eb0a15]\r\n -- referer: https://confluence/pages/viewpage.action?pageId=111111 | url: /pages/movepage.action | traceId: 4cb0685c76abd0f3 | userName: xxxxxx | action: movepage\r\njava.lang.RuntimeException: Listener: com.atlassian.confluence.links.RelatedContentRefactoringListener event: com.atlassian.confluence.event.events.content.page.PageMoveEvent\r\n\tat com.atlassian.event.internal.SingleParameterMethodListenerInvoker.invoke(SingleParameterMethodListenerInvoker.java:50)\r\n\tat com.atlassian.confluence.event.ConfluenceListenerHandlersConfiguration$TimingListenerHandler$1$1.invoke(ConfluenceListenerHandlersConfiguration.java:69)\r\n\tat com.atlassian.confluence.event.ConfluenceEventDispatcher$VCacheRequestContextRunnableFactory$1.lambda$run$0(ConfluenceEventDispatcher.java:93)\r\n\tat com.atlassian.confluence.vcache.VCacheRequestContextOperations.lambda$doInRequestContext$0(VCacheRequestContextOperations.java:50)\r\n\tat com.atlassian.confluence.impl.vcache.VCacheRequestContextManager.doInRequestContextInternal(VCacheRequestContextManager.java:87)\r\n\tat com.atlassian.confluence.impl.vcache.VCacheRequestContextManager.doInRequestContext(VCacheRequestContextManager.java:71)\r\n\tat com.atlassian.confluence.vcache.VCacheRequestContextOperations.doInRequestContext(VCacheRequestContextOperations.java:49)\r\n\tat com.atlassian.confluence.event.ConfluenceEventDispatcher$VCacheRequestContextRunnableFactory$1.run(ConfluenceEventDispatcher.java:93)\r\n\tat com.google.common.util.concurrent.MoreExecutors$DirectExecutor.execute(MoreExecutors.java:457)\r\n\tat com.atlassian.event.internal.AsynchronousAbleEventDispatcher.dispatch(AsynchronousAbleEventDispatcher.java:88)\r\n\tat com.atlassian.event.internal.EventPublisherImpl.invokeListeners(EventPublisherImpl.java:203)\r\n\tat com.atlassian.event.internal.EventPublisherImpl.publish(EventPublisherImpl.java:114)\r\n\tat com.atlassian.confluence.event.TimingEventPublisher.publish(TimingEventPublisher.java:64)\r\n\tat com.atlassian.confluence.pages.DefaultPageManager.publishPageMoveEvents(DefaultPageManager.java:1680)\r\n\tat com.atlassian.confluence.pages.DefaultPageManager.movePageToTopLevel(DefaultPageManager.java:884)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:302)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:281)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat com.atlassian.spring.interceptors.SpringProfilingInterceptor.invoke(SpringProfilingInterceptor.java:16)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat com.atlassian.confluence.util.profiling.ConfluenceMonitoringMethodInterceptor.invoke(ConfluenceMonitoringMethodInterceptor.java:34)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:208)\r\n\tat com.sun.proxy.$Proxy105.movePageToTopLevel(Unknown Source)\r\n\tat com.atlassian.confluence.content.service.page.MovePageToTopOfSpaceCommand.executeInternal(MovePageToTopOfSpaceCommand.java:44)\r\n\tat com.atlassian.confluence.core.service.AbstractServiceCommand$ServiceCommandState$2.execute(AbstractServiceCommand.java:148)\r\n\tat com.atlassian.confluence.core.service.AbstractServiceCommand.execute(AbstractServiceCommand.java:60)\r\n\tat sun.reflect.GeneratedMethodAccessor3816.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:302)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:281)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:208)\r\n\tat com.sun.proxy.$Proxy2837.execute(Unknown Source)\r\n\tat com.atlassian.confluence.core.service.CommandActionHelper.execute(CommandActionHelper.java:32)\r\n\tat com.atlassian.confluence.pages.actions.AbstractCommandAction.execute(AbstractCommandAction.java:28)\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:168)\r\n(...)\r\nCaused by: java.lang.NullPointerException\r\n\tat java.util.Calendar.setTime(Calendar.java:1770)\r\n\tat com.atlassian.confluence.pages.BlogPost.getPostingCalendarDate(BlogPost.java:134)\r\n\tat com.atlassian.confluence.content.render.xhtml.links.XhtmlOutgoingLinksExtractor$ContentEntityResourceHandler.getDestination(XhtmlOutgoingLinksExtractor.java:276)\r\n\tat com.atlassian.confluence.content.render.xhtml.links.XhtmlOutgoingLinksExtractor$ContentEntityResourceHandler.getDestination(XhtmlOutgoingLinksExtractor.java:243)\r\n\tat com.atlassian.confluence.content.render.xhtml.links.XhtmlOutgoingLinksExtractor$AttachmentResourceHandler.getDestination(XhtmlOutgoingLinksExtractor.java:342)\r\n\tat com.atlassian.confluence.content.render.xhtml.links.XhtmlOutgoingLinksExtractor$AttachmentResourceHandler.getDestination(XhtmlOutgoingLinksExtractor.java:313)\r\n\tat com.atlassian.confluence.content.render.xhtml.links.XhtmlOutgoingLinksExtractor.createOutgoingLink(XhtmlOutgoingLinksExtractor.java:152)\r\n\tat com.atlassian.confluence.content.render.xhtml.links.XhtmlOutgoingLinksExtractor.extract(XhtmlOutgoingLinksExtractor.java:120)\r\n\tat com.atlassian.confluence.links.DefaultLinkManager.updateOutgoingLinks(DefaultLinkManager.java:228)\r\n\tat sun.reflect.GeneratedMethodAccessor1540.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:302)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:281)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat com.atlassian.spring.interceptors.SpringProfilingInterceptor.invoke(SpringProfilingInterceptor.java:16)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat com.atlassian.confluence.util.profiling.ConfluenceMonitoringMethodInterceptor.invoke(ConfluenceMonitoringMethodInterceptor.java:34)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:208)\r\n\tat com.sun.proxy.$Proxy53.updateOutgoingLinks(Unknown Source)\r\n\tat com.atlassian.confluence.core.DefaultContentEntityManager.saveContentEntity(DefaultContentEntityManager.java:173)\r\n\tat com.atlassian.confluence.pages.DefaultPageManager.saveContentEntity(DefaultPageManager.java:1399)\r\n\tat sun.reflect.GeneratedMethodAccessor1342.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:302)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:281)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat com.atlassian.spring.interceptors.SpringProfilingInterceptor.invoke(SpringProfilingInterceptor.java:16)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat com.atlassian.confluence.util.profiling.ConfluenceMonitoringMethodInterceptor.invoke(ConfluenceMonitoringMethodInterceptor.java:34)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:208)\r\n\tat com.sun.proxy.$Proxy105.saveContentEntity(Unknown Source)\r\n\tat com.atlassian.confluence.links.DefaultRelatedContentRefactorer.persistBodyModificationToContent(DefaultRelatedContentRefactorer.java:255)\r\n\tat com.atlassian.confluence.links.DefaultRelatedContentRefactorer.updateReferrers(DefaultRelatedContentRefactorer.java:110)\r\n\tat com.atlassian.confluence.links.DefaultRelatedContentRefactorer.updateReferrersForMovingPage(DefaultRelatedContentRefactorer.java:39)\r\n\tat com.atlassian.confluence.links.RelatedContentRefactoringListener.handleEvent(RelatedContentRefactoringListener.java:38)\r\n\tat sun.reflect.GeneratedMethodAccessor4427.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat com.atlassian.event.internal.SingleParameterMethodListenerInvoker.invoke(SingleParameterMethodListenerInvoker.java:40)\r\n\t... 427 more\r\n2019-07-03 02:12:51,163 WARN [http-nio-8101-exec-82 url:/pages/movepage.action username:xxxxx] [confluence.impl.hibernate.ConfluenceHibernateTransactionManager] doRollback Performing rollback. Transactions:\r\n  ->[null]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT (Session #1627106864)\r\n -- referer: https://confluence/pages/viewpage.action?pageId=11111111 | url: /pages/movepage.action | traceId: 4cb0685c76abd0f3 | userName: xxxxx | action: movepage\r\n{code}\r\nh3. Notes\r\n\r\nSo far, the issue could not be reproduced on another environment so we are unsure on what the triggers are.\r\n They will be included to the bug report when identified.\r\n\r\nThe issue occurs on the refactoring task to update the contents of pages with outgoing links to the moved page.\r\n The important marker in the exception stack trace is the following, indicating the issue is related with an outgoing link to the moved page in a Blog Post:\r\n{code:java}\r\nCaused by: java.lang.NullPointerException\r\n\tat java.util.Calendar.setTime(Calendar.java:1770)\r\n\tat com.atlassian.confluence.pages.BlogPost.getPostingCalendarDate(BlogPost.java:134)\r\n{code}\r\n{panel:title=CREATION DATE}\r\n*There is a problem when the blogpost is created. Creating blogpost (using the REST API or the editor), two entries are created on the database, one with CREATIONDATE and other with the CREATIONDATE empty:*\r\n\r\n!Screen Shot 2020-07-13 at 18.34.03.png|width=409,height=137,thumbnail!\r\n\r\n*If the BLOGPOST is edited after, all the entries will have the CREATIONDATE set as expected. So, the problem only happens if a never-edited blogpost is linked to a page and the page is moved also this can affected the pages update in some cases.*\r\n{panel}\r\nh3. Workaround\r\n\r\nThe workaround could be to temporarily remove the outgoing link to the page moved in the Blog Post, move the page and then re-add the link.\r\n You can check the [Page Information|https://confluence.atlassian.com/doc/view-page-information-139408.html] to get the incoming links.\r\n # Run this query on the database:\u00a0\r\n{code:java}\r\nselect * from CONTENT\r\nwhere CONTENTTYPE = 'BLOGPOST' and\r\n CREATIONDATE is null;\r\n{code}\r\n # Add a valid CREATIONDATE for all the entries without a creationdate. A query like the following would work:\r\n{code}\r\nUPDATE CONTENT SET creationdate = '1980-11-03 00:00:00'\r\nWHERE CONTENTTYPE = 'BLOGPOST'\r\nAND CREATIONDATE is null;\r\n{code}\r\n \u00a0",
      "summary": "Moving a page to a new space might fail with no warning to the user because of an issue with an incoming link from a blogpost"
    }
  },
  {
    "key": "CONFSERVER-58604",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-18T19:15:02.000+0000",
      "description": "h2. Recommendation\r\n\r\nWe should include scripts used to capture thread dumps in the product installer we ship. As an admin, having these scripts available at the ready during a performance incident will provide ease of mind and ease of capture, particularly should another staff member be monitoring the instance at any given time.\r\n\r\nWhen the product is unresponsive, the option to capture thread dumps inside of a support zip may not be available through the web interface.\r\nh2. How to Capture Thread Dumps - Linux\r\n * [Generating A Thread Dump|https://confluence.atlassian.com/doc/generating-a-thread-dump-188095.html]\r\n\r\nh4. Manual commands\r\nh6. Option 1 - jstack\r\n{panel}\r\n # First, identify the Process ID for Confluence (referred here as the $CONF_PID) using the command: {{ps aux | grep -i java}}\r\n # Using the $CONF_PID while logged in as the user that runs Confluence, run the following script in the terminal:\r\n{code:java}\r\nfor i in $(seq 6); do top -b -H -p $CONF_PID -n 1 > conf_cpu_usage.`date +%s`.txt; jstack $CONF_PID > conf_threads.`date +%s`.txt; sleep 10; done\r\n{code}\r\n(i) *NOTE*: This will produce 12 text files in the directory from where this was run. If the 'conf_threads' files contain no data, then you will need to provide the *fully qualified path* to the *jstack* binary in the script. For example: If your *jstack* binary exists under /usr/java/bin/jstack , then the script would need to be modified as follows:\r\n{code:java}\r\nfor i in $(seq 6); do top -b -H -p $CONF_PID -n 1 > conf_cpu_usage.`date +%s`.txt; /usr/java/bin/jstack $CONF_PID > conf_threads.`date +%s`.txt; sleep 10; done\r\n{code}\r\n\r\n # Please, make sure to zip and attach all .txt files generated after running the commands (conf_cpu_usage and conf_threads) to the ticket.{panel}\r\nh6. Option 2 - kill -3\r\n{panel}\r\n # First, identify the Process ID for Confluence (referred here as the $CONF_PID) using the command: {{ps aux | grep -i java}}\r\n # Using the $CONF_PID while logged in as the user that runs Confluence, run the following script in the terminal:\r\n{code:java}\r\nfor i in $(seq 6); do top -b -H -p $CONF_PID -n 1 > conf_cpu_usage.`date +%s`.txt; kill -3 $CONF_PID; sleep 10; done\r\n{code}\r\n\r\n # The thread dumps will be placed in your catalina.out file\r\n # Zip the catalina.out and conf_cpu_usage files that are generated and upload to your ticket{panel}\r\nh4. Bash Script\r\n{code:java}\r\n#!/bin/bash\r\n#\r\n# Thread dump script\r\n# Captures one thread dump every 10 seconds, 6 times\r\n# Thus, generating 6 thread dumps over the course of a minute\r\n# Replace \"confluence\" in the APP_NAME declaration below for different products\r\n# This must be run as the same OS user the app runs as\r\n# Include the full path to jstack if it reports the command is not found\r\n# ex: JSTACK_PATH=/opt/java/jdk8u192-b12/bin/jstack\r\n\r\nAPP_NAME=confluence\r\nAPP_PID=`ps aux | grep java | grep $APP_NAME | grep -v grep | awk '{print $2}'`\r\nJSTACK_PATH=jstack\r\n\r\necho \"Please wait 60 seconds for collection to complete\"\r\n\r\nfor i in $(seq 6)\r\n        do\r\n                echo \"Recording thread dump #\" ${i}\r\n                top -b -H -p $APP_PID -n 1 > conf_cpu_usage.`date +%s`.txt\r\n                $JSTACK_PATH $APP_PID > conf_threads.`date +%s`.txt\r\n                sleep 10\r\n                done\r\n\r\necho \"Done\"\r\n{code}\r\nh2. How to Capture Thread Dumps - Windows\r\n # [Download PsExec|https://technet.microsoft.com/en-us/sysinternals/bb897553.aspx] from Sysinternals\r\n # Unzip the *PSTools* directory to a suitable place on your server.\r\n # Open the unzipped *PSTools* folder, hold shift and right-click inside it, then select *Open command window here* (if you don't have the 'Open command window here' option you can run a command prompt as Administrator and navigate to the location of the PSTools folder using the command prompt)\r\n # Identify the PID of the java (tomcat) process using Task Manager > Processes\r\n # At the command prompt type {{psexec -s jstack XXXX > thread_dump_YY.log}} (where XXXX is your PID and YY is the number of the thread dumps taken to append to the name of the log file) then hit enter.\r\n ## If the jstack command is not recognized, you may need to enter the full path such as: {{psexec -s \"C:\\Program Files\\Java\\jdk1.8.0_201\\bin\\jstack.exe\" XXXX > thread_dump_YY.log}}\r\n # You'll need repeat the above 5 or 6 times, about 20 or 30 seconds between each execution, changing the YY each time, for example:\r\n{code:java}\r\npsexec -s jstack 1234 > thread_dump_01.log\r\n-- wait ~10 seconds\r\npsexec -s jstack 1234 > thread_dump_02.log\r\n-- wait ~10 seconds\r\npsexec -s jstack 1234 > thread_dump_03.log\r\n-- wait ~10 seconds\r\npsexec -s jstack 1234 > thread_dump_04.log\r\n-- wait ~10 seconds\r\npsexec -s jstack 1234 > thread_dump_05.log\r\n-- wait ~10 seconds\r\npsexec -s jstack 1234 > thread_dump_06.log\r\n{code}\r\n\r\n # You should now have 6 files named thread_dump_YY.log in the PSTools folder.\r\n\r\n(i) *Note:* If you still have issues with jstack, add the full path of your Java 'bin' directory to the server's system path variable. The Java 'bin' directory is usually in {{Program Files\\Java\\bin\\jdk<version>\\bin}}. If you add this path to the system variable then you will need to restart the command prompt again for the change to be picked up and the {{jstack}} command to work.",
      "summary": "Include script to capture thread dumps in the installer bundle"
    }
  },
  {
    "key": "CONFSERVER-58603",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-11-27T02:05:06.000+0000",
      "created": "2019-07-18T18:51:26.000+0000",
      "description": "Provide support for Support for Oracle Database 19c in Confluence Server. May I know your timeline for adding Oracle 19c DB support to Confluence Server? Our DBA team are to upgrade our database to 19c before end of Jun-2019, as 12c will be end of support by the end of Jun-2019.",
      "summary": "Support for Oracle 19c"
    }
  },
  {
    "key": "CONFSERVER-58602",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-18T18:27:01.000+0000",
      "description": "h3. Problem Definition  \r\n\r\n* The Confluence Mobile app has a few macros which won't work and will redirect you to launch them in the desktop version, as per our [Confluence Mobile|https://confluence.atlassian.com/doc/confluence-mobile-284365706.html] document:\r\n{quote}\r\nNot all macros will display in the app or mobile web. If a macro can't be displayed, you'll see the message below, and have the option to tap through to the desktop version of the page, in your device's browser. \r\n{quote}\r\n\r\nh3. Suggested Solution  \r\n\r\n* Provide a list of the macros which won't be displayed in the Confluence Mobile app.\r\n\r\nh3. Why this is important \r\n\r\n* This is important for users who build their Confluence around the possibility of running it on an app, so they are aware of which macros not to use since this will impact the usability of the app.\r\n\r\nh3. Workaround \r\nN/A",
      "summary": "Provide a list of the macros that won't be displayed in Confluence's Mobile App"
    }
  },
  {
    "key": "CONFSERVER-58601",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-18T18:26:26.000+0000",
      "description": "h4. Issue Summary\r\n\r\nSlow page loading times can result when opening the \"_Recently Worked on_\" page.\r\nh4. Environment\r\n * 6.15.3\r\n * MySQL 5.7\r\n\r\nh4. Steps to Reproduce\r\n\r\nThis problem occurs while opening the \"_Recently Worked on_\" page.\r\nh4. Expected Results\r\n\r\nPage loads within a reasonable amount of time\r\nh4. Actual Results\r\n\r\nThe page loading is slow taking up to 14 seconds\r\nh4. Symptoms\r\n\r\nAside from the slowness observed in the UI, this problem has the following symptoms:\r\n * If a HAR file is captured while loading the page, the following URL call will take quite a bit of time to complete:\r\n{code:java}\r\n<confluence-base-url>/rest/api/content/search?expand=container,metadata.currentuser.lastcontributed,metadata.currentuser.lastmodified{code}\r\n\r\n * If SQL debugging is enabled, the following method call will take the longest to complete while processing the above URL:\r\n{code:java}\r\nContentEntityManager.getVersionsLastEditedByUser()\r\n{code}\r\n\r\n * If thread dumps are taken while loading the page, most threads will reference calls to _com.atlassian.confluence.core.DefaultContentEntityManager.getVersionsLastEditedByUser_.\r\n * While the actual SQL queries execute quickly, most of the processing is taken up within the Hibernate layer.\r\n\r\nh4. Analysis\r\n\r\nThe following Java method was found to be inefficient as it is supposed to retrieve all pages (including drafts) that a specified user edited in the past, but only the latest versions of these documents:\r\n{code:java}\r\ncom.atlassian.confluence.internal.persistence.hibernate.AbstractContentEntityObjectHibernateDao#getVersionsLastEditedByUserNew\r\n{code}\r\nHowever, it retrieves *all* versions of these pages and ends up discarding the majority of the returned records which is most likely causing the delay in rendering the results.\r\nh4. Workaround\r\n\r\nA possible workaround would be to disable the _recently-viewed-plugin_ altogether to prevent these queries from being executed. If this is acceptable, then it's the only way to reduce the load time until proper fix is implemented.\u00a0 Please also see the work around listed in CONFSERVER-57457 as this appears to be related.",
      "summary": "\"Recently Worked on\" page loads slowly"
    }
  },
  {
    "key": "CONFSERVER-58600",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-18T15:07:35.000+0000",
      "description": "h3. Summary\r\n\r\nConfluence should provide a single place where users or administrators can set the time format used for Events in the Team Calendar app.\r\nh3. Current behaviour\r\n\r\nAs mentioned in the [Setting 24 hour format in Team Calendar|https://confluence.atlassian.com/confkb/setting-24-hour-format-in-team-calendar-960163482.html] KB article, currently users have two places where they can configure the time format in Team Calendar:\r\n # Under *Admin* > *General Configuration* > *Team Calendars* and change _Display time format_ - this affects the Events display time in Team Calendar\r\n # Under *User Settings* and changing the *Language* - this affects the time format when creating a new Event\r\n\r\n\u00a0\r\n{panel:bgColor=#ffffe0}\r\n(!) In addition to this, changing the format under *Admin* > *General Configuration* > *Formatting and International Settings* has no effect in Team Calendar. This setting should apply to all date and time representations in Confluence, including Team Calendar and users might consider a bug the fact it has no impact.\r\n{panel}\r\nh3. Desired behaviour\r\n\r\nHave only one place where the time format setting is set and that it affects all time representations in Confluence, including in Team Calendar.\r\n The *Formatting and International Settings* is the most logical place for this.\r\nh3. Short-term workaround\r\n\r\nA descriptive text could be added under *Admin* > *General Configuration* > *Team Calendars* to indicate that the _Display time format_ only changes how the times are displayed for existing events in the Calendar and not how times are displayed when creating a new Event.",
      "summary": "Have a single place for the time format setting for Events in the Team Calendars app"
    }
  },
  {
    "key": "CONFSERVER-58599",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-07-19T06:22:32.000+0000",
      "created": "2019-07-18T12:20:44.000+0000",
      "description": "h3. Issue Summary\r\n\r\nInserting a date into the first cell of the first column in a table prevents the selection of other cells in the same column, this issue happens only in *Firefox,*\u00a0other browsers are not affected like Chrome, IE, Safari.\r\nh3. Environment\r\n * Confluence 6.15.6\r\n * Firefox\u00a068.0 (64-bit) on Windows\r\n\r\nh3. Steps to Reproduce\r\n # Create a table\r\n # Add a date using // in the first cell of the first column\r\n # now all the other cells in the first column are not selectable\r\n\r\nh3. Expected Results\r\n\r\nUser should be able to select all cells in the first column no matter what data is inserted in the header.\r\nh3. Actual Results\r\n\r\nUser can't select any cells in the first column by mouse clicking\r\nh3. Notes\r\n * Viewing the source-code of the page, shows\u00a0contenteditable parameter for <time> tag which is the date value in the first cell is set to \"false\"\r\n * setting the value of the parameter to \"true\" makes the cells selectable in Firefox\r\n\r\nh3. Workaround\r\n\r\nThe only workaround at this moment is to navigate to the desired cell using the arrows keys.",
      "summary": "Dates in table column prevent cell selection in Firefox"
    }
  },
  {
    "key": "CONFSERVER-58597",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-18T05:37:46.000+0000",
      "description": "Hi All,\r\n\r\nInvitation Links would be of significantly more use if we could create them per-group, so users who sign themselves up are automatically joined to the group.\r\n\r\nE.g. we have group \"Northern Members\" that have a certain set of permissions. We want to include an invitation link in all mailouts so Members can sign themselves up. Currently administrators would have to manually add users to groups as they sign up.\r\n\r\nKind Regards,\r\nPeter",
      "summary": "Ability to create group-specific Invitation Links"
    }
  },
  {
    "key": "CONFSERVER-58596",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-17T16:52:08.000+0000",
      "description": "h3. Issue Summary\r\nWhen a long code block is present on a given page, it can cause the right side bar scrolling to break resulting in a blank page in which the content is not visible. \r\n\r\nh3. Environment\r\n* Confluence\r\n* Code Block Macro\r\n\r\nh3. Steps to Reproduce\r\n # Install Confluence\r\n # Add a page and add the attached the storage format via source editor to the page and save. \r\n# Scroll down the page without clickinf the side bar scroller icon\r\n\r\nh3. Expected Results\r\nYou will be able to scroll down the entire page\r\n\r\nh3. Actual Results\r\nHalf of the page gets blank after scrolling through the code and you cannot see towards the bottom of the page\r\n\r\nh3. Notes\r\nThis issue appears related to the length of data include in the code block. \r\n\r\nh3. Workaround\r\n\r\nShorten the amount of data included in the code block.",
      "summary": "Inserting a very long code block can break the page scrolling on a Confluence page, shows as blank"
    }
  },
  {
    "key": "CONFSERVER-58595",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-17T14:21:48.000+0000",
      "description": "Our suggestion is to be able to hover the mouse pointer over a calendar event and see the event's description without having to click the event to see the summary.",
      "summary": "Hover to see calendar event description"
    }
  },
  {
    "key": "CONFSERVER-58594",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-17T03:29:06.000+0000",
      "description": "h3. Issue Summary\r\n\r\nIn Firefox, using the Confluence Editor Find and Replace of say \"30\" with \"30th\" causes the Editor to hang.\r\n\r\nEventually, Firefox allows you to Stop the long loading page and then writes:\r\n\r\n30thththththththth...........\r\n\r\nto the page.\r\n\r\nh3. Environment\r\n\r\nSpecific to Firefox.\r\n\r\nh3. Steps to Reproduce\r\n \r\n# Use Firefox (reproducible on Firefox v67 or v68).\r\n# Create a page that contains the text \"30\".\r\n# Use the Confluence built-in find/replace feature to find \"30\" and replace it with \"30th\".\r\n# Click the \"Replace all\" button.\r\n# The browser/page will hang for a while.\r\n# Firefox will display a yellow banner \"A web page is slowing down your browser. What would you like to do?\" with options \"Stop It\" or \"Wait\".\r\n# Click \"Stop It\"\r\n# The page now has a line that looks like \"30thththththththththththth.....\"\r\n# Continue to edit the page (delete the extra th's and add a new line)\r\n# Click the \"Update\" button to save your changes\r\n# You'll now be greeted with your saved page but it will be blank.\r\n# You can restore your previous version, but the edits you made will have been lost.\r\n\r\nh3. Expected Results\r\n\r\nFind and replace should find the matching text \"30\" and replace all occurrences with \"30th\".\r\n\r\nh3. Actual Results\r\n\r\n# The page now has a line that looks like \"30thththththththththththth.....\"\r\n# Continue to edit the page (delete the extra th's and add a new line)\r\n# Click the \"Update\" button to save your changes\r\n# You'll now be greeted with your saved page but it will be blank.\r\n# You can restore your previous version, but the edits you made will have been lost.\r\n\r\n(i) Other search combinations does work in Firefox, this appears to be specific with Confluence Find <number>, replace <same number><text> in Firefox\r\n\r\ne.g.\r\n\r\nConfluence Find \"30\" with \"30th\" does not work in Firefox (x)\r\nConfluence Find \"test\" with \"testing\" does not work in Firefox (x)\r\nConfluence Find \"30\" with \"40th\" does work in Firefox (/)\r\nConfluence Find \"world\" with \"galaxy\" does work in Firefox (/)\r\n\r\nh3. Workaround\r\n\r\nThe Confluence Find and Replace of a <string> with the <same string><text> works as expected in Chrome, Safari and IE11",
      "summary": "Find <string> and replace with <same string><text> in Firefox hangs which resultantly blanks out page once published"
    }
  },
  {
    "key": "CONFSERVER-58593",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-16T19:11:51.000+0000",
      "description": "h2. Use case\r\nCurrently, it is possible to [rename external users|https://confluence.atlassian.com/doc/change-a-username-427623582.html] as long as the users are from the same external user directory.\r\n\r\nHowever, sometimes it is necessary for an organization to swap to an entirely different user directory (e.g. OpenLDAP to Active Directory), containing a different set of usernames (e.g. \"jsmith\" to \"john.smith\"). This often occurs during mergers and acquisitions, for example. In this case, if the usernames are changed, Confluence has no way to link up the contents associated with old usernames to the new usernames.\r\n\r\nThis feature request is to request a tool to allow administrators to re-map content from one set of old usernames to new usernames, in bulk.\r\n\r\nh2. Additional notes\r\n* This is a similar use case to CONFSERVER-56448, but specific to *external users* (i.e. LDAP accounts) and specifically renaming in bulk\r\n* This is related to, but not identical, to the feature request to merge two accounts into one: CONFSERVER-11990",
      "summary": "Bulk rename/remap external users"
    }
  },
  {
    "key": "CONFSERVER-58592",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-16T17:55:35.000+0000",
      "description": "h3. Summary\r\n\r\nImporting a calendar that contains an URL field with encoded special characters fails with a NullPointerException.\r\n\r\nh3. Steps to Reproduce\r\n\r\n# Export a calendar on a different application (.ics format)\r\n# The source calendar must contain links starting with special characters on a new line in event descriptions\r\n# Try to import the calendar\r\n\r\nh3. Expected Results\r\n\r\nThe calendar is imported.\r\n\r\nh3. Actual Results\r\n\r\nThe import fails and we see the message \"The uploaded data does not seem to be iCalendar content\" on the UI:\r\n\r\n !Screen Shot 2019-07-16 at 2.29.18 PM.png|thumbnail! \r\n\r\nThe follow exception is thrown in the {{atlassian-confluence.log}} file after enabling DEBUG mode for the class *com.atlassian.confluence.extra.calendar3*:\r\n{noformat}\r\n2019-07-16 14:30:21,457 DEBUG [http-nio-8090-exec-5] [extra.calendar3.xwork.ImportSubCalendarAction] validate Unable to read uploaded file as iCalendar\r\n -- referer: http://localhost:8090/calendar/mycalendar.action | url: /plugins/calendar/importsubcalendar.action | traceId: 852fdf13c1165f81 | userName: admin | action: importsubcalendar\r\nnet.fortuna.ical4j.data.ParserException: Error at line 174:null\r\n    at net.fortuna.ical4j.data.CalendarParserImpl.parse(CalendarParserImpl.java:188)\r\n    at net.fortuna.ical4j.data.CalendarBuilder.build(CalendarBuilder.java:251)\r\n    at net.fortuna.ical4j.data.CalendarBuilder.build(CalendarBuilder.java:232)\r\n    at net.fortuna.ical4j.data.CalendarBuilder.build(CalendarBuilder.java:220)\r\n    at com.atlassian.confluence.extra.calendar3.xwork.ImportSubCalendarAction.validate(ImportSubCalendarAction.java:162)\r\n    \r\nCaused by: java.lang.NullPointerException\r\n    at com.atlassian.confluence.extra.calendar3.ical4j.DefaultPropertyFactory$UrlFactory$LightweightUrl.setUri(DefaultPropertyFactory.java:91)\r\n    at com.atlassian.confluence.extra.calendar3.ical4j.DefaultPropertyFactory$UrlFactory$LightweightUrl.setValue(DefaultPropertyFactory.java:86)\r\n    at net.fortuna.ical4j.data.CalendarBuilder$ContentHandlerImpl.propertyValue(CalendarBuilder.java:384)\r\n    at com.atlassian.confluence.extra.calendar3.ical4j.ContentHandlerDecorator.propertyValue(ContentHandlerDecorator.java:59)\r\n    at net.fortuna.ical4j.data.CalendarParserImpl$PropertyParser.parse\r\n    ...\r\n{noformat}\r\n \r\nh3. Notes\r\nAs mentioned in the log, the offending line is 174, If we inspect the  [^sample-cal.ics]  attached, we can see that it contains the following URL:\r\n\r\n{code}\r\nURL;VALUE=URI:%3Chttp://link%3E\r\n{code}\r\n\r\nThe *%3C* combination is the ASCII encoding for the \"<\" tag. This means that the original calendar had the following link in its description:\r\n\r\n{code}\r\n<http://link>\r\n{code}\r\n\r\nSo far, we identified only one situation where links like this are encoded by the export tool and cause the problem:\r\n\r\n* Link starting with a \"<\" tag at the start of a new line\r\n\r\nAlthough this is an unexpected situation and the encoding is performed by the source calendar tool during the export, Team Calendars should handle it more gracefully. Instead of halting the import, it should continue it but log an error about the invalid URL field.\r\n\r\nh3. Workaround\r\n\r\nTo identify the offending event, proceed as follows:\r\n\r\n# Visit Logging and Profiling\r\n# Add the following class:\r\n{code}\r\ncom.atlassian.confluence.extra.calendar3\r\n{code}\r\n# Set the log level to DEBUG\r\n# Click Save at the bottom of the page\r\n# Try to import the calendar again\r\n# Check the *atlassian-confluence* log\r\n# The error message will point the offending line as follows:\r\n{code}\r\nnet.fortuna.ical4j.data.ParserException: Error at line <LINE-NUMBER>:null\r\n{code}\r\n# Once that is identified, edit the ics file and remove the encoded tags so the link looks like this:\r\n{code}\r\nURL;VALUE=URI:http://link\r\n{code}\r\n# Save the file and try to import it again.",
      "summary": "Calendar fails to import if it contains URLs with encoded special characters"
    }
  },
  {
    "key": "CONFSERVER-58591",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-07-30T09:38:07.000+0000",
      "created": "2019-07-16T14:32:21.000+0000",
      "description": "h3. Summary\r\n# When editing or creating a template in Confluence, if we were to paste any content from another page with image, the content will appear on screen, but if we were to save the template, the changes will be lost.\r\n\r\nh3. Steps to replicate\r\n# Edit an existing or create a new global template.\r\n# Find a page in Confluence that has images and edit and copy the content with the image.\r\n# Paste the content onto the template, and the content will appear.\r\n# Save the template, and check on it again, and the content that we paste will be missing, and if we edited an existing template, the older content will still be there.\r\n\r\nh3. Expected behavior\r\n# Content that was pasted onto the template should be there after the template is saved.\r\n\r\nh3. Current behavior\r\n# Content that is pasted is missing as soon as the template is saved.\r\n\r\nh3. Notes\r\n# Issue seems to be with the image, as seen in the log entry below, and also as just pasting text does not cause the issue.\r\n# Reproducible on all Chrome. IE and Firefox.\r\n\r\nh3. Error in the logs.\r\n* {code:Java}\r\n2019-07-16 22:24:34,833 ERROR [http-nio-8090-exec-11] [confluence.pages.actions.HeartbeatAction] startActivity No content found or no permission to view content with contentId: 9928705\r\n -- referer: http://localhost:8090/pages/templates2/editpagetemplate.action?entityId=9928705 | url: /json/startheartbeatactivity.action | traceId: 8756d1f7f6211a13 | userName: root | action: startheartbeatactivity\r\n2019-07-16 22:24:49,021 WARN [http-nio-8090-exec-5] [xhtml.editor.embed.EditorEmbeddedImageResourceUnmarshaller] unmarshal Error unmarshaling editor embedded image\r\n -- referer: http://localhost:8090/pages/templates2/editpagetemplate.action?entityId=9928705 | url: /pages/templates2/doeditpagetemplate.action | traceId: 9a6f88a530cf09a9 | userName: root | action: doeditpagetemplate\r\njava.lang.IllegalArgumentException: Content must not be null\r\n\tat org.springframework.util.Assert.notNull(Assert.java:134)\r\n\tat com.atlassian.confluence.pages.attachments.CachingAttachmentDao.getLatestAttachment(CachingAttachmentDao.java:72)\r\n\tat com.atlassian.confluence.pages.DefaultAttachmentManager.getAttachment(DefaultAttachmentManager.java:145)\r\n\tat com.atlassian.confluence.pages.DefaultAttachmentManager.getAttachment(DefaultAttachmentManager.java:111)\r\n\tat com.atlassian.confluence.pages.DelegatorAttachmentManager.getAttachment(DelegatorAttachmentManager.java:114)\r\n\tat com.atlassian.confluence.pages.CachingAttachmentManager.getAttachment(CachingAttachmentManager.java:185)\r\n\tat sun.reflect.GeneratedMethodAccessor1099.invoke(Unknown Source)\r\n{code}\r\n\r\nh3. Workaround\r\n# After pasting the content, remove the image, and add it manually into the template.\r\n",
      "summary": "Pasting content with images to a template does not save the changes"
    }
  },
  {
    "key": "CONFSERVER-58590",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-16T07:58:33.000+0000",
      "description": "h3. Issue Summary\r\nIf one page is modified with multiple users with different languages, the Macro name retains the language setting of the last editor.\r\n\r\nh3. Steps to Reproduce\r\n* Site default language is English\r\n* User A's language is set to the site default\r\n* User B's language is set to German for example\r\n* B inserts a macro, B see it displays in German\r\n* User A modified the page, the macro name that user A saw will be German.\r\n\r\nh3. Expected Results\r\nUsers should see the macro name accordingly to the language settings\r\n\r\nh3. Actual Results\r\nThe Macro name retains language setting of the last editor\r\n\r\nh3. Workaround\r\nUsers have to save the page and edit again to see the correct Macro name translation.",
      "summary": "Macro name retains the language setting of the last editor"
    }
  },
  {
    "key": "CONFSERVER-58589",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-15T20:48:18.000+0000",
      "description": "I do see where others on the community have requested this feature enhancement.\u00a0 Please consider this for a future release of confluence.\u00a0 This enhancement would help my PMO team create more compelling and easier to use/navigate program dashboards.\u00a0 Thank you!\u00a0",
      "summary": "Set background colors for sections of a confluence page layout"
    }
  },
  {
    "key": "CONFSERVER-58588",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-15T15:48:06.000+0000",
      "description": "h3. Problem Definition  \r\n\r\n* Due to policies in a company, users might not be able to download Confluence Mobile app and wish to only use the desktop version on mobile and tablets without the *Download app* message\r\n\r\nh3. Suggested Solution  \r\n\r\n* Add an option for the user to remove the *Download app* message\r\n\r\nh3. Why this is important   \r\n\r\n* Due to policies in a company, having this option might mislead the users to download the app, which won't be successful. Also, it ends up being an extra step a user has to go through when accessing Confluence on a mobile/tablet.\r\n\r\nh3. Workaround \r\nN/A",
      "summary": "Remove the Download App option when using Confluence on a mobile/tablet"
    }
  },
  {
    "key": "CONFSERVER-58587",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-15T15:27:15.000+0000",
      "description": "We use Confluence to host our customer-facing software documentation. In the latest version of Confluence, the search feature has \"Filter by\" options. I would like to disable some of these filters as they mean nothing to my end users. Things like Space and Space category specifically. I am told by the community this is not currently an option. Please consider making this an option.\u00a0",
      "summary": "Ability for Admins to Disable Search Filters"
    }
  },
  {
    "key": "CONFSERVER-58586",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-02-13T05:46:52.000+0000",
      "created": "2019-07-15T14:41:43.000+0000",
      "description": "h3. Problem description\r\n\r\nWhen editing a file with the Companion App a window is opened in the preview with the option to upload the changed file and save the changes made to the attachment.\r\n\r\nIf the user\u2019s session times out, (this is after 60 minutes by default in Confluence) and if the user then attempts to upload the changes the action will fail with no error message given as there is no longer a session for the app to connect to and upload the file.\r\nh3. Expected behaviour\r\n\r\nThis process to fail gracefully, either by announcing that the session has expired or by offering to login again and renew the session so the user can continue to edit the file.\r\nh3. Current workarounds\r\n\r\nIt is now currently only possible to extend the user session length in the web.xml as shown here:\r\n * [How to adjust the session timeout for Confluence|https://confluence.atlassian.com/confkb/how-to-adjust-the-session-timeout-for-confluence-126910597.html]\r\n\r\nHowever this situation will still arise if the editing process exceeds the new session length.",
      "summary": "Companion App editing fails on user session timeout"
    }
  },
  {
    "key": "CONFSERVER-58585",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-15T01:27:56.000+0000",
      "description": "h3. Issue Summary\r\n\r\nFrom App Vendor:\r\n{quote}\r\n1. Set Confluence context path to 'confluence'\r\n\r\n2. In seraph-config.xml use absolute URL as login.url\r\n- eg http://example.com/SSOLogin?target=${originalurl} like in the example here https://docs.atlassian.com/atlassian-seraph/2.6.1-m1/configuration.html\r\n\r\n3. In a Confluence plugin, use LoginUriProvider.getLoginUri(targetUrl) to redirect the user to the login screen\r\n\r\n-> the login URL will incorrectly have the Confluence's context path prepended to it, ie it will be '/confluencehttp://example.com/SSOLogin?target=...'\r\n\r\nTo reproduce with Scroll Viewport (bug found while investigating a support request from customer):\r\n1. Create a Viewport to a space requiring login\r\n2. Try to access that Viewport while not logged in\r\n-> you'll be redirect to the incorrect login URL that Viewport gets from LoginUriProvider\r\n\r\n---\r\n\r\nThe bug is Atlassian Shared Access Layer (https://developer.atlassian.com/server/framework/atlassian-sdk/shared-access-layer/)\r\n\r\nThe problem seems to be that this line does not check whether the login.url is absolute:\r\nhttps://bitbucket.org/atlassian/atlassian-sal/src/275619451fef2331a18689e37c8c6b0e79d7bcbd/sal-core/src/main/java/com/atlassian/sal/core/auth/SeraphLoginUriProvider.java#lines-49\r\n\r\nIn Confluence source, there is also eg com.atlassian.seraph.util.RedirectUtils.getLoginUrl() that does check if the login URL is absolute or not. This is probably why the login redirect works in Confluence with a config like this, but not with Viewport.\r\n\r\nthis issue exists in the sal-core library as shipped with these Confluence versions:\r\n\r\nConfluence 6.0.6 -> sal-core 3.0.8\r\nConfluence 6.15.4 -> sal-core 3.2.0-abbce37\r\n\r\nI have not checked other Confluence / SAL versions.\r\n{quote}\r\n\r\nh3. Exptected\r\nCorrect absolute login URL - eg 'http://example.com/SSOLogin?target=...&#39;\r\n\r\nh3. Actual\r\nIncorrect login URL - eg ' /confluencehttp://example.com/SSOLogin?target=...&#39;\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "SAL / LoginUriProvider.getLoginUri() returns invalid value if absolute login URL is used"
    }
  },
  {
    "key": "CONFSERVER-58584",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-13T00:03:36.000+0000",
      "description": "I have discovered a bit of an annoyance when pasting an image into a page where the image doesn't have a specific name of its own\r\n\r\ne.g. you might use a snipping tool or select an image from some other document and copy it, then go to the Confluence page in edit mode and paste the image in.\r\n\r\nConfluence treats that as an attachment but as it has no specific name so logically Confluence automatically assigns a name - that name is based on date and time stamp e.g. it would assign a name to the attachment like\r\n\r\nimage2019-7-13 8:37:43.png\r\n\r\nthe problem is the colons in the time stamp portion.\u00a0\u00a0\r\n\r\nif you later want to download all attachments, the zip file is created ok and will download\r\n\r\nBut when you open the zip file, WINZIP pops up a message that it is an invalid filename.\u00a0 The message suggest that you should still be able to unzip the file but I have failed to be able to do so and the file appears empty.\r\n\r\n\u00a0\r\n\r\nSo it would be extremely helpful if Confluence used something other than colons in the auto-assigned filename ... even just stripping out the colons in the time stamp would help as I currently have to work through dozens of attachments on hundreds of pages and manually remove the colons in the file via the Properties option for each attachment.\r\n\r\nIt would be even more helpful if the auto file name process included reference to the User who created it, rather than just \"image\"\r\n\r\n\u00a0\r\n\r\nGiven Confluence has its own interpretation of the meaning of a colon in a page/file name, it would seem logical not to allow its use when autonaming image attachments being pasted into a page.\r\n\r\n\u00a0",
      "summary": "eliminate colons in autonaming of image attachments"
    }
  },
  {
    "key": "CONFSERVER-58583",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-12T19:30:10.000+0000",
      "description": "h3. Problem Definition\r\n\r\nCurrently we don't have auditing options for comments on pages.\r\nh3. Suggested Solution\r\n\r\nIt would be great to have an option like Audit Log for auditing new and edited comments on pages.\r\n\r\nAlso, Space admins can edit comments of other users and not show who made the edit and still show as original commenter, would be nice to also indicate who edited it.\r\nh3. Why this is important\r\n\r\nThis would make auditing comments much simpler.\r\nh3. Workaround\r\n\r\nCurrent option would be to get this information from the database.",
      "summary": "As an Administrator I'd like to have Audit options for comments on pages"
    }
  },
  {
    "key": "CONFSERVER-58582",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-12T17:33:33.000+0000",
      "description": "Using children display macro on a parent page breaks the table format\r\n\r\nh3. Issue Summary\r\nIf children pages have tables with columns of a certain width, they do not display with the same width in the parent page.\r\n\r\nh3. Environment\r\n* Confluence 6.12.0, 6.15.2\r\n* All browsers\r\n\r\nh3. Steps to Reproduce\r\n# With _Responsive_ format in the editor: \r\n#* Create a child page with tables and drag the columns to adjust their width.\r\n#* On the parent page, use the _Children Display_ macro and select Excerpt Display as \u201crich content\u201d. Publish the page.\r\n\r\n# With _Fixed Width_ format in the editor: \r\n#* Create a child page with tables and drag the columns to adjust their width.\r\n#* On the parent page, use the _Children Display_ macro and select Excerpt Display as \u201crich content\u201d. Publish the page.\r\n\r\nh3. Expected Results\r\nThe _Children Display_ macro should display tables with the same width as the child pages so that the width of all the tables on the parent page look the same.\r\n\r\nh3. Actual Results\r\n# With _Responsive_ format in the editor: \r\n#* The widths of the columns are not the same as the child page.\r\n\r\n# With _Fixed Width_ format in the editor: \r\n#* This completely breaks the table and displays each character on a new line.\r\n\r\nh3. Workaround\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available\r\n",
      "summary": "Using children display macro on a parent page breaks the table format from child pages"
    }
  },
  {
    "key": "CONFSERVER-58581",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-07-19T03:42:34.000+0000",
      "created": "2019-07-12T09:04:49.000+0000",
      "description": "h3. Issue Summary\r\n\r\nThe *Page Property Report* macro does not sort correctly columns that have dates, inserted in the listed pages using the *Date* macro, when Confluence is set to German or French languages.\r\nh3. Environment\r\n * Have the browser set to German or French language\r\n * Alternatively change the User settings in Confluence for either German or French language\r\n\r\nh3. Steps to Reproduce\r\n # Create 3 pages, each with the *Page Properties* macro, containing a table such as:\r\n|Description|<enter some text>|\r\n|Date|<insert a date with the *Date* macro|\r\n\u00a0Enter different values for each page, namely different days and months for the dates.\r\n # Add the same label, for example \"pageprop\", to the 3 pages;\r\n # Create a new page and add the\u00a0*Page Property Report*\u00a0macro, specifying the label created in the previous steps;\r\n # Viewing the latest page, click on the Date column and check the order.\r\n\r\nh3. Expected Results\r\n\r\nThe list in the page is correctly sorted per date, either ascending or descending depending on the previous sorting order.\r\nh3. Actual Results\r\n\r\nThe list order is inconsistent.\r\nh4. Notes\r\n\r\nThis has been reproduced with German and French language but other languages may be affected as well.\r\nh3. Workaround\r\n\r\nThere is no known workaround other than selecting English as the language settings for the user.",
      "summary": "Sorting a column with dates on the Page Property Report macro does not work correctly in some language settings"
    }
  },
  {
    "key": "CONFSERVER-58580",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-12T08:51:28.000+0000",
      "description": "Team,\r\n\r\nWe are planning to implement Confluence datacenter Azure cloud for 2500 users. Currently we are in process of gathering hardware requirement. We have gone through below link but it more looks like a example but not the standard specification. Could you please help us in this regard.\r\n\r\n\u00a0\r\n\r\n[https://confluence.atlassian.com/doc/server-hardware-requirements-guide-30736403.html]\r\n\r\n\u00a0\r\n\r\nRegards,\r\n\r\nPavan.",
      "summary": "Confluence Datacenter Hardware requirement"
    }
  },
  {
    "key": "CONFSERVER-58579",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-12T08:51:16.000+0000",
      "description": "h3. Issue Summary\r\n\r\nIn a page that has content, when a mention is removed from the content, this mention does not get -strikedthrough- and highlighted in red in the mail notifications for that page.\r\n\r\nNormally, when a content gets removed from a page, that piece of content that is removed will be highlighted in red and strikethrough.\r\nh3. Steps to Reproduce\r\n # Head over to a page with content. This content must contain mentions.\r\n # Remove some of the content including the mentions.\r\n # When saving the page, ensure that\u00a0*notify*\u00a0*watches*\u00a0option is set.\u00a0\r\n # Click Publish.\r\n\r\nh3. Expected Results\r\n\r\nWatchers will receive the mail notification, with all removed content (including mentions) strikedthrough and highlighted in red.\u00a0\r\nh3. Actual Results\r\n\r\nWatchers will receive the mail notification, with all texts that were removed strikedthrough and highlighted in red. The exception here is mentions.\u00a0\r\n\r\nNotice the difference between the email notification below and the page history comparison. In page history comparison, removed mentions are strikethrough and highlighted. While in Email notification, it does not.\u00a0\r\n\r\n!Screen Shot 2019-07-12 at 4.49.24 PM.png|thumbnail!\r\n\r\n!Screen Shot 2019-07-12 at 4.52.18 PM.png|thumbnail!\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Removed mentions from page do not get highlighted in the mail notification."
    }
  },
  {
    "key": "CONFSERVER-58578",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-11T20:57:22.000+0000",
      "description": "Currently the only way to review the current cache performance in both Confluence Server and Data Center is to visit the cache statistics page as an admin via the UI:\r\n\r\n*<Confluence-Base-Url>/admin/cache/showStatistics.action#fullView*\r\n\r\nIt would be extremely convenient if there was a log file with this same information provided somewhere in the environment so that an admin could pull the information with ease without having to access the UI and be able to run quick comparisons among the log files. ",
      "summary": "Provide the Cache Statistics page as a Log File"
    }
  },
  {
    "key": "CONFSERVER-58576",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-11T14:09:32.000+0000",
      "description": "h3. Summary  \r\n\r\n* When adding a Jira Issue macro, which has a long text string in its title, to a bullet list, the bullet list item will be placed on the second line of the macro.\r\n\r\nh3. Environment \r\nN/A\r\n\r\nh3. Steps to Reproduce \r\n# Create a Jira issue, in Jira, with a long text string in its title\r\n# In Confluence, edit a page\r\n# Add a bullet list\r\n# Add two items in the bullet list, text items\r\n# In the third item, add a Jira Issue macro with the issue created in the first step\r\n# Add a fourth item, a text item\r\n# Save the page \r\n\r\nh3. Expected Results  \r\n\r\n* The bullet list item will be placed on the first line of the Jira Issue macro (since it splits into two lines)\r\n\r\nh3. Actual Results \r\n\r\n* The bullet list item is placed on the second line of the Jira Issue macro, as per the image below:\r\n\r\n !Screen Shot 2019-07-11 at 10.58.00.png|thumbnail! \r\n\r\nh3. Notes \r\nN/A\r\n\r\nh3. Workaround \r\nN/A",
      "summary": "Adding a Jira Issue macro with a long title to a bullet list will cause the bullet item to be on the last line"
    }
  },
  {
    "key": "CONFSERVER-58575",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-11T13:23:34.000+0000",
      "description": "h3. Issue Summary\r\n\r\nBlank space added to bold/italic wikimarkup text effects\r\nh3. Steps to Reproduce\r\n # Create new Confluence page\r\n # Ad sample characters\r\n{noformat}\r\n*sampleboldline*\r\n{noformat}\r\nand\r\n{noformat}\r\n_sampleitalicline_\r\n{noformat}\r\n\r\nh3. Expected Results\r\n\r\n*sampleboldline* and _sampleitalicline_ characters are added to the page\r\nh3. Actual Results\r\n\r\nBlank space is added after the the bold/italic characters\r\nh3. Workaround\r\n\r\nUse Ctrl + B and Ctrl + I key shortcuts instead of wikimarktup shortcuts",
      "summary": "Blank space is  added to bold/italic wikimarkup Text Effects"
    }
  },
  {
    "key": "CONFSERVER-58572",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-11T01:19:56.000+0000",
      "description": "h3. Issue Summary\r\nh3. Environment\r\nh3. Steps to Reproduce\r\n # import a space with\u00a0a page that has Jira issues macro\r\n # restore the space to a local server without links to Jira\r\n # export the space as pdf\r\n\r\nh3. Expected Results\r\n\r\nThe error should be aligned to the text\r\nh3. Actual Results\r\n\r\nThe error margin is too large and breaks the pdf flow\r\n\r\n!image-2019-07-11-11-20-17-553.png!\r\nh3. Notes\r\n\r\n(Optional - If Necessary)\r\nh3. Workaround\r\n\r\nRequired, if there is no workaround please state:\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Space export as pdf - layout is too big for the 'Unable to render Jira issues macro, execution error.' message"
    }
  },
  {
    "key": "CONFSERVER-58569",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-09T23:30:57.000+0000",
      "description": "h3. Issue Summary\r\n\r\nWhen moving a page to another space and app updates the content property, an error 500 is thrown:\r\n\r\n{code}\r\njava.lang.IllegalArgumentException: Can't add an owner from another space\r\n{code}\r\n\r\nh3. Environment\r\n\r\n* Confluence 6.13.x\r\nh3. Steps to Reproduce\r\n# Create a JSON Content Property in a page\r\n# Move the page to  different space\r\n# Update the JSON Content Property\r\n# Error thrown: \"java.lang.IllegalArgumentException: Can't add an owner from another space\" error is thrown\r\n\r\nh3. Expected Results\r\nUpdate of the JSON content property in a moved page should not fail\r\n\r\nh3. Actual Results\r\nError thrown\r\n\r\nThe below exception is thrown (logs from customer sent to app vendor):\r\n{noformat}\r\n2019-06-26 11:53:07,643 ERROR [http-nio-8090-exec-57] [comalatech.confluence.dataextractor.DefaultDataExtractorManager] createOrUpdateContentProperties Problems saving comalaworkflows associated to page: The Page (36275744)\r\n -- referer: https:.../pages/resumedraft.action?draftId=36275763&draftShareId=2d88183f-b9a1-468b-bb68-72c5b757927b | url: /rest/api/content/36275744 | traceId: 326a736c0dd92007 | userName: username\r\njava.lang.IllegalArgumentException: Can't add an owner from another space.\r\nat com.atlassian.confluence.content.CustomContentEntityObject.checkContainerHierarchyValid(CustomContentEntityObject.java:259)\r\n\tat com.atlassian.confluence.content.CustomContentEntityObject.setContainer(CustomContentEntityObject.java:155)\r\n\tat com.atlassian.confluence.plugins.contentproperty.StorageJsonPropertyManager.updateStorageFromApi(StorageJsonPropertyManager.java:50)\r\n\tat com.atlassian.confluence.plugins.contentproperty.ContentPropertyServiceImpl.update(ContentPropertyServiceImpl.java:75)\r\n\tat sun.reflect.GeneratedMethodAccessor3005.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:333)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\r\n\tat com.atlassian.plugins.spring.interceptor.plugin.ExportableInterceptorAdapter$WrappedMethodInvocation.proceed(ExportableInterceptorAdapter.java:53)\r\n\tat com.atlassian.plugins.spring.interceptor.spi.SpringInterceptorAdapter$SpringMethodInvocationAdapter.proceed(SpringInterceptorAdapter.java:50)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)\r\n\tat com.atlassian.plugins.spring.interceptor.spi.SpringInterceptorAdapter.invoke(SpringInterceptorAdapter.java:23)\r\n\tat sun.reflect.GeneratedMethodAccessor676.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat com.atlassian.plugin.util.ContextClassLoaderSettingInvocationHandler.invoke(ContextClassLoaderSettingInvocationHandler.java:26)\r\n\tat com.sun.proxy.$Proxy325.invoke(Unknown Source)\r\n\tat com.atlassian.plugins.spring.interceptor.plugin.ExportableInterceptorAdapter.invoke(ExportableInterceptorAdapter.java:26)\r\n\tat sun.reflect.GeneratedMethodAccessor675.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:333)\r\n\tat org.eclipse.gemini.blueprint.service.importer.support.internal.aop.ServiceInvoker.doInvoke(ServiceInvoker.java:56)\r\n\tat org.eclipse.gemini.blueprint.service.importer.support.internal.aop.ServiceInvoker.invoke(ServiceInvoker.java:60)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:133)\r\n\tat org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:121)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat org.eclipse.gemini.blueprint.service.util.internal.aop.ServiceTCCLInterceptor.invokeUnprivileged(ServiceTCCLInterceptor.java:70)\r\n\tat org.eclipse.gemini.blueprint.service.util.internal.aop.ServiceTCCLInterceptor.invoke(ServiceTCCLInterceptor.java:53)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat org.eclipse.gemini.blueprint.service.importer.support.LocalBundleContextAdvice.invoke(LocalBundleContextAdvice.java:57)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:133)\r\n\tat org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:121)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:213)\r\n\tat com.sun.proxy.$Proxy745.invoke(Unknown Source)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:213)\r\n\tat com.sun.proxy.$Proxy772.update(Unknown Source)\r\n\tat com.comalatech.confluence.dataextractor.DefaultDataExtractorManager.createOrUpdateContentProperties(DefaultDataExtractorManager.java:199)\r\n{noformat}\r\nh3. Notes\r\n* From community :https://community.atlassian.com/t5/Answers-Developer-Questions/Confluence-REST-API-java-lang-IllegalArgumentException-Can-t-add/qaq-p/550967\r\n* Related to https://jira.atlassian.com/browse/CRA-1259?_ga=2.140707825.254316899.1561970127-2025536084.1502958597\r\n* Vendor's customers gets the following error when *Comala Workflows* tries to update an existing property associated with a page. The error message from [CRA-1259] seems to be the same one but it is thrown in a different line\r\n\r\nh3. Workaround\r\n\r\nFrom vendor:\r\n{quote}\r\nJust to clarify and after being able to provide a workaround in our implementation by detecting the differences in space ownership to reset the property, I think that that update should be automatically done by Confluence. Simple listening to a page moved event to update it and not make the creator of the property responsible for doing so.\r\n{quote}",
      "summary": "Moving content between spaces and updating content properties results in 500"
    }
  },
  {
    "key": "CONFSERVER-58567",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-09-14T04:31:13.000+0000",
      "created": "2019-07-09T23:47:19.000+0000",
      "description": "h3. Issue Summary\r\n\r\nWe are seeing that in many instances of Confluence performance issues, the logs are being spammed with the following types of messages:\r\n{code:java}\r\n2019-05-31 10:47:09,595 WARN [http-nio-8180-exec-175] [atlassian.confluence.event.MonitorableCallerRunsPolicy] Queue Overflow happened: Runnable: [Invoker: com.atlassian.confluence.event.ConfluenceListenerHandlersConfiguration$TimingListenerHandler$1$1@540aafe5; Event: com.atlassian.confluence.impl.content.render.xhtml.analytics.MarshallerMetricsAnalyticsEvent@16ee3cc4]; Executor: [java.util.concurrent.ThreadPoolExecutor@147ade05[Running, pool size = 6, active threads = 6, queued tasks = 512, completed tasks = 6346603]]\r\n -- url: /display/ds/Managing+a+Space | page: 1023213894 | traceId: ac250fe443e52573 | userName: aa0000 | referer: http://my.wiki.com/display/ds/Navigation+Page | action: viewpage\r\n2019-05-31 10:47:09,595 WARN [http-nio-8180-exec-175] [atlassian.confluence.event.MonitorableCallerRunsPolicy] Queue Overflow happened: Runnable: [Invoker: com.atlassian.confluence.event.ConfluenceListenerHandlersConfiguration$TimingListenerHandler$1$1@48c28143; Event: com.atlassian.confluence.impl.content.render.xhtml.analytics.MarshallerMetricsAnalyticsEvent@16ee3cc4]; Executor: [java.util.concurrent.ThreadPoolExecutor@147ade05[Running, pool size = 6, active threads = 6, queued tasks = 512, completed tasks = 6346603]]\r\n -- url: /display/ds/Managing+a+Space | page: 1023213894 | traceId: ac250fe443e52573 | userName: aa0000 | referer: http://my.wiki.com/display/ds/Navigation+Page | action: viewpage\r\n2019-05-31 10:47:09,016 WARN [http-nio-8180-exec-191] [atlassian.confluence.event.MonitorableCallerRunsPolicy] Queue Overflow happened: Runnable: [Invoker: com.atlassian.confluence.event.ConfluenceListenerHandlersConfiguration$TimingListenerHandler$1$1@48c28143; Event: com.atlassian.confluence.impl.profiling.DecoratorTimings$DecoratorTimingEvent@47e1074c]; Executor: [java.util.concurrent.ThreadPoolExecutor@147ade05[Running, pool size = 6, active threads = 6, queued tasks = 512, completed tasks = 6346502]]\r\n -- url: /display/ds/Navigation+Page | traceId: dec3b0debc24e67d | userName: aa0000 | referer: http://my.wiki.com/display/ds/How+to+Layout+a+Wiki+Space\r\n{code}\r\nh3. Steps to Reproduce\r\n # Generate a flood of asynchronous calls to Confluence to simulate HTTP thread contention in the application\r\n\r\nh3. Expected Results\r\n\r\nThe logs will not be flooded with these messages and other potentially important information related to the root of the problem may be found in the log files\r\n\r\nh3. Actual Results\r\n\r\nThis message can be logged thousands of times in quick succession, leaving the admin with a useless log file that doesn't aid in RCA\r\nh3. Workaround\r\n\r\nThe current workaround is to extend the default logging so that more logs are kept in archive, in order to give administrators a greater window to capture the relevant logs. This can be done my modifying the following two parameters in <confluence_install>/confluence/WEB-INF/classes/log4j.properties, which influences size of log files and number of logs kept in archive, respectively:\r\n{code:java}\r\nlog4j.appender.confluencelog.MaxFileSize=20480KB\r\nlog4j.appender.confluencelog.MaxBackupIndex=5\r\n{code}\r\nNote however that increasing the logs kept will impact the disk footprint and size of Support Zips generated.\r\n\r\n*Extra Workaround:*\r\nYou can also choose to get rid of the noisy logging by going to Logging and Profiling and setting below class as FATAL:\r\n{code}\r\ncom.atlassian.confluence.event.MonitorableCallerRunsPolicy\r\n{code}",
      "summary": "Logs flood excessively with \"Queue Overflow happened\" WARNs when Confluence has a performance problem"
    }
  },
  {
    "key": "CONFSERVER-58566",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-09T21:28:17.000+0000",
      "description": "h3. Issue Summary\r\n\r\nWhen editing a Confluence page on Microsoft Edge, the \"Find\" feature (and by extension, the \"Replace\" feature) do not work correctly - the text on the Find field is not searched for or highlighted.\r\nh3. Environment\r\n\r\nWindows OS, using the Microsoft Edge browser (tested on Windows 10, Microsoft Edge 44.17763.1.0). Issue is reproducible on a fresh Confluence installation, with no browser add-ons on Edge; not reproducible using other browsers.\r\nh3. Steps to Reproduce\r\n # Edit any Confluence page\r\n # Click the magnifying glass at the top of the editor header bar\r\n # Insert some text on the Find field, and click \"Find\"\r\n\r\nh3. Expected Results\r\n\r\nThe page will be searched for the selected word, and the Confluence editor will highlight it.\r\nh3. Actual Results\r\n\r\nNothing happens when the \"Find\" button is clicked - consequently, the \"Replace\" function can't be used (and \"Replace all\" does not work either).\r\n\r\nOpening the console from the Edge browser tools, we see the following message:\r\n{code:java}\r\nObject doesn't support property or method 'createTextRange'\r\n{code}\r\nThis error is returned every time the \"Find\" button is clicked.\r\n\r\n!confluence editor find.png!\r\nh3. Workaround\r\n\r\nUse different browser (Chrome/Internet Explorer) or the browser's \"Find on page...\" (Ctrl+F) option.",
      "summary": "Find and Replace feature not working properly on Microsoft Edge"
    }
  },
  {
    "key": "CONFSERVER-58564",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-09T19:43:08.000+0000",
      "description": "h3. Summary\r\n\r\nIn [Confluence 6.14.0|https://confluence.atlassian.com/doc/confluence-6-14-release-notes-963655609.html#Confluence6.14ReleaseNotes-Massiveeditorimprovements], we made improvements to Confluence Editor. This change broke the ability of copying a Confluence variable (template) to the same or another template as it consider the variable as an image.\r\nh3. Steps to Reproduce\r\n # Install Confluence 6.14.0 or later\r\n # Go to Global Templates and Blueprints page\r\n # Click on Add global page template and name it TemplateTest\r\n # Create a variable (using the $ shortcut) as $test\r\n # Copy and paste the variable on the same page\r\n # Save the template\r\n # Click on the Create from Template button (. . .)\r\n # Choose the TemplateTest and notice that it's broken\r\n\r\nTo confirm the problem, install an earlier version of Confluence, for example 6.13.x and follow the same steps, you will notice that the problem is not replicable\r\nh3. Expected Results\r\n\r\nThe variables are working\r\nh3. Actual Results\r\n\r\nThe manually created variable works and the copied variable shows up as an image\r\nh3. Inspecting the HTML\r\n\r\nIf we inspect the HTML via the browser console, we have the following results:\r\n\r\nVariables in 6.14.0 while in editor mode (editing the template)\r\n - Working variable:\r\n{code:java}\r\n<img alt=\"$test\" class=\"template-variable\" data-variable-name=\"test\" src=\"/confluence/plugins/servlet/confluence/placeholder/template-variable?name=test\" data-mce-src=\"http://localhost:8090/confluence/plugins/servlet/confluence/placeholder/template-variable?name=test\">\r\n{code}\r\n - Copied variable:\r\n{code:java}\r\n<img class=\"confluence-embedded-image template-variable confluence-external-resource\" src=\"http://localhost:8090/confluence/plugins/servlet/confluence/placeholder/template-variable?name=test\" data-image-src=\"http://localhost:8090/confluence/plugins/servlet/confluence/placeholder/template-variable?name=test\" data-mce-src=\"http://localhost:8090/confluence/plugins/servlet/confluence/placeholder/template-variable?name=test\">\r\n{code}\r\n -- Notice the new attribute {{data-image-src}} and missing attribute: {{data-variable-name}}.\u00a0\r\n\r\nVariables in 6.14.0 while in editor mode (using the template to create a page)\r\n - Working variable:\r\n{code:java}\r\n<input class=\"page-template-field\" name=\"variableValues.test\" size=\"12\" type=\"text\"> - working\r\n{code}\r\n - Copied variable:\r\n{code:java}\r\n<img class=\"confluence-embedded-image template-variable confluence-external-resource\" src=\"http://localhost:8090/confluence/plugins/servlet/confluence/placeholder/template-variable?name=test\" data-image-src=\"http://localhost:8090/confluence/plugins/servlet/confluence/placeholder/template-variable?name=test\">\r\n{code}\r\n\r\nSame variables on a Confluence 6.13.0 while in editor mode (editing the template)\r\n - Working variable:\r\n{code:java}\r\n<img class=\"template-variable\" alt=\"$test\" data-variable-name=\"test\" src=\"/c6130/plugins/servlet/confluence/placeholder/template-variable?name=test\" data-mce-src=\"http://localhost:26130/c6130/plugins/servlet/confluence/placeholder/template-variable?name=test\">\r\n{code}\r\n - Copied variable:\r\n{code:java}\r\n<img class=\"template-variable\" title=\"$test\" src=\"http://192.168.10.227:26130/c6130/plugins/servlet/confluence/placeholder/template-variable?name=test\" data-variable-name=\"test\" alt=\"$test\" data-attachment-copy=\"\" data-mce-src=\"http://192.168.10.227:26130/c6130/plugins/servlet/confluence/placeholder/template-variable?name=test\">\r\n{code}\r\n -- Notice that there are no changes that would break it.\r\n\r\nVariables in 6.13.0 while in editor mode (using the template to create a page)\r\n - Working variable:\r\n{code:java}\r\n<input class=\"page-template-field\" name=\"variableValues.test\" size=\"12\" type=\"text\">\r\n{code}\r\n - Copied variable:\r\n{code:java}\r\n<input class=\"page-template-field\" name=\"variableValues.test\" size=\"12\" type=\"text\">\r\n{code}\r\n\r\nh3. Workaround\r\n\r\nManually add the variable instead of copying it",
      "summary": "The action of copy and paste a template variable, while in the editor mode, breaks the variable"
    }
  },
  {
    "key": "CONFSERVER-58563",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-09T18:47:37.000+0000",
      "description": "{panel:bgColor=#e7f4fa}\r\n  *NOTE:* This suggestion is for *Confluence Server*.\r\n  {panel}\r\n\r\nh3. Problem\r\n\r\nConfluence access logging is not able to log client IPs when a proxy is place. Load balancers and reverse proxy devices commonly use the \"x-forwarded-for\" [HTTP header|https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers] to enable logging of the actual visitor IP address rather than the proxy IP address.\r\n\r\nh3. Suggested Solution\r\n\r\nEnable configuration of Confluence to log the IP address from the \"x-forwarded-for\" header to the access logs.\r\n\r\n\r\nh3. Workaround\r\n\r\nCustomers have reported that modifying the log4j configuration of Confluence is not a viable workaround. Fortunately, this can be achieved using the access logs that are enabled by default in the Tomcat container that ships with Confluence.\r\n\r\n# Edit the file {{CONFLUENCE_INSTALL_DIR/conf/server.xml}}\r\n# Insert this line before the line with \"AccessLogValve\": {code}\r\n<Valve\r\n\tclassName=\"org.apache.catalina.valves.RemoteIpValve\"\r\n\tinternalProxies=\"PROXY_IP_ADDRESS\" />\r\n{code}\r\n#* (!) Escape the \".\" characters in PROXY_IP_ADDRESS with a backlash. Example: {{internalProxies=\"1\\.1\\.1\\.8\"}}\r\n# Configure AccessLogValve to accept the substituted IP from RemoteIpValve by adding the requestAttributesEnabled attribute to the AccessLogValve: {code}\r\n<Valve className=\"org.apache.catalina.valves.AccessLogValve\"\r\n    requestAttributesEnabled=\"true\"\r\n    ... EXISTING_ATTRIBUTES ...\r\n/>\r\n{code}\r\n\r\nFor full details see the Tomcat [RemoteIpValve documentation|https://tomcat.apache.org/tomcat-7.0-doc/api/org/apache/catalina/valves/RemoteIpValve.html].",
      "summary": "Enable use of x-forwarded-for to log browser IP addresses"
    }
  },
  {
    "key": "CONFSERVER-58562",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-11-09T23:11:07.000+0000",
      "created": "2019-07-09T13:53:35.000+0000",
      "description": "h3. Issue Summary\r\n# *Unsynced from Directory* functionality was added in Confluence 6.13 due to GDPR requirements, where we can remove all details of a user who is no longer in Confluence and anonymize their names.\r\n# This also removes them from the *Who* section of events in team calendar, which in turn spams all users who are watching these calendars.\r\n# The longer a user has been using team calendar\\more events, the more emails get sent out when they are removed via the Unsync.\r\n\r\nh3. Steps to Reproduce\r\n# Sync a user from an external directory to Confluence, and add them as participants in some events.\r\n# Remove them from the external directory and sync it to Confluence.\r\n# The user will now be in the *Unsynced from Directory* tab in the user management page.\r\n# Delete the user from here.\r\n# Any user who is watching the calendar that the event is in will receive an email for each event that the user was in. \r\n\r\nh3. Expected Results\r\n# No email should be sent for the removal of the user from these events.\r\n\r\nh3. Actual Results\r\n# Each event that the user was in would trigger an email to watchers of the calendar.\r\n\r\nh3. Workaround\r\n# Currently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Deleting user from Unsynced from Directory causes Team Calendar to send out emails for all events the user was in"
    }
  },
  {
    "key": "CONFSERVER-58561",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-09T13:00:07.000+0000",
      "description": "Right now, I can only see the title of deleted pages. I don't know if I should restore them or not, bc I cannot see their content. I would like to be able to preview the page and see the date/time for deleted pages.\u00a0",
      "summary": "Add timestamp and preview of deleted topics"
    }
  },
  {
    "key": "CONFSERVER-58560",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-08T17:13:06.000+0000",
      "description": "h3. Problem Definition\r\n[Disabling an user|https://confluence.atlassian.com/doc/delete-or-disable-users-138318.html] means that the administrator is revoking user's access to Confluence and the user won't be able to curate content anymore:\r\n{quote}\r\nWhen an user account is disabled:\r\n    * The user won't be able to log in.\r\n    * The user won't be included in your license count.\r\n    * People won't be able to see the user in the People directory, mention them, or select their name/username as a search filter.\r\n    * Their full name will still appear on any spaces or content they created.\r\n    * They will be listed in User Management admin screens.\r\n    * Their account can be re-enabled (this will restore the connection to their content).\r\n    * Any content they created will be maintained.  \r\n{quote}\r\n\r\nWhen Collaborative Editing is disabled, users create personal drafts that accessible just to them.\r\nIf an user is disabled, their personal drafts are kept in the database (and attachments in the file system) when no one else can access these contents.\r\nDepending on the size of the Confluence instance, the content footprint may be too large and periodically removing it may be a good thing.\r\n\r\nh3. Suggested Solution\r\nCreate a scheduled task to delete personal drafts associated to users that were disabled.\r\nSince disabling an account is something that can be reverted, this scheduled task could check those accounts that are disabled for some time (i.e. one month).\r\n \r\nh3. Workaround \r\nAs a workaround, the Confluence administrator can discard drafts from disabled users using a REST API method.\r\n\r\nThe SQL query below identify the ID of personal drafts associated to users that were disabled:\r\n{code}\r\nselect c.CONTENTID as DRAFT_ID\r\nfrom CONTENT c\r\nwhere c.CONTENTTYPE='DRAFT'\r\nand c.DRAFTTYPE='page'\r\nand c.CREATOR in (select um.USER_KEY\r\nfrom CWD_USER cu\r\njoin USER_MAPPING um\r\non um.LOWER_USERNAME=cu.LOWER_USER_NAME\r\nwhere cu.ACTIVE='F');\r\n{code}\r\n\r\nWith this list in hand, the following REST API method can be used to discard each personal draft:\r\n{code}\r\nCONFBASEURL=<Confluence Base URL>\r\nADMIN_USERNAME=<Confluence administrator username>\r\nADMIN_PWD=<Confluence administrator password>\r\nDRAFT_ID=<draft ID from SQL query>\r\n\r\ncurl -i -u $ADMIN_USERNAME:$ADMIN_PWD $CONFBASEURL'/rest/api/content/'$DRAFT_ID'?status=draft' -X DELETE -H 'Accept: application/json, text/javascript, */*; q=0.01' -H 'Content-Type: application/json' -H 'X-Requested-With: XMLHttpRequest'\r\n{code}",
      "summary": "As a Confluence administrator I would like to remove personal drafts associated to disabled accounts/users"
    }
  },
  {
    "key": "CONFSERVER-58559",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-08T16:57:49.000+0000",
      "description": "When user choose to edit the Page, cursor focus is always positioned at the beginning of the Page. \r\nh5. Problem statement\r\nProblem occurs when users are editing very long Pages, they are forced to scroll down and find the specific chapter they are aiming to edit.\r\nh5. Solution\r\nThe solution for this would be to _remember_ the last position of the cursor when the Page was last saved, and on next edit to open the Page in edit mode with the cursor focus in the same spot as the last time, thus enabling user to smoothly continue where he/she left off.",
      "summary": "Remember cursor position in Edit mode"
    }
  },
  {
    "key": "CONFSERVER-58558",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-08T12:38:18.000+0000",
      "description": "Currently by design, if the Page has view restrictions any update will not be published in Slack. \r\nSince many Customers have custom view settings across all Spaces, the idea is to publish the updates for all Pages in Slack, regardless of their view restriction settings.\r\nOtherwise, Slack integration doesn't provide much value for them.\r\n\r\n",
      "summary": "Publish Page updates with view restrictions in Slack"
    }
  },
  {
    "key": "CONFSERVER-58557",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-08T07:00:00.000+0000",
      "description": "Code macro does not support syntax highlighting of BASE SAS language. It would be beneficial to have support for this language, or UI option to style any language.\r\n\r\nExample code:\r\n{code}\r\nPROC SQL;\r\n        CONNECT TO TERADATA(&CONNECT_tdp5.);\r\n        CREATE TABLE TD_ACCT_22DEC17 AS\r\n               SELECT * FROM CONNECTION TO TERADATA\r\n                       (\r\n               SELECT  ACCT_KEY  \r\n                       FROM    \r\n                               (\r\n                              SELECT  ACCT_KEY ,\r\n                                             MAX_TO_DATE AS TO_DATE,\r\n                                             YEAR(TO_DATE) || week_of_year AS YYYYWW\r\n                                             BATCH_FREQ\r\n                              FROM\r\n                                      (\r\n                                             SELECT ACCT_KEY AS ACCT_KEY,\r\n                                                            MAX(TO_DATE) AS MAX_TO_DATE\r\n                                                            ,'W' AS BATCH_FREQ\r\n                                             FROM DWPVTBLA.ACCT\r\n                                                     WHERE TO_DATE GE DATE '2015-09-30'\r\n                                                            GROUP BY ACCT_KEY\r\n                                      )AS A\r\n                              WHERE MAX_TO_DATE NE DATE '2999-12-31'\r\n                              ) AS B\r\n                       INNER JOIN sys_calendar.calendar X\r\n                                      ON X.calendar_date = B.TO_DATE\r\n\r\n                              WHERE YYYYWW = '       2017         51'                                     \r\n                                      );\r\n        DISCONNECT FROM TERADATA;\r\nQUIT;\r\n{code}\r\n\r\nExample of Notepad++ styling for BASE SAS language - [^SAS_UDL.xml].\r\n !SAS code syntax1.png|thumbnail! \r\n",
      "summary": "Add code macro support (syntax highlighting) for BASE SAS language, or UI styling support for any language."
    }
  },
  {
    "key": "CONFSERVER-58556",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-08-26T00:40:08.000+0000",
      "created": "2019-07-08T02:27:12.000+0000",
      "description": "h2. *Environment*\r\n\r\nXML Site Exports created out of Confluence 6.14.0+ may fail to be imported into new Confluence instance.\r\n\r\nh3. *Affected versions*\r\n\r\nOnly these versions are affected by this bug:\r\n\r\n* All Confluence 6.14.x\r\n* Confluence 6.15.0 -> 6.15.7\r\n\r\nh2. *Steps to reproduce*\r\n\r\n# Perform a Site XML Backup from any Confluence 6.14.0+\r\n# Setup a new Confluence instance and import the above XML backup and the import fails\r\n\r\nh2. *Expected behaviour*\r\n\r\nThe XML site export created \"successfully\" from Confluence 6.14.0 should be able to import into a new Confluence instance.\r\n\r\nAlternatively, the export should be marked as Failed if it fails to produce a data integrity XML backup.\r\n\r\nh2. *Actual behaviour*\r\n\r\nThe Site XML is failing to import into a new Confluence instance with this reported error:\r\n\r\n{code}\r\n2019-05-31 09:37:22,819 ERROR [Long running task: Importing data] [atlassian.confluence.importexport.KeyInitPostImportTask] execute Problem when init Confluence key after a site import\r\n -- url: /longrunningtaskxml.action | referer: http://127.0.0.1:8090/admin/restore-local-file.action | traceId: 4e5c55de5f099999 | userName: admin | action: longrunningtaskxml\r\n{code}\r\n{code}\r\n2019-05-31 09:37:24,325 ERROR [Long running task: Importing data] [springframework.transaction.interceptor.TransactionInterceptor] completeTransactionAfterThrowing Application exception overridden by commit exception\r\n -- url: /longrunningtaskxml.action | referer: http://127.0.0.1:8090/admin/restore-local-file.action | traceId: 4e5c55de5f099999 | userName: admin | action: longrunningtaskxml\r\ncom.atlassian.confluence.importexport.ImportExportException: java.lang.NullPointerException\r\n\tat com.atlassian.confluence.importexport.KeyInitPostImportTask.execute(KeyInitPostImportTask.java:25)\r\n\tat com.atlassian.confluence.importexport.Importer.doImport(Importer.java:82)\r\n\tat com.atlassian.confluence.importexport.DefaultImportExportManager.performImportInternal(DefaultImportExportManager.java:131)\r\n\tat com.atlassian.confluence.importexport.DefaultImportExportManager.doPerformImport(DefaultImportExportManager.java:119)\r\n\tat com.atlassian.confluence.importexport.DefaultImportExportManager.performImport(DefaultImportExportManager.java:114)\r\n...\r\nCaused by: java.lang.NullPointerException\r\n\tat java.security.MessageDigest.update(MessageDigest.java:335)\r\n\tat java.security.MessageDigest.digest(MessageDigest.java:410)\r\n\tat org.apache.commons.codec.digest.DigestUtils.md5(DigestUtils.java:351)\r\n\tat org.apache.commons.codec.digest.DigestUtils.md5(DigestUtils.java:376)\r\n\tat com.atlassian.confluence.security.trust.DefaultCurrentApplicationIdProvider.getAliasForSid(DefaultCurrentApplicationIdProvider.java:33)\r\n\tat com.atlassian.confluence.security.trust.DefaultCurrentApplicationIdProvider.getCurrentApplicationId(DefaultCurrentApplicationIdProvider.java:28)\r\n\tat com.atlassian.confluence.security.trust.DefaultTrustedApplicationsManager.getCurrentApplication(DefaultTrustedApplicationsManager.java:157)\r\n\tat com.atlassian.confluence.security.trust.DefaultTrustedApplicationsManager.initConfluenceKey(DefaultTrustedApplicationsManager.java:167)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:333)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:213)\r\n\tat com.sun.proxy.$Proxy240.initConfluenceKey(Unknown Source)\r\n\tat com.atlassian.confluence.importexport.KeyInitPostImportTask.execute(KeyInitPostImportTask.java:22)\r\n\t... 31 more\r\n{code}\r\n\r\nwhere:\r\n\r\n{code}\r\n\tat com.atlassian.confluence.security.trust.DefaultCurrentApplicationIdProvider.getAliasForSid(DefaultCurrentApplicationIdProvider.java:33)\r\n{code}\r\n\r\nis referring to attempting to read the {{confluence.server.id}} from BANDANA.\r\n\r\nDiving deeper, this is due to the entities.xml in the XML export missing this block:\r\n\r\n{code}\r\n<object class=\"ConfluenceBandanaRecord\" package=\"com.atlassian.confluence.setup.bandana\">\r\n<id name=\"id\">1</id>\r\n<property name=\"context\"><![CDATA[_GLOBAL]]></property>\r\n<property name=\"key\"><![CDATA[confluence.server.id]]></property>\r\n<property name=\"value\"><![CDATA[<string>B10L-****-****-****</string>]]></property>\r\n</object>\r\n{code}\r\n\r\nDeeper comparison of the entities.xml with the Source Database, the exported entities.xml is actually missing a lot more BANDANA rows and other TABLE rows.\r\n\r\nh2. *Validation*\r\n\r\n* Reviewed [Restoring Confluence XML site backups fails: Import failed. Check your server logs ...|https://confluence.atlassian.com/confkb/restoring-confluence-xml-site-backups-fails-import-failed-check-your-server-logs-921471138.html] which has not helped.\r\n* Proceed with this check:\r\n\r\n# Obtain the total number of a few tables row count (e.g. BANDANA, BODYCONTENT, EVENTS, etc...) from the Source Database\r\n{code}\r\nselect count(*) from BANDANA;\r\nselect count(*) from BODYCONTENT;\r\nselect count(*) from EVENTS;\r\n{code}\r\n# Extract out the XML backup and run this GREP / FINDSTR to obtain how many BANDANA, BODYCONTENT, EVENTS rows are present in the entities.xml\r\n{code:title=On Windows}\r\nfindstr \"class=\\\"ConfluenceBandanaRecord\\\"\" entities.xml | find /i \"class\" /c\r\n\r\nfindstr \"class=\\\"BodyContent\\\"\" entities.xml | find /i \"class\" /c\r\n\r\nfindstr \"class=\\\"Events\\\"\" entities.xml | find /i \"class\" /c\r\n{code}\r\n{code:title=On Linux}\r\ngrep -i 'class=\"ConfluenceBandanaRecord\"' entities.xml | wc -l\r\n\r\ngrep -i 'class=\"BodyContent\"' entities.xml | wc -l\r\n\r\ngrep -i 'class=\"Events\"' entities.xml | wc -l\r\n{code}\r\n# Also confirm that entities.xml is indeed missing the confluence.server.id row\r\n{code:title=On Windows}\r\nfindstr \"confluence.server.id\" entities.xml\r\n{code}\r\n{code:title=On Linux}\r\ngrep -i 'confluence.server.id' entities.xml\r\n{code}\r\n\r\nThe result of the Database row count of BANDANA, BODYCONTENT and EVENTS should match the number of BANDANA occurrences in entities.xml. If the numbers are vastly different - then you have encountered this issue.\r\n\r\nh2. *Workaround*\r\n\r\nThere is no reliable work around available for this bug.\r\n\r\nh2. *Resolution*\r\n\r\nA bug has been identified in the XML export logic and we must upgrade to a fixed version of Confluence. For a complete XML backup:\r\n\r\n# Take a database level backup of your current Confluence Database\r\n# Upgrade to Confluence 6.15.9+ or Confluence 7.0+ in a [Staging Environment|https://confluence.atlassian.com/doc/create-a-staging-environment-for-upgrading-confluence-866094180.html]\r\n# Perform the XML export on the upgraded version which will now produce an XML export zip file that can be imported into the destination instance (which should be the same version as the Exported instance)\r\n\r\n(!) It is currently advised to take database level backups or use database level backups when possible",
      "summary": "Restore of Confluence XML exported out of Confluence is failing to be imported into new instance"
    }
  },
  {
    "key": "CONFSERVER-58555",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-06T21:34:02.000+0000",
      "description": "On behalf of our 4500 users of our Confluence instance, we would find it extremely useful to be able to configure the Attachments macro with additional columns - notably \"Labels\"\u00a0\r\n\r\nSome of our Spaces use a lot of attached documents which they currently record manually in a table on the main page - this is so they can put a column in with a manually assigned document number to the attachments for reference purposes - this is common practice in many of the engineering companies (as is our global engineering industry User base) as it adds some consistency in their documents management platforms regardless of ad-hoc file names from various sources.\u00a0 They can therefore search for a document number and sort the table by the column headings.\r\n\r\nIf the Attachments macro had the ability to show the Labels column, then they could use Labels as the document reference number.\u00a0 They could sort by the Label column and even use normal Ctrl+F in their browser search to find what they are looking for.\r\n\r\nOther configurable columns would be the name of the last User who uploaded the last document version, and of course last version date.",
      "summary": "additional display columns in Attachments macro"
    }
  },
  {
    "key": "CONFSERVER-58554",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-05T21:46:09.000+0000",
      "description": "When I navigate to a page that doesn't exist it would be nice if there was a link to create the page that would appear at that URL. Wikipedia has this feature: !image-2019-07-05-16-41-03-077.png!\r\n\r\nThe use I am envisioning is that I could have a URL be created somewhere using a unique name or id in a template that links to confluence and if that page doesn't already exist then it would be easy for someone to create the page without having to click Create then copying the relevant part of the URL and replacing the pluses with spaces and all that other stuff that needs to happen.",
      "summary": "Create page on 404"
    }
  },
  {
    "key": "CONFSERVER-58553",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-07-08T04:50:26.000+0000",
      "created": "2019-07-05T20:55:26.000+0000",
      "description": "h3. Issue Summary\r\nWhen resizing a browser window to a narrow width, most of the UI elements on the top navigation bar will naturally adjust dynamically in response to the resizing. This is not true for the search box at the top-right of the navigation bar, which will overlap other navigation elements and prevent them from being clicked.\r\n\r\nh3. Steps to Reproduce\r\nSimply resize the width of a browser window with Confluence open, and the issue will appear as the browser width gets narrow.\r\n\r\nh3. Expected Results\r\nConfluence UI elements at the top bar are properly compressed, but can still be seen and accessed.\r\n\r\nh3. Actual Results\r\nThe search box will overlap other elements of the UI:\r\n\r\n !Confluence navigation bar visual issue.png|thumbnail! \r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Resizing a browser window to narrow width creates visual issues with the top navigation bar"
    }
  },
  {
    "key": "CONFSERVER-58552",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-05T18:15:07.000+0000",
      "description": "When creating a calendar from the editor, it would be nice to have the option to change the *Related Space*, just like we can do in the Calendars screen.\r\n\r\nCurrently, it seems the *Related Space* is populated with the space we are in, and the field doesn't even appear. Probably a change made here:\r\n\r\n- https://jira.atlassian.com/browse/CONFSERVER-51170",
      "summary": "Display the \"Related Space\" field when creating a calendar from the editor"
    }
  },
  {
    "key": "CONFSERVER-58551",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-05T17:25:28.000+0000",
      "description": "We support SSO login as long as the login that is being done inside the in-app web-view is successful. We can see that the for login to work the Apple-specific SSO {{AppleConnect}} extension is needed, which works with iOS Safari browser. The login fails because the in-app web-view is built from Apple's {{WKWebview}} which may not support AppleConnect extension.\r\n\r\nThe mobile app can solve this by using {{SFSafariViewController}} (even though it's deprecated) within the app, which will allow our Connect Extension to be invoked accordingly. \r\n\r\nApple documentation recommends using the in-app webview class {{ASWebAuthenticationSession}} for web based login authentication, but {{ASWebAuthenticationSession}} does not allow the extension. \r\n\r\nThis should be resolved with the new plugin functionality in iOS 13, but until then we would need to adopt {{SFSafariViewController}}.",
      "summary": "Add support for Apple SSO login methods to native iOS Confluence Server app"
    }
  },
  {
    "key": "CONFSERVER-58550",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-05T16:27:12.000+0000",
      "description": "h3. Summary  \r\n* Excel macro fails to render details of an Excel file, such as a graph continuity as well as lines in the graph (along with its text)\r\n\r\nh3. Environment \r\nN/A \r\n\r\nh3. Steps to Reproduce \r\n# Create an Excel file that has a graph with:\r\n#* a graph that is continous and has a value equals to zero\r\n#* straight lines crossing the graph\r\n# Create a Confluence page\r\n# Add this file to the page and use the Excel macro\r\n# Save the page\r\n\r\nh3. Expected Results  \r\n\r\n* When rendering the file using the Excel macro, it should be displayed accordingly to the Excel file.\r\n\r\n !Screen Shot 2019-07-05 at 13.25.34.png|thumbnail! \r\n\r\nh3. Actual Results \r\n\r\n* The file is rendered, but Confluence complements the graph that has a value equals to zero:\r\n\r\n !Screen Shot 2019-07-05 at 13.25.26.png|thumbnail! \r\n\r\n* Confluence doesn't display the straight lines that were added to the graph\r\n\r\nh3. Notes \r\nN/A\r\n\r\nh3. Workaround \r\nN/A",
      "summary": "Excel macro has issues rendering details on Excel files' graphs"
    }
  },
  {
    "key": "CONFSERVER-58549",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-09-11T00:05:09.000+0000",
      "created": "2019-07-05T08:14:57.000+0000",
      "description": "h3. Issue Summary\r\n\r\nWhen editing the Jira *Filter Results* macro, the \"fields to display\" are unable to be edited. They are unable to be removed or sorted.\r\nh3. Steps to Reproduce\r\n # Use a Confluence instance with an application link to Jira.\r\n # Create a new page and add the Jira *Filter Results* macro.\r\n # Select the macro and click on Edit.\r\n # In the preview pane, at the bottom of the list, click on the cogwheel icon and then Edit.\r\n # Attempt to\r\n ## Remove a field from the list of Fields to display, by clicking on the bin icon.\r\n ## Reorder a field\r\n\r\nh3. Expected Results\r\n\r\nThe field is removed / reordered from the list.\r\nh3. Actual Results\r\n\r\nNothing happens, the field stays in the list.\r\n Check the attached video\u00a0[^DeleteField-FilterResultsMacro.mp4] for a recording of the issue's reproduction.\r\nh3. Resolution\r\n\r\n*Upgrade Jira to the upcoming Jira 8.14 release.*\r\nh3. Workaround\r\n\r\nIt is possible to remove and reorder fields using an additional plugin from Atlassian Marketplace called 'Source Editor'.\r\n # In the Confluence user interface, select 'Confluence Administration' from the top right, then 'Manage Apps'\r\n # Click 'Find new apps', and in the search box type in 'Source editor'.\r\n # In the search results, find this one :\r\n !source-editor-marketplace.png|thumbnail! \r\n (You can also find it in the Atlassian Marketplace - [source editor|https://marketplace.atlassian.com/apps/1210722/confluence-source-editor?hosting=server&tab=overview])\r\n Click 'install'\r\n # Wait a few seconds and close the popup that says it's installed\r\n # Load the Confluence page with the problematic macro on it\r\n # Edit the page (but don't click 'edit' on the macro)\r\n # In the top right corner, click on the '<>' icon (Mouseover will show 'Open in source editor')\r\n # The example below shows the default columns, plus a new one that I added 'Created': Type, Key, Priority, Summary, Created.\r\n # The macro block itself is within the <ac:structured-macro> tag:\r\n{code:java}\r\n<p>'Filter Results' macro added from Jira:</p>\r\n<p>\r\n  <ac:structured-macro ac:macro-id=\"7a4a1ab1-3113-432d-8158-904056e9d433\" ac:name=\"gadget\" ac:schema-version=\"1\">\r\n    <ac:parameter ac:name=\"filterId\">filter-10002</ac:parameter>\r\n    <ac:parameter ac:name=\"isConfigured\">true</ac:parameter>\r\n    <ac:parameter ac:name=\"preferences\">filterId=filter-10002&amp;num=10&amp;columnNames=issuetype%7Cissuekey%7Cpriority%7Csummary%7Ccreated&amp;isConfigured=true&amp;refresh=false</ac:parameter>\r\n    <ac:parameter ac:name=\"columnNames\">issuetype|issuekey|priority|summary|created</ac:parameter>\r\n    <ac:parameter ac:name=\"num\">10</ac:parameter>\r\n    <ac:parameter ac:name=\"refresh\">false</ac:parameter>\r\n    <ac:parameter ac:name=\"url\">http:/testmachine.atlassian.com:8080/jira/rest/gadgets/1.0/g/com.atlassian.jira.gadgets:filter-results-gadget/gadgets/filter-results-gadget.xml</ac:parameter>\r\n  </ac:structured-macro>\r\n</p>\r\n{code}\r\n\r\n # Using the source editor, remove or rearrange the fields/columns that you wish to remove or rearrange from the macro. For example, to remove the 'Created' field, we just need to change the two lines that reference it, changing:\r\n{code:java}\r\n<ac:parameter ac:name=\"preferences\">filterId=filter-10002&amp;num=10&amp;columnNames=issuetype%7Cissuekey%7Cpriority%7Csummary%7Ccreated&amp;isConfigured=true&amp;refresh=false</ac:parameter>\r\n<ac:parameter ac:name=\"columnNames\">issuetype|issuekey|priority|summary|created</ac:parameter>\r\n{code}\r\nTo:\r\n{code:java}\r\n<ac:parameter ac:name=\"preferences\">filterId=filter-10002&amp;num=10&amp;columnNames=issuetype%7Cissuekey%7Cpriority%7Csummary&amp;isConfigured=true&amp;refresh=false</ac:parameter>\r\n<ac:parameter ac:name=\"columnNames\">issuetype|issuekey|priority|summary</ac:parameter>\r\n{code}\r\n\r\n # Click 'Apply' in the bottom-right corner of the source editor, then 'Update' to save the whole page.",
      "summary": "Deleting a field to display (clicking on the Bin icon) or reordering fields does nothing, when editing \"Filter Results\" macro"
    }
  },
  {
    "key": "CONFSERVER-58548",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-05T07:51:59.000+0000",
      "description": "Currently in the\u00a0*Limitations and*\u00a0*known Issues*\u00a0section in our mobile app documentation\r\n\r\n* [Using the Confluence Server mobile app|https://confluence.atlassian.com/doc/using-the-confluence-server-mobile-app-947169252.html]\r\nwe mention:\r\n* Some page macros won't display in the app or mobile web. You'll need to view the page in your browser (or switch to full desktop mode on your device).\r\n\r\nIt would be useful for users and administrators to have a full list or at least a more comprehensive list of these macros. This will help users, admins as well as Support to identify if a certain macro is by design not working or it is a bug. ",
      "summary": "Provide a more detailed list of macros and functions that are not available in the iOS and Android mobile app."
    }
  },
  {
    "key": "CONFSERVER-58547",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-05T07:35:41.000+0000",
      "description": "Unlike the Web Confluence, currently the search function in the Confluence iOS and Android apps, only search through page and blog contents. The web Confluence allows the ability to search through attachment contents. The app should provide the same capability.\u00a0\r\n\r\nAlso, an update to the following document to inform bout this limitation would be useful as well for the app admins and users.\r\n * [Using the Confluence Server mobile app|https://confluence.atlassian.com/doc/using-the-confluence-server-mobile-app-947169252.html]",
      "summary": "Improve the search feature of the Confluence Mobile App in iOS and Android to include searching through attachment content. "
    }
  },
  {
    "key": "CONFSERVER-58546",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-04T18:29:32.000+0000",
      "description": "h3. Summary  \r\n\r\n* When a user B clicks on a task list existing on a page, the page history of this page will show user B and the creator of the page in the *Changed by* column\r\n\r\nh3. Environment \r\nN/A\r\n\r\nh3. Steps to Reproduce \r\n# Have a user A create a page\r\n# Add a task list to this page\r\n# Publish it\r\n# Have user B check the task list box\r\n# Go to the Page History\r\n\r\nh3. Expected Results  \r\n\r\n* The user B will show up as the last person who changed the page\r\n\r\nh3. Actual Results \r\n\r\n* User A and user B show up together in the *Changed by* column\r\n\r\nh3. Notes \r\nN/A\r\n\r\nh3. Workaround \r\nN/A",
      "summary": "Checking the task list box shows up two authors in the Page History"
    }
  },
  {
    "key": "CONFSERVER-58545",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-04T18:24:43.000+0000",
      "description": "h3. Issue Summary\r\nSince Confluence version 6.13, administrators have the option to delete users that created content.\r\nDeleting an user will not delete the contents they created. Rather, it will anonymize these contents.\r\n\r\nIf Collaborative Editing is disabled, then users can have personal drafts.\r\nThe way personal drafts work means that no other user (even the confluence administrator) can perform operations (edit, publish or discard) on these drafts, only the user who created them.\r\n\r\nWhen an user is deleted by the Confluence administrator, personal drafts and associated content (such as attachments) are not deleted.\r\nSince these personal drafts cannot be accessed by any other user (and the delete operation cannot be undone), this means unnecessary records will still be in the database, as well as in the file system (attachments).\r\n\r\n_Confluence administrator trying to discard a personal draft created by another user gives an error._\r\n !drafts-img003.png|thumbnail! \r\n\r\nThis is not a security issue because the drafts cannot be associated with the deleted user anymore.\r\n\r\nh3. Environment\r\nThis issue applies only to versions on which deleting an user that created content is possible.\r\nThis is from Confluence 6.13 onwards.\r\nThis applies only to personal drafts, created when Collaborative Editing (CE) is disabled.\r\nDrafts created while CE is enabled are shared, so there's no meaning on deleting them.\r\n\r\nh3. Steps to Reproduce\r\n# Install a vanilla Confluence instance.\r\n# Create an user (username: {{regular_user001}}) that is part of the {{confluence-users}} group.\r\n# Access Confluence as {{regular_user001}} and create a sample Space.\r\n# In that Space, create a page, but don't publish it.\r\n# Wait for the draft to be autosaved by Confluence and click on the _Close_ button.\r\n !drafts-img004.png|thumbnail!  \r\n# Accessing the _Drafts_ page under user's profile shows the drafts created by this user.\r\n !drafts-img001.png|thumbnail! \r\n# Access Confluence as the administrator and go the link {{<Confluence Base URL>/admin/users/viewuser.action?username=regular_user001}} to view the user profile.\r\n# Click on the _Delete_ link and confirm the operation on the next screen.\r\n\r\nh3. Expected Results\r\nUser is deleted, the content published is anonymized and personal drafts are removed, keeping footprint at the minimum necessary without lost of content.\r\n\r\nh3. Actual Results\r\nPersonal drafts are not removed.\r\nSearching for these drafts in the database confirms this.\r\n\r\nh3. Workaround\r\nAs a workaround, the Confluence administrator can discard drafts from deleted users using a REST API method.\r\nWhen an user is deleted from Confluence, a change is made in the {{user_mapping}} table, making the value from {{username}} attribute equals to the {{user_key}}.\r\nTherefore, running the query below identifies users that were deleted.\r\n{code}\r\nselect *\r\nfrom USER_MAPPING\r\nwhere user_key=username\r\n{code}\r\n\r\nWith that information, Confluence administrator can identify the draft ID of users that were deleted by running the following SQL query:\r\n{code}\r\nselect c.CONTENTID as DRAFT_ID\r\nfrom CONTENT c\r\nwhere c.CONTENTTYPE='DRAFT'\r\nand c.DRAFTTYPE='page'\r\nand c.CREATOR in (select USER_KEY\r\nfrom USER_MAPPING\r\nwhere USER_KEY=USERNAME);\r\n{code}\r\n\r\nThen, with each {{DRAFT_ID}} the administrator can run the following REST API method:\r\n{code}\r\nCONFBASEURL=<Confluence Base URL>\r\nADMIN_USERNAME=<Confluence administrator username>\r\nADMIN_PWD=<Confluence administrator password>\r\nDRAFT_ID=<draft ID from SQL query>\r\n\r\ncurl -i -u $ADMIN_USERNAME:$ADMIN_PWD $CONFBASEURL'/rest/api/content/'$DRAFT_ID'?status=draft' -X DELETE -H 'Accept: application/json, text/javascript, */*; q=0.01' -H 'Content-Type: application/json' -H 'X-Requested-With: XMLHttpRequest'\r\n{code}\r\nA 204 HTTP status response confirms the request was processed.",
      "summary": "Deleting users from Confluence does not delete their personal drafts"
    }
  },
  {
    "key": "CONFSERVER-58544",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-04T13:11:44.000+0000",
      "description": "h3. Summary\r\nCurrently, the Confluence mobile app does not shows the parent page when the user viewing the child page. It only shows that the page is from which space. This caused user not able to open the parent page of that child page. User would like to have the feature where the parent page of the child page is display so they are able to know the location of the page and able to view the parent page.\r\n\r\nh3. Suggestion\r\nDisplay the parent page of the child page so user will know where the page is located and able to locate the parent page directly from the child page.",
      "summary": "Be able to show the parent page in mobile app when viewing the child page."
    }
  },
  {
    "key": "CONFSERVER-58541",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-04T04:02:07.000+0000",
      "description": "h3. Issue Summary\r\n\r\nConfluence startup logs show the following warning messages,\r\n{code}\r\n2019-07-03 10:56:16,056 WARN [ThreadPoolAsyncTaskExecutor::Thread 23] [client.eventfilter.whitelist.AnalyticsWhitelistModuleDescriptor] readPluginWhitelist No whitelist resource file found at [mediaviewer/lib/analytics-whitelist.json] in plugin [com.atlassian.confluence.plugins.confluence-previews] (bundle entry not found)\r\n2019-07-03 10:56:16,058 WARN [ThreadPoolAsyncTaskExecutor::Thread 23] [client.eventfilter.whitelist.AnalyticsWhitelistModuleDescriptor] readPluginWhitelist No whitelist resource file found at [mediaviewer/lib/analytics-whitelist.json] in plugin [com.atlassian.confluence.plugins.confluence-previews] (null InputStream)\r\n{code}\r\n\r\nh3. Environment\r\n\r\n* Confluence 6.13.4\r\n\r\nh3. Steps to Reproduce\r\n\r\n# Install a new instance of Confluence 6.13.4\r\n# Startup logs will show these WARN messages.\r\n\r\nh3. Workaround\r\n\r\nNo known workarounds.",
      "summary": "No whitelist resource file found at analytics-whitelist"
    }
  },
  {
    "key": "CONFSERVER-58540",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-03T22:17:48.000+0000",
      "description": "h3. Problem Definition\r\nAllow Confluence Standalone Server started with AWS Cloud Formation Template to upgrade by updating the Cloud Formation Stack\r\n\r\nUpgradin the Confluence Standalone Server started using the [ConfluenceServer.template.yaml|https://bitbucket.org/atlassian/atlassian-aws-deployment/src/master/templates/ConfluenceServer.template.yaml] needs to be manually carried out following the standard [upgrade process|https://confluence.atlassian.com/doc/upgrading-confluence-4578.html] instead of just updating the Cloud Formation Stack similar to the Confluence Data Center upgrade stated in the documentation below:\r\n* [Upgrading Confluence Data Center in AWS|https://confluence.atlassian.com/doc/running-confluence-data-center-in-aws-879956085.html#RunningConfluenceDataCenterinAWS-upgradeUpgrading]\r\n\r\nThe main reason why is that Confluence Standalone Server doesn't persist the home directory when an EC2 node is brought down. Hence changing the *Confluence Version* in the stack and terminating the existing EC2 will lost the Confluence Home Directory\r\n\r\nh3. Suggestion\r\nAllowing the Home Directory to be persisted even when the EC2 is terminated so the newly started EC2 after updating the stack can have a newer version while keeping the Home Directory data to proceed with the upgrade, similar to the Data Center.\r\n\r\nThis helps to cut down most of the manual work from upgrading the Confluence",
      "summary": "Allow Confluence Standalone Server started with AWS Cloud Formation Template to upgrade by updating the Cloud Formation Stack"
    }
  },
  {
    "key": "CONFSERVER-58539",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-03T17:53:16.000+0000",
      "description": "This suggestion is to implement some Excel functionalities to Confluence Office Connector - Office Excel Macro. The feature is to add the pivot table ability to create an hierarchical structure inside a sheet, using an expand button and displaying the data similar to what is displayed in Office Excel.\r\n\r\nSee attachments",
      "summary": "Add Pivot table hierarchical structure in Office Connector"
    }
  },
  {
    "key": "CONFSERVER-58538",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-03T07:54:44.000+0000",
      "description": "h3. Issue Summary\r\nWhen a user added a URL that contains a Javascript, Confleucne is not able to render the link and there will be no respond when user click the link.\r\n\r\nh3. Steps to Reproduce\r\n # Create a new page\r\n# Paste the following link\r\n{code}\r\nhttps://<your_instance>.service-now.com/incident_list.do?sysparm_query=closed_atONLast%20week%40javascript%3Ags.beginningOfLastWeek()%40javascript%3Ags.endOfLastWeek()\r\n{code}\r\n# Save the page\r\n# Click the link\r\n# Click the {{...}} in the Confluence page and select view page source\r\n# You can see that Confluence render the link as following.\r\n{code}\r\n<a>https://<your_instance>.service-now.com/incident_list.do?sysparm_query=closed_atONLast%20week%40javascript%3Ags.beginningOfLastWeek()%40javascript%3Ags.endOfLastWeek()</a>\r\n{code}\r\ninstead of\r\n{code}\r\n<a href=\"https://<your_instance>.service-now.com/incident_list.do?sysparm_query=closed_atONLast%20week%40\">https://<your_instance>.service-now.com/incident_list.do?sysparm_query=closed_atONLast%20week%40</a>\r\n{code}\r\n(i) The herf='URL' tag is missing when the link contains Javascript.\r\n\r\nh3. Expected Results\r\nIt will redirect user to the service now instance\r\n\r\nh3. Actual Results\r\nConfluence is not redirecting user to the service now instance and there is no action perfomr when user click the link.\r\n\r\nh3. Workaround\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Confluence is not able to render and redirect user to URL that has javascript which created y service Now."
    }
  },
  {
    "key": "CONFSERVER-58537",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-02T09:34:59.000+0000",
      "description": "Hi,\r\n\r\nI am currently trying to run confluence data center nodes on Kubernetes.\r\n Since the underlaying network layer does not support multicast, I am stuck with tcp_ip cluster.type.\r\n As pods get assigned new IP-addresses on rebuild and I need to rebuild the pods in order to change the configuration, there seems to be a circular dependency I cannot get over.\r\n\r\nAs I see many people struggling with this exact part on K8s, I'd like to suggest the property of cluster.peers to be DNS names, a bit like CONFSERVER-53527, but without the synchrony-part.\r\n\r\nThe config-property would be extended like this:\r\n{code:java}\r\n<property name=\"confluence.cluster.peers\">192.168.1.1,\"confluence-0.confluence.cluster.local\"</property> <!-- A comma-separated list of node IP addresses, without spaces -->{code}\r\nThe naive behavior-changes of the cluster-node discovery would consist of a simpe DNS-query while parsing the config, then recheck the DNS every time a node fails.\r\n\r\nThis change would directly enable Confluence to be run on Kubernetes.\r\n\r\n\u00a0",
      "summary": "Use DNS for cluster peers - K8s support"
    }
  },
  {
    "key": "CONFSERVER-58536",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-02T06:21:43.000+0000",
      "description": "h3. Issue Summary\r\nAfter upgrading our instance to version 6.15.1 (from 6.8.1) some of our users reported missing page hierarchies in the tree of a single space. All restrictions are looking fine, and the affected users can access the missing pages using direct links. However, they cannot see them on the tree on the navigation panel even when opening the page from a direct link.\r\n\r\nScope: we've set up a page tree and need to set the restrictions on page level individually. Because there's a lot of pages and branches the restriction handling must be achieved by API calls. Performance is an issue, so processing these restrictions needs to be fast.\r\n\r\nApproach: We are using the following method: [https://docs.atlassian.com/ConfluenceServer/javadoc/6.15.6/com/atlassian/confluence/core/ContentPermissionManager.html#setContentPermissions-java.util.Map-com.atlassian.confluence.core.ContentEntityObject-]\r\n\r\nConsider the following snippet:\r\n{code:java}\r\nPage page = pageManager.getPage(\"SPACE\", \"Some Page Title\");\r\n\r\nSet<ContentPermission> viewPermissions = new HashSet<ContentPermission>();\r\nSet<ContentPermission> editPermissions = new HashSet<ContentPermission>();\r\n\r\neditPermissions.add(ContentPermission.createGroupPermission(ContentPermission.EDIT_PERMISSION, \"Group A\"));\r\nviewPermissions.add(ContentPermission.createGroupPermission(ContentPermission.VIEW_PERMISSION, \"Group C\"));\r\n\r\nMap<String, Collection<ContentPermission>> permissionMap = new HashMap<String, Collection<ContentPermission>>();\r\npermissionMap.put(ContentPermission.EDIT_PERMISSION, editPermissions);\r\npermissionMap.put(ContentPermission.VIEW_PERMISSION, viewPermissions);\r\n\r\ncontentPermissionManager.setContentPermissions(permissionMap, page);\r\n{code}\r\nThe pages show all restrictions in place as provided by the map, however, some users within some groups have issues seeing the pages on the Page Tree.\r\n As far as we can tell the issue is not related to a single space.\r\n\r\nh3. Steps to Reproduce\r\n# Install addon that handles the space structure and restrictions in v6.8.1\r\n# Update Confluence to v6.15.1\r\n\r\nh3. Expected Results\r\nThe pages should be both visible to people in groups within the map provided to the method, as well as viewable and/or editable.\r\n\r\nh3. Actual Results\r\nIn some circumstances, users cannot see pages on the Page Tree. They are able to access the pages missing in the Page Tree by using a direct link, however.\r\n\r\nh3. Notes\r\n* This is a follow up on a service desk issue with key CSP-248197. See information there for a more wide view on the issue and what has been tried to resolve the issue already.\r\n* In order to isolate the issue, the following were done \r\n** We installed Confluence Server 6.8.1 and installed our addon that handles the space structure and restrictions. The space was set up, restrictions put in place as described below, and users within the groups affected could see everything on their Page Tree. \r\n** Now I proceeded to uninstall the addon to remove any customization, so the testing environment turned back to a standard installation. Users could still see everything in the Page Tree.\r\n** Then I proceeded to upgrade the Confluence instance from 6.8.1 to \r\n 6.15.1, and when the users checked in on the Page Tree, they found the pages missing. This leads to the conclusion that somewhere along the line of the upgrade process the permissions got messed up. And it looks like they can't be brought back to work by using the same API calls.\r\n\r\nh3. Workaround\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Pages not visible to groups in PageTree when permission is set via ContentPermissionManager class after an update"
    }
  },
  {
    "key": "CONFSERVER-58535",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-01T16:58:45.000+0000",
      "description": "The tool is very finicky with respect to inline comments, and often provides a confusing error messages.\u00a0 For example, if i select a few words including a space at the end of my selection, i typically get the exasperating \"you can't add a comment in a macro\" error message.\u00a0 However if i make sure not to select the trailing space, it happily records my comment.\u00a0 It gets old pretty quick.",
      "summary": "Inline comments inconsistent behavior"
    }
  },
  {
    "key": "CONFSERVER-58534",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-09-27T04:08:53.000+0000",
      "created": "2019-07-01T16:20:21.000+0000",
      "description": "h5. Summary\r\nAn emoticon that is in the form of an image link (to the svg file) inside a table does not export to pdf.\r\n\r\nh5. Steps to replicate\r\n# Add emoticon as an SVG image link inside a table:\r\n{code:java}\r\n<ac:image ac:alt=\"(thumbs up)\" ac:class=\"emoticon emoticon-thumbs-up\"> <ri:url ri:value=\"https://extranet.atlassian.com/s/en_GB/7601/440fc7e33d392cae27e22f3a50d5dcc6a0775898/_/images/icons/emoticons/thumbs_up.svg\"/> </ac:image>\r\n{code}\r\nThe new input of the emoticon tag works fine\r\n{code:java}\r\n<ac:emoticon ac:name=\"thumbs-up\"/>\r\n{code}\r\n# Export to PDF\r\n\r\nh5. Expected results\r\nSuccessful export\r\n\r\nh5. Actual results\r\n*Stack trace when try to pdf export:*\r\n{code:java}\r\ncom.atlassian.confluence.importexport.ImportExportException: Exception while rendering the PDF document /var/atlassian/application-data/confluence/temp/pdfexport-20180304-040318-0405-167/smadi-123123456-123123456-040318-0405-168.pdf\r\n    at com.atlassian.confluence.extra.flyingpdf.FlyingSaucerXmlToPdfConverter.convertXhtmlToPdf(FlyingSaucerXmlToPdfConverter.java:95)\r\n\r\ncaused by: java.lang.RuntimeException: Failed to read image\r\n    at com.atlassian.confluence.extra.flyingpdf.LightITextFSImage.getImage(LightITextFSImage.java:247)\r\n\r\ncaused by: java.lang.RuntimeException: Failed to read image\r\n    at com.atlassian.confluence.extra.flyingpdf.LightITextFSImage.getImage(LightITextFSImage.java:240)\r\n\r\ncaused by: java.lang.IllegalArgumentException: 0.0 incompatible with org.apache.batik.transcoder.keys.LengthKey@33840d89\r\n    at org.apache.batik.transcoder.TranscodingHints.put(TranscodingHints.java:92)\r\n{code}\r\n*Stack trace:*\r\n{code:java}\r\ncom.atlassian.confluence.importexport.ImportExportException: Exception while rendering the PDF document /var/atlassian/application-data/confluence/temp/pdfexport-20180304-040318-0405-167/smadi-123123456-123123456-040318-0405-168.pdf\r\n\tat com.atlassian.confluence.extra.flyingpdf.FlyingSaucerXmlToPdfConverter.convertXhtmlToPdf(FlyingSaucerXmlToPdfConverter.java:95)\r\n\tat com.atlassian.confluence.extra.flyingpdf.FlyingSaucerXmlToPdfConverter.convertXhtmlToPdf(FlyingSaucerXmlToPdfConverter.java:53)\r\n\tat com.atlassian.confluence.extra.flyingpdf.FlyingSaucerPdfExporterService.createPdfForPage(FlyingSaucerPdfExporterService.java:95)\r\n\tat com.atlassian.confluence.extra.flyingpdf.ExportPageAsPdfAction.doExecute(ExportPageAsPdfAction.java:40)\r\n\tat com.atlassian.confluence.extra.flyingpdf.ExportPageAsPdfAction.execute(ExportPageAsPdfAction.java:29)\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:168)\r\n\tat com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:35)\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:165)\r\n\tat com.atlassian.confluence.core.ConfluenceWorkflowInterceptor.intercept(ConfluenceWorkflowInterceptor.java:33)\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:165)\r\n\tat com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:35)\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:165)\r\n\tat com.atlassian.xwork.interceptors.XsrfTokenInterceptor.intercept(XsrfTokenInterceptor.java:100)\r\n\tat com.atlassian.confluence.xwork.ConfluenceXsrfTokenInterceptor.intercept(ConfluenceXsrfTokenInterceptor.java:29)\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:165)\r\n\tat com.atlassian.confluence.security.interceptors.CaptchaInterceptor.intercept(CaptchaInterceptor.java:42)\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:165)\r\n\tat com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:35)\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:165)\r\n\tat com.atlassian.confluence.core.ConfluenceLicenseInterceptor.intercept(ConfluenceLicenseInterceptor.java:66)\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:165)\r\n\tat com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:35)\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:165)\r\n\tat com.atlassian.confluence.validation.MessageHolderInterceptor.intercept(MessageHolderInterceptor.java:37)\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:165)\r\n\tat com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:35)\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:165)\r\n\tat com.atlassian.confluence.util.LoggingContextInterceptor.intercept(LoggingContextInterceptor.java:44)\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:165)\r\n\tat com.atlassian.confluence.core.CancellingInterceptor.intercept(CancellingInterceptor.java:21)\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:165)\r\n\tat com.atlassian.confluence.xwork.HttpMethodValidationInterceptor.intercept(HttpMethodValidationInterceptor.java:68)\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:165)\r\n\tat com.atlassian.confluence.security.websudo.WebSudoInterceptor.intercept(WebSudoInterceptor.java:57)\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:165)\r\n\tat com.atlassian.confluence.themes.ThemeContextInterceptor.intercept(ThemeContextInterceptor.java:42)\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:165)\r\n\tat com.atlassian.confluence.security.actions.PermissionCheckInterceptor.intercept(PermissionCheckInterceptor.java:55)\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:165)\r\n\tat com.atlassian.confluence.setup.webwork.BootstrapAwareInterceptor.intercept(BootstrapAwareInterceptor.java:21)\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:165)\r\n\tat com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:35)\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:165)\r\n\tat com.atlassian.confluence.user.actions.UserAwareInterceptor.intercept(UserAwareInterceptor.java:53)\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:165)\r\n\tat com.atlassian.confluence.pages.actions.CommentAwareInterceptor.intercept(CommentAwareInterceptor.java:39)\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:165)\r\n\tat com.atlassian.confluence.pages.actions.PageAwareInterceptor.intercept(PageAwareInterceptor.java:61)\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:165)\r\n\tat com.atlassian.confluence.spaces.actions.SpaceAwareInterceptor.intercept(SpaceAwareInterceptor.java:71)\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:165)\r\n\tat com.atlassian.confluence.security.interceptors.ConfluenceAccessInterceptor.intercept(ConfluenceAccessInterceptor.java:31)\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:165)\r\n\tat com.atlassian.confluence.xwork.FlashScopeInterceptor.intercept(FlashScopeInterceptor.java:21)\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:165)\r\n\tat com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:35)\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:165)\r\n\tat com.atlassian.confluence.core.actions.LastModifiedInterceptor.intercept(LastModifiedInterceptor.java:27)\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:165)\r\n\tat com.atlassian.confluence.core.ConfluenceAutowireInterceptor.intercept(ConfluenceAutowireInterceptor.java:44)\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:165)\r\n\tat com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:35)\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:165)\r\n\tat com.atlassian.xwork.interceptors.TransactionalInvocation.invokeAndHandleExceptions(TransactionalInvocation.java:71)\r\n\tat com.atlassian.xwork.interceptors.TransactionalInvocation.invokeInTransaction(TransactionalInvocation.java:57)\r\n\tat com.atlassian.xwork.interceptors.XWorkTransactionInterceptor.intercept(XWorkTransactionInterceptor.java:56)\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:165)\r\n\tat com.atlassian.confluence.xwork.SetupIncompleteInterceptor.intercept(SetupIncompleteInterceptor.java:43)\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:165)\r\n\tat com.atlassian.confluence.security.interceptors.SecurityHeadersInterceptor.intercept(SecurityHeadersInterceptor.java:39)\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:165)\r\n\tat com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:35)\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:165)\r\n\tat com.opensymphony.xwork.DefaultActionProxy.execute(DefaultActionProxy.java:115)\r\n\tat com.atlassian.confluence.servlet.ConfluenceServletDispatcher.serviceAction(ConfluenceServletDispatcher.java:56)\r\n\tat com.opensymphony.webwork.dispatcher.ServletDispatcher.service(ServletDispatcher.java:199)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:292)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.confluence.web.filter.DebugFilter.doFilter(DebugFilter.java:46)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:39)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.confluence.plugins.baseurl.IncludeResourcesFilter.doFilter(IncludeResourcesFilter.java:52)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.labs.botkiller.BotKillerFilter.doFilter(BotKillerFilter.java:36)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.confluence.extra.jira.filters.SingleJiraIssuesMapThreadLocalFilter.doFilter(SingleJiraIssuesMapThreadLocalFilter.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.applinks.core.rest.context.ContextFilter.doFilter(ContextFilter.java:24)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.applinks.core.rest.context.ContextFilter.doFilter(ContextFilter.java:24)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.applinks.core.rest.context.ContextFilter.doFilter(ContextFilter.java:24)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.applinks.core.rest.context.ContextFilter.doFilter(ContextFilter.java:24)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.applinks.core.rest.context.ContextFilter.doFilter(ContextFilter.java:24)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.analytics.client.filter.UniversalAnalyticsFilter.doFilter(UniversalAnalyticsFilter.java:92)\r\n\tat com.atlassian.analytics.client.filter.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:39)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.mywork.client.filter.ServingRequestsFilter.doFilter(ServingRequestsFilter.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.confluence.efi.OnboardingFilter.doFilter(OnboardingFilter.java:61)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsSiteMeshFixupFilter.doFilter(PrettyUrlsSiteMeshFixupFilter.java:36)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsDispatcherFilter.doFilter(PrettyUrlsDispatcherFilter.java:60)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsSiteMeshFilter.doFilter(PrettyUrlsSiteMeshFilter.java:92)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsMatcherFilter.doFilter(PrettyUrlsMatcherFilter.java:56)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:70)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:58)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.confluence.util.message.MessagesDecoratorFilter.doFilter(MessagesDecoratorFilter.java:62)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.opensymphony.sitemesh.webapp.SiteMeshFilter.obtainContent(SiteMeshFilter.java:129)\r\n\tat com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:77)\r\n\tat com.atlassian.confluence.util.profiling.ProfilingSiteMeshFilter.doFilter(ProfilingSiteMeshFilter.java:50)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:39)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.plugin.connect.plugin.auth.scope.ApiScopingFilter.doFilter(ApiScopingFilter.java:89)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.confluence.util.profiling.ConfluenceActivityFilter.doFilter(ConfluenceActivityFilter.java:39)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsCombinedMatchDispatcherFilter.doFilter(PrettyUrlsCombinedMatchDispatcherFilter.java:61)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:70)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:58)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.confluence.jmx.JmxFilter.doFilter(JmxFilter.java:98)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.confluence.cache.TransactionalCacheFactoryCleanupFilter.doFilter(TransactionalCacheFactoryCleanupFilter.java:22)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.core.filters.ServletContextThreadLocalFilter.doFilter(ServletContextThreadLocalFilter.java:21)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.confluence.util.UserLoggingContextFilter.doFilter(UserLoggingContextFilter.java:32)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.confluence.util.UserNameHeaderFilter.doFilter(UserNameHeaderFilter.java:25)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.confluence.web.filter.MauEventFilter.doFilter(MauEventFilter.java:39)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.confluence.util.UserThreadLocalFilter.doFilter(UserThreadLocalFilter.java:39)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.confluence.web.filter.ConfluenceTimeoutFilter.doFilter(ConfluenceTimeoutFilter.java:57)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.seraph.filter.SecurityFilter.doFilter(SecurityFilter.java:242)\r\n\tat com.atlassian.confluence.web.filter.ConfluenceSecurityFilter.doFilter(ConfluenceSecurityFilter.java:25)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.confluence.web.filter.ThreadLocalCacheFilter.doFilter(ThreadLocalCacheFilter.java:25)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.security.auth.trustedapps.filter.TrustedApplicationsFilter.doFilter(TrustedApplicationsFilter.java:103)\r\n\tat com.atlassian.confluence.util.AbstractBootstrapHotSwappingFilter.doFilter(AbstractBootstrapHotSwappingFilter.java:35)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.seraph.filter.BaseLoginFilter.doFilter(BaseLoginFilter.java:148)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:39)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.oauth.serviceprovider.internal.servlet.OAuthFilter.doFilter(OAuthFilter.java:67)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.core.filters.ServletContextThreadLocalFilter.doFilter(ServletContextThreadLocalFilter.java:21)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsCombinedMatchDispatcherFilter.doFilter(PrettyUrlsCombinedMatchDispatcherFilter.java:61)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:70)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:58)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.confluence.util.ClusterHeaderFilter.doFilter(ClusterHeaderFilter.java:56)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat org.springframework.orm.hibernate.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:170)\r\n\tat com.atlassian.confluence.web.filter.ConfluenceOpenSessionInViewFilter.doFilterInternal(ConfluenceOpenSessionInViewFilter.java:41)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.confluence.util.ConfluenceErrorFilter.doFilter(ConfluenceErrorFilter.java:24)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.util.profiling.filters.ProfilingFilter.doFilter(ProfilingFilter.java:99)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.confluence.core.datetime.RequestTimeThreadLocalFilter.doFilter(RequestTimeThreadLocalFilter.java:37)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.core.filters.cache.AbstractCachingFilter.doFilter(AbstractCachingFilter.java:33)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:39)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.plugin.connect.plugin.auth.user.ThreeLeggedAuthFilter.doFilter(ThreeLeggedAuthFilter.java:122)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.plugin.connect.plugin.auth.oauth.OAuth2LOFilter.doFilter(OAuth2LOFilter.java:82)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.analytics.client.filter.DefaultAnalyticsFilter.doFilter(DefaultAnalyticsFilter.java:38)\r\n\tat com.atlassian.analytics.client.filter.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:39)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.jwt.internal.servlet.JwtAuthFilter.doFilter(JwtAuthFilter.java:31)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.confluence.web.filter.HttpRequestStatsFilter.doFilter(HttpRequestStatsFilter.java:47)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.gzipfilter.GzipFilter.doFilterInternal(GzipFilter.java:115)\r\n\tat com.atlassian.gzipfilter.GzipFilter.doFilter(GzipFilter.java:92)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.confluence.web.filter.ConfluenceTimingFilter.doFilter(ConfluenceTimingFilter.java:46)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsCombinedMatchDispatcherFilter.doFilter(PrettyUrlsCombinedMatchDispatcherFilter.java:61)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.confluence.extra.webdav.servlet.filter.ReverseProxyFilter.doFilter(ReverseProxyFilter.java:409)\r\n\tat com.atlassian.confluence.extra.webdav.servlet.filter.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:29)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:70)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:58)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.confluence.util.MobileAppRequestFilter.doFilter(MobileAppRequestFilter.java:36)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.confluence.internal.web.filter.spring.IgnoreWebAsyncManagerFilter.doFilter(IgnoreWebAsyncManagerFilter.java:59)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.confluence.web.filter.validateparam.RequestParamValidationFilter.doFilter(RequestParamValidationFilter.java:51)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.confluence.web.filter.TranslationModeFilter.doFilter(TranslationModeFilter.java:39)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.confluence.plugin.servlet.filter.ActionContextCleanUp.doFilter(ActionContextCleanUp.java:72)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.confluence.web.filter.LanguageExtractionFilter.doFilter(LanguageExtractionFilter.java:49)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.confluence.impl.vcache.VCacheRequestContextFilter.lambda$doFilter$3(VCacheRequestContextFilter.java:44)\r\n\tat com.atlassian.confluence.impl.vcache.VCacheRequestContextManager.doInRequestContextInternal(VCacheRequestContextManager.java:87)\r\n\tat com.atlassian.confluence.impl.vcache.VCacheRequestContextManager.doInRequestContext(VCacheRequestContextManager.java:71)\r\n\tat com.atlassian.confluence.impl.vcache.VCacheRequestContextFilter.doFilter(VCacheRequestContextFilter.java:43)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.confluence.util.LoggingContextFilter.doFilter(LoggingContextFilter.java:33)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.confluence.util.RequestCacheThreadLocalFilter.doFilter(RequestCacheThreadLocalFilter.java:65)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.github.kristofa.brave.servlet.BraveServletFilter.doFilter(BraveServletFilter.java:59)\r\n\tat com.atlassian.confluence.web.filter.ZipkinTracingFilter.doFilter(ZipkinTracingFilter.java:52)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.confluence.web.filter.ResponseOutputStreamFilter.doFilter(ResponseOutputStreamFilter.java:25)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.johnson.filters.AbstractJohnsonFilter.doFilter(AbstractJohnsonFilter.java:59)\r\n\tat com.atlassian.confluence.web.ConfluenceJohnsonFilter.doFilter(ConfluenceJohnsonFilter.java:32)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.core.filters.encoding.AbstractEncodingFilter.doFilter(AbstractEncodingFilter.java:41)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.confluence.impl.servlet.HoldingUntilStartedFilter.doFilter(HoldingUntilStartedFilter.java:88)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.core.filters.HeaderSanitisingFilter.doFilter(HeaderSanitisingFilter.java:44)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.confluence.servlet.FourOhFourErrorLoggingFilter.doFilter(FourOhFourErrorLoggingFilter.java:64)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat com.atlassian.confluence.web.filter.DebugFilter.doFilter(DebugFilter.java:46)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:212)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:94)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:616)\r\n\tat org.apache.catalina.valves.StuckThreadDetectionValve.invoke(StuckThreadDetectionValve.java:206)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:141)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:502)\r\n\tat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1132)\r\n\tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:684)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1539)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1495)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\nCaused by: java.lang.RuntimeException: Failed to read image\r\n\tat com.atlassian.confluence.extra.flyingpdf.LightITextFSImage.getImage(LightITextFSImage.java:247)\r\n\tat org.xhtmlrenderer.pdf.ITextOutputDevice.drawImage(ITextOutputDevice.java:828)\r\n\tat org.xhtmlrenderer.pdf.ITextImageElement.paint(ITextImageElement.java:72)\r\n\tat org.xhtmlrenderer.pdf.ITextOutputDevice.paintReplacedElement(ITextOutputDevice.java:199)\r\n\tat org.xhtmlrenderer.layout.Layer.paintReplacedElement(Layer.java:540)\r\n\tat org.xhtmlrenderer.layout.Layer.paintReplacedElements(Layer.java:497)\r\n\tat org.xhtmlrenderer.layout.Layer.paintAsLayer(Layer.java:471)\r\n\tat org.xhtmlrenderer.render.BlockBox.paintInline(BlockBox.java:265)\r\n\tat org.xhtmlrenderer.layout.Layer.paintInlineContent(Layer.java:274)\r\n\tat org.xhtmlrenderer.layout.Layer.paint(Layer.java:332)\r\n\tat org.xhtmlrenderer.pdf.ITextRenderer.paintPage(ITextRenderer.java:432)\r\n\tat org.xhtmlrenderer.pdf.ITextRenderer.writePDF(ITextRenderer.java:380)\r\n\tat org.xhtmlrenderer.pdf.ITextRenderer.createPDF(ITextRenderer.java:333)\r\n\tat org.xhtmlrenderer.pdf.ITextRenderer.createPDF(ITextRenderer.java:265)\r\n\tat com.atlassian.confluence.extra.flyingpdf.FlyingSaucerXmlToPdfConverter.convertXhtmlToPdf(FlyingSaucerXmlToPdfConverter.java:92)\r\n\t... 391 more\r\nCaused by: java.lang.RuntimeException: Failed to read image\r\n\tat com.atlassian.confluence.extra.flyingpdf.LightITextFSImage.getImage(LightITextFSImage.java:240)\r\n\t... 405 more\r\nCaused by: java.lang.IllegalArgumentException: 0.0 incompatible with org.apache.batik.transcoder.keys.LengthKey@33840d89\r\n\tat org.apache.batik.transcoder.TranscodingHints.put(TranscodingHints.java:92)\r\n\tat org.apache.batik.transcoder.TranscoderSupport.addTranscodingHint(TranscoderSupport.java:58)\r\n\tat com.atlassian.confluence.extra.flyingpdf.LightITextFSImage.getImage(LightITextFSImage.java:232)\r\n\t... 405 more{code}\r\n\r\nh5. Workaround\r\n\r\nThere is no existing workaround. To fix the issue upgrade to Confluence 6.8+",
      "summary": "SVGs inside tables cause PDF exports to fail"
    }
  },
  {
    "key": "CONFSERVER-58533",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-07-10T02:08:54.000+0000",
      "created": "2019-07-01T08:48:18.000+0000",
      "description": "h3. Problem Definition\r\n\r\nCurrently, support zip filenames contain node ids. In a data center environment, it is difficult to identify the node to which the support zip belongs only on the bases of node id. The customer has to switch to the clustering section to find out the node name or IP related to the node id.\r\nh3. Suggested Solution\r\n\r\nThere should be an option to customize the naming convention of Support zip files. An admin should be able to choose the naming convention of the support zip files based on node names and IP as well.\r\nh3. Workaround\r\n\r\n(Optional)",
      "summary": "Customising Support zip naming format for DataCenter"
    }
  },
  {
    "key": "CONFSERVER-58532",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-01T07:57:41.000+0000",
      "description": "h3. Issue Summary\r\n\r\nWhen editing an existing macro in a page, if the *Edit Macro* window has no input control, the focus stays in the page editor. When a key is pressed, such as Enter, the macro is removed from the page, since it is selected (and the cursor is still in the editor), whilst the *Edit Macro* window stays open. This leads to an unexpected result since users expect the *Edit Macro* window to be closed.\u00a0\r\nh3. Steps to Reproduce\r\n # Create a new page and add the *Change History* macro.\r\n # Select the macro and click on Edit.\r\n # Press Enter key.\r\n\r\nh3. Expected Results\r\n\r\nThe *Edit Macro* window is closed (same as clicking on Save button).\r\nh3. Actual Results\r\n\r\nThe macro is removed in the background, whilst the *Edit Macro* window stays open.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behaviour. A workaround will be added here when available\r\nh3. Notes\r\n\r\nThis is known to affect the *Cheese* and *Change History* macros, but any other macro without an input control on the *Edit Macro* window will also be affected.",
      "summary": "Macro is removed when key is pressed if Edit window has no input control"
    }
  },
  {
    "key": "CONFSERVER-58531",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-07-30T00:46:26.000+0000",
      "created": "2019-07-01T05:27:00.000+0000",
      "description": "h3. Issue Summary\r\n\r\nMobile web watch button is calling a outdated action endpoint.\u00a0\r\nh3. Environment\r\n\r\n(Optional - If Applicable)\r\n *\r\n *\r\nh3. Steps to Reproduce\r\n # Go to web mobile view\r\n # Go to a page\r\n # Click watch button\r\n # Open DevTool network panel\r\n\r\nh3. Expected Results\r\n\r\nThe request should succeed\u00a0\r\nh3. Actual Results\r\n{noformat}\r\nPOST http://localhost:8080/confluence/users/addpagenotificationajax.action 403\r\n(anonymous) @ VM16149:1\r\nsend @ jquery.js:9180\r\najax @ jquery.js:8661\r\ntoggleWatch @ watch-model.js?locale=en-GB:9\r\ntoggleWatch @ watch-view.js?locale=en-GB:25\r\n(anonymous) @ zepto.js:630\r\nproxyfn @ zepto.js:549\r\nShow 4 more frames\r\nNotes{noformat}\r\n\u00a0\r\n{code:java}\r\nPOST http://localhost:8080/confluence/users/removepagenotificationajax.action 403 (anonymous) @ VM16149:1 send @ jquery.js:9180 ajax @ jquery.js:8661 toggleWatch @ watch-model.js?locale=en-GB:9 toggleWatch @ watch-view.js?locale=en-GB:25 (anonymous) @ zepto.js:630 proxyfn @ zepto.js:549 Show 4 more frames\r\n{code}\r\n\u00a0\r\n\r\n(Optional - If Necessary)\r\nh3. Workaround\r\n\r\nRequired, if there is no workaround please state:\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Mobile web view watch button is not working"
    }
  },
  {
    "key": "CONFSERVER-58530",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-07-01T01:46:17.000+0000",
      "description": "h3. Issue Summary\r\n\r\nWhen using the macro to create JIRA issues from a Confluence table which has both column and row headers, the summary and description fields are incorrectly mapped.\r\nh3. Steps to Reproduce\r\n # Create a table on a Confluence page with both column and row headers\r\n # Use the create multiple issues from table macro\r\n # Try and map the columns to summary and description as desired\r\n\r\nh3. Expected Results\r\n\r\nColumns map correctly\r\nh3. Actual Results\r\n\r\nThe summary is mapped to the next column along as thought the column header is throwing the mapping off by one column:\r\n\r\n!Screen Shot 2019-07-01 at 10.44.28.png|thumbnail!\r\nh3. Workaround\r\n\r\nRemove the column header from the Confluence table.",
      "summary": "Creating multiple issue from a table with a column and row headers maps summary and description fields incorrectly"
    }
  },
  {
    "key": "CONFSERVER-58529",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-06-28T20:07:27.000+0000",
      "description": "When a user get directed into the Administrator Contact Page, the \"From\" field is populated with the corresponding username email address automatically. As a user, it'd be great if it doesn't require user to enter any email address (instead it should recognises the user and include the info within the email) meanwhile allowing email to be sent to Confluence administrators using the standard mail server.\r\n\r\nThe reason of this is because there is no clear warnings nor errors were logged/provided when the contact form is not being sent successfully. The user cannot tell if the email is being sent, it'd be great if we can improve this particular section - to at least tracking the mail sent or log information in the mail logs.\r\n\r\nReference: https://confluence.atlassian.com/doc/configuring-the-administrator-contact-page-216957115.html#ConfiguringtheAdministratorContactPage-DisablingtheAdministratorContactForm",
      "summary": "Administrator Contact Form should use a standard mail server"
    }
  },
  {
    "key": "CONFSERVER-58528",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-06-28T13:43:21.000+0000",
      "description": "h3. Issue Summary\r\n\r\nIf a user is editing a Confluence page with Confluence macros in it, and another user tries to edit the page at the same time, the macro headers (including the macro name) disappear.\r\nh3. Environment\r\n\r\nIssue is only reproducible when using Internet Explorer as one of the browsers to edit the page.\r\nh3. Steps to Reproduce\r\n # Edit a Confluence page in any browser\r\n # Include a macro with headers (for example, Expand macro) and write some information\r\n # With this browser window open, open a second window in Internet Explorer\r\n # Access the same page in the Internet Explorer window, and edit it\r\n\r\nh3. Expected Results\r\n\r\nEditing would work normally, with Collaborative Editing allowing both users to see and edit the contents of the page, including the macro headers and names.\r\nh3. Actual Results\r\n\r\nThe macro headers and names on the first window (not IE) disappear immediately, which can generate a lot of confusion when editing pages with many macros.\u00a0\u00a0\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Macro headers disappear when multiple users edit a page"
    }
  },
  {
    "key": "CONFSERVER-58527",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-05-06T10:26:27.000+0000",
      "created": "2019-06-28T08:06:51.000+0000",
      "description": "h2. *Problem Description*\r\n\r\nEditing files via the Atlassian Companion app in Microsoft Windows stores files in two locations:\r\n\r\n1. Actual files downloaded and sent to the respective application:\r\n\r\n* C:\\Users\\admin\\.atlassian-companion\r\n\r\n2. Temporary Cache files (including a CACHE copy of the downloaded file) is stored in:\r\n\r\n* C:\\Users\\admin\\AppData\\Roaming\\Atlassian Companion\\Cache\r\n\r\nEvery time a file is edited, a copy is again put into the above Temporary Cache location inside the *Roaming* folder:\r\n\r\n{code}\r\nC:\\Users\\admin\\AppData\\Roaming\\Atlassian Companion\\Cache>dir\r\n Volume in drive C has no label.\r\n Volume Serial Number is DC2E-570C\r\n\r\n Directory of C:\\Users\\admin\\AppData\\Roaming\\Atlassian Companion\\Cache\r\n\r\n27/06/2019  09:52 PM    <DIR>          .\r\n27/06/2019  09:52 PM    <DIR>          ..\r\n27/06/2019  10:35 PM            45,056 data_0\r\n27/06/2019  10:35 PM           270,336 data_1\r\n25/06/2019  09:29 AM             8,192 data_2\r\n25/06/2019  11:45 AM         4,202,496 data_3\r\n27/06/2019  09:22 PM           305,213 f_00000a\r\n27/06/2019  09:40 PM         4,305,498 f_00000b\r\n27/06/2019  09:41 PM         4,305,498 f_00000c\r\n27/06/2019  09:45 PM         4,305,498 f_00000d\r\n27/06/2019  09:45 PM         4,305,498 f_00000e\r\n27/06/2019  09:46 PM         4,305,498 f_00000f\r\n27/06/2019  09:46 PM         4,305,498 f_000010\r\n27/06/2019  09:46 PM         4,305,498 f_000011\r\n27/06/2019  09:50 PM         4,305,498 f_000012\r\n27/06/2019  09:50 PM         4,305,498 f_000013\r\n27/06/2019  09:51 PM         4,305,498 f_000014\r\n27/06/2019  09:51 PM         4,305,498 f_000015\r\n27/06/2019  09:51 PM         4,305,498 f_000016\r\n27/06/2019  09:51 PM         4,305,498 f_000017\r\n27/06/2019  09:52 PM         4,305,498 f_000018\r\n27/06/2019  09:52 PM         4,305,498 f_000019\r\n25/06/2019  09:29 AM           262,512 index\r\n              21 File(s)     69,676,275 bytes\r\n               2 Dir(s)  14,553,374,720 bytes free\r\n{code}\r\n\r\nThe *Cache folder* in the Roaming profile can therefore grow excessively large and hit size quotas on the Roaming profile folder.\r\n\r\nh2. *Suggestion*\r\n\r\nProvide a way to cap the upper limit on the Cache folder.\r\n\r\n* [Chromium command-line params|https://github.com/electron/electron/blob/master/docs/api/chrome-command-line-switches.md] do support a maximum cache size:\r\n\r\n{quote}\r\n*{{--disk-cache-size=size}}*\r\n\r\nForces the maximum disk space to be used by the disk cache, in bytes.\r\n{quote}\r\n* Alternatively, this Cache folder should be written to {{C:\\Users\\admin\\.atlassian-companion}}, outside of the Roaming folder\r\n\r\nh2. *Work Around*\r\n\r\nAtlassian Companion App uses the Electron framework which  generates/utilises these two folders:\r\n\r\n* Cache\r\n* GPUCache\r\n\r\nEdited: It is safe to manually delete the folders - the entire AppData/Roaming/Atlassian Companion/Cache directory should be deleted rather than selectively removing files. If the folder is locked whilst Atlassian Companion App is running please exit the app, delete the folder and restart. This will reduce the disk space used in the Windows Roaming folder.",
      "summary": "Store temporary files for Atlassian Companion App outside of the Roaming profile on Windows"
    }
  },
  {
    "key": "CONFSERVER-58526",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/10470",
        "id": "10470",
        "key": "CONFSERVER",
        "name": "Confluence Server and Data Center",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=10470&avatarId=105390",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=10470&avatarId=105390",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=10470&avatarId=105390",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=10470&avatarId=105390"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-08-26T00:40:16.000+0000",
      "created": "2019-06-28T05:09:29.000+0000",
      "description": "h3. Issue Summary\r\n\r\nWhen linked with Jira, if placed under high load and an unresponsive Jira, all Confluence HTTP threads can be occupied by Jira metadata aggregation tasks. This will leave no threads to process users' requests and eventually lead to outage.\r\nh3. Steps to Reproduce\r\n # Create an app link between Confluence and Jira\r\n # Block connections from Confluence to Jira e.g. use a firewall to block all traffic to Jira\r\n # In Confluence, open more than 10 new pages every 5 seconds (This throughput will make the queue to process Jira metadata aggregation to grow gradually)\r\n\r\nh3. Expected Results\r\n\r\nConfluence should handle Jira's slowness gracefully.\r\nh3. Actual Results\r\n\r\nConfluence users observe intermittent failures then complete outage.\r\n\r\nCaptured thread dumps will show all HTTP threads busy fetching metadata from Jira:\r\n{noformat}\r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  <0x000000034d5e64e0> (a java.util.concurrent.FutureTask)\r\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\r\n\tat java.util.concurrent.FutureTask.awaitDone(FutureTask.java:429)\r\n\tat java.util.concurrent.FutureTask.get(FutureTask.java:191)\r\n\tat com.atlassian.confluence.plugins.metadata.jira.aggregate.JiraAggregateCacheLoader.getAggregateFromTask(JiraAggregateCacheLoader.java:132)\r\n\tat com.atlassian.confluence.plugins.metadata.jira.aggregate.JiraAggregateCacheLoader.getValue(JiraAggregateCacheLoader.java:116)\r\n\tat com.atlassian.confluence.plugins.metadata.jira.aggregate.JiraAggregateCache.getAggregateData(JiraAggregateCache.java:74)\r\n\tat com.atlassian.confluence.plugins.metadata.jira.service.JiraMetadataService.getAggregateData(JiraMetadataService.java:74)\r\n\tat com.atlassian.confluence.plugins.metadata.jira.rest.JiraMetadataResource.getAggregateData(JiraMetadataResource.java:33)\r\n{noformat}\r\nh3. Root cause\r\n\r\nConfluence Jira Metadata plugin uses a single ThreadPoolExecutor (maximum of 10 threads in a pool backed by an unlimited LinkedBlockingQueue) to aggregate metadata from Jira for every page load in Confluence. There are 2 types of aggregation tasks: Cache loading and Metadata fetching. The problem lies in the fact that a Cache loading task creates Fetching tasks then submits them into the very executor it is running in then blocks and waits until either its child tasks are finished or is timed out (currently set to 5 seconds). If all threads in the executor are occupied by Cache loading tasks then all of them will be blocked for 5 seconds for no good reason while new loading tasks will be put into a waiting queue. If we keep throwing more than 10 loading tasks (by opening 10 new pages in the browsers) every 5 seconds, this situation will get worse and worse and ultimately leads to an outage.\r\nh3. Workaround\r\n\r\nDisabling the \"Confluence Jira Metadata\" plugin should bring Confluence back.\r\n\r\nThe only functionality that will be lost is the \"Jira Links\" list at the top of the Confluence page if the page contains links to Jira. The actual links within the content of the page will still work.",
      "summary": "Requests to aggregate Jira metadata in Confluence can exhaust HTTP threads and cause outages"
    }
  }
]