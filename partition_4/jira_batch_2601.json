[
  {
    "key": "BAM-20383",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-04-04T16:06:48.000+0000",
      "description": "h3. Problem Definition\r\n\r\nCurrently, when a Job within a stage is disabled, this is only viewable from the {{defaultStages.action?buildKey=PROJECT-BUILD}} screen.\r\n\r\n !image-2019-04-04-11-02-59-282.png|thumbnail! \r\n\r\nh3. Suggested Solution\r\n\r\nAdd a `disabled` flag to the job in the left-hand navigation menu of the Build Plan so it's visible on every screen.\r\n\r\n \r\n",
      "summary": "Create clearer 'telegraphing' for when a JOB is disabled."
    }
  },
  {
    "key": "BAM-20382",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-04-04T10:53:58.000+0000",
      "description": "There're 2 lists at agent screens: online/offline agents and authorized/pending agents. If administrator wants to revoke authorization from any agents it's hard to see what agent has what UUID.\r\nBamboo should provide functionality to revoke agent authorization from UI/REST",
      "summary": "Bamboo admin can revoke agent authorization from agent details screen"
    }
  },
  {
    "key": "BAM-20380",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-03-23T14:01:16.000+0000",
      "created": "2019-04-03T19:37:59.000+0000",
      "description": "*Summary*\r\n\r\nBamboo doesn't load more than 50 plans at once on the dashboard.\r\n\r\n*Suggestion*\r\nBamboo should load all the plans on the dashboard without having to click on the button *Show more plans*.",
      "summary": "Bamboo doesn't load more than 50 plans in the dashboard"
    }
  },
  {
    "key": "BAM-20379",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-04-03T14:26:02.000+0000",
      "description": "*Summary*\r\nPresently Bamboo provides the feature to Clean working directory after each build per job.\r\n\r\n*Suggestion*\r\nA global option to clean working directory \r\nAbility to select from the global option multiple jobs to effect this option",
      "summary": "Clean working directory in bulk"
    }
  },
  {
    "key": "BAM-20378",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-04-02T19:19:52.000+0000",
      "description": "h3. Issue Summary\r\n\r\nThe REST API of version 6.5.0 doesn't contain two resources that exist in the versions 6.8.1 and 5.14.0. These two resources work fine, but it is not listed in the documentation.\r\n\r\n\u00a0\r\n\r\nResources that are missing on this page:\r\n # /plan/\\{projectKey}-\\{buildKey}/branch/\\{branchName}?vcsBranch&enabled&cleanupEnabled\r\n # /plan/\\{projectKey}-\\{buildKey}/enable\r\n\r\n\u00a0\r\n\r\nThe versions of REST API that don't contain the listed resources:\r\n * [https://docs.atlassian.com/atlassian-bamboo/REST/6.5.0/]\r\n * [https://docs.atlassian.com/atlassian-bamboo/REST/6.5.1/]\r\n * [https://docs.atlassian.com/atlassian-bamboo/REST/6.6.0/]\r\n * [https://docs.atlassian.com/atlassian-bamboo/REST/6.6.1/]\r\n * [https://docs.atlassian.com/atlassian-bamboo/REST/6.6.2/]\r\n * [https://docs.atlassian.com/atlassian-bamboo/REST/6.6.3/]\r\n\r\n\u00a0\r\n\r\nThe page that contains the resources:\r\n * [https://docs.atlassian.com/atlassian-bamboo/REST/5.14.0/]\r\n * [https://docs.atlassian.com/atlassian-bamboo/REST/latest/]\r\n\r\nh3. Workaround\r\n\r\nCurrently, the workaround is to use those resources according to the latest version released.\r\n\r\n\u00a0",
      "summary": "Bamboo REST API doesn't have two resources"
    }
  },
  {
    "key": "BAM-20377",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-04-02T20:05:16.000+0000",
      "created": "2019-04-01T18:38:35.000+0000",
      "description": "h3. Issue Summary\r\n\r\nTomcat 8.5.34 has security issue\u00a0CVE-2019-0199.\u00a0\u00a0\r\n\r\nThe out of the box configuration of Tomcat we ship with Bamboo does not not support HTTP/2.\r\nTechnically, a customer might set it up, but they\u2019d need to switch to APR and expose the HTTPS connector directly to the users (or the HTTP connector if they additionally configured the upgrade protocol on it too).\r\nThe version of Bamboo on master is affected out of box though, because it supports h2c.\r\n\r\nh3. Workaround",
      "summary": "Upgrade Tomcat to fix CVE-2019-0199"
    }
  },
  {
    "key": "BAM-20376",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-04-01T18:18:37.000+0000",
      "description": "Attempt to push changes for the same repository in multiple environments of the same deployment project will lead to error in most of them.\r\n\r\nh3. Steps to Reproduce\r\n# Create a build plan \r\n# Create a deployment plan and associate to that build plan\r\n# Create 2 environments with the following tasks:\r\n## *Checkout task* - to checkout  a 'dummie repository'  (it does not need to be the same repository used in the plan)\r\n## *Script task* - to add changes in this repository\r\n## *Commit task* - to commit the changes\r\n## *Push task* -  to push the changes\r\n# Add an *after successful build plan* trigger in the environment 1\r\n# Add an *after successful deployment* trigger in the environment 2\r\n# run the build plan\r\n\r\nh3. Expected Results\r\n# Environment 1 will be trigger after the build and will succeed.\r\n# Environment 2 will be triggered after environment 1 and will succeed.\r\n\r\nh3. Actual Results\r\n# Environment 1 will be trigger after the build and will succeed.\r\n# Environment 2 will be triggered after environment 1 and will fail with the following stack trace:\r\n{noformat}\r\n01-Apr-2019 12:42:26  Error occurred while running Task '(4)' of type com.atlassian.bamboo.plugins.vcs:task.vcs.commit.\r\n01-Apr-2019 12:42:26  com.atlassian.bamboo.task.TaskException: An error occurred while committing changes to repository\r\n01-Apr-2019 12:42:26          at com.atlassian.bamboo.plugins.vcs.task.VcsCommitTask.execute(VcsCommitTask.java:81)\r\n01-Apr-2019 12:42:26          at com.atlassian.bamboo.task.TaskExecutorImpl.lambda$executeTasks$3(TaskExecutorImpl.java:319)\r\n01-Apr-2019 12:42:26          at com.atlassian.bamboo.task.TaskExecutorImpl.executeTaskWithPrePostActions(TaskExecutorImpl.java:252)\r\n01-Apr-2019 12:42:26          at com.atlassian.bamboo.task.TaskExecutorImpl.executeTasks(TaskExecutorImpl.java:319)\r\n01-Apr-2019 12:42:26          at com.atlassian.bamboo.task.TaskExecutorImpl.execute(TaskExecutorImpl.java:112)\r\n01-Apr-2019 12:42:26          at com.atlassian.bamboo.build.pipeline.tasks.ExecuteBuildTask.call(ExecuteBuildTask.java:73)\r\n01-Apr-2019 12:42:26          at com.atlassian.bamboo.v2.build.agent.DefaultBuildAgent.executeBuildPhase(DefaultBuildAgent.java:203)\r\n01-Apr-2019 12:42:26          at com.atlassian.bamboo.v2.build.agent.DefaultBuildAgent.build(DefaultBuildAgent.java:175)\r\n01-Apr-2019 12:42:26          at com.atlassian.bamboo.v2.build.agent.BuildAgentControllerImpl.lambda$waitAndPerformBuild$0(BuildAgentControllerImpl.java:131)\r\n01-Apr-2019 12:42:26          at com.atlassian.bamboo.variable.CustomVariableContextImpl.withVariableSubstitutor(CustomVariableContextImpl.java:185)\r\n01-Apr-2019 12:42:26          at com.atlassian.bamboo.v2.build.agent.BuildAgentControllerImpl.waitAndPerformBuild(BuildAgentControllerImpl.java:125)\r\n01-Apr-2019 12:42:26          at com.atlassian.bamboo.v2.build.agent.DefaultBuildAgent$1.run(DefaultBuildAgent.java:126)\r\n01-Apr-2019 12:42:26          at com.atlassian.bamboo.utils.BambooRunnables$1.run(BambooRunnables.java:48)\r\n01-Apr-2019 12:42:26          at com.atlassian.bamboo.security.ImpersonationHelper.runWith(ImpersonationHelper.java:26)\r\n01-Apr-2019 12:42:26          at com.atlassian.bamboo.security.ImpersonationHelper.runWithSystemAuthority(ImpersonationHelper.java:17)\r\n01-Apr-2019 12:42:26          at com.atlassian.bamboo.security.ImpersonationHelper$1.run(ImpersonationHelper.java:41)\r\n01-Apr-2019 12:42:26          at java.lang.Thread.run(Thread.java:745)\r\n01-Apr-2019 12:42:26  Caused by: com.atlassian.bamboo.repository.RepositoryException: Can't guess branch name for revision ae58ba239cbf8010043324bd2b49706b0f7073d8 when trying to perform push.\r\n01-Apr-2019 12:42:26          at com.atlassian.bamboo.plugins.git.NativeGitOperationHelper.pushRevision(NativeGitOperationHelper.java:139)\r\n01-Apr-2019 12:42:26          at com.atlassian.bamboo.plugins.git.v2.GitWorkingCopyManager.updateRemote(GitWorkingCopyManager.java:323)\r\n01-Apr-2019 12:42:26          at com.atlassian.bamboo.plugins.bitbucket.v2.BitbucketCloudWorkingCopyManager.updateRemote(BitbucketCloudWorkingCopyManager.java:84)\r\n01-Apr-2019 12:42:26          at com.atlassian.bamboo.plugins.vcs.task.VcsCommitTask.execute(VcsCommitTask.java:74)\r\n01-Apr-2019 12:42:26          ... 16 more{noformat}\r\n\r\nh3. Workaround\r\nAdd a script task with a *git pull* after the git checkout task.\r\n",
      "summary": "Push to same repository in more then one environment leads to \"Can't guess branch name\""
    }
  },
  {
    "key": "BAM-20375",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-04-01T05:40:15.000+0000",
      "description": "h3. Problem Definition\r\nContinuous SSHExceptions (which are very common on a CI server where credentials go stale and plans become legacy) while polling produce large stack traces that can double log sizes on busy instances. Example:\r\n{noformat}\r\n2019-03-29 11:46:29,330 WARN [Connection killer] [SshProxyCommand] SSH proxy tried to connect to [git@server/10.0.0.1:7999]: and failed due to the following error: [Authenticating remote session failed]\r\norg.apache.sshd.common.SshException: No more authentication methods available\r\n    at org.apache.sshd.client.session.ClientUserAuthService.tryNext(ClientUserAuthService.java:315)\r\n    at org.apache.sshd.client.session.ClientUserAuthService.processUserAuth(ClientUserAuthService.java:252)\r\n    at org.apache.sshd.client.session.ClientUserAuthService.process(ClientUserAuthService.java:199)\r\n    at org.apache.sshd.common.session.helpers.AbstractSession.doHandleMessage(AbstractSession.java:530)\r\n    at org.apache.sshd.common.session.helpers.AbstractSession.handleMessage(AbstractSession.java:463)\r\n    at org.apache.sshd.common.session.helpers.AbstractSession.decode(AbstractSession.java:1325)\r\n    at org.apache.sshd.common.session.helpers.AbstractSession.messageReceived(AbstractSession.java:424)\r\n    at org.apache.sshd.common.session.helpers.AbstractSessionIoHandler.messageReceived(AbstractSessionIoHandler.java:67)\r\n    at org.apache.sshd.common.io.nio2.Nio2Session.handleReadCycleCompletion(Nio2Session.java:285)\r\n    at org.apache.sshd.common.io.nio2.Nio2Session$2.onCompleted(Nio2Session.java:265)\r\n    at org.apache.sshd.common.io.nio2.Nio2Session$2.onCompleted(Nio2Session.java:262)\r\n    at org.apache.sshd.common.io.nio2.Nio2CompletionHandler$1.run(Nio2CompletionHandler.java:37)\r\n    at java.security.AccessController.doPrivileged(Native Method)\r\n    at org.apache.sshd.common.io.nio2.Nio2CompletionHandler.completed(Nio2CompletionHandler.java:34)\r\n    at sun.nio.ch.Invoker.invokeUnchecked(Invoker.java:126)\r\n    at sun.nio.ch.Invoker$2.run(Invoker.java:218)\r\n    at sun.nio.ch.AsynchronousChannelGroupImpl$1.run(AsynchronousChannelGroupImpl.java:112)\r\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n    at java.lang.Thread.run(Thread.java:745)\r\n{noformat}\r\n\r\nh3. Suggested Solution\r\nRethrow {{org.apache.sshd.common.SshException}} (*not* org.apache.sshd.common.RuntimeSshException as the caused by is often helpful, e.g. no route to host / connection refused) without the Stack included. Preserve the exception message:\r\n{code}\r\norg.apache.sshd.common.SshException: No more authentication methods available\r\n{code}\r\n\r\nPrint the stack only at DEBUG log level.\r\n",
      "summary": "Rethrow SSHException warnings without stacktrace to reduce log spam"
    }
  },
  {
    "key": "BAM-20374",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-03-27T16:29:02.000+0000",
      "description": "h3. Problem Definition\r\n\r\n* Elastic Image Configuration configured with 30 minute Idle Timeout\r\n* Scheduled instance configured for Cron job every 15 minutes to ensure 'at least' X instances are available.\r\n\r\nIf when the Cron job runs on that 15-minute mark, the Agent has been Idle for 29 minutes, the agent will shut down, and be unavailable until the next Cron job runs (plus time for instance startup, custom startup script, package installation, agent startup, etc.)\r\n\r\nh3. Suggested Solution\r\n\r\nWhen elastic agents are configured on an instance schedule, have the scheduler reset the idle timer for the agent.  This way the agent will not be decommissioned until it's outside the Cron job parameters.\r\n\r\nOr at least a way to keep a minimum number of agents online even if they are idle longer than the timeout (without having them shutdown and spin back up) \r\n\r\nh3. Workaround\r\n\r\nnone at this time.\r\n",
      "summary": "Scheduled instance checks should update the instance timeout timer"
    }
  },
  {
    "key": "BAM-20373",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-03-12T11:01:47.000+0000",
      "created": "2019-03-26T18:14:00.000+0000",
      "description": "h3. Problem Definition\r\nIn a Docker task, when a name/path is given under *Working subdirectory* under Advanced options, it does not create a new subdirectory if it does not exist already (but Source code checkout task creates a new directory if it doesn't exist).\r\n\r\nh3. Suggested Solution\r\nAlter the help text from \"Specify an alternative subdirectory as working directory for the task.\" with \"Specify a *pre-existing* alternative subdirectory as working directory for the task.\" so as to avoid confusion.",
      "summary": "Docker task doesn't create a new directory if it doesn't exist"
    }
  },
  {
    "key": "BAM-20372",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-03-26T07:49:16.000+0000",
      "description": "h3. Problem Definition\r\nCurrently the Bamboo start-up scripts aren't defensive against having multiple Bamboo processes started from the same install directory. This can cause file locking and resourcing issues.\r\n\r\nh3. Suggested Solution\r\nOther products, such as Confluence create a catalina PID file which is checked upon start-up. If the PID exists and is active, a second process won't be started and an error is reported.\r\n \r\nh3. Workaround \r\nAdd *CATALINA_PID* checking below the line\"{{cat \"${PRGDIR}\"/bamboobanner.txt}}\" in *$BAMBOO_INSTALL/bin/setenv.sh*. Example:\r\n{code:title=<bamboo-install>/bin/setenv.sh}\r\nPRGDIR=`dirname \"$0\"`\r\ncat \"${PRGDIR}\"/bamboobanner.txt\r\n\r\n# set the location of the pid file\r\nif [ -z \"$CATALINA_PID\" ] ; then\r\n    if [ -n \"$CATALINA_BASE\" ] ; then\r\n        CATALINA_PID=\"$CATALINA_BASE\"/work/catalina.pid\r\n    elif [ -n \"$CATALINA_HOME\" ] ; then\r\n        CATALINA_PID=\"$CATALINA_HOME\"/work/catalina.pid\r\n    fi\r\nfi\r\nexport CATALINA_PID\r\n{code}",
      "summary": "Bamboo start-up scripts should utilize CATALINA_PID checking"
    }
  },
  {
    "key": "BAM-20370",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-03-26T04:32:49.000+0000",
      "description": "h3. Issue Summary\r\nBamboo start-up scripts (setenv.sh) misuses JAVA_OPTS for all JVM arguments. Forked Java processes (e.g. Gradle) on local agents will inherit Bamboo JVM heap and proxy settings\r\n\r\nIt also has the side-effect of causing the Tomcat stop command to require the same initial heap as the Bamboo JVM. This will cause OOMs (mostly where Xms=Xmx) and not a sufficient amount of available memory to create a second JVM with the same memory requirements.\r\n\r\nh3. Expected Results\r\nUse {{CATALINA_OPTS}} instead so that the Tomcat stop command does not require the same amount of memory as configured for Bamboo.\r\n\r\nh3. Actual Results\r\nTomcat stop ({{$BAMBOO_INSTALL/bin/stop-bamboo.sh / shutdown.sh}}) may Out Of Memory when initializing the heap:\r\n{code}\r\n#\r\n# There is insufficient memory for the Java Runtime Environment to continue.\r\n# Native memory allocation (mmap) failed to map 1431306240 bytes for committing reserved memory.\r\n# Possible reasons:\r\n#   The system is out of physical RAM or swap space\r\n#   In 32 bit mode, the process size limit was hit\r\n# Possible solutions:\r\n#   Reduce memory load on the system\r\n#   Increase physical memory or swap space\r\n#   Check if swap backing store is full\r\n#   Use 64 bit Java on a 64 bit OS\r\n#   Decrease Java heap size (-Xmx/-Xms)\r\n#   Decrease number of Java threads\r\n#   Decrease Java thread stack sizes (-Xss)\r\n#   Set larger code cache with -XX:ReservedCodeCacheSize=\r\n# This output file may be truncated or incomplete.\r\n#\r\n#  Out of Memory Error (os_linux.cpp:2640), pid=4426, tid=0x00007f42b0539700\r\n#\r\n# JRE version:  (8.0_162-b12) (build )\r\n# Java VM: Java HotSpot(TM) 64-Bit Server VM (25.162-b12 mixed mode linux-amd64 compressed oops)\r\n# Failed to write core dump. Core dumps have been disabled. To enable core dumping, try \"ulimit -c unlimited\" before starting Java again\r\n#\r\n\r\n---------------  T H R E A D  ---------------\r\n\r\nCurrent thread (0x00007f42a800a000):  JavaThread \"Unknown thread\" [_thread_in_vm, id=4427, stack(0x00007f42b043a000,0x00007f42b053a000)]\r\n\r\nStack: [0x00007f42b043a000,0x00007f42b053a000],  sp=0x00007f42b05383c0,  free space=1016k\r\nNative frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)\r\nV  [libjvm.so+0xacfb2a]  VMError::report_and_die()+0x2ba\r\nV  [libjvm.so+0x50060b]  report_vm_out_of_memory(char const*, int, unsigned long, VMErrorType, char const*)+0x8b\r\nV  [libjvm.so+0x92d963]  os::Linux::commit_memory_impl(char*, unsigned long, bool)+0x123\r\nV  [libjvm.so+0x92db89]  os::pd_commit_memory(char*, unsigned long, unsigned long, bool)+0x29\r\nV  [libjvm.so+0x924e4a]  os::commit_memory(char*, unsigned long, unsigned long, bool)+0x2a\r\nV  [libjvm.so+0x99adf3]  PSVirtualSpace::expand_by(unsigned long)+0x53\r\nV  [libjvm.so+0x99bdb5]  PSYoungGen::initialize_virtual_space(ReservedSpace, unsigned long)+0x75\r\nV  [libjvm.so+0x99c71e]  PSYoungGen::initialize(ReservedSpace, unsigned long)+0x3e\r\nV  [libjvm.so+0x2db2b5]  AdjoiningGenerations::AdjoiningGenerations(ReservedSpace, GenerationSizer*, unsigned long)+0x345\r\nV  [libjvm.so+0x94ef36]  ParallelScavengeHeap::initialize()+0x1d6\r\nV  [libjvm.so+0xa97bd3]  Universe::initialize_heap()+0xf3\r\nV  [libjvm.so+0xa9813e]  universe_init()+0x3e\r\nV  [libjvm.so+0x6420f5]  init_globals()+0x65\r\nV  [libjvm.so+0xa7c8ee]  Threads::create_vm(JavaVMInitArgs*, bool*)+0x23e\r\nV  [libjvm.so+0x6d6cc4]  JNI_CreateJavaVM+0x74\r\nC  [libjli.so+0x797e]  JavaMain+0x9e\r\nC  [libpthread.so.0+0x7de5]  start_thread+0xc5\r\n{code}\r\n\r\nh3. Workaround\r\nh6. Option 1\r\nSet {{JVM_MINIMUM_MEMORY}} in *$BAMBOO_INSTALL/bin/setenv.sh* to a smaller value (e.g. 512m) so that the Tomcat stop command requires less memory but Bamboo can still scale up to the value of {{JVM_MAXIMUM_MEMORY}}.\r\n\r\nh6. Option 2\r\nManually patch this part of your *$BAMBOO_INSTALL/bin/setenv.sh* to not use JAVA_OPTS for memory settings.\r\n* (!) Backup your {{setenv.sh}} before making any modifications\r\n\r\n{code:title=Before}\r\nJAVA_OPTS=\"-Xms${JVM_MINIMUM_MEMORY} -Xmx${JVM_MAXIMUM_MEMORY} ${JAVA_OPTS} ${JVM_REQUIRED_ARGS} ${JVM_SUPPORT_RECOMMENDED_ARGS} ${BAMBOO_HOME_MINUSD}\"\r\n\r\nJAVA_OPTS=$(echo \"$JAVA_OPTS\" | sed -e 's/\\s*$//' -e 's/^\\s*//')\r\nexport JAVA_OPTS\r\n{code}\r\n{code:title=After}\r\nJAVA_OPTS=\"${JAVA_OPTS} ${JVM_REQUIRED_ARGS} ${JVM_SUPPORT_RECOMMENDED_ARGS} ${BAMBOO_HOME_MINUSD}\"\r\nJAVA_OPTS=$(echo \"$JAVA_OPTS\" | sed -e 's/\\s*$//' -e 's/^\\s*//')\r\n\r\nCATALINA_OPTS=\"-Xms${JVM_MINIMUM_MEMORY} -Xmx${JVM_MAXIMUM_MEMORY} ${CATALINA_OPTS}\"\r\nCATALINA_OPTS=$(echo \"$CATALINA_OPTS\" | sed -e 's/\\s*$//' -e 's/^\\s*//')\r\n\r\nexport JAVA_OPTS\r\nexport CATALINA_OPTS\r\n{code}\r\n* (!) This example only migrates the Memory settings to {{CATALINA_OPTS}}, you may choose to move {{JVM_SUPPORT_RECOMMENDED_ARGS}} to {{CATALINA_OPTS}} too if you prefer those arguments to not be inherited by other Java processes forked from Bamboo.\r\n\r\nh6. Option 3\r\nRun a modified shutdown command.\r\n# Run {{bash -x ./catalina.sh stop}} \r\n# Make sure Bamboo does not stop at the end.\r\n# Look for the java command that is being run after an eval command that end with stop, here is an example:\r\n{noformat}\r\n+ '[' '!' -z '' ']'\r\n+ eval '\"/usr/lib/jvm/java-8-oracle/bin/java\"' -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Xms9512m -Xmx91024m -Djdk.tls.ephemeralDHKeySize=2048 '-Djava.endorsed.dirs=\"/home/ubuntu/atlassian/bamboo/atlassian-bamboo-6.6.3/endorsed\"' -classpath '\"/home/ubuntu/atlassian/bamboo/atlassian-bamboo-6.6.3/bin/bootstrap.jar:/home/ubuntu/atlassian/bamboo/atlassian-bamboo-6.6.3/bin/tomcat-juli.jar\"' '-Dcatalina.base=\"/home/ubuntu/atlassian/bamboo/atlassian-bamboo-6.6.3\"' '-Dcatalina.home=\"/home/ubuntu/atlassian/bamboo/atlassian-bamboo-6.6.3\"' '-Djava.io.tmpdir=\"/home/ubuntu/atlassian/bamboo/atlassian-bamboo-6.6.3/temp\"' org.apache.catalina.startup.Bootstrap stop\r\n++ /usr/lib/jvm/java-8-oracle/bin/java -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Xms9512m -Xmx91024m -Djdk.tls.ephemeralDHKeySize=2048 -Djava.endorsed.dirs=/home/ubuntu/atlassian/bamboo/atlassian-bamboo-6.6.3/endorsed -classpath /home/ubuntu/atlassian/bamboo/atlassian-bamboo-6.6.3/bin/bootstrap.jar:/home/ubuntu/atlassian/bamboo/atlassian-bamboo-6.6.3/bin/tomcat-juli.jar -Dcatalina.base=/home/ubuntu/atlassian/bamboo/atlassian-bamboo-6.6.3 -Dcatalina.home=/home/ubuntu/atlassian/bamboo/atlassian-bamboo-6.6.3 -Djava.io.tmpdir=/home/ubuntu/atlassian/bamboo/atlassian-bamboo-6.6.3/temp org.apache.catalina.startup.Bootstrap stop\r\n{noformat} \r\n# Take the full Java Command and remove the {{-Xms}} only from this command.\r\n# Run the command.  Here is the example: \r\n{noformat}\r\n/usr/lib/jvm/java-8-oracle/bin/java -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Xmx91024m -Djdk.tls.ephemeralDHKeySize=2048 -Djava.endorsed.dirs=/home/ubuntu/atlassian/bamboo/atlassian-bamboo-6.6.3/endorsed -classpath /home/ubuntu/atlassian/bamboo/atlassian-bamboo-6.6.3/bin/bootstrap.jar:/home/ubuntu/atlassian/bamboo/atlassian-bamboo-6.6.3/bin/tomcat-juli.jar -Dcatalina.base=/home/ubuntu/atlassian/bamboo/atlassian-bamboo-6.6.3 -Dcatalina.home=/home/ubuntu/atlassian/bamboo/atlassian-bamboo-6.6.3 -Djava.io.tmpdir=/home/ubuntu/atlassian/bamboo/atlassian-bamboo-6.6.3/temp org.apache.catalina.startup.Bootstrap stop\r\n{noformat} ",
      "summary": "Bamboo start-up scripts misuse JAVA_OPTS which can cause Out of Memory when stopping Bamboo"
    }
  },
  {
    "key": "BAM-20369",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-03-26T03:21:54.000+0000",
      "description": "h3. Problem Definition\r\nBamboo performs the IP authentication check for remote agents on a combination of the {{REMOTE_ADDR}} + {{X-Forwarded-For}} (HTTP Header) value. \r\n\r\nThis can be problematic when the incoming connection comes via reverse proxy / clustered load balancer where the IP address of the incoming connection changes. Any changes to the load balancer address requires re-approval of every agent.\r\n\r\nh3. Suggested Solution\r\nBamboo should have [trusted proxies|https://confluence.atlassian.com/crowd/configuring-trusted-proxy-servers-158107219.html] functionality similar to Crowd, for remote agent authentication that supports IP ranges / CIDR notation.\r\n\r\nThis would allow you to set a list of trusted proxies servers and would be a single source to update when infrastructure is changed.\r\n \r\nh3. Workaround \r\n*Bamboo Administration >> Agents >> Agent Authentication >> Edit IP address* for each agent and update the IP range, using wildcards (e.g. {{10.1.1.*}}) or CIDR notation for each agent.\r\n\r\nAlternatively, you could make use of Tomcats *RemoteIpValve* to force the RemoteIP to the value of *X-Forwarded-For* for trusted proxies to remove Bamboo's view of the load balancers address on the incoming connection:\r\n* https://tomcat.apache.org/tomcat-8.5-doc/api/org/apache/catalina/valves/RemoteIpValve.html",
      "summary": "Bamboo should have trusted proxies functionality for remote agent authentication"
    }
  },
  {
    "key": "BAM-20368",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-03-25T19:26:55.000+0000",
      "description": "h3. Problem Definition\r\n\r\nAccording to the [official documentation|https://confluence.atlassian.com/bamboo/enabling-repository-stored-bamboo-specs-938641941.html], by now, repository-stored specs is only compatible with the following repositories:\r\n * Bitbucket Cloud\r\n * Git\r\n * GitHub\r\n * Subversion\r\n\r\nh3. Suggested Solution\r\n\r\nI would be awesome to have repository-stored specs compatible with other VCS that are compatible with Bamboo like *Perforce*",
      "summary": "Extend the compatibility of repository-stored specs to Perforce"
    }
  },
  {
    "key": "BAM-20367",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-03-24T19:42:40.000+0000",
      "created": "2019-03-23T15:20:11.000+0000",
      "description": "In other Atlassian products, there is a unauthenticated rest API call that returns the status of the product.  This was provided for the load balancer to know when the node is up.  {{<base URL>/rest/api/latest/server}} requires anonymous access to be turned on.  This makes the default for new plans to be public. \r\n\r\nBamboo should provide this unauthenticated API call so teams can standardize all Load Balancer connections between products.",
      "summary": "Bamboo should have an unauthenticated status call"
    }
  },
  {
    "key": "BAM-20366",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-09-02T07:28:05.000+0000",
      "created": "2019-03-22T22:33:45.000+0000",
      "description": "h3. Issue Summary\r\nWhen creating a branch manually, we call {{SimpleActionParametersMap.put()}} which since 2017 has thrown WARNs\r\n{noformat}\r\n2019-03-22 18:10:50,737 WARN [http-nio-8085-exec-4] [SimpleActionParametersMap] Mutation of action parameter map: chainKey your plugin needs to be fixed\r\njava.lang.Throwable\r\n...\r\n2019-03-22 18:10:50,756 WARN [http-nio-8085-exec-4] [SimpleActionParametersMap] Mutation of action parameter map: branchName your plugin needs to be fixed\r\njava.lang.Throwable\r\n...\r\n{noformat}\r\n\r\nh3. Steps to Reproduce\r\n # Create a Plan {{PROJECT-PLAN}}\r\n # Manually create a branch\r\n\r\nh3. Expected Results\r\nBranch is created as expected, with no warnings\r\n\r\nh3. Actual Results\r\n\r\nThe branch is created, but the below WARN is thrown in the {{atlassian-bamboo.log}} file:\r\n{noformat}\r\n2019-03-22 18:10:50,737 WARN [http-nio-8085-exec-4] [SimpleActionParametersMap] Mutation of action parameter map: chainKey your plugin needs to be fixed\r\njava.lang.Throwable\r\n...\r\n2019-03-22 18:10:50,756 WARN [http-nio-8085-exec-4] [SimpleActionParametersMap] Mutation of action parameter map: branchName your plugin needs to be fixed\r\njava.lang.Throwable\r\n{noformat}\r\n\r\nh3. Workaround\r\nAs this is only logging, and has no other effect, the warnings can be suppressed by setting the log level for {{com.atlassian.bamboo.collections.SimpleActionParametersMap}} to ERROR, either:\r\n* through the UI in {{Administration >> Overview >> Log settings}}; OR\r\n* adding the following to {{<bamboo-install>/atlassian-bamboo/WEB-INF/classes/log4j.properties}}\r\n{noformat}\r\nlog4j.logger.com.atlassian.bamboo.collections.SimpleActionParametersMap=ERROR\r\n{noformat}\r\n(i) editing log levels through log4j.properties requires a Bamboo restart",
      "summary": "Manually creating a Plan Branch throws error on SimpleActionParametersMap"
    }
  },
  {
    "key": "BAM-20365",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-03-22T16:08:07.000+0000",
      "description": "h3. Problem Definition\r\n\r\nI have a large number of agents, and builds.\r\n\r\nI'd like to keep all agents with a certain capability available for jobs that require that capability.\r\n\r\nI have a large number of jobs which do not use this capability.  I don't want these to build on the agents with the capability.\r\n\r\nThere should be an option to set a *Requirement* to \"does not exist\".  So I don't need to dedicate agents each time I create a new job.\r\n\r\n !image-2019-03-22-11-05-25-449.png|thumbnail! \r\n\r\nh3. Suggested Solution\r\n\r\nAdd \"Does Not Exist\" option to requirements dropdown.\r\n \r\nh3. Workaround\r\n\r\n# Create a Custom Capability for all agents without capability such as:\r\n !image-2019-03-22-11-07-27-117.png|thumbnail! \r\n# Add the \"NoDocker\" capability as a requirement for jobs which do not use Docker.\r\n\r\n\r\n",
      "summary": "Build Requirement to allow builds only on agents WITHOUT certain capability"
    }
  },
  {
    "key": "BAM-20364",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-03-22T14:50:19.000+0000",
      "description": "h3. Problem\r\nThe output of an SSH task will print the task commands two times in the build logs adding unnecessary noise to the logs.\r\n\r\nOutput Sample\r\n{code}\r\nsimple  22-Mar-2019 11:35:57  Starting task 'My SSH script' of type 'com.atlassian.bamboo.plugins.bamboo-scp-plugin:sshtask'\r\nsimple  22-Mar-2019 11:35:57  Connecting to ubuntu on port: 22\r\nsimple  22-Mar-2019 11:35:58  Executing [\r\nsimple  22-Mar-2019 11:35:58  echo **************\r\nsimple  22-Mar-2019 11:35:58  echo these\r\nsimple  22-Mar-2019 11:35:58  echo are\r\nsimple  22-Mar-2019 11:35:58  echo my\r\nsimple  22-Mar-2019 11:35:58  echo ssh\r\nsimple  22-Mar-2019 11:35:58  echo commands\r\nsimple  22-Mar-2019 11:35:58  echo **************\r\nsimple  22-Mar-2019 11:35:58  ]\r\n\r\nbuild 22-Mar-2019 11:35:58  2018-06-27_124005_catalina.out bash.sh output sent\r\nbuild 22-Mar-2019 11:35:58  these\r\nbuild 22-Mar-2019 11:35:58  are\r\nbuild 22-Mar-2019 11:35:58  my\r\nbuild 22-Mar-2019 11:35:58  ssh\r\nbuild 22-Mar-2019 11:35:58  commands\r\nbuild 22-Mar-2019 11:35:58  2018-06-27_124005_catalina.out bash.sh output sent\r\n\r\nsimple  22-Mar-2019 11:35:58  [\r\nsimple  22-Mar-2019 11:35:58  echo **************\r\nsimple  22-Mar-2019 11:35:58  echo these\r\nsimple  22-Mar-2019 11:35:58  echo are\r\nsimple  22-Mar-2019 11:35:58  echo my\r\nsimple  22-Mar-2019 11:35:58  echo ssh\r\nsimple  22-Mar-2019 11:35:58  echo commands\r\nsimple  22-Mar-2019 11:35:58  echo **************\r\nsimple  22-Mar-2019 11:35:58  ] has finished.{code}\r\n\r\nh3. Suggested solution\r\nSubstitute the second print of commands by the SSH task name.",
      "summary": "Improve the SSH task output on Build logs"
    }
  },
  {
    "key": "BAM-20363",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-03-22T13:21:28.000+0000",
      "description": "h3. Issue Summary\r\n\r\nFor a\u00a0HockeyApp Upload task, Bamboo will fail to load the\u00a0IPA file from the build working directory if the build working directory is not specified in the\u00a0.ipa File field\r\n\r\n\u00a0\r\nh3. Steps to Reproduce\r\n # Create an Upload iOS application to HockeyApp task\r\n # Add the\u00a0IPA file (file.ipa) without specifying the path of the working directory\r\n\r\nh3. Expected Results\r\n\r\nBamboo should be able to load the IPA file form the working directory\r\nh3. Actual Results\r\n\r\nFails to load the IPA file\u00a0 with the error in the log;\r\n{noformat}\r\nCould not load the specified IPA file 'File_Name.ipa'\r\n{noformat}\r\nh3. Workaround\r\n\r\nSpecify the build working directory in the IP file field;\r\n{noformat}\r\n${bamboo.build.working.directory}/File_Name.ipa{noformat}",
      "summary": "HockeyApp Upload task fail to load the IPA from the build working directory"
    }
  },
  {
    "key": "BAM-20362",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-03-22T12:10:28.000+0000",
      "description": "h3. *Summary*\r\n\r\nFor a development plan with *Artifact Handler* set to\u00a0*_Agent-local artifact handler,_*\u00a0on subsequent deployment with Artifact Handler set to\u00a0*_Bamboo remote handler_*\u00a0and\u00a0_*Server-local artifact handler,*_ the deployment Release artifact will still not be downloadable.\r\nh3. *Steps to reproduce*\r\n # Create a build plan\r\n # Set the artifact handler to\u00a0_*Agent-local artifact handler*_ for shared artifacts and non-shared artifacts\r\n # Create a Deployment environment for this build\r\n # Add Trigger for _\"After successful build plan_\" in the deployment environment setup\r\n # Build the plan on a remote agent\r\n # The deployment fails to download artifacts (_this is expected due to the\u00a0*Agent-local artifact handler setting*_)_\r\n # Update the Artifacts handler to\u00a0*_Bamboo remote handler_*\u00a0and\u00a0_*Server-local artifact handler*_\u00a0for shared artifacts and non-shared artifacts\r\n # Rebuild the same build number and the deployment will trigger again\r\n\r\nh3. Expected Results\r\n # The deployment is successful\r\n # The\u00a0Release contents for the release is downloadable\r\n !RELEASE.png|thumbnail!\r\n\r\nh3. Actual Result\r\n # The deployment fails\r\n # The\u00a0Release contents for the release is not downloadable\r\n\r\nh3. Workaround\r\n # Run the query to view the related artifact\r\n{code:sql}\r\nSELECT artifact_id, link_type, build_number\r\n  FROM artifact \r\n  WHERE  plan_key='PLAN KEY' AND build_number=BUILD NUMBER\r\n{code}\r\nOutput\r\n{code:sql}\r\nartifact_id\tlink_type\t                                                                     build_number\r\n11730992\tcom.atlassian.bamboo.plugin.artifact.handler.remote:AgentLocalArtifactHandler\t     1\r\n11730993\tcom.atlassian.bamboo.plugin.artifact.handler.remote:BambooRemoteArtifactHandler      1\r\n{code}\r\n# To view the artifact reference in the deployment_version_item_ba table run;\r\n{code:sql}\r\nSELECT ba.version_bam_artifact_item_id, ba.artifact_id, ba.build_number\r\n  FROM deployment_version_item_ba  ba\r\n  JOIN deployment_version_item item\r\n  ON item.deployment_version_item_id = ba.version_bam_artifact_item_id\r\n  JOIN deployment_version dv\r\n  ON dv.deployment_version_id = item.deployment_version_id\r\n  WHERE dv.name='RELEASE IN QUESTION'\r\n{code}\r\nOutput\r\n{code:java}\r\nversion_bam_artifact_item_id\tartifact_id\tbuild_number\r\n12091403\t                11730992\t1{code}\r\n\r\nh3. \u00a0Notes\r\nThe bug is that in the\u00a0_*deployment_version_item_ba*_ table the *artifact_id* still references the\u00a0*articat_id*\u00a0( eg. 11730992) produced by AgentLocalArtifactHandler in the artifact table and not the\u00a0*artifact_id*\u00a0produced by BambooRemoteArtifactHandler.\r\n To fix this update the *artifact_id* to the\u00a0\u00a0*artifact_id*\u00a0\u00a0produced by *BambooRemoteArtifactHandler* for this build\r\n{code:sql}\r\nUPDATE\r\n deployment_version_item_ba\r\nSET\r\n artifact_id = 11730994\r\nWHERE\r\n version_bam_artifact_item_id = 12091403{code}\r\nand rerun the build.",
      "summary": "Deployment Release artifact not downloadable"
    }
  },
  {
    "key": "BAM-20359",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-03-22T15:58:28.000+0000",
      "created": "2019-03-21T12:37:55.000+0000",
      "description": "h3. Issue Summary\r\nVariable \"version\" cannot be used as Bamboo variables\r\n\r\nh3. Steps to Reproduce\r\n# create a Bamboo variable (it can be either at Global or Plan level)\r\n||Variable name||Variable value||\r\n|version|1234|\r\n# create a {color:blue}Default Stage >> Default Job{color}\r\n#* add *Script* task with the following:\r\n{noformat}\r\n# print Plan/Global variable defined\r\necho \"version :: ${version}\"\r\n# to be used by \"Inject Bamboo variables\" task\r\necho \"version=123\" > properties.txt\r\n{noformat}\r\n#* add *Inject Bamboo variables* task\r\n||Path to properties file|properties.txt|\r\n||Namespace|inject|\r\n||Scope of the variables|Result|\r\n# create a {color:blue}Second Stage >> Second Job{color}\r\n#* add *Script* task with the following:\r\n{noformat}\r\necho \"bamboo.inject.version :: ${bamboo.inject.version}\"\r\n{noformat}\r\n# run a build\r\n\r\nh3. Expected Results\r\nVariable should display their values correctly.\r\nh3. Actual Results\r\nIn Default Job, Plan/Global variable does not display its content and Injected variable gets masked:\r\n{noformat}\r\nbuild   21-Mar-2019 12:11:54    version :: \r\nsimple  21-Mar-2019 12:11:54    Finished task 'Script' with result: Success\r\nsimple  21-Mar-2019 12:11:54    Starting task 'Inject Bamboo variables' of type 'com.atlassian.bamboo.plugins.bamboo-variable-inject-plugin:inject'\r\nsimple  21-Mar-2019 12:11:54    Injected variable bamboo.inject.version=******** in RESULT scope\r\nsimple  21-Mar-2019 12:11:54    Finished task 'Inject Bamboo variables' with result: Success\r\n{noformat}\r\nIn Second Job, Injected variable seems to follow the same encryption as (\"password\", \"sshKey\", \"secret\", \"passphrase\" - com.atlassian.bamboo.util.PasswordMaskingUtils#PASSWORD_FIELD_NAMES) however variable's value does not eval\r\n{noformat}\r\ncommand 21-Mar-2019 11:59:42    Substituting variable: ${bamboo.inject.version} with ********\r\n...\r\nbuild   21-Mar-2019 11:59:42    bamboo.inject.version :: ********\r\nsimple  21-Mar-2019 11:59:42    Finished task 'Script' with result: Success\r\n{noformat}\r\nh3. Notes\r\n-\r\n\r\nh3. Workaround\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Variable \"version\" cannot be used as a Bamboo (Injected) variable"
    }
  },
  {
    "key": "BAM-20358",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-03-20T14:34:41.000+0000",
      "description": "h3.\u00a0Problem\r\nSome times is a requirement to serialize environments. The only feature that can be used for this is the *After Successful Deployment* trigger.\r\nThe problem with this one is that if you need to manually run one deployment, all of the cascaded ones are triggered.\r\n\r\nh3. Suggested solution\r\nProvide an option in the deployment trigger where we can select if the prior deployment should be triggered manually or automatically for the actual trigger to work.",
      "summary": "Ability to run a deployment manually without triggering cascaded ones"
    }
  },
  {
    "key": "BAM-20357",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-03-20T14:23:32.000+0000",
      "description": "h3. Issue Summary\r\nWhen a non system admin delete an environment or Deployment Project that have dedicated agent, it will fail with permission issue and the environment will disappear from this non system admin view\r\n\r\nh3. Steps to Reproduce\r\n# System Admin userA set Deployment Project View and Edit permission to non system admin userB\r\n# userB create an environment\r\n# userB add dedicate agent to the environment\r\n# userB delete the environment or the Deployment Project \r\n\r\nh3. Expected Results\r\nThe environment or Deployment Project is deleted\r\n\r\nh3. Actual Results\r\nThe delete fail with the following error:\r\n{noformat}\r\nAccess denied\r\nSorry, you have insufficient permissions to view the page. Please contact an administrator if you believe this is an error.\r\n\r\n{noformat}\r\nThe following is thrown in atlassian-bamboo.log:\r\n{noformat}\r\n2019-03-20 22:13:33,543 WARN [http-nio-8085-exec-15] [AuthorizationLoggerListener] Authorization failed: org.acegisecurity.AccessDeniedException: Authentication userB has NO permissions to the domain object com.atlassian.bamboo.deployments.environments.EnvironmentImpl@2ec85b7c; authenticated principal: org.acegisecurity.adapters.PrincipalAcegiUserToken@41b8051f: Username: EmbeddedCrowdUser{name='userB', displayName='userB', directoryId=65537}; Password: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_USER; secure object: ReflectiveMethodInvocation: public abstract com.atlassian.bamboo.deployments.environments.Environment com.atlassian.bamboo.deployments.environments.service.EnvironmentService.getEnvironment(long) throws org.acegisecurity.AccessDeniedException; target is of class [com.atlassian.bamboo.deployments.environments.service.EnvironmentServiceImpl]; configuration attributes: [ROLE_USER, ROLE_ANONYMOUS, AFTER_ACL_READ]\r\n\r\n{noformat}\r\n\r\nFor Bamboo Specs, the first push that attempts to remove the environment will fail with:\r\n{code}\r\n[ERROR] Failed to execute goal com.atlassian.bamboo:bamboo-specs-runner:6.10.4:run (default-cli) on project bamboo-specs: Execution default-cli of goal com.atlassian.bamboo:bamboo-specs-runner:6.10.4:run failed: java.lang.reflect.InvocationTargetException: An error occurred while publishing deployment $DEPLOYMENT_PROJECT: Authentication $USERNAME has NO permissions to the domain object com.atlassian.bamboo.deployments.environments.EnvironmentImpl@13ad1627 -> [Help 1]\r\n{code}\r\n\r\nSubsequent pushes after that will fail with:\r\n{code}\r\n[ERROR] Failed to execute goal com.atlassian.bamboo:bamboo-specs-runner:6.10.4:run (default-cli) on project bamboo-specs: Execution default-cli of goal com.atlassian.bamboo:bamboo-specs-runner:6.10.4:run failed: java.lang.reflect.InvocationTargetException: An error occurred while publishing deployment $DEPLOYMENT_PROJECT: You need READ permission on every deployment environment in order to modify deployment project -> [Help 1]\r\n{code}\r\n\r\nh3. Notes\r\n* userA still able to see the environment in the Deployment Project\r\n* userB or any other non system admin can't see the environment anymore - restarting Bamboo will make the environment visible by non system admin again\r\n* It will appear confusing, because to an administrator -- the permissions will still appear to be granted to other users. Simply toggling these permissions by the administrator will be sufficient to restore them too.\r\n* If that is the only environment in the Deployment Project, the Deployment Project will not be visible by non system admin too. \r\n* If other environment exist in the Deployment Project, the other environment and Deployment Project will still be visible by non system admin\r\n\r\nh3. Workaround\r\nHave a Bamboo administrator remove the affected deployment environment. \r\nEnsure that agent dedications on the environment are removed before environment removal by non-admins.",
      "summary": "Non system admin fail to delete environment or Deployment Project that have dedicated agent"
    }
  },
  {
    "key": "BAM-20356",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-03-19T19:35:03.000+0000",
      "description": "h3. Problem\r\nAny wrong path entered in *MSTest Test Results File/Directory* field will return the following message in the logs:\r\n{code}\r\nCould not find test result reports in the *<PLAN_JOB_WORKING_DIRECTORY>* directory.{code}\r\nThe message will not show the evaluated path. It will always show the same exact path to the job working directory. It makes hard for users to troubleshoot when the file is not found or when there is a variable to be evaluated in the path.\r\n",
      "summary": "Improve path error handling on MSTest parser task"
    }
  },
  {
    "key": "BAM-20355",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-03-19T13:16:29.000+0000",
      "description": "h3. Issue Summary\r\nEven though all the executable and JDK have been deleted from agent capabilities, Bamboo is still showing it as option\r\n\r\nh3. Steps to Reproduce\r\n# Configure Elastic Agent in Bamboo\r\n# Navigate to {{Administration >> Build Resources >> JDKs >> JDK 1.5}}\r\n# Delete all the JDK 1.5 in the elastic instance capabilities\r\n# Check the JDKs page again\r\n# Check JDK option in Maven task\r\n\r\nh3. Expected Results\r\nJDK 1.5 has been removed\r\n\r\nh3. Actual Results\r\nJDK 1.5 still exist\r\n\r\nh3.Notes\r\nIt is showing JDK and executable from all the elastic instances in other regions as well.\r\n\r\nh3. Workaround\r\n# Shutdown Bamboo\r\n# Backup database for rollback purposes\r\n# Delete the related capability in the table {{CAPABILITY}}, for example:\r\n{code:sql}\r\nDELETE FROM capability WHERE key_identifier='system.jdk.JDK 1.5';\r\n\r\n{code}\r\n# Restart Bamboo",
      "summary": "Unable to remove unused executable and JDK from elastic agent"
    }
  },
  {
    "key": "BAM-20354",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-04-29T21:28:16.000+0000",
      "created": "2019-03-18T21:29:23.000+0000",
      "description": "h3. Issue Summary\r\n\r\nWhen making a GET rest call authenticated with a user from AD which has no email, an XSRF error is thrown attempting to update the \r\n cwd_user.email_address table.\r\n\r\n\r\n (!) This issue occurs only if Bamboo uses Oracle database.\r\nh3. Environment\r\n * Bamboo 6.7.2\r\n * Oracle DB\r\n * Users from AD without email\r\n\r\nh3. Steps to Reproduce\r\n # Use a user imported from AD which has no email\r\n # Make a GET REST call:\r\n{code:java}\r\ncurl -k -u admin:adminpwd \\\r\n     -H 'Content-type: application/json' \\\r\n     -H 'Accept: application/json' \\\r\n     -X GET http://bamboo672:8085/rest/api/latest/result/TES-TES/2.json\r\n{code}\r\n\r\nh3. Expected Results\r\n\r\nA json in return like:\r\n{code:java}\r\n{\"expand\":\"changes,metadata,plan,artifacts,comments,labels,jiraIssues,stages\",\"link\":{\"href\":\"http://bamboo663:8085/rest/api/latest/result/TES-TES-1\",\"rel\":\"self\"},\"plan\":{\"shortName\":\"testApp\",\"shortKey\":\"TES\",\"type\":\"chain\",\"enabled\":true,\"link\":{\"href\":\"http://bamboo663:8085/rest/api/latest/plan/TES-TES\",\"rel\":\"self\"},\"key\":\"TES-TES\",\"name\":\"TestAppLink - testApp\",\"planKey\":{\"key\":\"TES-TES\"}},\"planName\":\"testApp\",\"projectName\":\"TestAppLink\",\"buildResultKey\":\"TES-TES-1\",\"lifeCycleState\":\"Finished\",\"id\":983041,\"buildStartedTime\":\"2019-03-18T20:36:05.827Z\",\"prettyBuildStartedTime\":\"Mon, 18 Mar, 08:36 PM\",\"buildCompletedTime\":\"2019-03-18T20:36:07.653Z\",\"buildCompletedDate\":\"2019-03-18T20:36:07.653Z\",\"prettyBuildCompletedTime\":\"Mon, 18 Mar, 08:36 PM\",\"buildDurationInSeconds\":1,\"buildDuration\":1826,\"buildDurationDescription\":\"1 second\",\"buildRelativeTime\":\"2 minutes ago\",\"buildTestSummary\":\"No tests found\",\"successfulTestCount\":0,\"failedTestCount\":0,\"quarantinedTestCount\":0,\"skippedTestCount\":0,\"continuable\":false,\"onceOff\":false,\"restartable\":false,\"notRunYet\":false,\"finished\":true,\"successful\":true,\"buildReason\":\"Manual run by <a href=\\\"http://bamboo663:8085/browse/user/admin\\\">admin</a>\",\"reasonSummary\":\"Manual run by <a href=\\\"http://bamboo663:8085/browse/user/admin\\\">admin</a>\",\"artifacts\":{\"size\":0,\"start-index\":0,\"max-result\":0},\"comments\":{\"size\":0,\"start-index\":0,\"max-result\":0},\"labels\":{\"size\":0,\"start-index\":0,\"max-result\":0},\"jiraIssues\":{\"size\":0,\"start-index\":0,\"max-result\":0},\"stages\":{\"size\":1,\"start-index\":0,\"max-result\":1},\"changes\":{\"size\":0,\"start-index\":0,\"max-result\":0},\"metadata\":{\"size\":3,\"start-index\":0,\"max-result\":3},\"key\":\"TES-TES-1\",\"planResultKey\":{\"key\":\"TES-TES-1\",\"entityKey\":{\"key\":\"TES-TES\"},\"resultNumber\":1},\"state\":\"Successful\",\"buildState\":\"Successful\",\"number\":1,\"buildNumber\":1}\r\n{code}\r\nh3. Actual Results\r\n\r\nThe below exception is thrown\r\n{noformat}\r\n2019-03-08 14:46:30,612 ERROR [http-nio-127.0.0.1-8085-exec-136] [ApplicationServiceGeneric] Directory 'Active Directory server (282624001)' is not functional during authentication of 'admin'. Skipped.\r\n2019-03-08 14:46:30,612 ERROR [http-nio-127.0.0.1-8085-exec-136] [ReadOnlyGetMethodEnforcer] emailAddress:null->, lowerEmailAddress:null->, updatedDate:2019-03-08 14:33:25.407->Fri Mar 08 14:46:30 EST 2019\r\n2019-03-08 14:46:30,612 ERROR [http-nio-127.0.0.1-8085-exec-136] [ReadOnlyGetMethodEnforcer] Entity mutation is not allowed\r\n2019-03-08 14:46:30,613 WARN [http-nio-127.0.0.1-8085-exec-136] [XsrfUtils] XSRF: A mutative operation was attempted on InternalUser within a non-mutative HTTP request: http://bamboo672:8085/rest/api/latest/result/TES-TES/2.json\r\n{noformat}\r\n{noformat}\r\nat com.atlassian.bamboo.utils.XsrfUtils.fail(XsrfUtils.java:27)\r\n\tat com.atlassian.bamboo.hibernate.ReadOnlyGetMethodEnforcer.fail(ReadOnlyGetMethodEnforcer.java:124)\r\n\tat com.atlassian.bamboo.hibernate.ReadOnlyGetMethodEnforcer.onFlushDirty(ReadOnlyGetMethodEnforcer.java:75)\r\n\tat org.springframework.orm.hibernate.support.ChainedInterceptorSupport.onFlushDirty(ChainedInterceptorSupport.java:104)\r\n\tat org.springframework.orm.hibernate.support.ChainedInterceptorSupport.onFlushDirty(ChainedInterceptorSupport.java:104)\r\n\tat org.hibernate.event.internal.DefaultFlushEntityEventListener.invokeInterceptor(DefaultFlushEntityEventListener.java:355)\r\n\tat org.hibernate.event.internal.DefaultFlushEntityEventListener.handleInterception(DefaultFlushEntityEventListener.java:332)\r\n\tat org.hibernate.event.internal.DefaultFlushEntityEventListener.scheduleUpdate(DefaultFlushEntityEventListener.java:283)\r\n\tat org.hibernate.event.internal.DefaultFlushEntityEventListener.onFlushEntity(DefaultFlushEntityEventListener.java:154)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.flushEntities(AbstractFlushingEventListener.java:235)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:94)\r\n\tat org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:44)\r\n\tat org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1415)\r\n\tat org.hibernate.internal.SessionImpl.list(SessionImpl.java:1952)\r\n\tat org.hibernate.internal.CriteriaImpl.list(CriteriaImpl.java:370)\r\n\tat org.hibernate.internal.CriteriaImpl.uniqueResult(CriteriaImpl.java:392)\r\n\tat com.atlassian.crowd.dao.user.UserDAOHibernate.findByNameInternal(UserDAOHibernate.java:485)\r\n\tat com.atlassian.crowd.dao.user.UserDAOHibernate.findByName(UserDAOHibernate.java:174)\r\n\tat com.atlassian.crowd.dao.user.UserDAOHibernate.findByNameWithAttributes(UserDAOHibernate.java:210)\r\n\tat com.atlassian.crowd.dao.user.UserDAOHibernate.findByNameWithAttributes(UserDAOHibernate.java:59)\r\n\tat com.atlassian.crowd.directory.AbstractInternalDirectory.authenticate(AbstractInternalDirectory.java:198)\r\n\tat com.atlassian.crowd.manager.directory.DirectoryManagerGeneric.authenticateUser(DirectoryManagerGeneric.java:284)\r\n\tat sun.reflect.GeneratedMethodAccessor4205.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:197)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)\r\n\tat com.sun.proxy.$Proxy178.authenticateUser(Unknown Source)\r\n\tat com.atlassian.crowd.manager.application.ApplicationServiceGeneric.authenticateUser(ApplicationServiceGeneric.java:182)\r\n\tat sun.reflect.GeneratedMethodAccessor4204.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:197)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)\r\n\tat com.sun.proxy.$Proxy181.authenticateUser(Unknown Source)\r\n{noformat}\r\nh3. Workaround\r\n\r\nUpdate the users without email, add an email which is not empty, non valid emails can be used as well.",
      "summary": "GET REST calls throwing XSRF for users without email"
    }
  },
  {
    "key": "BAM-20353",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-09-21T08:13:52.000+0000",
      "created": "2019-03-18T19:36:23.000+0000",
      "description": "An admin cannot remove valid EC2 the keys from Bamboo. After EC2 is disabled the credentials cannot be removed from the UI\r\nh3. Work Around\r\n # Disable EC2 from Bamboo UI\r\n # Shutdown Bamboo\r\n # Edit BambooHomeDir/xml-data/configuration/administration.xml and remove\r\n{code:java}\r\n  <elasticConfig>\r\n    <awsAccessKeyId>XXXXXXXXXXXXXX</awsAccessKeyId>\r\n    <awsSecretKey>XXXXXXXXXXXXXXXXXXXXXXX</awsSecretKey>\r\n    <maxConcurrentInstances>5</maxConcurrentInstances>\r\n    <enabled>false</enabled>\r\n    <autoShutdownEnabled>true</autoShutdownEnabled>\r\n    <autoShutdownDelay>300</autoShutdownDelay>\r\n    <uploadingOfAwsAccountDetailsEnabled>false</uploadingOfAwsAccountDetailsEnabled>\r\n    <awsPrivateKeyFile></awsPrivateKeyFile>\r\n    <awsCertFile></awsCertFile>\r\n    <automaticInstanceManagementConfig>\r\n      <averageTimeInQueueThreshold>300000</averageTimeInQueueThreshold>\r\n      <elasticBuildsInQueueThreshold>3</elasticBuildsInQueueThreshold>\r\n      <totalBuildInQueueThreshold>5</totalBuildInQueueThreshold>\r\n      <maxElasticInstancesToStartAtOnce>2</maxElasticInstancesToStartAtOnce>\r\n      <instanceIdleTimeThreshold>600000</instanceIdleTimeThreshold>\r\n      <automaticInstanceManagementEnabled>false</automaticInstanceManagementEnabled>\r\n      <configurationName>Disabled</configurationName>\r\n      <maxNonBambooInstances>1</maxNonBambooInstances>\r\n    </automaticInstanceManagementConfig>\r\n    <isPublicIpForVpcEnabled>false</isPublicIpForVpcEnabled>\r\n    <region>US_EAST_2</region>\r\n  </elasticConfig>\r\n{code}\r\n\r\n # Start Bamboo\r\n\r\nh3. Accepted Solution\r\n\r\nProvide a way to remove the EC2 keys from the UI.",
      "summary": "Make possible to remove valid EC2 configuration from Bamboo"
    }
  },
  {
    "key": "BAM-20352",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-03-15T19:48:24.000+0000",
      "description": "h3. Issue Summary\r\nWhen starting an agent using the installer with the {{start}} argument, a signal mask is added.\r\n\r\nh3. Steps to Reproduce\r\n# Run the Agent installer:\r\n{code:sh}\r\njava -Dbamboo.home=test-agent -jar atlassian-bamboo-agent-installer-6.7.2.jar https://<bamboo-url> start\r\n{code} \r\n # Check the signals blocked by the mask\r\n{code:sh}\r\nps -ef|grep bamboo\r\ngrep SigBlk /proc/<PIDs>/status\r\n{code}\r\n\r\nh3. Expected Results\r\n{noformat}\r\nSigBlk 0000000000000000\r\n{noformat}\r\n\r\nh3. Actual Results\r\n\r\n{noformat}\r\nSigBlk 0000000000000004\r\n{noformat}\r\n\r\nh3. Workaround\r\n\r\nInstall the agent and start with the bundled script:\r\n{code:sh}\r\n# Install the agent\r\njava -Dbamboo.home=test-agent -jar atlassian-bamboo-agent-installer-6.7.2.jar https://<bamboo-url> install\r\n\r\n# Run the start script\r\ntest-agent/bin/bamboo-agent.sh start\r\n{code} ",
      "summary": "Starting an agent using start argument adds a signal mask blocking SIGQUIT"
    }
  },
  {
    "key": "BAM-20351",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-03-15T12:12:19.000+0000",
      "description": "See BAM-18294",
      "summary": "Bamboo REST API getting build results with JIRA issues should return key instead of 401"
    }
  },
  {
    "key": "BAM-20350",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-03-22T16:18:26.000+0000",
      "created": "2019-03-15T08:04:17.000+0000",
      "description": "h3. Description\r\nSince the introduction of Project-level permissions in Bamboo 6.2 it is possible to limit user to create Plans in selected project by disabling global CREATE permission and assigning it on the Project level. However when such user needs to work with Deployments global permission is still needed.\r\n\r\nh3. Proposed solution:\r\nFeature flag controlled by system property will enable the new behavior in Bamboo:\r\n- if a user is allowed to create Plan on any level (global or project) they will be also allowed to create Deployments\r\n",
      "summary": "Allow users with CREATE permission on Project level to create Deployments"
    }
  },
  {
    "key": "BAM-20349",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-04-29T09:10:11.000+0000",
      "created": "2019-03-14T19:10:58.000+0000",
      "description": "h3. Issue Summary\r\n\r\nUnable to create deployment projects that contain\u00a0Source Code Checkout task and also notifications with Bamboo Specs.\r\nh3. Environment\r\n * Bamboo 6.8.0\r\n * Bitbucket Server\r\n\r\nh3. Steps to Reproduce\r\n # Create a deployment project (*Create > Create deployment project*), give a name to the deployment project, link to an existing build plan and click on the *Create deployment project* button.\r\n # Click on the *+ Add environment* button, give a name to the environment and click on the *Create* button.\r\n # Click on the *Set up tasks* button, then click on the *Add task* button, add a Source Code Checkout task, click on the *Save* button and then click on the *Finish deployment project*.\r\n # Click on the *Notifications* button, click on the *Add* notification button, select an Event (e.g. Deployment started and finished), select a Recipient type (e.g. User), select a user and then click on the *Add* button.\r\n # Select the deployment projects created (Deploy > All deployment projects), click in *Edit project* and click in *View projects as Java Specs*.\r\n # Click in *Delete project* and click on the *Confirm* button.\r\n # Run the Bamboo Specs in Maven, e.g.:\r\n\r\n{code:java}\r\nmvn -Ppublish-specs{code}\r\n\u00a0\r\n\r\nA sample of Bamboo Specs that will throw the exception:\u00a0\r\n{code:java}\r\nimport com.atlassian.bamboo.specs.api.BambooSpec;\r\nimport com.atlassian.bamboo.specs.api.builders.AtlassianModule;\r\nimport com.atlassian.bamboo.specs.api.builders.BambooOid;\r\nimport com.atlassian.bamboo.specs.api.builders.deployment.Deployment;\r\nimport com.atlassian.bamboo.specs.api.builders.deployment.Environment;\r\nimport com.atlassian.bamboo.specs.api.builders.deployment.ReleaseNaming;\r\nimport com.atlassian.bamboo.specs.api.builders.notification.AnyNotificationType;\r\nimport com.atlassian.bamboo.specs.api.builders.notification.Notification;\r\nimport com.atlassian.bamboo.specs.api.builders.permission.DeploymentPermissions;\r\nimport com.atlassian.bamboo.specs.api.builders.permission.EnvironmentPermissions;\r\nimport com.atlassian.bamboo.specs.api.builders.permission.PermissionType;\r\nimport com.atlassian.bamboo.specs.api.builders.permission.Permissions;\r\nimport com.atlassian.bamboo.specs.api.builders.plan.PlanIdentifier;\r\nimport com.atlassian.bamboo.specs.api.builders.repository.VcsRepositoryIdentifier;\r\nimport com.atlassian.bamboo.specs.builders.notification.UserRecipient;\r\nimport com.atlassian.bamboo.specs.builders.task.ArtifactDownloaderTask;\r\nimport com.atlassian.bamboo.specs.builders.task.CheckoutItem;\r\nimport com.atlassian.bamboo.specs.builders.task.CleanWorkingDirectoryTask;\r\nimport com.atlassian.bamboo.specs.builders.task.DownloadItem;\r\nimport com.atlassian.bamboo.specs.builders.task.VcsCheckoutTask;\r\nimport com.atlassian.bamboo.specs.util.BambooServer;@BambooSpec\r\npublic class PlanSpec {    public Deployment rootObject() {\r\n        final Deployment rootObject = new Deployment(new PlanIdentifier(\"AT\", \"DT\")\r\n                .oid(new BambooOid(\"82qmlf5lu70h\")),\r\n                \"DEPLOY\")\r\n                .oid(new BambooOid(\"8333kwcbbtac\"))\r\n                .releaseNaming(new ReleaseNaming(\"release-1\")\r\n                        .autoIncrement(true))\r\n                .environments(new Environment(\"Environment\")\r\n                        .tasks(new CleanWorkingDirectoryTask(),\r\n                                new ArtifactDownloaderTask()\r\n                                        .description(\"Download release contents\")\r\n                                        .artifacts(new DownloadItem()\r\n                                                .allArtifacts(true)),\r\n                                new VcsCheckoutTask()\r\n                                        .checkoutItems(new CheckoutItem()\r\n                                                .repository(new VcsRepositoryIdentifier()\r\n                                                        .name(\"Bamboo Specs\"))))\r\n                        .notifications(new Notification()\r\n                                .type(new AnyNotificationType(new AtlassianModule(\"bamboo.deployments:deploymentStartedFinished\")))\r\n                                .recipients(new UserRecipient(\"admin\"))));\r\n        return rootObject;\r\n    }    public DeploymentPermissions deploymentPermission() {\r\n        final DeploymentPermissions deploymentPermission = new DeploymentPermissions(\"DEPLOY\")\r\n                .permissions(new Permissions()\r\n                        .userPermissions(\"admin\", PermissionType.EDIT, PermissionType.VIEW)\r\n                        .loggedInUserPermissions(PermissionType.VIEW)\r\n                        .anonymousUserPermissionView());\r\n        return deploymentPermission;\r\n    }    public EnvironmentPermissions environmentPermission1() {\r\n        final EnvironmentPermissions environmentPermission1 = new EnvironmentPermissions(\"DEPLOY\")\r\n                .environmentName(\"Environment\")\r\n                .permissions(new Permissions()\r\n                        .userPermissions(\"admin\", PermissionType.EDIT, PermissionType.VIEW, PermissionType.BUILD)\r\n                        .loggedInUserPermissions(PermissionType.VIEW)\r\n                        .anonymousUserPermissionView());\r\n        return environmentPermission1;\r\n    }    public static void main(String... argv) {\r\n        //By default credentials are read from the '.credentials' file.\r\n        BambooServer bambooServer = new BambooServer(\"http://bamboo-server:8085\");\r\n        final PlanSpec planSpec = new PlanSpec();        final Deployment rootObject = planSpec.rootObject();\r\n        bambooServer.publish(rootObject);        final DeploymentPermissions deploymentPermission = planSpec.deploymentPermission();\r\n        bambooServer.publish(deploymentPermission);        final EnvironmentPermissions environmentPermission1 = planSpec.environmentPermission1();\r\n        bambooServer.publish(environmentPermission1);\r\n    }\r\n}{code}\r\nh3. Notes\r\n * The exception doesn't occur when the deployment project\u00a0already exists.\r\n * The exception doesn't occur if the environment\u00a0contains Source Code Checkout task without notifications.\r\n * The exception doesn't occur if the environment\u00a0contains notifications without Source Code Checkout task.\r\n\r\nh3. Expected Results\r\n\r\nRun the Bamboo Specs with success and create the deployment project with all configurations correctly set.\r\nh3. Actual Results\r\n\r\nThe below exception is thrown in the Maven or IntelliJ log file:\r\n{code:java}\r\nException in thread \"main\" com.atlassian.bamboo.specs.api.exceptions.BambooSpecsPublishingException: An error occurred while publishing deployment DEPLOY: object references an unsaved transient instance - save the transient instance before flushing: com.atlassian.bamboo.deployments.environments.persistence.MutableEnvironmentImpl\r\n\tat com.atlassian.bamboo.specs.util.BambooServer.translateRestException(BambooServer.java:170)\r\n\tat com.atlassian.bamboo.specs.util.BambooServer.translateException(BambooServer.java:140)\r\n\tat com.atlassian.bamboo.specs.util.BambooServer.publish(BambooServer.java:97)\r\n\tat PlanSpec.main(PlanSpec.java:74)\r\nCaused by: com.atlassian.bamboo.specs.exceptions.BambooSpecsRestRequestException: object references an unsaved transient instance - save the transient instance before flushing: com.atlassian.bamboo.deployments.environments.persistence.MutableEnvironmentImpl\r\n\tat com.atlassian.bamboo.specs.util.RestHelper.lambda$sendRequest$2(RestHelper.java:89)\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:222)\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:164)\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:139)\r\n\tat com.atlassian.bamboo.specs.util.RestHelper.sendRequest(RestHelper.java:92)\r\n\tat com.atlassian.bamboo.specs.util.RestHelper.post(RestHelper.java:201)\r\n\tat com.atlassian.bamboo.specs.util.SendQueue$1.run(SendQueue.java:23)\r\n{code}\r\nh3. Workaround\r\n\r\nDelete all notifications or the\u00a0Source Code Checkout task and then create manually in the UI.\u00a0",
      "summary": "Bamboo Specs: Deployment project that contains check out task and notifications throws BambooSpecsRestRequestException"
    }
  },
  {
    "key": "BAM-20348",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-04-16T14:01:45.000+0000",
      "created": "2019-03-14T17:05:23.000+0000",
      "description": "h3. Summary\r\n\r\nRe-run expired builds to recover its artifacts should also recover the artifacts for expired releases.\r\n\r\nh3. Steps to Reproduce\r\n# Run a couple builds and deploy them to an environment.\r\n# Set the \"Global Expiry\" to delete \"Build and release artifacts only\".\r\n# Run the expiry.\r\n# Try to promote an expired release - it will fail as expected.\r\n# Re-run the build responsible to provide the artifacts for the release from the previous step.\r\n# Try to promote de release again. \r\n\r\nh3. Expected Results\r\n\r\nAs the artifacts were recreated, Bamboo should be able to promote the release.\r\n\r\nh3. Actual Results\r\nBamboo will not find the artifacts and the release will not be promoted.\r\n{noformat}\r\n14-Mar-2019 16:09:21\tPreparing to download plan result PROJ-PLAN-22 artifact: Non required shared artifact: [artifact_name], pattern: [*.*]\r\n14-Mar-2019 16:09:21\tUnable to download artifact Non required shared artifact: [artifact_name], pattern: [*.*]\r\n{noformat}\r\n\r\nh3. Workaround\r\nDelete and recreate the release\r\nor \r\nIncrease the expiry time and/or the number of releases to keep",
      "summary": "Re-run expired builds to recover its artifacts does not recover the artifacts for expired releases "
    }
  },
  {
    "key": "BAM-20347",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-03-14T06:05:21.000+0000",
      "description": "h3. Problem Definition\r\nIf Bamboo is only requires certain subdirectory of a repository to perform a build, Git only allows a clone of the entire repository. When a repository is large (Example: 1GB+) it can take some time to clone files that may not be required.\r\n\r\nh3. Suggested Solution\r\nSince Git 2.18, Git protocol v2 has introduced the --filter flag to enable [partial clones|https://github.com/git/git/blob/v2.19.0/Documentation/technical/partial-clone.txt]\r\n\r\nThis will allow Bamboo to clone specific subdirectories of a repository only.\r\n\r\nh3. Why this is important\r\nThis will increase cloning performance on large repositories. ",
      "summary": "Add support for partial git clones (git clone --filter)"
    }
  },
  {
    "key": "BAM-20346",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-03-13T20:01:51.000+0000",
      "description": "h3. Problem\r\nWhen a given build result has too many tests it is difficult to find a specific test due to the number test pages.\r\nIf the option \"Show all tests on one page\" is selected it leads to long page load.\r\n\r\nh3. Suggested solution\r\nImplement a test filter to reduce the time taken on finding test results.",
      "summary": "Implement a test result filter"
    }
  },
  {
    "key": "BAM-20345",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-03-18T07:23:41.000+0000",
      "created": "2019-03-13T14:22:28.000+0000",
      "description": "Could the following be added to mimetypes.xml? Currently clicking on an ova artifact in chrome causes it to attempt to preview the file.\r\n{code:java}\r\n    <mime-mapping>\r\n        <extension>ova</extension>\r\n        <mime-type>application/x-virtualbox-ova</mime-type>\r\n    </mime-mapping>\r\n    <mime-mapping>\r\n        <extension>ovf</extension>\r\n        <mime-type>application/x-virtualbox-ovf</mime-type>\r\n    </mime-mapping>{code}",
      "summary": "Add ova/ovf file type to Bamboo mimetypes.xml"
    }
  },
  {
    "key": "BAM-20344",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-03-13T09:27:36.000+0000",
      "description": "*Summary*\r\nPresently, notification templates can be modified for events listed in the options in the notification setting in UI.\r\n\r\n*Suggestion*\r\nIt would be nice if there was the possibility\u00a0to add the even for a custom notification template to the\u00a0events option in the notifications UI.",
      "summary": "Add the event for a custom notification template to event option in notification UI"
    }
  },
  {
    "key": "BAM-20343",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-04-04T13:00:55.000+0000",
      "created": "2019-03-13T02:42:23.000+0000",
      "description": "h3. Issue Summary\r\nIf you run a Spec via RSS when the deployment project to be created already exists, and that project has an undecryptable secret stored in one of its variables, then the spec will fail with a \"pad block corrupted\" error.\r\n\r\nh3. Environment\r\n* sandbox-bamboo.internal.atlassian.com\r\n* Bamboo\u00a0version 6.9.0-m644 build 60901 -\u00a011 Mar 19\r\n* using Repository Stored Specs\r\n\r\nh3. Steps to Reproduce\r\n1. Scan a spec that contains an encrypted secret that was generated on a different Bamboo instance (in my case, this was server-syd.internal.atlassian.com). For example, include this in the spec:\r\n{code}.variables(new Variable(\"micros.token.password\",\r\n                        \"BAMSCRT@0@0@3GPaSljgVp43rDYn5Cpq6waAfEnRy/oTBqId8Z0wbZT2StKg4P4Wk6tHwXZuXXo0\")){code}\r\n\r\n2. In my case, the scan failed, either because of this undecryptable secret or some other reason (not sure)\r\n3. Remove the secret from the spec and re-run it\r\n4. The re-run [fails with a \"pad block corrupted\" error|https://sandbox-bamboo.internal.atlassian.com/spec-logs/915013644/2019_03_13_01_55_42_66b305042a31d44309f639bd5cd30242723404e1.log]\r\n\r\nh3. Expected Results\r\nA correct spec throws no errors regardless of existing invalid secrets.\r\nh3. Actual Results\r\nBamboo seems to be trying to decrypt the existing secrets, which causes the Spec to fail if any of those existing secrets can't be decrypted for some reason (in my case because they were generated on a different instance).\r\n\r\nThe below exception is thrown in the spec-logs log file:\r\n{noformat}org.bouncycastle.crypto.InvalidCipherTextException: pad block corrupted\r\njava.lang.RuntimeException: org.bouncycastle.crypto.InvalidCipherTextException: pad block corrupted\r\n\tat com.google.common.base.Throwables.propagate(Throwables.java:160)\r\n\tat com.atlassian.bamboo.crypto.instance.SecretEncryptionServiceInternalImpl.decrypt(SecretEncryptionServiceInternalImpl.java:137)\r\n\tat com.atlassian.bamboo.crypto.instance.SecretEncryptionServiceInternalImpl.decrypt(SecretEncryptionServiceInternalImpl.java:109)\r\n\tat sun.reflect.GeneratedMethodAccessor336.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:206)\r\n\tat com.sun.proxy.$Proxy240.decrypt(Unknown Source)\r\n\tat com.atlassian.bamboo.crypto.instance.SecretEncryptionServiceImpl.decrypt(SecretEncryptionServiceImpl.java:21)\r\n\tat sun.reflect.GeneratedMethodAccessor335.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:206)\r\n\tat com.sun.proxy.$Proxy213.decrypt(Unknown Source)\r\n\tat com.atlassian.bamboo.variable.VariableDefinitionManagerImpl.decrypt(VariableDefinitionManagerImpl.java:190)\r\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\r\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1374)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499)\r\n\tat com.atlassian.bamboo.variable.VariableDefinitionManagerImpl.decrypt(VariableDefinitionManagerImpl.java:199)\r\n\tat com.atlassian.bamboo.variable.VariableDefinitionManagerImpl.getDeploymentEnvironmentVariables(VariableDefinitionManagerImpl.java:129)\r\n\tat com.atlassian.bamboo.variable.VariableConfigurationServiceImpl.lambda$setDeploymentEnvironmentVariables$7(VariableConfigurationServiceImpl.java:250)\r\n\tat com.atlassian.bamboo.core.ScopedExclusionServiceHelper$2.apply(ScopedExclusionServiceHelper.java:119)\r\n\tat com.atlassian.bamboo.core.ScopedExclusionServiceHelper$2.apply(ScopedExclusionServiceHelper.java:115)\r\n\tat com.atlassian.bamboo.core.ScopedExclusionServiceImpl.withLock(ScopedExclusionServiceImpl.java:63)\r\n\tat com.atlassian.bamboo.variable.VariableConfigurationServiceImpl.setDeploymentEnvironmentVariables(VariableConfigurationServiceImpl.java:247)\r\n\tat com.atlassian.bamboo.configuration.external.DeploymentImportServiceImpl.updateEnvironmentData(DeploymentImportServiceImpl.java:727)\r\n\tat com.atlassian.bamboo.configuration.external.DeploymentImportServiceImpl.updateEnvironments(DeploymentImportServiceImpl.java:660)\r\n\tat com.atlassian.bamboo.configuration.external.DeploymentImportServiceImpl.lambda$modifyExistingDeploymentFunction$6(DeploymentImportServiceImpl.java:497)\r\n\tat com.atlassian.bamboo.core.ScopedExclusionServiceImpl.tryWithLock(ScopedExclusionServiceImpl.java:74)\r\n\tat com.atlassian.bamboo.configuration.external.DeploymentImportServiceImpl.modifyExistingDeployment(DeploymentImportServiceImpl.java:445)\r\n\tat com.atlassian.bamboo.configuration.external.DeploymentImportServiceImpl.lambda$importDeployment$0(DeploymentImportServiceImpl.java:267)\r\n\tat org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)\r\n\tat com.atlassian.bamboo.persistence.BambooTransactionHibernateTemplate.execute(BambooTransactionHibernateTemplate.java:28)\r\n\tat com.atlassian.bamboo.configuration.external.DeploymentImportServiceImpl.importDeployment(DeploymentImportServiceImpl.java:247)\r\n\tat com.atlassian.bamboo.configuration.external.RepositoryStoredSpecsServiceImpl.importDeploymentProperties(RepositoryStoredSpecsServiceImpl.java:968)\r\n\tat com.atlassian.bamboo.configuration.external.RepositoryStoredSpecsServiceImpl.importBambooYamlForDeploymentProject(RepositoryStoredSpecsServiceImpl.java:964)\r\n\tat com.atlassian.bamboo.configuration.external.RepositoryStoredSpecsServiceImpl.lambda$importBambooYamlsOfAllTypes$7(RepositoryStoredSpecsServiceImpl.java:659)\r\n\tat com.atlassian.bamboo.configuration.external.RepositoryStoredSpecsServiceImpl.importBambooYamlsWithImporter(RepositoryStoredSpecsServiceImpl.java:695)\r\n\tat com.atlassian.bamboo.configuration.external.RepositoryStoredSpecsServiceImpl.importBambooYamlsOfAllTypes(RepositoryStoredSpecsServiceImpl.java:664)\r\n\tat com.atlassian.bamboo.configuration.external.RepositoryStoredSpecsServiceImpl.processSpecs(RepositoryStoredSpecsServiceImpl.java:440)\r\n\tat com.atlassian.bamboo.configuration.external.RepositoryStoredSpecsServiceImpl.runBambooSpecs(RepositoryStoredSpecsServiceImpl.java:291)\r\n\tat com.atlassian.bamboo.configuration.external.RssDetectionServiceImpl.runRssDetection(RssDetectionServiceImpl.java:262)\r\n\tat com.atlassian.bamboo.configuration.external.detection.RssDetectionRunnable.run(RssDetectionRunnable.java:42)\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat com.atlassian.bamboo.utils.BambooRunnables$1.run(BambooRunnables.java:48)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper.runWith(ImpersonationHelper.java:26)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper.runWithSystemAuthority(ImpersonationHelper.java:17)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper$1.run(ImpersonationHelper.java:41)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\nCaused by: org.bouncycastle.crypto.InvalidCipherTextException: pad block corrupted\r\n\tat org.bouncycastle.crypto.paddings.PKCS7Padding.padCount(Unknown Source)\r\n\tat org.bouncycastle.crypto.paddings.PaddedBufferedBlockCipher.doFinal(Unknown Source)\r\n\tat com.atlassian.bamboo.crypto.instance.SecretEncryptionServiceInternalImpl.decrypt(SecretEncryptionServiceInternalImpl.java:135)\r\n\t... 56 more{noformat}\r\nh3. Notes\r\n* Spec source code is [here|https://stash.atlassian.com/users/aswan/repos/label-it-specs/browse/bamboo-specs] (run revision 262b0c41cc1 to create the invalid secret)\r\n* Linked repo (where you can see the Specs run history) is [here|https://sandbox-bamboo.internal.atlassian.com/admin/editLinkedRepository.action?repositoryId=915013644]\r\n\r\nh3. Workaround\r\nThe workaround suggested by BuildEng was to delete the deployment project, which did the trick (presumably this deleted the stored undecryptable secret).",
      "summary": "Scanning a Bamboo Spec when invalid secret exists causes scan to fail"
    }
  },
  {
    "key": "BAM-20342",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-07-12T13:58:50.000+0000",
      "created": "2019-03-12T14:22:19.000+0000",
      "description": "*Summary*\r\n\r\nWhen looking at deployments (both on the deployment dashboard but also looking at an individual deployment), the date and time indicated for completion is always displayed in the timezone of the browser of the user looking at the data.\r\n\r\nThis is a problem for two reasons:\r\n * The time displayed in the deployment logs is in the server's timezone\r\n * The time displayed for builds (build completion) is in the server's timezone\r\n\r\n\u00a0",
      "summary": "The time displayed for deployment completion is in the timezone of the browser"
    }
  },
  {
    "key": "BAM-20341",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-03-11T16:46:19.000+0000",
      "description": "h3. Problem\r\nDeployments will list commits and Jira related issues that were added between the last deployment and the current one. The problem happens when we want to see what is inside the first deployment. Since there is no prior reference, Bamboo will not list any commits or Jira issues related to that deployment. That can be annoying if you want to deploy a new branch.\r\n\r\nh3. Suggested solution\r\nPlease provide the deployment window with a method where we can compare the new selected branch with other branches already deployed and be able to see the differences. Bamboo could also be able to show what is now in the given new branch since its creation.",
      "summary": "First deployment of a branch should list commits and Jira linked content"
    }
  },
  {
    "key": "BAM-20340",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-03-08T17:31:28.000+0000",
      "description": "h3. *Issue Summary*\r\n\r\nWhen adding a custom required capability in a deployment environment that has the true or false upper case values, the value automatically sets to lower case by Bamboo. When this happens, if there is a custom capability that contains the value true or false with any word in upper case, in the shared remote capabilities or in the agents capabilities, Bamboo doesn't recognize the values in upper case as equals to lower case. By doing this, Bamboo shows that have no agents with the required capability.\r\n\r\n\u00a0\r\n\r\n*Steps to Reproduce*\r\n # Create a custom capability in *Bamboo Overview > Agents > Capability > Add capability* and set the value as True or False, for example, or even any combination of these two words with any letter in upper case.\r\n # Go to *Deploy > Deployment Project > Edit Project > Agents assignment > Required capability*, search for a custom capability and select it.\r\n # Select the equals option and, in the right field, set for example False or True value and then click on the Add button.\r\n # In this step, Bamboo recognize the agents as not capable.\r\n\r\nh3. *Expected Results*\r\n\r\nBamboo should allow setting any text when adding the custom capability in the agents assignment.\r\nh3. *Actual Results*\r\n\r\nBamboo automatically sets the text of custom capability to lower case if the value is true or false with any letter in upper case.\r\nh3. *Workaround*\r\n\r\nThe workarounds for this issue are:\r\n * Change the text of custom capability, in the agents capabilities or in the shared remote capabilities, to lower case true or false.\r\n * When adding the custom capability in agents assignment, add a trailing space and save it.",
      "summary": "Agents assignment allow only to set a custom capability in lower case when the value is true or false"
    }
  },
  {
    "key": "BAM-20339",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-03-11T09:41:53.000+0000",
      "created": "2019-03-08T15:12:35.000+0000",
      "description": "h3. Summary\r\n\r\nWhen a username is changed in external user directory (local directories may be affected as well), Bamboo permissions are not refreshed until server restart. This means that a user may not be able to log in, or perform operations, should any permissions be granted to them directly (and not via a group or role).\r\nh3. How to Replicate\r\n\r\nFor example, using Crowd:\r\n * add a Crowd user directory\r\n * create a user in the user directory\r\n * sync the user directory\r\n * grant permissions in Bamboo directly to the user (and not via group/role)\r\n * log in to Bamboo as the user and perform the actions which should be permitted\r\n * change the username in Crowd\r\n * sync the user directory\r\n * log in to Bamboo as the user and try to perform the actions which should still be permitted\r\n\r\nh3. Expected result\r\n\r\nThe user is still able to perform whatever they were permitted to do.\r\nh3. Actual result\r\n\r\nThe user does not have the necessary permissions.\r\nh3. Workaround\r\n\r\nRestart Bamboo server so Bamboo permission caches are updated.\r\n\r\n\u00a0\r\n\r\n\u00a0",
      "summary": "Bamboo does not update permissions cache on username change"
    }
  },
  {
    "key": "BAM-20338",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-03-08T09:35:11.000+0000",
      "description": "*Summary*\r\n\r\nCurrently, user deletion can be prevented by the existence of information created by that user (labels, comments on build results, etc.).\r\n\r\n*Suggestion*\r\n\r\nAdd the possibility to delete all the information that would prevent the deletion in one go when the deletion attempt is made.\r\n\r\n*Workaround*\r\n\r\nManually remove the labels and comment of the users\r\nh4. Run the following SQL to find any comments coming from a specific user:\r\n{code:sql}\r\nSELECT DISTINCT full_key \u00a0 \u00a0 AS \"BUILD KEY\",\r\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 build_number AS \"BUILD_NUMBER\",\r\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 content\u00a0 \u00a0 \u00a0 AS \"Comment\"\r\nFROM \u00a0 build AS b\r\n\u00a0\u00a0 \u00a0 \u00a0 JOIN buildresultsummary AS bs\r\n\u00a0\u00a0 \u00a0 \u00a0 \u00a0 ON b.full_key = bs.build_key\r\n\u00a0\u00a0 \u00a0 \u00a0 JOIN buildresultsummary_label AS bl\r\n\u00a0\u00a0 \u00a0 \u00a0 \u00a0 ON bl.build_id = b.build_id\r\n\u00a0\u00a0 \u00a0 \u00a0 JOIN user_comment AS c\r\n\u00a0\u00a0 \u00a0 \u00a0 \u00a0 ON c.user_name = bl.user_name\r\nWHERE\u00a0 bs.buildresultsummary_id = c.entity_id\r\n\u00a0\u00a0 \u00a0 \u00a0 AND b.build_id = bl.build_id\r\n\u00a0\u00a0 \u00a0 \u00a0 AND bl.user_name IN ( 'your_username' ); {code}\r\nh4. Run this query to find any Labels or Favorite/Unfavorite actions by a specific user:\r\n{code:sql}\r\nSELECT\u00a0DISTINCT\u00a0full_key\u00a0AS\u00a0\"BUILD\u00a0KEY\",\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0name\u00a0\u00a0\u00a0\u00a0\u00a0AS\u00a0\"LABEL\u00a0NAME\"\r\nFROM\u00a0\u00a0\u00a0build\u00a0AS\u00a0b\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0JOIN\u00a0buildresultsummary_label\u00a0AS\u00a0bl\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ON\u00a0b.build_id\u00a0=\u00a0bl.build_id\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0JOIN\u00a0label\u00a0AS\u00a0l\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ON\u00a0l.label_id\u00a0=\u00a0bl.label_id\r\nWHERE\u00a0\u00a0bl.user_name\u00a0IN\u00a0(\u00a0'your_username'\u00a0);\u00a0 {code}",
      "summary": "User deletion improvement"
    }
  },
  {
    "key": "BAM-20337",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-03-08T00:26:54.000+0000",
      "description": "h3. Problem Definition\r\nCurrently we are only able to move the priority of one build each time\r\nh3. Suggested Solution\r\nPlease allow selection of multiple builds\r\nh4. Why this is important \r\nWe need the ability to move up multiple builds\r\nh3. Workaround \r\nCurrently we must move one by one",
      "summary": "Ability to bulk move priority of builds"
    }
  },
  {
    "key": "BAM-20336",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-03-13T09:19:52.000+0000",
      "created": "2019-03-05T17:33:41.000+0000",
      "description": "\r\nh3. Summary\r\nThe Docker task points to a broken hyperlink when we click on \"Docker run arguments\" in a Text box hint under \"Additional arguments\"\r\n !image-2019-03-05-18-26-51-011.png|thumbnail! \r\n\r\nh3. Expected Results\r\nThe hyperlink should point to https://docs.docker.com/engine/reference/run/\r\n\r\nh3. Actual Results\r\nPoints to a broken link - https://docs.docker.com/reference/run/ and thus we get a 404 error.\r\n\r\n\r\n",
      "summary": "Docker run arguments in Docker task points to a broken link"
    }
  },
  {
    "key": "BAM-20335",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-03-05T15:43:58.000+0000",
      "description": "We are using Bamboo 6.3.2. For one of our projects, we have plan branch enabled. We also have automatic plan branch removal enabled. For one of the plan branches, we had builds tagged as \"keep\" because they were important for that branch. However, the automatic removal process removed that plan branch without any type of notice.\r\n\r\n\u00a0\r\n\r\nIt would be good if Bamboo flagged such a scenario and required confirmation from the plan administrators prior to automatically removing the plan branch. That way, important build and build artifacts will not get lost because of oversight.",
      "summary": "Bamboo should require confirmation to delete plan branches that have builds tagged as \"keep\""
    }
  },
  {
    "key": "BAM-20334",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-05-13T13:52:17.000+0000",
      "created": "2019-03-05T09:05:10.000+0000",
      "description": "h3. Issue Summary\r\nIf the upgrade is performed with expired license, Bamboo fail to load the error page\r\n\r\nh3. Steps to Reproduce\r\n# Install old Bamboo with old license\r\n# Shutdown old Bamboo\r\n# Install Bamboo 6.8.0 and configure it to use the same Bamboo Home\r\n# Start Bamboo 6.8.0\r\n\r\nh3. Expected Results\r\nIt will fail to upgrade and display error page with the following message:\r\nbq.Bamboo bootstrap failed: Unable to run pre-bootstrap upgrade tasks as your support period has ended. Please contact Atlassian Support at https://support.atlassian.com\r\n\r\nh3. Actual Results\r\nBamboo fail to load the error page. The following exception is shown with the URL http://localhost:8085/bootstrap/selectSetupStep.action :\r\n{noformat}\r\nThis page isn\u2019t working localhost redirected you too many times.\r\nTry clearing your cookies.\r\nERR_TOO_MANY_REDIRECTS\r\n\r\n{noformat}\r\nThe following is thrown in the atlassian-bamboo.log file:\r\n{noformat}\r\n2019-03-05 16:57:41,109 INFO [localhost-startStop-1] [UpgradeLauncher] Upgrades not performed since the application has not been set up yet.\r\n2019-03-05 16:57:41,165 INFO [localhost-startStop-1] [CompressingFilter] CompressingFilter has initialized\r\n2019-03-05 16:57:41,676 INFO [localhost-startStop-1] [SpringObjectFactoryProxy] Deferring initialisation of com.atlassian.bamboo.plugin.xwork.SpringObjectFactoryProxy\r\n2019-03-05 16:57:42,484 INFO [localhost-startStop-1] [Dispatchers] Dispatcher org.apache.struts2.dispatcher.Dispatcher initialised\r\n2019-03-05 16:57:42,539 INFO [localhost-startStop-1] [SpringObjectFactoryProxy] Deferring initialisation of com.atlassian.bamboo.plugin.xwork.SpringObjectFactoryProxy\r\n2019-03-05 16:57:43,161 INFO [localhost-startStop-1] [AccessLogFilter] AccessLogFilter initialized. Format is: <user> <url> <starting memory free (kb)> +- <difference in free mem (kb)> <query time (ms)>\r\n2019-03-05 16:57:43,213 INFO [localhost-startStop-1] [SpringObjectFactoryProxy] Deferring initialisation of com.atlassian.bamboo.plugin.xwork.SpringObjectFactoryProxy\r\n2019-03-05 16:57:43,291 INFO [localhost-startStop-1] [Dispatchers] Dispatcher org.apache.struts2.dispatcher.Dispatcher initialised\r\n2019-03-05 16:57:43,324 INFO [localhost-startStop-1] [SpringObjectFactoryProxy] Deferring initialisation of com.atlassian.bamboo.plugin.xwork.SpringObjectFactoryProxy\r\n2019-03-05 16:57:56,403 INFO [http-nio-8085-exec-1] [JohnsonFilter] The application is not yet setup. Redirecting request from '/start.action' to '/bootstrap/selectSetupStep.action'\r\n2019-03-05 16:57:56,416 INFO [http-nio-8085-exec-2] [AccessLogFilter] 0:0:0:0:0:0:0:1 GET http://localhost:8085/bootstrap/selectSetupStep.action 581370kb\r\n2019-03-05 16:57:56,672 INFO [http-nio-8085-exec-2] [SelectSetupStepAction] Current setup step is /setup/complete.action\r\n2019-03-05 16:57:56,687 INFO [http-nio-8085-exec-3] [AccessLogFilter] 0:0:0:0:0:0:0:1 GET http://localhost:8085/setup/complete.action 444051kb\r\n2019-03-05 16:57:56,707 INFO [http-nio-8085-exec-4] [JohnsonFilter] The application is not yet setup. Redirecting request from '/start.action' to '/bootstrap/selectSetupStep.action'\r\n2019-03-05 16:57:56,712 INFO [http-nio-8085-exec-5] [AccessLogFilter] 0:0:0:0:0:0:0:1 GET http://localhost:8085/bootstrap/selectSetupStep.action 434647kb\r\n2019-03-05 16:57:56,716 INFO [http-nio-8085-exec-5] [SelectSetupStepAction] Current setup step is /setup/complete.action\r\n2019-03-05 16:57:56,721 INFO [http-nio-8085-exec-6] [AccessLogFilter] 0:0:0:0:0:0:0:1 GET http://localhost:8085/setup/complete.action 432766kb\r\n{noformat}\r\n\r\nh3. Notes\r\n* It seems to be trying to load the setup page continuously till it break.\r\n* The same problem will happen if [MySQL driver|https://confluence.atlassian.com/bamboo/mysql-289276817.html#MySQL-2.ConnectingBamboototheMySQLdatabase] is not added to Bamboo yet \r\n\r\nh3. Workaround\r\n# Shutdown Bamboo\r\n# Replace the license in the file {{<bamboo-home>/bamboo.cfg.xml}} with the new license in my.atlassian.com , for example:\r\n{noformat}\r\n    <property name=\"license.string\">license line 1\r\nlicense line 2\r\nlicense line 3\r\nlicense line 4\r\netc</property>\r\n\r\n{noformat}\r\n# Restart Bamboo",
      "summary": "Upgrade with expired license fail to display proper error page"
    }
  },
  {
    "key": "BAM-20333",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-03-04T18:53:20.000+0000",
      "description": "h3. Issue Summary\r\nh3. Environment\r\n\r\nThe issue ocorres independent from the build plan being run on Bamboo Server, local or remote Bamboo agent (tested out on agent run under Linux and Windows).\r\nh3. Steps to Reproduce\r\nh4. Failure sceanrio (I), single UTF-8 / UTF-16 JUnit parsing\r\n # Setup a build plan and input a UTF-8 and a UTF-16 encoded XML file (e.g utilizing a repository and the Source Code Checkout task)\r\n # Add a JUnit Parser task for the UTF-8 XML only and then only for the UTF-16 XML and run each one\r\n\r\nh4. Failure sceanrio (II), within one plan stage\r\n # Setup a build plan and input a UTF-8 and a UTF-16 encoded XML file\r\n # Add a Junit Parser task for the for the UTF-8 encoded XML\r\n # Then add another JUnit Parser task for the UTF-16 encoded XML\r\n # Run the build plan (parsing the UTF-8 XML prior to the UTF16 one)--\r\n # The change the order of XML parsing, so trigger MJUnit for UTF-16 before triggering JUnit Parser for UTF-8\r\n # Run the build plan in this order\r\n\r\nh4. Failure scenario (III), on a second plan stage\r\n # Setup a Bamboo build plan with two stages\r\n # For the first stages input a UTF-8 encoded XML file and run JUnit Parser for it\r\n # For the first stage feed in a UTF-16 encoded XML file and also run JUnit Parser for it; then run this build plan\r\n # Now change the second stage to also XML parse a UTF-8 XML via a JUnit Parser task and again, run the plan\r\n\r\nh3. Expected Results\r\n\r\nFor sceanrio (I) UTF-8 paring should succeed and UTF-16 parsing too.\r\n\r\nFor sceanrio (II), independent of order of UTF-8 and UTF-16 parsing, both runs should passes.\r\n\r\nFor sceanrio (III) the combination UTF-8 before UTF-16 XML parsing as well as a series of UTF-8 JUnit Parser tasks should succeed.\r\nh3. Actual Results\r\n\r\nIn fact, for sceanrio (I) only UTF-8 parsing passes with success, UTF-16 parsing failsd.\r\n\r\nIn case of scenario (II) build passes when the UTF-8 XML is parsed before the UTF-16 one (steps 1 to 3). Otherwise (step 5) it fails with build log print-out: \"Failing task since test cases were expected but none were found\".\r\n\r\nScenario (III) shows that a sequence of stages all with JUnit parsing of an XML in UTF-8 format passes. Once adding a stage with a UTF-16 formatted XML makes the build fail due to the last (UTF-16) JUnit task failing with the same error message, namely \"Failing task since test cases were expected but none were found\".\u00a0\r\nh3. Note\r\n\r\nFor Bamboo 5.15.5 UTF-16 parsing via JUnit suceeds under all conditions.\r\nh3. Workaround\r\n\r\nOnly workaround known at present is to use the JUnit Parser task only with UTF-8 XML input (or in the passing UTF-8 / UTF-16 combinations, as sketched above).",
      "summary": "JUnit parsing requires UTF-8 encoded XML input files in various situations"
    }
  },
  {
    "key": "BAM-20332",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-03-04T09:45:14.000+0000",
      "description": "h3. Problem Definition\r\nA Git tag can be created from a maven build. However, this tag couldn't be pushed into remote server with Repository Push task.\r\n\r\nh3. Suggested Solution\r\nAdd the option to perform push with \"--tags\" in Repository Push task",
      "summary": "Include tag in Repository Push task"
    }
  },
  {
    "key": "BAM-20331",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-03-04T09:11:47.000+0000",
      "description": "We currently are unable to use this task, as we use it to tag our deployment repository plan, which we run several times against the build, usually once to test our deployment, and later on when we have release notes finalized.\u00a0 As a result, the repository usually changes (release notes update), and the tagging task fails on deployment task re-runs, as the git repository tag already exists (we want the force, to move the tag forward).\r\n\r\n\u00a0\r\n\r\nWe are having big problems with Bamboo trying to achieve this simple task, as even a manual tagging task fails, due to repository caching \"feature\".",
      "summary": "GIT Tag task should have a force (-f) option."
    }
  },
  {
    "key": "BAM-20330",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-03-01T16:32:00.000+0000",
      "description": "The core issue is: I want my new build plans dedicated automatically.\r\n\r\nWe are requesting that agent dedication access be passed on to certain users (or handled in the remote agent server through a properties file) because we have user-level and admin-level users.",
      "summary": "Automatically Dedicated Build Plans"
    }
  },
  {
    "key": "BAM-20329",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-03-01T08:56:34.000+0000",
      "description": "h3. Issue Summary\r\n\r\nWhen visiting any Bitbucket server repository Bamboo tries to get list of branches and mirrors. If mirrors query takes a lot of time (> 20 seconds) browser floods BBS with same query for mirrors and branches. It blocks activity for other actions, like permissions management\r\n\r\n\u00a0\r\nh3. Steps to Reproduce\r\n # Go to linked BBS repository settings\r\n # Open browser console F12\r\n # See queries for mirrors and branches\r\n\r\nh3. Expected Results\r\n\r\nNew query for mirrors should no be initialized if there's no response for previous request. Bamboo should cancel existing query if it takes a lot of time before starting new one\r\nh3. Actual Results\r\n\r\nSimilar queries are queued\r\nh3. Workaround\r\n\r\n\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Requests to Bitbucket Server should wait when previous request was complete"
    }
  },
  {
    "key": "BAM-20328",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-03-28T10:39:21.000+0000",
      "created": "2019-03-01T08:26:12.000+0000",
      "description": "Implement \"Inject variables\" task.",
      "summary": "YAML Specs: implement \"Inject variables\" task."
    }
  },
  {
    "key": "BAM-20327",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-02-28T18:48:47.000+0000",
      "description": "Currently, Bamboo has the ability to automatically create a new plan branch automatically when a pull request is made. When attempting a merge the plan branch is created automatically in the source branch. This request is to extend Bamboo's functionality and add the ability to select either the source or destination branch for the new plan branch to be created in.",
      "summary": "Add ability to choose where new branch gets created"
    }
  },
  {
    "key": "BAM-20326",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-02-28T16:29:14.000+0000",
      "description": "This suggestion is to evaluate Bamboo on XFS, as it is the [default filesystem for RHEL 7| https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/storage_administration_guide/ch-xfs].",
      "summary": "Evaluate Bamboo on XFS"
    }
  },
  {
    "key": "BAM-20325",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-02-27T18:02:19.000+0000",
      "description": "h3. Problem\r\nAs an admin, I need to be able to move plans programmatically using REST API, but this endpoint is not available.\r\n",
      "summary": "Create a REST API endpoint to move plans"
    }
  },
  {
    "key": "BAM-20324",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-02-27T17:01:00.000+0000",
      "description": "h3. Issue Summary\r\n\r\nUnable to reliably review variables consumed by build / job when build gets triggered using Bamboo's REST API\r\n \r\nh3. Steps to Reproduce\r\n\r\n# create a Bamboo variable (it can be either at Global or Plan level).\r\nIn this example we will be creating an ordinary Plan variable\r\n{noformat}\r\ncurl -k -u admin:admin \\\r\n    -H \"Content-type: application/x-www-form-urlencoded; charset=UTF-8\" \\\r\n    -H \"X-Atlassian-Token: no-check\" \\\r\n    -d \"variableKey=myVariable&variableValue=myValue\" \\\r\n    -X POST http://localhost:8085/bamboo/build/admin/ajax/createPlanVariable.action?planKey=PROJ-PLAN\r\n{noformat}\r\n# trigger build consuming Bamboo's REST API call:\r\n{noformat}\r\ncurl -k -u admin:admin \\\r\n    -d \"bamboo.myVariable=goesToMetadata\" \\\r\n    -X POST http://localhost:8085/bamboo/rest/api/latest/queue/PROJ-PLAN\r\n{noformat}\r\n\r\nh3. Expected Results\r\n\r\nSince variable is available in {color:blue}Plan configuration >> Variables{color}, regardless of how build gets trigger the variable should not change its state - from Variable to Metadata\r\n\r\nh3. Actual Results\r\n\r\nIn http://localhost:8085/bamboo/browse/PROJ-PLAN-1/metadata :\r\n\r\n* \"_myVariable_\" variable is presented as *Metadata* and not as a Variable.\r\n* \"_myVariable_\" has value *goesToMetadata* set\r\n\r\nIn http://localhost:8085/bamboo/browse/PROJ-PLAN-1/log :\r\n\r\n* variable \"_bamboo.myVariable_\" can be retrieved as _${bamboo.myVariable}_\r\n* value defined through cURL command is available\r\n\r\nIn http://localhost:8085/bamboo/browse/PROJ-PLAN-JOB1-1/metadata :\r\n\r\n* \"_myVariable_\" variable no longer presented as *Metadata* but *Variable* instead.\r\n* \"_myVariable_\" has *NO* value set\r\n\r\nIn http://localhost:8085/bamboo/browse/PROJ-PLAN-JOB1-1/log :\r\n\r\n* Bamboo substitute the variable correctly\r\n{noformat}\r\ncommand\t27-Feb-2019 10:17:13\tSubstituting variable: ${bamboo.myVariable} with goesToMetadata\r\n{noformat}\r\n\r\nh3. Notes\r\n\r\nBamboo's base URL for example given http://localhost:8085/bamboo\r\n\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Variable - Global/Plan variable considered as Metadata when triggering build using REST API"
    }
  },
  {
    "key": "BAM-20323",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-02-27T10:16:27.000+0000",
      "created": "2019-02-27T05:22:01.000+0000",
      "description": "h3. Issue Summary\r\n\r\nWhole Plan cache is being invalidated when a user rename event occurs. \r\n For each plan in the Plan cache we save the notification set even if there has been no changes.\r\nh3. Environment\r\n\r\nBamboo 6.6.0\u00a0\r\nh3. Steps to Reproduce\r\n # Change a username in an attached user directory\r\n\r\n\r\nh3. Expected Results\r\n\r\nWe expect that plans that have notifications for the effected user get invalidated and that plans that do not notify the user are not invalidated.\r\nh3. Actual Results\r\n\r\nIn the atlassian-bamboo.log file we see that all the plans in the plan cache get invalidated even though no notification rules have changed:\r\n{noformat}\r\n2019-01-07 22:30:11,292 DEBUG [AtlassianEvent::0-BAM::EVENTS:pool-2-thread-4] [UserRenameInNotifications] Received user rename event: UserRenameEvent[oldUserName=username,newUserName=username]\r\n2019-01-07 22:30:11,441 DEBUG [AtlassianEvent::0-BAM::EVENTS:pool-2-thread-4] [UserRenameInNotifications] Updating notification rules for 8663 chains\r\n2019-01-07 22:30:11,505 INFO [AtlassianEvent::0-BAM::EVENTS:pool-2-thread-4] [ImmutablePlanCacheServiceImpl] Invalidating PRJ-PLANA\r\n2019-01-07 22:30:11,571 INFO [AtlassianEvent::0-BAM::EVENTS:pool-2-thread-4] [ImmutablePlanCacheServiceImpl] Invalidating PRJ-PLANB\r\n2019-01-07 22:30:11,618 INFO [AtlassianEvent::0-BAM::EVENTS:pool-2-thread-4] [ImmutablePlanCacheServiceImpl] Invalidating PRJ-PLANZ\r\n...\r\n2019-01-07 22:37:11,030 DEBUG [AtlassianEvent::0-BAM::EVENTS:pool-2-thread-4] [UserRenameInNotifications] Updating system notification rules\r\n2019-01-07 22:37:11,122 DEBUG [AtlassianEvent::0-BAM::EVENTS:pool-2-thread-4] [UserRenameInNotifications] Updated 0 notification rules\r\n{noformat}\r\nh3. Workaround\r\n\r\nNo workaround currently.",
      "summary": "Whole Plan cache invalidated when user rename event occurs."
    }
  },
  {
    "key": "BAM-20322",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-03-28T12:44:46.000+0000",
      "created": "2019-02-26T21:36:23.000+0000",
      "description": "h3. Steps to Reproduce\r\n# Create a capability like: *Executable >> Command capability* called *an executable*\r\n# Create a YAML spec plan like the following:\r\n{code}\r\nproject:\r\n  key: DRAGON\r\n  plan:\r\n    key: SLAYER\r\n    name: Dragon Slayer Quest\r\nstages:\r\n  - jobs:\r\n      - scripts:\r\n          - echo 'Hello world!'\r\n        requirements:\r\n          - an executable\r\n{code}\r\n\r\nh3. Expected Results\r\nThe plan will be build and 'Hello world!' is displayed.\r\n\r\nh3. Actual Results\r\nThe plan will never build. It happens because of the missing requirement.\r\n\r\nh3. Notes\r\nIt is not clear anywhere that the user should use the capability class to define the requirements for a job. The docs will, in fact, lead them to a wrong conclusion that the same name used in the UI could be used in YAML.\r\n\r\nThis is part of the YAML reference about requirements:\r\n !Screen Shot 2019-02-26 at 18.18.23.png|thumbnail! \r\n\r\nh3. Workaround\r\nUse the full class name that specifies the capability. The name can be found by hovering the mouse in the capability *Admin >> Overview >> Server capabilities >> (selected capability)* and checking the name on browser status bar. Please notice that \"+\" (plus signs) need to be changed to spaces.\r\n !Screen_Shot_2019-02-26_at_18_11_53.png|thumbnail! \r\n",
      "summary": "Setting a requirement in YAML specs leads to no agent can build this job"
    }
  },
  {
    "key": "BAM-20321",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-08-06T14:07:37.000+0000",
      "created": "2019-02-26T19:27:47.000+0000",
      "description": "h2. Issue Summary\r\nh3. Environment\r\n * Bamboo 6.8.0\r\n * Use any request with expand filtering that uses arrays, example:\r\n [https://bambooserver/rest/api/latest/result/PROJECT-PLAN?expand=results[0:0].result]\r\n [https://bamboo.forge.avaya.com/rest/api/latest/result/DSPGBASE-COMMON?expand=results[0:0].result|https://bamboo.forge.avaya.com/rest/api/latest/result/DSPGBASE-COMMON?expand=results[0:0].result]\r\n * Results will return empty. In the case above it should bring the latest result data.\r\n\r\nh3. Actual Results\r\n\r\nThe results return empty and there are no entries in the normal log level for AccessLogFilter in Bamboo.\u00a0\r\n\r\nWhile increasing logging to DEBUG:\r\n{noformat}\r\nlog4j.category.com.atlassian.bamboo.filter.AccessLogFilter=DEBUG\r\n{noformat}\r\nWe can see the following error:\r\n{noformat}\r\n23-Feb-2019 01:47:52.905 INFO [http-nio-8085-exec-12] org.apache.coyote.http11.Http11Processor.service Error parsing HTTP request header\r\n Note: further occurrences of HTTP header parsing errors will be logged at DEBUG level.\r\n java.lang.IllegalArgumentException: Invalid character found in the request target. The valid characters are defined in RFC 7230 and RFC 3986\r\n{noformat}\r\nh3. Notes\r\n\r\nThat said, we see this is an enforcement that the version of Tomcat used by Bamboo 6.8.0. does. \r\n Also, if our REST apis are not compliant with widely used RFCs, we should adjust accordingly.\r\n\r\n*Some related links:*\r\n [60594 \u2013 RFC 7230/3986 url requirement that prevents unencoded curly braces should be optional, since it breaks existing sites\r\n|https://bz.apache.org/bugzilla/show_bug.cgi?id=60594]\r\n[java - Tomcat 8 is not able to handle get request with '-' in query parameters? - Stack Overflow|https://stackoverflow.com/questions/41053653/tomcat-8-is-not-able-to-handle-get-request-with-in-query-parameters]\r\n\r\n\r\nh3. Workaround\r\n\r\nA possible easy workaround for this situation is to change the server.xml to add:\r\n{noformat}\r\nrelaxedQueryChars=\"[]\"\r\n{noformat}\r\nIn the connector. For example:\r\n{noformat}\r\n<Service name=\"Catalina\">\r\n        <Connector\r\n                port=\"8085\"\r\n                protocol=\"HTTP/1.1\"\r\n                relaxedQueryChars=\"[]\"\r\n                maxThreads=\"150\" minSpareThreads=\"25\"\r\n{noformat}",
      "summary": "Using REST api calls with \"[]\" brackets fails silently returning an empty response"
    }
  },
  {
    "key": "BAM-20320",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-01-10T09:55:48.000+0000",
      "created": "2019-02-26T16:00:14.000+0000",
      "description": "h3. Problem Definition\r\nPlan created by YAML is configured with Automatic Branch Creation by default. However, branch plan is not required in that specific plan.\r\n\r\nh3. Suggested Solution\r\nAbility to configure Automatic Branch Detection in YAML instead of the default setting.",
      "summary": "Configure Automatic Branch Detection in YAML"
    }
  },
  {
    "key": "BAM-20318",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-08-08T14:23:14.000+0000",
      "created": "2019-02-22T16:13:28.000+0000",
      "description": "A major weakness for Bamboo notifications is that the list of 'responsible' entities is not passed to child builds.\u00a0 This means that a commit to a library that kicks off child builds may cause a build plan up the chain to fail, and no one is notified.\u00a0 'Default notification' settings are inadequate to handle this.",
      "summary": "Pass the list of 'responsible' persons for a build to a child build"
    }
  },
  {
    "key": "BAM-20316",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-02-22T09:45:53.000+0000",
      "created": "2019-02-21T21:40:40.000+0000",
      "description": "h4. Steps to reproduce\r\n# Enable Bamboo Audit Logging\r\n# Make a change to confirm Audit Logging is turned on.\r\n# Disable audit logging\r\n\r\nh4. Expected Behaviour\r\nAn Audit log telling who and when turned off audit logging.\r\n\r\nh4. Observed Behaviour\r\nNo Audit logs or any other log showing this change.\r\n\r\nh3. Workaround\r\nNone",
      "summary": "Turning off audit logging does not result in any logs"
    }
  },
  {
    "key": "BAM-20315",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-02-21T07:29:11.000+0000",
      "description": "h3. Summary\r\nIt's possible to to create duplicate Jira issue keys for the same build result in {{BRS_LINKEDJIRAISSUES}} with asynchronous calls to the result comment API. These duplicates will break the build expiry process.\r\n\r\nh3. Steps to Reproduce\r\nInstall {{seq}} and {{parallel}} and run this:\r\n{code}\r\nBAMBOO_USER=\r\nBAMBOO_PASS=\r\nBAMBOO_URL=http://localhost:8085\r\nBUILD_RESULT_KEY=\r\nseq 6 | parallel curl --user $BAMBOO_USER:$BAMBOO_PASS -H \\'Content-Type: application/xml\\' -X POST \\\"$BAMBOO_URL/rest/api/latest/result/$BUILD_RESULT_KEY/comment\\\" --data \\'\\<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?\\>\\<comment\\>\\<content\\>JRA-123\\</content\\>\\</comment\\>\\'\r\n{code}\r\n* Or just chain about 6 curls together with {{&}}\r\n\r\nh3. Expected Results\r\nAll comments get added but only one row in {{BRS_LINKEDJIRAISSUES}} per unique Jira issue key for a single build result.\r\n\r\nh3. Actual Results\r\nAll comments are added but there are duplicate rows created in {{BRS_LINKEDJIRAISSUES}}:\r\n{code}\r\nlinkedjiraissue_id\tbuildresultsummary_id\tjira_issue_key\tjira_issue_link_type\r\n182616065\t182255685\tJRA-123\t0\r\n182616067\t182255685\tJRA-123\t0\r\n182616066\t182255685\tJRA-123\t0\r\n182616068\t182255685\tJRA-123\t0\r\n{code}\r\n\r\nBuild expiry fails when attempting to expire the result with the duplicate linked Jira issue keys:\r\n{noformat}\r\n2019-02-07 00:00:00,118 ERROR [7-BuildExpiryBean:pool-13-thread-1] [BatchingBatch] HHH000315: Exception executing batch [java.sql.BatchUpdateException: Cannot delete or update a parent row: a foreign key constraint fails (`BRS_LINKEDJIRAISSUES`, CONSTRAINT `FK_rhamoijfnb7coquyeag9aj978` FOREIGN KEY (`BUILDRESULTSUMMARY_ID`) REFERENCES `BUILDRESULTSUMMARY` (`BUILDRESULTSUMMARY_ID`))], SQL: delete from BUILDRESULTSUMMARY where BUILDRESULTSUMMARY_ID=?\r\n2019-02-07 00:00:00,118 WARN [7-BuildExpiryBean:pool-13-thread-1] [SqlExceptionHelper] SQL Error: 1451, SQLState: 23000\r\n2019-02-07 00:00:00,220 ERROR [7-BuildExpiryBean:pool-13-thread-1] [SqlExceptionHelper] Cannot delete or update a parent row: a foreign key constraint fails (`BRS_LINKEDJIRAISSUES`, CONSTRAINT `FK_rhamoijfnb7coquyeag9aj978` FOREIGN KEY (`BUILDRESULTSUMMARY_ID`) REFERENCES `BUILDRESULTSUMMARY` (`BUILDRESULTSUMMARY_ID`))\r\n2019-02-07 00:00:00,220 WARN [7-BuildExpiryBean:pool-13-thread-1] [BuildExpiryBeanImpl] Unable to expire BAMBOO-BUILD-RESULT\r\n{noformat}\r\n\r\nh3. Workaround\r\nIf it comes from an automation that adds comments via the API, try to add a delay between API calls to avoid the race condition.",
      "summary": "Possible to create duplicate Jira issue keys for the same build result in BRS_LINKEDJIRAISSUES with asynchronous calls to the result comment API"
    }
  },
  {
    "key": "BAM-20314",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-02-20T08:03:01.000+0000",
      "description": "h3. Problem Definition\r\nHuge artifact stored in Amazon S3 might take a lot of time to be downloaded.\r\n\r\nh3. Suggested Solution\r\nAdd a new option to enable [S3 Transfer Acceleration|https://docs.aws.amazon.com/AmazonS3/latest/dev/transfer-acceleration.html] to speed up the artifact download",
      "summary": "Support S3 Transfer Acceleration"
    }
  },
  {
    "key": "BAM-20313",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-02-19T16:27:26.000+0000",
      "created": "2019-02-19T16:09:34.000+0000",
      "description": "h3. Summary\r\n\r\n\u00a0When we try to delete remote agent from the Bamboo UI, we get\u00a0{{500}}\u00a0error and upon restart, the remote agent will reappear.\r\nh3. Steps to Reproduce\r\n\r\nThere is NO possibility to create a duplicate capability\r\n * as the UI doesn't allow us to add duplicate capability.\u00a0\r\n * as there is no API for adding a capability to define a duplicate.\u00a0\r\n * as we cannot add via bamboo-capabilities.properties. If duplicates are found, they will be replaced with new key values.\r\n\r\nHowever, if a duplicate entry is found, the respective remote agent cannot be deleted.\r\nh3. Expected Results\r\n\r\nThe remote agent is deleted successfully.\u00a0\r\nh3. Actual Results\r\n\r\nThe below exception is thrown in the log file:\r\n{code:java}\r\nCaused by: java.sql.BatchUpdateException: Cannot delete or update a parent row: a foreign key constraint fails (`new`.`capability`, CONSTRAINT `FK_sm8xum6eu61qtx5twb34enyf9` FOREIGN KEY (`CAPABILITY_SET`) REFERENCES `capability_set` (`CAPABILITY_SET_ID`))\r\n{code}\r\n{code:java}\r\n2017-09-26 21:19:39,041 ERROR [http-nio-8085-exec-17] [FiveOhOh] 500 Exception was thrown.\r\norg.springframework.dao.DataIntegrityViolationException: could not execute batch; SQL [delete from CAPABILITY_SET where CAPABILITY_SET_ID=?]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute batch{code}\r\n{noformat}\r\n2017-09-26 21:19:39,023 WARN [http-nio-8085-exec-17] [SqlExceptionHelper] SQL Error: 1451, SQLState: 23000\r\n2017-09-26 21:19:39,023 ERROR [http-nio-8085-exec-17] [SqlExceptionHelper] Cannot delete or update a parent row: a foreign key constraint fails (`new`.`capability`, CONSTRAINT `FK_sm8xum6eu61qtx5twb34enyf9` FOREIGN KEY (`CAPABILITY_SET`) REFERENCES `capability_set` (`CAPABILITY_SET_ID`))\r\n2017-09-26 21:19:39,023 ERROR [http-nio-8085-exec-17] [BatchingBatch] HHH000315: Exception executing batch [could not execute batch]\r\n2017-09-26 21:19:39,023 ERROR [http-nio-8085-exec-17] [SessionImpl] HHH000346: Error during managed flush [could not execute batch]\r\n2017-09-26 21:19:39,028 ERROR [http-nio-8085-exec-17] [ExceptionMappingInterceptor] could not execute batch; SQL [delete from CAPABILITY_SET where CAPABILITY_SET_ID=?]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute batch\r\norg.springframework.dao.DataIntegrityViolationException: could not execute batch; SQL [delete from CAPABILITY_SET where CAPABILITY_SET_ID=?]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute batch\r\n\tat org.springframework.orm.hibernate5.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:164)\r\n\u00a0{noformat}\r\nh3. Notes\r\n\r\nIt's throwing this error because we cannot delete data from parent table\u00a0{{CAPABILITY_SET}} leaving the data behind in the child table \\{{CAPABILITY\u00a0}}which will result in orphan records.\r\n\r\nAnd when Bamboo tries to delete data from CAPABILITY_SET, it leaves the data orphan in the table CAPABILITY.\r\nh3. Workaround\r\n\r\nWe can find the duplicates with the help of below queries and then delete them manually:\r\n{code:sql}\r\nselect KEY_IDENTIFIER ,value, count(*) from capability\r\nwhere capability_set in (\r\nselect capability_set_id from  capability_set where capability_set_id=<ID>)\r\ngroup by KEY_IDENTIFIER,value\r\nhaving count(*) >1;\r\n\r\nselect * from queue\r\nwhere agent_type='REMOTE'\r\nand capability_set in (select capability_set from capability);{code}\r\n\r\nh3. Suggested Solution:\r\n\r\n As we have validation in UI and even at the time of deletion of agent, we should have an unique constraint in the DB also to avoid duplicate entries.",
      "summary": " issues while deleting the Remote Agents if duplicate capabilities are found"
    }
  },
  {
    "key": "BAM-20312",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-02-19T15:23:15.000+0000",
      "description": "Presently in the deployment\u00a0project, for a user to be able to Add environment, the user must have the EDIT Permission in the Project permission, and that will allow such a user to edit another existing environment.\u00a0\r\nh4. +Use Case+\r\n\r\nA need for granular permission that allows a user to Add environment, but not able to edit an existing environment that *EDIT* permission has not been granted.\r\n\r\n\u00a0\r\n\r\n\u00a0",
      "summary": "Granular deployment environment permission"
    }
  },
  {
    "key": "BAM-20311",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-02-19T15:15:58.000+0000",
      "description": "h3. Problem Definition\r\nTomcat tasks do not work with Outbound proxy settings\r\n\r\nh3. Suggested Solution\r\nAdd support for \"-Dhttp.proxyHost=xxxxxx -Dhttp.proxyPort=xxxx\"",
      "summary": "Support outbound proxy for Tomcat task"
    }
  },
  {
    "key": "BAM-20310",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-05-27T08:03:49.000+0000",
      "created": "2019-02-18T21:22:40.000+0000",
      "description": "h3. Problem Definition\r\n\r\nThough Atlassian officially supports OpenJDK, they are not tested and thus it's not guaranteed that all of them (Amazon, Adopt, Redhat, Azul, Bellsoft, etc. - just mentioning the most popular ones here) will be working for Bamboo.\r\nh3. Suggested Solution\r\n\r\nAmazon Corretto OpenJDK should get Bamboo's officially approved OpenJDK.\r\n\r\nAmazon's OpenJDK provides long term support at no cost including performance and security patches. Find details here: [https://aws.amazon.com/corretto/faqs/]\r\nh3. Why this is important\r\n\r\nProviding an OpenJDK officially approved by Atlassian makes this JDK a true alternative to Oracle's JDK. Besides, the number of OpenJDKs on the market is steadily increasing, so it turns almost a necessity to make one of those (for which Amazon's one seems a good choice) a user reference for Bamboo.\r\n\r\n\u00a0",
      "summary": "Test and approve Amazon Corretto OpenJDK for Bamboo"
    }
  },
  {
    "key": "BAM-20309",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-02-15T19:15:22.000+0000",
      "created": "2019-02-15T11:34:23.000+0000",
      "description": "h3. Issue Summary\r\n\r\nWhen create deployment project it's not visible at global Audit log\r\nh3. Steps to Reproduce\r\n # Create deployment project\r\n # Open global Audit log\r\n\r\nh3. Expected Results\r\n\r\nSee record about created deployment project.\r\nh3. Actual Results\r\n\r\nNo information about new deployment project in global Audit log\r\nh3. Workaround\r\n\r\nNone",
      "summary": "Created deployment project not present at global Audit log"
    }
  },
  {
    "key": "BAM-20308",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-02-15T11:19:53.000+0000",
      "created": "2019-02-15T11:17:59.000+0000",
      "description": "h3. Issue Summary\r\n\r\nWhen edit environment at Deployment environment, it's visible at global Audit log.\r\nh3. Steps to Reproduce\r\n # Create global variable\r\n # Override its value at Deployment environment level\r\n # See global Audit log\r\n\r\nh3. Expected Results\r\n\r\nNothing changes at global Audit log\r\nh3. Actual Results\r\n\r\nChange is visible at global Audit log and it's unclear where it was modified.\r\n\r\n\u00a0\r\nh3. Workaround\r\n\r\nNone",
      "summary": "Variable changed at deployment environment is present at global Audit log"
    }
  },
  {
    "key": "BAM-20306",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-02-14T13:46:01.000+0000",
      "description": "h3. Problem Definition\r\nThe build may fail with known issue that was fixed in the past\r\n\r\nh3. Suggested Solution\r\nAdd a message in the build log for known issue",
      "summary": "Ability to modify build log"
    }
  },
  {
    "key": "BAM-20305",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-03-07T12:14:25.000+0000",
      "created": "2019-02-14T12:47:54.000+0000",
      "description": "h3. Issue Summary\r\nChrome/Safari open artifacts in browser even though those artifacts should be downloaded\r\n\r\nh3. Environment\r\n* Chrome\r\n* Safari\r\n* Bamboo 6.8.0\r\n\r\nh3. Steps to Reproduce\r\n# Create an artifact for a ZIP file\r\n# Click on the artifact to download it\r\n\r\nh3. Expected Results\r\nThe artifact will be downloaded\r\n\r\nh3. Actual Results\r\nThe artifact is opened and viewed in the browser\r\n\r\nh3. Notes\r\n* The same artifact works fine in Bamboo 6.7.2\r\n* The problem does not happen with Firefox\r\n* The Content-Type showing text/plain even though it should be application/zip\r\n* If it is a large artifact, the browser will hang trying to open it\r\n\r\nh3. Workaround\r\nEnable the option \"Resolve artifacts content type by extension\" at {{Administration >> Security >> Security settings}}",
      "summary": "Chrome/Safari open artifacts in browser instead of download option"
    }
  },
  {
    "key": "BAM-20304",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-02-13T21:32:05.000+0000",
      "description": "The scenario is as such:\r\n * Under Overview >> Users or Groups you perform \"Create user\" / \"Create group\" and and give user and/or group a name\r\n * Navigate to Projects >> <Your Project> >> button \"Project settings\" (upper rigth corner) >> \"Plan permissions inheritance\" (list on left side). There you added the user and/or group needed and set the appropriate permissions\r\n\r\nEither a build plan <Your Plan> beneath <Your Project> already exists or a new one is created. Navigating to the Plan configuration page of <Your Plan> >> tab \"Permissions\" indicates\r\n * the creator of <Your Plan> with Admin permission,\r\n * message \"Note that some users or groups might have permissions inherited from the project and you won't see them on this page.\", but\r\n * none of the inherited users / groups\r\n\r\nThis may cause confusion for Bamboo users!\r\n\r\n+Improvement suggestion+: *The inherited user(s) and/or group(s) should be added to the affected plan's Permissions page, just greyed out* - so clearly showing that they exist (for <Your Plan>), but they are not editable within this build plan (as inherited).",
      "summary": "Plan permissions inheritance is not showing under project plan's Permissions"
    }
  },
  {
    "key": "BAM-20301",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-04-02T09:28:09.000+0000",
      "created": "2019-02-12T01:28:06.000+0000",
      "description": "h3. Issue Summary\r\nThe remote agent handler should fail to publish an artifact if there are no files that match the specified pattern. If no match is found an empty artifact is published and the job is considered to succeed.\r\n\r\nh3. Steps to Reproduce\r\n # Create a Job that has a shared/ required artifact matching \"*.zip\"\r\n # specify that remote agent handler should be used for shared artifacts.\r\n # run job on remote agent \r\n\r\nh3. Expected Results\r\n\r\nIf the artifact does not match any files we would expect the artifact to fail to publish as is seen with the local artifact handler.\r\n{noformat}\r\n2019-02-11 10:05:41,067 INFO [18-BAM::Default Agent::Agent:pool-32-thread-1] [ExecuteBuildTask] TST-ACT-JOB1-25: Running post build plugin 'Artifact Copier'\r\n2019-02-11 10:05:41,068 INFO [18-BAM::Default Agent::Agent:pool-32-thread-1] [BuildArtifactPostProcessor] Copying the build artifacts for build: TST-ACT-JOB1-25\r\n2019-02-11 10:05:41,267 WARN [18-BAM::Default Agent::Agent:pool-32-thread-1] [AbstractArtifactManager] Publishing [newa] for TST-ACT-JOB1-25: no files matching [*.zip] in directory /home/bamboo/bamboo-home/xml-data/build-dir/TST-CLOUD-JOB1\r\n2019-02-11 10:05:41,360 INFO [18-BAM::Default Agent::Agent:pool-32-thread-1] [AbstractArtifactManager] Trying to publish the artifact with handler: com.atlassian.bamboo.build.artifact.ServerLocalArtifactHandler\r\n2019-02-11 10:05:41,379 INFO [18-BAM::Default Agent::Agent:pool-32-thread-1] [AbstractArtifactManager] Handler com.atlassian.bamboo.build.artifact.ServerLocalArtifactHandler did not publish the artifact\r\n2019-02-11 10:05:41,379 ERROR [18-BAM::Default Agent::Agent:pool-32-thread-1] [AbstractArtifactManager] Unable to publish artifact [newa]:\r\n2019-02-11 10:05:41,379 ERROR [18-BAM::Default Agent::Agent:pool-32-thread-1] [AbstractArtifactManager] TST-ART-JOB1-25: The artifact is required, build will now fail.\r\n{noformat}\r\n\r\nh3. Actual Results\r\n\r\nIn the logs on the remote agent atlassian-bamboo.log file we see that the artifact is successfully published:\r\n{noformat}\r\nINFO   | jvm 2    | 2019/02/11 12:18:54 | 2019-02-11 12:18:54,370 INFO [4-BAM::bamboo::Agent:pool-7-thread-1] [ExecuteBuildTask] Running post build plugin 'Artifact Copier'\r\nINFO   | jvm 2    | 2019/02/11 12:18:54 | 2019-02-11 12:18:54,373 INFO [4-BAM::bamboo::Agent:pool-7-thread-1] [BuildArtifactPostProcessor] Copying the build artifacts for build: TST-ART-JOB1-27\r\nINFO   | jvm 2    | 2019/02/11 12:18:54 | 2019-02-11 12:18:54,407 WARN [4-BAM::bamboo::Agent:pool-7-thread-1] [AbstractArtifactManager] Publishing [newa] for TST-ART-JOB1-27: no files matching [*.zip] in directory /home/bamboo/bamboo-agent-home/xml-data/build-dir/TST-ART-JOB1\r\nINFO   | jvm 2    | 2019/02/11 12:18:54 | 2019-02-11 12:18:54,414 INFO [4-BAM::bamboo::Agent:pool-7-thread-1] [AbstractArtifactManager] Trying to publish the artifact with handler: com.atlassian.bamboo.build.artifact.BambooRemoteArtifactHandler\r\nINFO   | jvm 2    | 2019/02/11 12:18:54 | 2019-02-11 12:18:54,435 INFO [4-BAM::bamboo::Agent:pool-7-thread-1] [BambooArtifactHttpTransport] Finished writing the artifact to the output stream, time elapsed: 8.441 ms\r\nINFO   | jvm 2    | 2019/02/11 12:18:54 | 2019-02-11 12:18:54,471 INFO [4-BAM::bamboo::Agent:pool-7-thread-1] [AbstractArtifactManager] Handler com.atlassian.bamboo.build.artifact.BambooRemoteArtifactHandler published the artifact, size: 0 bytes, time elapsed: 57.57 ms\r\n{noformat}\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Remote artifact handler successfully publishes missing artifact"
    }
  },
  {
    "key": "BAM-20300",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-05-27T06:28:56.000+0000",
      "created": "2019-02-11T23:03:27.000+0000",
      "description": "Variables defined in each stage, job or script cannot be passed. It would be nice if the variables can be defined in one stage/job/script only and they can be reused again..\r\n\r\nFor example:\r\n\r\nproject:project:\u00a0\r\n  key: EXAMPLE\u00a0\r\n \u00a0plan:\u00a0 \u00a0 \r\n    key: EXAMPLECI \r\n    name: EXAMPLE-CI \r\nstages:\r\n- jobs:\u00a0 \r\n  - scripts:\u00a0 \u00a0 \r\n    - '#!/bin/bash'\u00a0 \u00a0 \r\n    - VERSION = 1.0.0\r\n\u00a0 \u00a0 interpreter: shell\u00a0 \u00a0 \r\n- jobs:\u00a0 \u00a0 \r\n  - scripts:\u00a0 \u00a0 \u00a0 \r\n  - '#!/bin/bash'\r\n\u00a0 // Variable $VERSION from previous job cannot be used here \u00a0 \u00a0 \r\n  interpreter: shell\r\n\r\nh3. Solution\r\nUse [Inject Variables|https://confluence.atlassian.com/bamboo/configuring-a-variables-task-687213475.html] task to pass variables across all phases of plan execution. This task can be defined in [Bamboo Specs|https://docs.atlassian.com/bamboo-specs-docs/6.9.0/specs.html?yaml#task-inject-variables].\r\n\r\n\r\n\u00a0",
      "summary": "Ability to pass variables between stages, jobs or scripts"
    }
  },
  {
    "key": "BAM-20299",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-02-13T12:00:14.000+0000",
      "created": "2019-02-11T22:53:41.000+0000",
      "description": "Bamboo YAML spec does not have the exclude changeset feature on the UI, which skips the job if the last git commit has some predefined message, such as [skip ci]. This would help streamline CI process, which has steps to automate version increment.",
      "summary": "Add exclude changeset in bamboo YAML spec"
    }
  },
  {
    "key": "BAM-20298",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-09-30T18:22:17.000+0000",
      "created": "2019-02-11T21:41:07.000+0000",
      "description": "h3. Problem Definition\r\n\r\nBamboo does not have the ability to specify a Docker network.\r\n\r\nh3. Suggested Solution\r\n\r\nAdd the ability to pass Docker flags to the Docker agent.\r\n",
      "summary": "Add ability to pass flags to Docker Runner"
    }
  },
  {
    "key": "BAM-20297",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-05-27T06:32:40.000+0000",
      "created": "2019-02-11T19:54:01.000+0000",
      "description": "h3. Problem Definition\r\n\r\nBamboo does not currently have the ability to name each job and they can\u2019t be identified easily in the UI.\r\n\r\nh3. Suggested Solution\r\n\r\nAdd the ability to name each job. This will allow each job to be identified more easily in the UI.\r\n",
      "summary": "Add job names to YAML"
    }
  },
  {
    "key": "BAM-20296",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-06-23T12:17:31.000+0000",
      "created": "2019-02-11T19:42:42.000+0000",
      "description": "h3. Problem Definition\r\n\r\nBamboo currently does not have a method to configure image pull policies for Docker runner, similar to [Kubernetes Images| https://kubernetes.io/docs/concepts/containers/images/].\r\n\r\nh3. Suggested Solution\r\n\r\nAdd the ability to configure image pull policies for Docker runner. [Docker has native flags| https://github.com/moby/moby/issues/34394] which may be useful for this functionality.\r\n",
      "summary": "Add the ability to configure image pull policies for Docker runner"
    }
  },
  {
    "key": "BAM-20295",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-02-11T21:14:36.000+0000",
      "created": "2019-02-11T16:46:22.000+0000",
      "description": "h3. Issue Summary\r\nh3. Environment\r\n\r\nThis apparently occurs only in Bamboo 6.4.0 (and maybe later). Tried with Bamboo 6.4.1 and 6.6.3 and it behaves correctly.\r\n\r\n\r\n\r\nSteps to Reproduce\r\n * Create a project and a plan, run a few build results.\u00a0\r\n * Give \"view\" or any other permission at the Project level, under \"Plan Permission Inheritance\"\r\n * Call the REST API, i.e.:\r\n{noformat} curl --user user1:yourpassword http://bambooserver:8085/rest/api/latest/result/PROJ1-PLAN1?os_authType=basic \\{noformat}\u00a0\r\n * The result will bring you no data:\r\n{noformat} <?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><results expand=\"results\"><results expand=\"result\" start-index=\"0\" max-result=\"25\" size=\"0\"/><link href=\"http://bambooserver:8085/rest/api/latest/result/TTZ-TTZP01\" rel=\"self\"/></results> \\{noformat}\r\n * Adding the same permission at the plan level, brings you the correct data.\u00a0\r\n\r\nh3. Expected Results\r\n\r\nProject level \"Plan Permission Inheritance\" should give you the same level of permissions as the Plan level. That is also true in newer versions of Bamboo (Tested in 6.4.0 and 6.6.3).\u00a0\r\nh3. Workaround\r\n\r\nCurrently, the workaround would be to move to a newer version of Bamboo, or add permissions in the Plan level instead of Project \"Plan Permission Inheritance\".",
      "summary": "Plan Inherited Permissions do not apply to Plan result rest API."
    }
  },
  {
    "key": "BAM-20294",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-02-13T09:36:43.000+0000",
      "created": "2019-02-11T13:50:06.000+0000",
      "description": "h3. Issue Summary\r\nNullPointerExceptions can be found in Bamboo logs. Underlying issue is that CrowdService cannot access Hibernate session.\r\nh3. Environment\r\nBamboo + Crowd + SSO enabled\r\n\r\nh3. Steps to Reproduce\r\n # login as any user\r\n # observe the logs\r\n\r\nh3. Expected Results\r\nUser is logged in and no exceptions are reported.\r\nh3. Actual Results\r\n\r\n\r\nThe below exception is thrown in the xxxxxxx.log file:\r\n{noformat}\r\njava.lang.NullPointerException: the Function passed to Optional.transform() must not return null.\r\n\tat com.google.common.base.Preconditions.checkNotNull(Preconditions.java:226)\r\n\tat com.google.common.base.Present.transform(Present.java:71)\r\n\tat com.atlassian.crowd.integration.seraph.CrowdAuthenticator.getUser(CrowdAuthenticator.java:421)\r\n\tat com.atlassian.seraph.filter.SecurityFilter.doFilter(SecurityFilter.java:139)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat com.atlassian.seraph.filter.BaseLoginFilter.doFilter(BaseLoginFilter.java:148)\r\n\tat com.atlassian.seraph.filter.BambooLoginFilter.doFilter(BambooLoginFilter.java:37)\r\n\r\ncom.google.common.util.concurrent.UncheckedExecutionException: org.hibernate.HibernateException: Could not obtain transaction-synchronized Session for current thread\r\n\tat com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2203)\r\n\tat com.google.common.cache.LocalCache.get(LocalCache.java:3937)\r\n\tat com.google.common.cache.LocalCache$LocalManualCache.get(LocalCache.java:4739)\r\n\tat com.atlassian.crowd.integration.seraph.CrowdAuthenticator.triggerUserAuthenticatedNotification(CrowdAuthenticator.java:457)\r\n\tat com.atlassian.crowd.integration.seraph.CrowdAuthenticator.getUser(CrowdAuthenticator.java:419)\r\n\tat com.atlassian.seraph.filter.SecurityFilter.doFilter(SecurityFilter.java:139)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat com.atlassian.seraph.filter.BaseLoginFilter.doFilter(BaseLoginFilter.java:148)\r\n\tat com.atlassian.seraph.filter.BambooLoginFilter.doFilter(BambooLoginFilter.java:37)\r\n{noformat}\r\nh3. Notes\r\n\r\n(Optional - If Necessary)\r\nh3. Workaround\r\n\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "NPE in the Bamboo logs when using Crowd SSO"
    }
  },
  {
    "key": "BAM-20293",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-05-14T08:05:16.000+0000",
      "created": "2019-02-11T05:35:14.000+0000",
      "description": "h3. Summary\r\nAs soon as the deletion service encounters an error removing one plan, the entire service stops. The next time scheduled deletion occurs, it will often encounter the exact same error. If the problem goes undetected, this can result in a large backlog of undeleted plans which will never be removed until the root cause is resolved.\r\n\r\nh3. Steps to Reproduce\r\n(?) Use PostgreSQL for reproduction -- easy to lock the table in the steps.\r\n# Create a plan\r\n# Point it to a Bitbucket Server repository. Easier to reproduce with event based branch detection.\r\n# Enable automatic branch detection on the plan\r\n# Lock the *BUILD* table:\r\n{code}\r\n@set autocommit off;\r\nLOCK TABLE BUILD IN ACCESS EXCLUSIVE MODE;\r\nSELECT count(BUILD_ID) FROM BUILD;\r\n{code}\r\n# Delete the plan:\r\n{code}\r\n     curl -k -u user:password \\\r\n     -H 'X-Atlassian-Token: no-check' \\\r\n     -H 'Accept: application/json' \\\r\n     -H 'Content-Type: application/x-www-form-urlencoded' \\\r\n     -d 'buildKey='PLAN-KEY'' \\\r\n     -X POST 'http://localhost:8085/ajax/deleteChain.action'\r\n{code}\r\n# Wait 5 seconds. Now push a new branch to the Bitbucket repository.\r\n# Wait 5 seconds. Unlock the build table:\r\n{code}\r\ncommit transaction;\r\n{code}\r\n# Delete another plan in the instance that has no relation to the above repository. It too will not be deleted once the Deletion Service kicks in.\r\n\r\nh3. Expected Results\r\nDeletion service identifies a problem performing background deletion of PLAN1 (healthcheck notification?) however continues to remove PLAN2 and PLAN3.\r\n\r\nh3. Actual Results\r\nDeletion service will fail to delete PLAN1 and will stop. PLAN2 and PLAN3 will also not be deleted due to the issues with PLAN1.\r\n\r\nOne example of an exception in the atlassian-bamboo.log that has caused issues with the deletion service:\r\n{noformat}\r\n2017-08-09 06:17:29,903 INFO [scheduler_Worker-9] [DeletionServiceImpl] Deleting 20 TopLevelPlan(s) and/or ChainBranch(es) marked for deletion\r\n2017-08-09 06:17:29,903 INFO [scheduler_Worker-9] [DeletionServiceImpl] Deleting PLAN1\r\n2017-08-09 06:17:29,960 ERROR [scheduler_Worker-9] [SqlExceptionHelper] Batch entry 0 delete from BUILD where BUILD_ID=16779486 was aborted.  Call getNextException to see the cause.\r\n2017-08-09 06:17:29,960 ERROR [scheduler_Worker-9] [SqlExceptionHelper] ERROR: update or delete on table \"build\" violates foreign key constraint \"fk_jdvuiqpnjmsvf3llia8jvvg03\" on table \"build\"\r\n  Detail: Key (build_id)=(16779486) is still referenced from table \"build\".\r\n2017-08-09 06:17:29,960 ERROR [scheduler_Worker-9] [DeletionServiceImpl] Unable to complete delayed deletion: \r\norg.springframework.dao.DataIntegrityViolationException: could not execute batch; SQL [delete from BUILD where BUILD_ID=?]; constraint [fk_jdvuiqpnjmsvf3llia8jvvg03]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute batch\r\n{noformat}\r\n\r\nAffected plans continue to spam this warning into the logs:\r\n{code}\r\n2019-02-11 16:35:05,240 WARN [scheduler_Worker-8] [ImmutablePlanCacheServiceImpl] Plan BUG-BUG2 scheduled for deletion but not hidden\r\n2019-02-11 16:35:05,240 WARN [scheduler_Worker-8] [ImmutablePlanCacheServiceImpl] Plan BUG-BUG scheduled for deletion but not hidden\r\n{code}\r\n\r\nh3.Workaround\r\nThere are ways to correct the data but it requires analysis.\r\n\r\nRaise a ticket with [Atlassian Support|https://support.atlassian.com/contact/#/] referencing this bug and we'll help with the analysis and correction.",
      "summary": "Deletion service shouldn't stop when it encounters an error with one plan"
    }
  },
  {
    "key": "BAM-20292",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-05-10T09:41:48.000+0000",
      "created": "2019-02-11T05:28:46.000+0000",
      "description": "h3. Issue Summary\r\nRace condition when a branch is created while a plan is being deleted creates database inconsistencies that break Bamboo's background deletion service.\r\n\r\nh3. Steps to Reproduce\r\n(?) Use PostgreSQL for reproduction -- easy to lock the table in the steps.\r\n# Create a plan\r\n# Point it to a Bitbucket Server repository. Easier to reproduce with event based branch detection.\r\n# Enable automatic branch detection on the plan\r\n# Lock the *BUILD* table:\r\n{code}\r\n@set autocommit off;\r\nLOCK TABLE BUILD IN ACCESS EXCLUSIVE MODE;\r\nSELECT count(BUILD_ID) FROM BUILD;\r\n{code}\r\n# Delete the plan:\r\n{code}\r\n     curl -k -u user:password \\\r\n     -H 'X-Atlassian-Token: no-check' \\\r\n     -H 'Accept: application/json' \\\r\n     -H 'Content-Type: application/x-www-form-urlencoded' \\\r\n     -d 'buildKey='PLAN-KEY'' \\\r\n     -X POST 'http://localhost:8085/ajax/deleteChain.action'\r\n{code}\r\n# Wait 5 seconds. Now push a new branch to the Bitbucket repository.\r\n# Wait 5 seconds. Unlock the build table:\r\n{code}\r\ncommit transaction;\r\n{code}\r\n\r\nh3. Expected Results\r\nNew branch is not created since plan is being marked for deletion.\r\nThe plan is deleted by the deletion service.\r\n\r\nh3. Actual Results\r\nNew branch is created with *MARKED_FOR_DELETION* = false. The rest of the plan is marked for deletion.\r\n\r\nThe below exception is thrown in the atlassian-bamboo.log file when the deletion service attempts to run:\r\n{noformat}\r\n2019-02-11 14:36:36,536 ERROR [DelayedDeletionThread] [DeletionServiceHelper] Error occurred while deleting plan or job: BUG-BUG, continue removal of other plans\r\n2019-02-11 14:36:36,536 ERROR [DelayedDeletionThread] [DeletionServiceHelper] could not execute batch; SQL [delete from BUILD where BUILD_ID=?]; constraint [fk_jdvuiqpnjmsvf3llia8jvvg03]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute batch\r\norg.springframework.dao.DataIntegrityViolationException: could not execute batch; SQL [delete from BUILD where BUILD_ID=?]; constraint [fk_jdvuiqpnjmsvf3llia8jvvg03]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute batch\r\n\tat org.springframework.orm.hibernate5.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:247)\r\n\tat org.springframework.orm.hibernate5.HibernateTransactionManager.convertHibernateAccessException(HibernateTransactionManager.java:785)\r\n\tat org.springframework.orm.hibernate5.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:621)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:746)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:714)\r\n\tat sun.reflect.GeneratedMethodAccessor206.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:206)\r\n\tat com.sun.proxy.$Proxy109.commit(Unknown Source)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:532)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:304)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)\r\n\tat com.sun.proxy.$Proxy155.deletePlan(Unknown Source)\r\n\tat com.atlassian.bamboo.deletion.DeletionServiceHelper.doDeletePlan(DeletionServiceHelper.java:226)\r\n\tat com.atlassian.bamboo.deletion.DeletionServiceHelper.doDeletePlans(DeletionServiceHelper.java:199)\r\n\tat com.atlassian.bamboo.deletion.DeletionServiceHelper.executeDelayedDeletionInternal(DeletionServiceHelper.java:177)\r\n\tat com.atlassian.bamboo.deletion.DeletionServiceHelper.executeDelayedDeletion(DeletionServiceHelper.java:121)\r\n\tat com.atlassian.bamboo.deletion.DeletionServiceImpl.executeDelayedDeletion(DeletionServiceImpl.java:411)\r\n...\r\nCaused by: java.sql.BatchUpdateException: Batch entry 0 delete from BUILD where BUILD_ID=178389009 was aborted: ERROR: update or delete on table \"build\" violates foreign key constraint \"fk_jdvuiqpnjmsvf3llia8jvvg03\" on table \"build\"\r\n  Detail: Key (build_id)=(178389009) is still referenced from table \"build\".  Call getNextException to see other errors in the batch.\r\n{noformat}\r\n\r\nA number of other background threads (including attempting to load the dashboard) that operate on the plan cache fail with:\r\n{noformat}\r\n2019-02-11 14:32:34,646 INFO [http-nio-8085-exec-1] [AccessLogFilter] charlie GET http://localhost:8085/allPlans.action 1173723kb\r\n2019-02-11 14:32:34,662 INFO [http-nio-8085-exec-1] [RetryingTaskExecutor] Task 'Retrieving BUG-BUG4' threw java.lang.NullPointerException: Master chain not found in plan cache, aborting.\r\n2019-02-11 14:32:34,666 ERROR [http-nio-8085-exec-1] [ExceptionMappingInterceptor] java.lang.NullPointerException: Master chain not found in plan cache\r\njava.lang.RuntimeException: java.lang.NullPointerException: Master chain not found in plan cache\r\n\tat com.atlassian.bamboo.executor.RetryingTaskExecutor.rerun(RetryingTaskExecutor.java:129)\r\n\tat com.atlassian.bamboo.executor.RetryingTaskExecutor.runTask(RetryingTaskExecutor.java:99)\r\n\tat com.atlassian.bamboo.executor.RetryingTaskExecutor.retry(RetryingTaskExecutor.java:207)\r\n\tat com.atlassian.bamboo.plan.cache.ImmutablePlanCacheServiceImpl$1.load(ImmutablePlanCacheServiceImpl.java:129)\r\n\tat com.atlassian.bamboo.plan.cache.ImmutablePlanCacheServiceImpl$1.load(ImmutablePlanCacheServiceImpl.java:103)\r\n\tat com.google.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3527)\r\n\tat com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2319)\r\n\tat com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2282)\r\n\tat com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2197)\r\n\tat com.google.common.cache.LocalCache.get(LocalCache.java:3937)\r\n\tat com.google.common.cache.LocalCache.getOrLoad(LocalCache.java:3941)\r\n\tat com.google.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:4824)\r\n\tat com.atlassian.bamboo.utils.collections.AlwaysInvalidatingCacheDecorator.get(AlwaysInvalidatingCacheDecorator.java:65)\r\n\tat com.atlassian.bamboo.utils.collections.AlwaysInvalidatingCacheDecorator.getUnchecked(AlwaysInvalidatingCacheDecorator.java:126)\r\n\tat com.atlassian.bamboo.plan.cache.ImmutablePlanCacheServiceImpl.internalGetPlanByKey(ImmutablePlanCacheServiceImpl.java:487)\r\n\tat com.atlassian.bamboo.plan.cache.ImmutablePlanCacheServiceImpl.lambda$internalGetAllChainsStream$11(ImmutablePlanCacheServiceImpl.java:571)\r\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\r\n\tat java.util.concurrent.ConcurrentHashMap$KeySpliterator.forEachRemaining(ConcurrentHashMap.java:3527)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499)\r\n\tat com.atlassian.bamboo.plan.cache.CachedPlanManagerImpl.sortedCopy(CachedPlanManagerImpl.java:293)\r\n\tat com.atlassian.bamboo.plan.cache.CachedPlanManagerImpl.getPlans(CachedPlanManagerImpl.java:104)\r\n{noformat}\r\n\r\nThe *NullPointerException* seems to self correct at some point and a restart can also correct it but the deletion service will never recover.\r\n\r\nAffected plans continue to spam this warning into the logs:\r\n{code}\r\n2019-02-11 16:35:05,240 WARN [scheduler_Worker-8] [ImmutablePlanCacheServiceImpl] Plan BUG-BUG2 scheduled for deletion but not hidden\r\n2019-02-11 16:35:05,240 WARN [scheduler_Worker-8] [ImmutablePlanCacheServiceImpl] Plan BUG-BUG scheduled for deletion but not hidden\r\n{code}\r\n\r\nh3. Workaround\r\nRestart Bamboo so that users will be able to access Bamboo again without error but the data inconsistency will still exist in database.\r\n\r\nThere are ways to correct the data but it requires analysis.\r\n\r\nRaise a ticket with [Atlassian Support|https://support.atlassian.com/contact/#/] referencing this bug and we'll help with the analysis and correction.",
      "summary": "Race condition when a branch is created while a plan is being deleted creates database inconsistencies that break the deletion service"
    }
  },
  {
    "key": "BAM-20291",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-02-20T16:06:05.000+0000",
      "created": "2019-02-08T17:17:38.000+0000",
      "description": "h3. Summary\r\n\r\nWhen making a rest call with an invalid password, an XSRF error is thrown attempting to update the {{cwd_user_attribute.invalidPasswordAttempts}} table.\r\n\r\nh3. Steps to Reproduce\r\n# Use Internal Embedded Crowd user directory\r\n# create a user with sufficient privieges\r\n# Make a REST call with an invalid password\r\n{noformat}\r\ncurl -X POST -u user:invalidpassword \\\r\n\"${bamboo_api_url}/${bamboo_BUILD_PLAN}?bamboo.variable.TAG=${bamboo.TAGNAME}\"\r\n{noformat}\r\n\r\nh3. Expected Results\r\n\r\nBamboo denies auth, and updates {{cwd_user_attribute}} table with the failed attempt.\r\n\r\nh3. Actual Results\r\nThe below exception is thrown in the xxxxxxx.log file:\r\n{noformat}\r\n500 Exception was thrown.\r\njava.lang.IllegalStateException: XSRF: A mutative operation was attempted on InternalUserAttribute within a non-mutative HTTP request: https://bamboourl/builds/rest/api/latest/result/BUILD-PLAN/latest.json : [[com.atlassian.crowd.model.user.InternalUser@1eb2b6e3[id=784924676,name=user,createdDate=2018-08-01 22:17:02.829,updatedDate=2019-01-15 20:13:50.993,active=true,emailAddress=scrubbed,firstName=,lastName=Administrator,displayName=Administrator,credential=com.atlassian.crowd.embedded.api.PasswordCredential@383c4a76[credential=********,encryptedCredential=true],lowerName=username,lowerEmailAddress=scrubbed,lowerFirstName=,lowerLastName=administrator,lowerDisplayName=administrator,directoryId=784826369,externalId=<null>], com.atlassian.crowd.model.directory.DirectoryImpl$HibernateProxy$FIAHInHH@77b29c57[lowerName=bamboo internal directory,description=Bamboo default internal directory,type=INTERNAL,implementationClass=com.atlassian.crowd.directory.InternalDirectory,allowedOperations=[DELETE_USER, UPDATE_ROLE, UPDATE_GROUP_ATTRIBUTE, CREATE_USER, CREATE_GROUP, DELETE_ROLE, UPDATE_ROLE_ATTRIBUTE, UPDATE_GROUP, CREATE_ROLE, UPDATE_USER, UPDATE_USER_ATTRIBUTE, DELETE_GROUP],attributes={user_encryption_method=atlassian-security}], invalidPasswordAttempts, 0, 0]]->\r\n->[[com.atlassian.crowd.model.user.InternalUser@1eb2b6e3[id=784924676,name=username,createdDate=2018-08-01 22:17:02.829,updatedDate=2019-01-15 20:13:50.993,active=true,emailAddress=scrubbed,firstName=,lastName=Administrator,displayName=Administrator,credential=com.atlassian.crowd.embedded.api.PasswordCredential@383c4a76[credential=********,encryptedCredential=true],lowerName=username,lowerEmailAddress=scrubed,lowerFirstName=,lowerLastName=administrator,lowerDisplayName=administrator,directoryId=784826369,externalId=<null>], com.atlassian.crowd.model.directory.DirectoryImpl$HibernateProxy$FIAHInHH@77b29c57[lowerName=bamboo internal directory,description=Bamboo default internal directory,type=INTERNAL,implementationClass=com.atlassian.crowd.directory.InternalDirectory,allowedOperations=[DELETE_USER, UPDATE_ROLE, UPDATE_GROUP_ATTRIBUTE, CREATE_USER, CREATE_GROUP, DELETE_ROLE, UPDATE_ROLE_ATTRIBUTE, UPDATE_GROUP, CREATE_ROLE, UPDATE_USER, UPDATE_USER_ATTRIBUTE, DELETE_GROUP],attributes={user_encryption_method=atlassian-security}], invalidPasswordAttempts, 1, 1]]\r\n\r\n\tat com.atlassian.bamboo.utils.XsrfUtils.fail(XsrfUtils.java:27)\r\n\tat com.atlassian.bamboo.hibernate.ReadOnlyGetMethodEnforcer.fail(ReadOnlyGetMethodEnforcer.java:124)\r\n\tat com.atlassian.bamboo.hibernate.ReadOnlyGetMethodEnforcer.onFlushDirty(ReadOnlyGetMethodEnforcer.java:75)\r\n\tat org.springframework.orm.hibernate.support.ChainedInterceptorSupport.onFlushDirty(ChainedInterceptorSupport.java:104)\r\n\tat org.springframework.orm.hibernate.support.ChainedInterceptorSupport.onFlushDirty(ChainedInterceptorSupport.java:104)\r\n\tat org.hibernate.event.internal.DefaultFlushEntityEventListener.invokeInterceptor(DefaultFlushEntityEventListener.java:355)\r\n\tat org.hibernate.event.internal.DefaultFlushEntityEventListener.handleInterception(DefaultFlushEntityEventListener.java:332)\r\n\tat org.hibernate.event.internal.DefaultFlushEntityEventListener.scheduleUpdate(DefaultFlushEntityEventListener.java:283)\r\n\tat org.hibernate.event.internal.DefaultFlushEntityEventListener.onFlushEntity(DefaultFlushEntityEventListener.java:154)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.flushEntities(AbstractFlushingEventListener.java:235)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:94)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:38)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1454)\r\n\tat org.hibernate.internal.SessionImpl.flush(SessionImpl.java:1440)\r\n\tat com.atlassian.crowd.util.persistence.hibernate.InternalDirectoryEntityHibernateDao.storeAttributes(InternalDirectoryEntityHibernateDao.java:117)\r\n\tat com.atlassian.crowd.dao.user.UserDAOHibernate.storeAttributes(UserDAOHibernate.java:394)\r\n\tat com.atlassian.crowd.directory.AbstractInternalDirectory.processAuthentication(AbstractInternalDirectory.java:269)\r\n\tat com.atlassian.crowd.directory.AbstractInternalDirectory.authenticate(AbstractInternalDirectory.java:203)\r\n\tat com.atlassian.crowd.manager.directory.DirectoryManagerGeneric.authenticateUser(DirectoryManagerGeneric.java:284)\r\n\tat sun.reflect.GeneratedMethodAccessor2432.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:197)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)\r\n\tat com.sun.proxy.$Proxy166.authenticateUser(Unknown Source)\r\n\tat com.atlassian.crowd.manager.application.ApplicationServiceGeneric.authenticateUser(ApplicationServiceGeneric.java:182)\r\n\tat sun.reflect.GeneratedMethodAccessor2431.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:197)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)\r\n\tat com.sun.proxy.$Proxy169.authenticateUser(Unknown Source)\r\n\tat com.atlassian.crowd.embedded.core.CrowdServiceImpl.authenticate(CrowdServiceImpl.java:70)\r\n\tat com.atlassian.crowd.embedded.atlassianuser.EmbeddedCrowdAuthenticator.authenticate(EmbeddedCrowdAuthenticator.java:24)\r\n\tat com.atlassian.crowd.embedded.atlassianuser.EmbeddedCrowdAuthenticator$$FastClassBySpringCGLIB$$af97c51b.invoke(<generated>)\r\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:684)\r\n\tat com.atlassian.crowd.embedded.atlassianuser.EmbeddedCrowdAuthenticator$$EnhancerBySpringCGLIB$$cb218de2.authenticate(<generated>)\r\n\tat bucket.user.DefaultUserAccessor.authenticate(DefaultUserAccessor.java:711)\r\n\tat sun.reflect.GeneratedMethodAccessor2430.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:197)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)\r\n\tat com.sun.proxy.$Proxy177.authenticate(Unknown Source)\r\n\tat com.atlassian.bamboo.user.authentication.BambooAuthenticator.authenticate(BambooAuthenticator.java:47)\r\n\tat com.atlassian.seraph.auth.DefaultAuthenticator.login(DefaultAuthenticator.java:90)\r\n\tat com.atlassian.bamboo.user.authentication.BambooAuthenticator.login(BambooAuthenticator.java:32)\r\n\tat com.atlassian.seraph.auth.DefaultAuthenticator.getUserFromBasicAuthentication(DefaultAuthenticator.java:530)\r\n\tat com.atlassian.seraph.auth.DefaultAuthenticator.getUser(DefaultAuthenticator.java:341)\r\n\tat com.atlassian.seraph.filter.SecurityFilter.doFilter(SecurityFilter.java:139)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat com.atlassian.seraph.filter.BaseLoginFilter.doFilter(BaseLoginFilter.java:148)\r\n\tat com.atlassian.seraph.filter.BambooLoginFilter.doFilter(BambooLoginFilter.java:37)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:39)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.oauth.serviceprovider.internal.servlet.OAuthFilter.doFilter(OAuthFilter.java:67)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.security.auth.trustedapps.filter.TrustedApplicationsFilter.doFilter(TrustedApplicationsFilter.java:103)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.plugins.rest.module.servlet.RestSeraphFilter.doFilter(RestSeraphFilter.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsCombinedMatchDispatcherFilter.doFilter(PrettyUrlsCombinedMatchDispatcherFilter.java:56)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:70)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:58)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.springframework.orm.hibernate5.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:152)\r\n\tat com.atlassian.bamboo.persistence.BambooSessionInViewFilter.doFilterInternal(BambooSessionInViewFilter.java:24)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat com.atlassian.bamboo.filter.RequestCacheThreadLocalFilter.doFilter(RequestCacheThreadLocalFilter.java:40)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat com.atlassian.bamboo.filter.ClickjackingAndMimeTypeSniffingPreventionFilter.doFilter(ClickjackingAndMimeTypeSniffingPreventionFilter.java:36)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat com.atlassian.bamboo.filter.CookieCacheControlFilter.doFilter(CookieCacheControlFilter.java:49)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat com.atlassian.core.filters.HeaderSanitisingFilter.doFilter(HeaderSanitisingFilter.java:44)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:39)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.analytics.client.filter.DefaultAnalyticsFilter.doFilter(DefaultAnalyticsFilter.java:38)\r\n\tat com.atlassian.analytics.client.filter.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:39)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsCombinedMatchDispatcherFilter.doFilter(PrettyUrlsCombinedMatchDispatcherFilter.java:56)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:70)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:58)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)\r\n\tat org.apache.catalina.valves.StuckThreadDetectionValve.invoke(StuckThreadDetectionValve.java:206)\r\n\tat org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:650)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:800)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:800)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1471)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n2019-02-06 00:00:18,291 ERROR [http-nio-8085-exec-20] [ReadOnlyGetMethodEnforcer] Entity mutation is not allowed\r\n{noformat}\r\n \r\n\r\nh3.Workaround\r\n\r\nTo allow the REST call to succeed for future attempts, the user will need to perform a successful login via the UI to reset the {{invalidPasswordAttempts}} attribute to zero. Resetting CAPTCHA via the administration panel will *not* have the same result.",
      "summary": "Invalid Password Attempts from Rest calls throwing XSRF"
    }
  },
  {
    "key": "BAM-20290",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-02-08T03:01:22.000+0000",
      "description": "h3. Issue Summary\r\n{{GitHubException: Not Found}} occurs when overriding branch on a non-default private GitHub repository for a branch plan in Bamboo.\r\n\r\nh3. Environment\r\n* *Private* GitHub Repository\r\n\r\nh3. Steps to Reproduce\r\n# Create a Bamboo plan with two private GitHub repositories with branches\r\n#* It's likely reproducible if just the non-default repository is the private GitHub repository too.\r\n# Add a Branch Plan.\r\n# Navigate to the *Branch Plan >> Repositories* and select the non-default (second) repository.\r\n# Select the branch dropdown to attempt to override it to an alternate branch.\r\n\r\nh3. Expected Results\r\nBranch dropdown populates with the list of branches from GitHub.\r\n\r\nh3. Actual Results\r\nOnly the branch that is already selected on the repository configuration is selectable and a {{GitHubException: Not Found}} error flashes temporarily in the UI.\r\n\r\nThe below exception is thrown in the atlassian-bamboo.log file:\r\n{noformat}\r\n2019-02-08 12:59:35,153 WARN [http-nio-8085-exec-23] [GitHubResource] Failed to load data from GitHub.\r\ncom.atlassian.bamboo.plugins.git.GitHubAccessor$GitHubException: Not Found\r\n\tat com.atlassian.bamboo.plugins.git.GitHubAccessor.getJSONArrayResponseFromUrl(GitHubAccessor.java:298)\r\n\tat com.atlassian.bamboo.plugins.git.GitHubAccessor.getFoldedListFromGitHubApi(GitHubAccessor.java:195)\r\n\tat com.atlassian.bamboo.plugins.git.GitHubAccessor.getBranches(GitHubAccessor.java:116)\r\n\tat com.atlassian.bamboo.plugins.git.rest.resource.GitHubResource.getBranches(GitHubResource.java:121)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat com.atlassian.plugins.rest.common.interceptor.impl.DispatchProviderHelper$ResponseOutInvoker$1.invoke(DispatchProviderHelper.java:192)\r\n\tat com.atlassian.plugins.rest.common.interceptor.impl.DispatchProviderHelper$1.intercept(DispatchProviderHelper.java:83)\r\n\tat com.atlassian.plugins.rest.common.interceptor.impl.DefaultMethodInvocation.invoke(DefaultMethodInvocation.java:53)\r\n\tat com.atlassian.plugins.rest.common.expand.interceptor.ExpandInterceptor.intercept(ExpandInterceptor.java:34)\r\n\tat com.atlassian.plugins.rest.common.interceptor.impl.DefaultMethodInvocation.invoke(DefaultMethodInvocation.java:53)\r\n\tat com.atlassian.plugins.rest.common.interceptor.impl.DispatchProviderHelper.invokeMethodWithInterceptors(DispatchProviderHelper.java:110)\r\n\tat com.atlassian.plugins.rest.common.interceptor.impl.DispatchProviderHelper$ResponseOutInvoker._dispatch(DispatchProviderHelper.java:190)\r\n{noformat}\r\nh3. Workaround\r\nOnly workaround is to use a *Git* type repository instead of a *GitHub* type repository in Bamboo.",
      "summary": "GitHubException: Not Found when overriding branch on a non-default private GitHub repository for a branch plan in Bamboo"
    }
  },
  {
    "key": "BAM-20289",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-02-08T10:54:31.000+0000",
      "created": "2019-02-08T00:42:38.000+0000",
      "description": "Steps to reproduce:\r\nCreate a deployment plan in bamboo specs on a branch that is not master\r\nCreate a linked repository in bamboo which points at that branch, and enable bamboo specs on it\r\nOpen the deployment page and edit it\r\nClick \"Use a custom plan branch\"\r\nSelect the branch your specs are on\r\nClick save\r\nClick \"Edit build plan again\"\r\n\r\nExpected behaviour:\r\nThe used for the deployment branch is whatever you set it to, or the option to change the branch is not accessible\r\n\r\nActual behaviour\r\nThe branch selection is cleared on reload\r\n\r\nh3. Workaround\r\nSet the linked repository for the deployment plan as the one created above which had the branch the bamboo specs were on as it's main branch ",
      "summary": "When a deployment is created by bamboo specs it appears to be possible to edit it but the branch to run it against is not editable"
    }
  },
  {
    "key": "BAM-20288",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-02-07T21:29:43.000+0000",
      "description": "h3. Problem Definition\r\n\r\nRight now there is no option inside Bamboo configuration that allows customizing the build logs date format. Today, only date format that build\u00a0logs shows is\u00a0dd-MMM-yyyy HH:mm:ss, without milliseconds.\r\nh3. Suggested Solution\r\n\r\nAdd the option, inside Bamboo configuration, that allows admin users to set the date format adding the milliseconds too, e.g.\u00a0dd-MMM-yyyy HH:mm:ss, SSS.",
      "summary": "Add milliseconds to build logs"
    }
  },
  {
    "key": "BAM-20287",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-02-12T21:51:49.000+0000",
      "created": "2019-02-07T10:15:15.000+0000",
      "description": "Currently the supported SQL server versions for Bamboo 6.8 are SQL Server 2012, 2014, and 2016. Add\u00a0Microsoft SQL Server 2017 to the supported databases for Bamboo.\u00a0",
      "summary": "Add SQL Server 2017 to the supported databases "
    }
  },
  {
    "key": "BAM-20286",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-02-06T21:51:58.000+0000",
      "description": "Summary\r\n\r\nIt's not possible to use buildNumber metadata variable at conditional task as it's not available when condition is checked.\r\n\r\nRoot cause\r\n\r\nbuildNumber is added to build result when save CurrentBuildResult to DB. It should be available earlier",
      "summary": "bulidNumber metadata is set too late "
    }
  },
  {
    "key": "BAM-20285",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-02-06T09:18:52.000+0000",
      "description": "Selecting a different user for a built task would solve a lot of troubles for me.\r\n\r\nhttps://community.atlassian.com/t5/Bamboo-questions/Katalon-and-Visual-Studio-in-Bamboo/qaq-p/997816",
      "summary": "Buildtask as different user"
    }
  },
  {
    "key": "BAM-20284",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-09-10T08:01:49.000+0000",
      "created": "2019-02-05T23:48:25.000+0000",
      "description": "h3. Issue Summary\r\nVariable(s) created using \"Inject Bamboo variables\" task when defined as LOCAL scope, are not displayed in Job Result\r\n \r\nh3. Steps to Reproduce\r\n# create a Project - Plan (e.g PROJ-PLAN)\r\n# add a Job with a script task\r\n{code}\r\necho \"fromINJECT=INJECT\" > variable.txt\r\n{code}\r\n# add *Inject Bamboo variables* task:\r\n||Path to properties file|variable.txt|\r\n||Namespace|inject|\r\n||Scope of the variables|Local|\r\n# add a Job with a script task\r\n{code}\r\necho \"bamboo.inject.fromINJECT : \u00a7{bamboo.inject.fromINJECT}\"\r\n{code}\r\n# run a build\r\n\r\nh3. Expected Results\r\n* Bamboo should display the injected variable under http://localhost:8085/browse/PROJ-PLAN-JOB1-1/metadata regardless of scope.\r\n\r\nh3. Actual Results\r\nWhen visiting http://localhost:8085/browse/PROJ-PLAN-JOB1-1/metadata we cannot find the injected variable under *Variables* section in the same way when the variable is defined as \"Scope of the variables: Result\".\r\n\r\nh3. Notes\r\n-\r\n\r\nh3. Workaround\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available\r\n\r\n",
      "summary": "Variables - Bamboo Inject Variable with LOCAL scope is not listed in Job Result"
    }
  },
  {
    "key": "BAM-20283",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-02-05T23:41:33.000+0000",
      "description": "h3. Issue Summary\r\nVariable is marked as overridden in a build result even if the variable was not defined under {color:blue}Plan configuration >> Variables{color} tab.\r\n \r\nh3. Steps to Reproduce\r\n# create a Project - Plan (e.g PROJ-PLAN)\r\n# add a Job with a script task\r\n{code}\r\necho \"bamboo.fromCURL : ${bamboo.fromCURL}\"\r\n{code}\r\n# run a build using Bamboo's REST API:\r\n{code}\r\ncurl -k -u admin \\\r\n     -X POST 'http://localhost:8085/rest/api/latest/queue/PROJ-PLAN?bamboo.variable.fromCURL=CURL'\r\n{code}\r\n_The above triggers a new build creating a variable for that specific build._\r\n\r\nh3. Expected Results\r\n* Bamboo should check if variable provided when consuming Bamboo REST API endpoint has its definition in {color:blue}Plan configuration >> Variables{color} tab, then label the variable accordingly. If a variable definition exists and variable provided has the same key, then the variable can be considered as overridden, otherwise, label it as a new (custom) variable.\r\n\r\nh3. Actual Results\r\n!bamboo.metadata.variable.png|thumbnail!\r\nWhen visiting the following endpoints, under *Variables* section, in variable *fromCURL* its value has an *Overridden* label:\r\n* http://localhost:8085/browse/PROJ-PLAN-1/metadata\r\n* http://localhost:8085/browse/PROJ-PLAN-JOB1-1/metadata\r\n\r\nh3. Notes\r\nWhen visiting http://localhost:8085/browse/PROJ-PLAN-JOB1-1/metadata the message in *Variable* section should display differently:\r\n* from \"{color:grey}The following -parameters have been used- by this build.{color}\"\r\n* to \"{color:green}The following *variables were available* to this build.{color}\"\r\n\r\nh3. Workaround\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Variables - Variable is considered as overridden even if undefined in Plan Configuration"
    }
  },
  {
    "key": "BAM-20282",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-02-05T12:11:02.000+0000",
      "description": "h3. Summary\r\n\r\nWhen defining a capability in the file bamboo-capabilities.properties, with a space on the name, the agent won't be shown as available after setting that capability as requirement.\r\nh3. Environment\r\n\r\nBamboo with Remote agents. Non-OS specific.\r\nh3. Steps to Reproduce\r\n # Create a file called bamboo-capabilities.properties under <bamboo-agent>/bin. For this test, it was populated ini this way:\r\n{noformat}\r\nsystem.builder.msbuild.MSBuild\\ v2.0\\ (32bit)=C:\\\\Windows\\\\Microsoft.NET\\\\Framework\\\\v2.0.50727\\\\MSBuild.exe\r\nsystem.builder.msbuild.MSBuild\\ v2.0\\ (64bit)=C:\\\\Windows\\\\Microsoft.NET\\\\Framework64\\\\v2.0.50727\\\\MSBuild.exe\r\nsystem.builder.msbuild.MSBuild\\ v3.5\\ (32bit)=C:\\\\Windows\\\\Microsoft.NET\\\\Framework\\\\v3.5\\\\MSBuild.exe\r\nsystem.builder.msbuild.MSBuild\\ v3.5\\ (64bit)=C:\\\\Windows\\\\Microsoft.NET\\\\Framework64\\\\v3.5\\\\MSBuild.exe\r\nsystem.builder.msbuild.MSBuild\\ v4.0\\ (32bit)=C:\\\\Windows\\\\Microsoft.NET\\\\Framework\\\\v4.0.30319\\\\MSBuild.exe\r\nsystem.builder.msbuild.MSBuild\\ v4.0\\ (64bit)=C:\\\\Windows\\\\Microsoft.NET\\\\Framework64\\\\v4.0.30319\\\\MSBuild.exe\r\nsystem.builder.msbuild.MSBuild\\ v12.0\\ (32bit)=C:\\\\Program Files (x86)\\\\MSBuild\\\\12.0\\\\bin\\\\MSBuild.exe\r\nsystem.builder.msbuild.MSBuild\\ v12.0\\ (64bit)=C:\\\\Program Files (x86)\\\\MSBuild\\\\12.0\\\\bin\\\\amd64\\\\MSBuild.exe\r\nsystem.builder.msbuild.MSBuild\\ v14.0\\ (32bit)=C:\\\\Program Files (x86)\\\\MSBuild\\\\14.0\\\\bin\\\\MSBuild.exe\r\nsystem.builder.msbuild.MSBuild\\ v14.0\\ (64bit)=C:\\\\Program Files (x86)\\\\MSBuild\\\\14.0\\\\bin\\\\amd64\\\\MSBuild.exe\r\nsystem.builder.msbuild.MSBuild\\ v15.0\\ (32bit)=C:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\2017\\\\Professional\\\\MSBuild\\\\15.0\\\\Bin\\\\msbuild.exe\r\nsystem.builder.msbuild.MSBuild\\ v15.0\\ (64bit)=C:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\2017\\\\Professional\\\\MSBuild\\\\15.0\\\\Bin\\\\amd64\\\\msbuild.exe\r\n{noformat}\r\n\r\n # Start the agent.\r\n # In Bamboo, if needed approve the agent and check that the capabilities are listed:\r\n # !caps.png!\r\n # Navigate to a plan and a job, section \"Requirements\".\r\n # Add one of the capabilities.\r\n\r\nh3. Expected Results\r\n\r\nThe agent should be shown as an option.\r\nh3. Actual Results\r\n\r\nBamboo says no agents can build that job.\r\n\r\n!noagents.png!\r\nh3. Notes\r\n\r\nNo errors in agent/server logs\r\nh3. Workaround\r\n\r\nManually add the capabilites through the UI",
      "summary": "Agent capability set in startup with a space in the name not recognized by job requirement."
    }
  },
  {
    "key": "BAM-20281",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-02-07T13:10:47.000+0000",
      "created": "2019-02-05T10:12:07.000+0000",
      "description": "When plan has ScpTask with Shared credentials authentication then View as Bamboo Specs page doesn't have\u00a0\r\n{code:java}\r\n import com.atlassian.bamboo.specs.api.builders.credentials.SharedCredentialsIdentifier;{code}\r\n\u00a0\r\nh2. Workaround\r\n\r\nAdd required import manually",
      "summary": "Export to Bamboo Specs generates wrong import"
    }
  },
  {
    "key": "BAM-20280",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-02-04T22:23:29.000+0000",
      "description": "Bamboo should be more customisable allowing developers to create / extend features under existent location and section.\r\n\r\nAs an example, [https://developer.atlassian.com/server/bamboo/web-panel-module/]\u00a0or [https://developer.atlassian.com/server/bamboo/web-item-module/]\u00a0do not provide any location / section where content can be appended to Plan Summary screen.",
      "summary": "Expose more location and section to existent views in Bamboo"
    }
  },
  {
    "key": "BAM-20279",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-02-04T20:49:33.000+0000",
      "description": "Could be that the agent was cleaned up before I clicked disable since when I clicked the back button it was saying the agent didn't exist\r\n\r\nh3. Workaround\r\nNone that I know of",
      "summary": "When disabling a docker agent I got a stack trace "
    }
  },
  {
    "key": "BAM-20278",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-02-02T21:45:02.000+0000",
      "description": "AUI 8 is no doubt the best update to AUI because it looks so much more modern than the current version used in Crowd. In order to align it with other products, AUI should be upgraded. Related tweet: [https://twitter.com/dylanfps/status/1032539276670652416?s=21]\u00a0",
      "summary": "Upgrade to AUI 8"
    }
  },
  {
    "key": "BAM-20277",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-02-01T20:11:10.000+0000",
      "description": "h3. Problem Definition\r\nWhen running Docker Runner on CentOS or RHEL, we receive \"Permission denied\" errors when trying to access anything on the Home Directory Volume. This is caused by Security Enabled Linux Multi-Category Security (SELinux MCS) labels.\r\n\r\nh3. Suggested Solution\r\nIf RHEL or CentOS, add {{:Z}} to the volume mappings to label the contents of the directories with the correct Multi-Category Security labels.\r\n\r\nFor example:\r\n||Host directory||Container directory||\r\n|{{$\\{bamboo.working.directory}}}|{{$\\{bamboo.working.directory}:Z}}|\r\n|{{$\\{bamboo.tmp.directory}}}|{{$\\{bamboo.tmp.directory}:Z}}|\r\n\r\nOther alternatives can be found on this knowledge-base article:\r\n* [Docker Runner Fails With Permission Denied Errors in Build Log \\- Bamboo \\- Atlassian Documentation|https://confluence.atlassian.com/bamkb/docker-runner-fails-with-permission-denied-errors-in-build-log-1031279813.html]",
      "summary": "Docker Runner does not work correctly with SELinux flags on mounted volumes"
    }
  },
  {
    "key": "BAM-20276",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-02-01T04:06:25.000+0000",
      "description": "h3. Issue Summary\r\nBamboo has the facility to stop a Build plan whilst it is executing. Stopping the active build should cause the agents running the build to stop any active task and terminate any child processes.\r\nIf the Build plan contains a Docker task then the remote agent should terminate the docker run and any child processes that is spawned.\r\nOn a Windows remote agent this does not appear to happen. Stopping the build does terminate the job and task but the child processes of the docker run are not stopped.\r\n\r\nh3. Environment\r\nBamboo 6.7.2\r\n* Linux server\r\n* Windows server 2016 (with docker installed) remote agent\r\n\r\nh3. Steps to Reproduce\r\n # Install bamboo 6.7.2 on Linux server\r\n # Install windows server 2016 with docker installed\r\n#* \\[I used Windows_Server-2016-English-Full-Containers-2019.01.10 (ami-0c123eec390f84734) on AWS]\r\n# Create a build plan containing a Docker task.\r\n#* Docker image:  mcr.microsoft.com/windows/servercore\r\n#* Container command: powershell -command Start-Sleep -s 10000\r\n# Run job\r\n# Stop job whilst it is executing the docker run task\r\n\r\nh3. Expected Results\r\n\r\nWhen the job is stopped the remote agent should kill the child processes of the running tasks.\r\n\r\nh3. Actual Results\r\n\r\nThe below exception is thrown in the Build log but the child processes are not killed.\r\nThe *powershell -command Start-Sleep -s 10000* command continues to run.\r\n\r\n{noformat}\r\n29-Jan-2019 03:49:19\tStarting task 'Docker' of type 'com.atlassian.bamboo.plugins.bamboo-docker-plugin:task.docker.cli'\r\n29-Jan-2019 03:49:19\tRunning image name (mcr.microsoft.com/windows/servercore)\r\n29-Jan-2019 03:49:19\t\r\nBeginning to execute external process for build 'tst - dock - Default Job #30 (TST-DOCK-JOB1-30)'\r\n ... running command line: \r\nC:\\Program Files\\Docker\\docker.exe run --rm mcr.microsoft.com/windows/servercore powershell -command Start-Sleep -s 10000\r\n ... in: C:\\Users\\Administrator\\bamboo-agent-home\\xml-data\\build-dir\\TST-DOCK-JOB1\r\n ... using extra environment variables: \r\n...\r\n29-Jan-2019 03:49:35\t\r\nRequest to stop 'TST-DOCK-JOB1-30' received from admin\r\n29-Jan-2019 03:49:35\tExit code: -1, output: STDOUT:  Beginning to execute external process for build 'tst - dock - Default Job #30 (TST-DOCK-JOB1-30)'\\n ... running command line: \\nC:\\Program Files\\Docker\\docker.exe run --rm mcr.microsoft.com/windows/servercore powershell -command Start-Sleep -s 10000\\n ... in: C:\\Users\\Administrator\\bamboo-agent-home\\xml-data\\build-dir\\TST-DOCK-JOB1\\n ... ...\r\n29-Jan-2019 03:49:35\tForce Stop build feature is enabled for current plan. Either Bamboo has detected the build has hung or it has been manually stopped.\r\n29-Jan-2019 03:49:35\tAttempting to generate stack trace and terminate spawned sub-processes of process id: 5080\r\n29-Jan-2019 03:49:35\tError occurred while running Task '(2)' of type com.atlassian.bamboo.plugins.bamboo-docker-plugin:task.docker.cli.\r\n29-Jan-2019 03:49:35\tcom.atlassian.bamboo.task.TaskException: Failed to execute task\r\n29-Jan-2019 03:49:35\t        at com.atlassian.bamboo.plugins.docker.service.RunService.execute(RunService.java:75)\r\n29-Jan-2019 03:49:35\t        at com.atlassian.bamboo.plugins.docker.tasks.cli.DockerCliTask.execute(DockerCliTask.java:70)\r\n29-Jan-2019 03:49:35\t        at com.atlassian.bamboo.task.TaskExecutorImpl.lambda$executeTasks$3(TaskExecutorImpl.java:319)\r\n29-Jan-2019 03:49:35\t        at com.atlassian.bamboo.task.TaskExecutorImpl.executeTaskWithPrePostActions(TaskExecutorImpl.java:252)\r\n29-Jan-2019 03:49:35\t        at com.atlassian.bamboo.task.TaskExecutorImpl.executeTasks(TaskExecutorImpl.java:319)\r\n29-Jan-2019 03:49:35\t        at com.atlassian.bamboo.task.TaskExecutorImpl.execute(TaskExecutorImpl.java:112)\r\n...\r\n29-Jan-2019 03:49:35\t        at com.atlassian.bamboo.plugins.docker.client.DockerCmd.run(DockerCmd.java:51)\r\n29-Jan-2019 03:49:35\t        at com.atlassian.bamboo.plugins.docker.service.RunService.execute(RunService.java:64)\r\n29-Jan-2019 03:49:35\t        ... 17 more\r\n29-Jan-2019 03:49:35\tCaused by: com.atlassian.utils.process.ProcessException: Error executing C:\\Program Files\\Docker\\docker.exe run --rm mcr.microsoft.com/windows/servercore powershell -command Start-Sleep -s 10000\r\n29-Jan-2019 03:49:35\t        at com.atlassian.bamboo.docker.DockerContainerServiceImpl.execute(DockerContainerServiceImpl.java:302)\r\n29-Jan-2019 03:49:35\t        at com.atlassian.bamboo.docker.DockerContainerServiceImpl.execute(DockerContainerServiceImpl.java:272)\r\n29-Jan-2019 03:49:35\t        at com.atlassian.bamboo.docker.DockerContainerServiceImpl.run(DockerContainerServiceImpl.java:106)\r\n29-Jan-2019 03:49:35\t        ... 46 more\r\n29-Jan-2019 03:49:35\tRunning post build plugin 'Docker Container Cleanup'\r\n29-Jan-2019 03:49:35\tgetStackTraceAndKillRelatedProcesses for 0 processes\r\n..\r\n{noformat}\r\n\r\nh3. Workaround\r\n\r\nManually kill any left over processes.",
      "summary": "Stopping build job on windows agent does not kill children of active docker task."
    }
  },
  {
    "key": "BAM-20275",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-01-31T20:50:16.000+0000",
      "description": "h3. Problem\r\nWhen an agent crashes or manually shut down, the Bamboo server will take about 10min to show the agent as offline. This time creates confusing to admins when managing their agents.\r\n\r\nh3. Solution suggested\r\nImplement a mechanism where this time could be reduced and as soon the agent process is down the server would know about it.\r\n\r\nPlease consider an immediate server update also for the case when the agent is gracefully shutdown. The agent could notify the server changing the agent status to offline right away.",
      "summary": "Reduce the time taken to identify an agent is offline"
    }
  }
]