[
  {
    "key": "BAM-21279",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-07-30T13:38:08.000+0000",
      "created": "2021-03-24T04:32:28.000+0000",
      "description": "h2. Problem Definition\r\n\r\nIf the Git server is spending a long time packing objects, Bamboo's SSH Server (for the SSH proxying) can timeout after 10 mins 15 seconds of no read activity with {{InterruptedByTimeoutException}} and Git reports {{fatal: the remote end hung up unexpectedly fatal: protocol error: bad pack header}}. There is no way to extend this timeout.\r\n\r\nThis will cause Bamboo to delete the Git cache and if there was 10 mins and 15 secs of packing activity, chances are its a very large repository. Getting a successful fetch after this can be challenging without being able to extend the timeout.\r\n\r\n{noformat}\r\n2021-03-23 15:22:52,403 DEBUG [sshd-SshServer[1cf5234]-nio2-thread-5] [Nio2Session] handleReadCycleCompletion(Nio2Session[local=/127.0.0.1:46453, remote=/127.0.0.1:52968]) read 352 bytes\r\n..\r\n2021-03-23 15:33:07,791 WARN [sshd-SshServer[1cf5234]-nio2-thread-5] [ServerSessionImpl] exceptionCaught(ServerSessionImpl[f7a9f8fb-1d34-4c74-b092-a2cd8bb1c2c8@/127.0.0.1:52972])[state=Opened] InterruptedByTimeoutException: null\r\n2021-03-23 15:33:07,791 DEBUG [sshd-SshServer[1cf5234]-nio2-thread-5] [ServerSessionImpl] exceptionCaught(ServerSessionImpl[f7a9f8fb-1d34-4c74-b092-a2cd8bb1c2c8@/127.0.0.1:52972])[state=Opened] details\r\njava.nio.channels.InterruptedByTimeoutException\r\n\tat sun.nio.ch.UnixAsynchronousSocketChannelImpl$1.run(UnixAsynchronousSocketChannelImpl.java:458)\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n2021-03-23 15:33:07,808 WARN [10-BAM::PlanExec:pool-16-thread-3] [AbstractGitExecutor] Deleting git workspace /var/bamboo-home/main/xml-data/build-dir/_git-repositories-cache/7770976a038225a4c969dfd1239b55c11fcdd848 due to exception\r\ncom.atlassian.bamboo.repository.RepositoryException: : Cannot fetch branch 'refs/heads/master' from 'ssh://git@bitbucket:7999/mir/git-hw.git' to source directory '/var/bamboo-home/main/xml-data/build-dir/_git-repositories-cache/7770976a038865a4c969dfd1239b55c11fcdd848'. command [/usr/bin/git fetch ssh://f7a9f8fb-1d34-4c74-b092-a2cd8bb1c2c8@127.0.0.1:46453/mir/git-hw.git +refs/heads/master:refs/heads/master --update-head-ok] failed with code 128. Working directory was [/var/bamboo-home/main/xml-data/build-dir/_git-repositories-cache/7770976a038865a4c969dfd1239b55c11fcdd848]., stderr:\r\nWarning: Permanently added '[127.0.0.1]:46453' (RSA) to the list of known hosts.\r\nConnection to 127.0.0.1 closed by remote host.\r\nfatal: the remote end hung up unexpectedly\r\nfatal: protocol error: bad pack header\r\n\tat com.atlassian.bamboo.plugins.git.NativeGitOperationHelper.fetch(NativeGitOperationHelper.java:545)\r\n\tat com.atlassian.bamboo.plugins.git.NativeGitOperationHelper.fetch(NativeGitOperationHelper.java:514)\r\n\tat com.atlassian.bamboo.plugins.git.v2.GitChangeDetector.ensureRevisionExists(GitChangeDetector.java:261)\r\n\tat com.atlassian.bamboo.plugins.git.v2.GitChangeDetector.lambda$fetchAndExtractChanges$4(GitChangeDetector.java:228)\r\n\tat io.atlassian.util.concurrent.ManagedLocks$ManagedLockImpl.withLock(ManagedLocks.java:284)\r\n\tat com.atlassian.bamboo.plugins.git.v2.GitChangeDetector.fetchAndExtractChanges(GitChangeDetector.java:226)\r\n\tat com.atlassian.bamboo.plugins.git.v2.GitChangeDetector.collectChanges(GitChangeDetector.java:196)\r\n{noformat}\r\n\r\nh2. Suggested Solution\r\n\r\nProvide an argument to extend Bamboo SSH Server timeouts.\r\n\r\nh2. Workaround\r\nAnything that speeds up compression on the Git server end so that it completes before the Bamboo timeout is helpful. For example, if you binary files that aren't tracked by LFS you exclude them from delta compression using the {{.gitattributes}} file:\r\n* [https://git-scm.com/docs/gitattributes|https://git-scm.com/docs/gitattributes]\r\n",
      "summary": "Increase Bamboo SSH Server timeout"
    }
  },
  {
    "key": "BAM-21278",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-03-23T04:33:01.000+0000",
      "created": "2021-03-23T04:31:34.000+0000",
      "description": "It would be great to be able to trigger deployments and pass custom env vars, just like we can do so with builds, i.e. add Run customized option in UI and REST API to be able to override env vars defined in deployment tasks.\r\n\r\n\u00a0",
      "summary": "Deployments: Make it possible to run customized "
    }
  },
  {
    "key": "BAM-21277",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-03-31T16:03:14.000+0000",
      "created": "2021-03-22T20:16:10.000+0000",
      "description": "h3. Summary\r\nThe delete action does not remove the agent approval. This will cause the agent to being removed and once the agent is restarted it's re added back and ready to build.\r\n\r\nh3. Environment\r\nBamboo 7.2.3\r\n\r\nh3. Steps to Reproduce\r\n# Add approved remote agent\r\n# From the online agents screen, select the agent and delete it.\r\n\r\nh3. Expected Results\r\nAgent is deleted, agent approval / authentication is revoked\r\n\r\nh3. Actual Results\r\nAgent is removed, howeve, once the agent is restarted, it automatically comes back online as the approval still exists in the database\r\n \r\nh3.Workaround\r\nRevoke approval or disable the agent\r\n",
      "summary": "Deleting online Agents should also revoke their approvals"
    }
  },
  {
    "key": "BAM-21274",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-12-07T10:22:58.000+0000",
      "created": "2021-03-19T16:50:04.000+0000",
      "description": "h3. Issue Summary\r\n\r\nUser cannot properly select stage or job name in build result sidebar\r\n\r\nh3. Steps to Reproduce\r\n1. Open build results job summary\r\n2. Open the sidebar if not available\r\n3. Try to select the text\r\n\r\nh3. Expected Results\r\n\r\nBe able to select the text\r\n\r\nh3. Actual Results\r\n\r\nThe drag'n'drop functionality is activated, even though there's no possibility to rearrange the order in this screen.\r\n\r\nh3. Workaround\r\n\r\nSelect the whole sidebar, and then manipulate the text to contain only the wanted content.",
      "summary": "User cannot properly select stage or job name in build result sidebar"
    }
  },
  {
    "key": "BAM-21273",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-03-19T14:21:03.000+0000",
      "description": "h3. Problem Definition\r\nBamboo is very dependent on the database, and if any issues arise there it is hard for admins, users, and Supporters to verify and resolve those issues.\r\n\r\nh3. Suggested Solution\r\nCan we have a database integrity checker for Bamboo just like the one for Jira as described in [this documentation|https://confluence.atlassian.com/adminjiraserver/using-the-database-integrity-checker-938847667.html]. The Database Integrity Checker should be implemented to ensure that all Bamboo data is in a consistent state. Couple of examples can be checked and validated:\r\n# Ancestor table corruption.\r\n# Decorator table.\r\n# Plugin manager state map.\r\n# Permissions/ACLs\r\n# System administrators group.\r\n# Plan configuration\r\n",
      "summary": "Database Integrity Checker for Bamboo"
    }
  },
  {
    "key": "BAM-21272",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-03-17T16:44:06.000+0000",
      "description": "h3. Issue Summary\r\nAfter configuring a delegated LDAP configuration with the \"Copy users on Login\" set, the delegated users can see the option to change the password and if your try to change it, Bamboo throws an error.\r\n\r\nh3. Steps to Reproduce\r\n # Configure an LDAP using the \"Internal with LDAP authentication\";\r\n# Login with an LDAP user;\r\n# Go to profile and try to change the password.\r\n\r\nh3. Expected Results\r\nThe change password option will be hidden\r\n\r\nh3. Actual Results\r\nThe option is available and if the user tries to change the password the below error is thrown in the UI:\r\n !image004.jpg|thumbnail! \r\n\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Change password option from delegated LDAP authentication is not hidden"
    }
  },
  {
    "key": "BAM-21270",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-03-16T21:35:35.000+0000",
      "description": "h3. Problem Definition\r\n\r\nThe REST API for branch creation does not allow the user to configure the branch for multiple repositories, it is only allows you to create the branch for the default repository.\r\n\r\nReference: [https://docs.atlassian.com/atlassian-bamboo/REST/7.2.3/#d2e5991]\r\nh3. Suggested Solution\r\n\r\nImprove how the branches are created\u00a0through REST API by adding parameters to configure the vcsBranch for a list of repositories.\r\nh3. Workaround\r\n\r\nChange the branch manually for all non-default repositories in the UI by going to *Branch configuration >> Repositories tab.*",
      "summary": "REST API: Improve branch creation through REST API"
    }
  },
  {
    "key": "BAM-21269",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-07-30T13:38:15.000+0000",
      "created": "2021-03-15T13:51:34.000+0000",
      "description": "If an artifact definition is set in any stages, all subsequent stages will automatically have an artifact dependency set.\r\n\r\nSuggestion: Provide a way to configure YAML specs to share artifacts between stages without creating an artifact dependency.",
      "summary": "Artifact dependency is automatically set when using YAML specs"
    }
  },
  {
    "key": "BAM-21268",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-04-20T19:14:24.000+0000",
      "created": "2021-03-11T12:47:25.000+0000",
      "description": "h3. Issue Summary\r\n\r\nUsers with admin permissions to the plan can't access jobs (config, logs and artifacts) in plan branches if those jobs do not exist in master.\r\nh3. Steps to Reproduce\r\n # Set up a specs repo with yaml or java specs (enable auto branch creation) with 1 stage and 1 job. Give admin privileges to the plan to any non admin user\r\n # Log in as a non admin user, try to access job logs\r\n # Create a branch in git repo and in yaml or java specs add an additional job to the stage\r\n # Commit and push changes. Wait for the build to complete.\r\n # Log in as a non admin user which has access to 1 job only. The job that has been added in branch isn't accessible.\r\n\r\nh3. Expected Results\r\n\r\nUser with admin permissions to the plan has access to\u00a0\r\nh3. Actual Results\r\n\r\nNon admin user with admin permissions to the plan does not have access to the job and its logs:\r\n\r\n!image-2021-03-11-14-44-37-795.png!\r\n\r\nThe below error is thrown in logs:\r\n{noformat}\r\n2021-03-11 14:43:50,213 ERROR [http-nio-8085-exec-24] [AbstractDownloadStrategy] Access denied for downloads URL /download/PLAN-PLANSPECS0-THIRD/build_logs/PLAN-PLANSPECS0-THIRD-4.log\r\n\r\n{noformat}\r\nh3. Workaround\r\n\r\nAdd the same job(s) to default branch.",
      "summary": "Permission issues when adding a new job to plan branch"
    }
  },
  {
    "key": "BAM-21267",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-04-07T16:58:31.000+0000",
      "created": "2021-03-10T11:05:09.000+0000",
      "description": "Git LFS is vulnerable to remote code execution on Windows (CVE-2021-21237):\r\n\r\nOn Windows, if Git LFS operates on a malicious repository with a git.bat or git.exe file in the current directory, that program would be executed, permitting the attacker to execute arbitrary code. This does not affect Unix systems.\r\n\r\nThis is the result of an incomplete fix for CVE-2020-27955.\r\n\r\nThis issue occurs because on Windows, Go includes (and prefers) the current directory when the name of a command run does not contain a directory separator.\r\n\r\nFix contains only changes to Windows AMIs used by Bamboo Elastic agents",
      "summary": "Bamboo for Windows uses a version of Git LFS vulnerable to remote code execution (CVE-2021-21237)"
    }
  },
  {
    "key": "BAM-21266",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-03-10T01:50:44.000+0000",
      "description": "Many times when updating multiple deployment projects at the same time, we have the pages opened in separate browser windows. It gets a little confusing which-is-which as sometimes there is no way to tell which project's tasks you are editing.\u00a0\r\n\r\nIt is a simple feature that can help us differentiating between two projects when working on them at the same time.\u00a0",
      "summary": "Display Project name on the \"Update tasks\" page"
    }
  },
  {
    "key": "BAM-21265",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-03-08T13:56:59.000+0000",
      "description": "h3. Issue Summary\r\n\r\nLoading the list of deployment environments inside the *Bamboo admin > Agents > Remote agents > Online/ Offline > AGENT_NAME > Dedicate agent* page can be extremely slow depending on the number of deployment environments that exist inside your Bamboo instance.\r\nh3. Steps to Reproduce\r\n # Go to *Bamboo admin > Agents > Remote agents > Online/ Offline > AGENT_NAME > Dedicate agent* page.\r\n # Select type *Deployment environment*.\r\n # Click the drop-down _\"Search for name\"_ .\r\n\r\nh3. Expected Results\r\n\r\nA list containing 25 deployment environments will show up in a matter of seconds.\r\nh3. Actual Results\r\n\r\nHere's where it gets tricky. The page *may* end up loading depending on the number of deployment environments but the time can vary from a few seconds to several minutes. You might also encounter the following error message if you hit the reverse proxy/ load balancer timeout before Bamboo finishes gathering the list of deployment environments:\r\n{quote}*An unexpected error has occurred*\r\n\r\nPlease try reloading the page.\r\n{quote}\r\nThis is mostly due to the fact that we're trying to fetch *ALL* deployment environments from the database at once. The results will be filtered out and you'll only see the top 25 because of the REST endpoint we're using the get that list:\r\n * [<Bamboo Base URL>/rest/api/latest/agent/assignment/search|https://docs.atlassian.com/atlassian-bamboo/REST/7.2.1/#d2e3590]\r\n\r\nWe may only display 25 results in the UI but we're running a search against the database that gathers a list of ALL the deployment environments.\r\nh3. Workaround\r\n\r\nThere are a couple of workarounds available at the moment:\r\n # You can access the [agents assignment|https://confluence.atlassian.com/bamboo/agents-for-deployment-environments-342754133.html] page inside your deployment environment to dedicate an agent to it instead of going to the *Bamboo admin > Agents > Remote agents > Online/ Offline > AGENT_NAME > Dedicate agent* page. In short, access the deployment environment to dedicate the agent instead of going to the agent page to try and find the deployment environment in that list/ drop-down.\r\n # If you are hitting a timeout at the reverse proxy/ LB you may want to consider increasing the timeout.\r\n#* Alternatively you can set up a Tomcat connector to [bypass|https://confluence.atlassian.com/kb/how-to-bypass-a-reverse-proxy-or-ssl-in-application-links-719095724.html] the reverse proxy/ LB and see how much time it takes to load the list of deployment environments. Once you know the time you can increase the reverse proxy/ LB timeout setting.",
      "summary": "Loading the list of deployment environments inside the dedicate (remote) agent page is extremely slow"
    }
  },
  {
    "key": "BAM-21264",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-07-30T13:37:46.000+0000",
      "created": "2021-03-08T06:27:34.000+0000",
      "description": "Current aws-sdk version does not have EU_SOUTH region which has been introduced in 1.11.783 [https://github.com/aws/aws-sdk-java/blob/1.11.783/aws-java-sdk-core/src/main/java/com/amazonaws/regions/Regions.java#L38]\r\n\r\nIt would be great to start supporting more regions and using a more recent AWS SDK version.",
      "summary": "Update aws-java-sdk to a more recent version"
    }
  },
  {
    "key": "BAM-21263",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-03-06T00:05:15.000+0000",
      "description": "Cool feature from other CI system is to have ability to set dependencies between jobs in a plan.\r\nWhile we have stages but we need more fine control like in a example\r\n\r\nwe have build jobs which does't have any dependencies\r\nwe have several tests jobs which should be run right after build is available\r\nalso for subset of test tasks we gather code coverage we need to run code coverage reported  job right after all results for the tests are available.\r\nAlso we have checkstyle jobs which doesn't depends on anything.\r\n\r\nSee attached picture.\r\nWe can't achieve this with stages and for CC report task we have to wait while all tests jobs have been finished\r\n\r\n\r\n\r\n",
      "summary": "Dependency management between jobs"
    }
  },
  {
    "key": "BAM-21262",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-12-14T15:38:24.000+0000",
      "created": "2021-03-04T11:01:15.000+0000",
      "description": "Follow up at BAM-19024 fixed at 7.2.0 but for Yaml Specs",
      "summary": "Support trigger conditions at Yaml Bamboo Specs"
    }
  },
  {
    "key": "BAM-21261",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-07-28T12:14:55.000+0000",
      "created": "2021-03-04T02:58:11.000+0000",
      "description": "h3. Issue Summary\r\n\r\nLinked repository not showing in *Bamboo Administration >> Linked Repositories* (configureLinkedRepositories) when there is another repository with the same name that is marked for deletion.\r\nh3. Steps to Reproduce\r\n # Use PostgreSQL\r\n # Create a Git linked repository called \"Test\"\r\n # Link it to a plan\r\n # Delete the linked repository from *Bamboo Administration >> Linked Repositories* (admin/configureLinkedRepositories!doDefault.action)\r\n ** It gets marked for deletion in database but does not get removed because its still linked to plan (other dependent data may cause it to not be deleted)\r\n # Create another Git linked repository with the same name \"Test\"\r\n # Restart Bamboo\r\n # Visit *Bamboo Administration >> Linked Repositories*, no repository called \"Test\" will show\r\n\r\n(!) Sometimes this doesn't work. We believe it has to do with the order that the repositories come back from the database/get loaded into cache. PostgreSQL order of results when there is no order by is dependent on execution plan, so results may vary.\r\n\r\nThe steps may need to be executed multiple times or you can get them to not show by switching the marked for deletion flag between the two linked repositories that share the same name, directly in the database and restart.\r\nh3. Expected Results\r\n\r\nRepository still shows in the list of repositories\r\nh3. Actual Results\r\n\r\nRepository does not show in the list of repositories.\r\nh3. Workaround\r\n\r\nThe repository can be found at {{$BAMBOO_BASE_URL/vcs/viewAllRepositories.action}}\r\n\r\nIf you know the ID, the edit screen can be directly accessed from {{$BAMBOO_BASE_URL/admin/editLinkedRepository.action?repositoryId=$REPOSITORY_ID}} and rename\u00a0this repository.",
      "summary": "Linked repository not showing in configureLinkedRepositories "
    }
  },
  {
    "key": "BAM-21260",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-07-28T12:14:54.000+0000",
      "created": "2021-03-04T01:03:48.000+0000",
      "description": "h3. Issue Summary\r\nWhile testing the webhook notification, it works for successful and failed builds but won't work for certain jobs failure and success\r\n\r\nh3. Steps to Reproduce\r\n* Setup webhook notification for sucessful jobs, failed jobs, jobs hung and change of responsibility\r\n\r\nh3. Expected Results\r\nNotifications are sent\r\n\r\nh3. Actual Results\r\nNotifications are not sent and Bamboo will show errors in the logs that global Bamboo variables don't exist when in fact they do.\r\n\r\nThe below exception is thrown in the atlassian-bamboo.log file:\r\n{noformat}\r\n2021-03-02 22:45:50,072 ERROR [http-nio-8085-exec-13] [WebhookTransport] [Webhook id=458754, name=Deploy webhook, uuid=eb6984d1-a111-4d67-8538-2141e0644f7c] Variable not found: deploy.version.name\r\n2021-03-02 22:45:50,097 ERROR [http-nio-8085-exec-13] [WebhookTransport] [Webhook id=458753, name=Build webhook, uuid=bb375e7d-b3f4-452d-96b9-4ccbc4770882] Variable not found: trigger.name.for.sentence\r\n2021-03-02 22:51:06,427 ERROR [http-nio-8085-exec-2] [WebhookTransport] [Webhook id=458754, name=Deploy webhook, uuid=495a5c9c-7d8d-494a-94fb-0639c1186fd4] Variable not found: agentId\r\n2021-03-02 22:51:06,442 ERROR [http-nio-8085-exec-2] [WebhookTransport] [Webhook id=458753, name=Build webhook, uuid=c535df8c-46ca-4cf6-8cb2-72382c955bfd] Variable not found: date.started\r\n2021-03-02 22:53:34,165 ERROR [http-nio-8085-exec-18] [WebhookTransport] [Webhook id=458754, name=Deploy webhook, uuid=223cef8e-5c28-4efd-a4ab-ca4da471e4d9] Variable not found: deploy.environment.id\r\n2021-03-02 22:53:34,191 ERROR [http-nio-8085-exec-18] [WebhookTransport] [Webhook id=458753, name=Build webhook, uuid=22e401d8-522a-48ed-987a-67fdb46a3ab1] Variable not found: trigger.reason\r\n{noformat}\r\n\r\nh3. Workaround\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Bamboo Webhook notification are inconsistent for successful jobs, failed jobs, jobs hung and change of responsibility"
    }
  },
  {
    "key": "BAM-21259",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-03-01T05:43:34.000+0000",
      "description": "Bamboo server.xml has the following:\r\n{code:java}\r\n<Valve className=\"org.apache.catalina.valves.AccessLogValve\" resolveHosts=\"false\"\r\n                   pattern=\"%a %t &quot;%m %U%q %H&quot; %s %b %D &quot;%{Referer}i&quot; &quot;%{User-Agent}i&quot;\"/>\r\n{code}\r\nAccording to Tomcat docs:\r\n{code:java}\r\nThis attribute resolveHosts is no longer supported. Use the connector attribute enableLookups instead.\r\n{code}\r\nUsing this attribute causes confusion because of a warning that'a printed in Bamboo logs:\r\n{code:java}\r\nWARNING: [SetPropertiesRule]{\u200b\u200b\u200b\u200b\u200b\u200bServer/Service/Engine/Valve}\u200b\u200b\u200b\u200b\u200b\u200b Setting property 'resolveHosts' to 'false' did not find a matching property.\r\n{code}\r\n\u00a0",
      "summary": "Remove resolveHosts attribute from AccessLogValve in server.xml"
    }
  },
  {
    "key": "BAM-21258",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-02-26T18:33:21.000+0000",
      "description": "h3. Issue Summary\r\n\r\nIf a user tries to create a new Jira issue for a failed test, this operation won't be allowed if Jira has a mandatory custom field, even if that field has a default value.\r\nh3. Steps to Reproduce\r\n\r\nIn order to reproduce, this bug requires Bamboo and Jira connected via an Application Link.\r\n\r\nFrom Jira:\r\n # Navigate to *Jira administration page -> Issues -> Custom Fields.\r\n # Create a new custom field of any type and add it the screens you'll be using (usually \"Default\").\r\n # Spot the new field on the list. Click *cog icon -> Configure*.\r\n # Click on \"Edit Default value\" and assign a default value to it.\r\n # On the left menu, open \"Field Configurations\", and open your configuration (usually \"Default Field Configuration\").\r\n # Find your new field. Click on \"Required\".\r\n\r\nFrom Bamboo:\r\n # Navigate to a build result with a failed test.\r\n # Click on *cog icon -> Create Jira Issue*.\r\n\r\nh3. Expected Results\r\n\r\nNormal workflow to create a Jira issue\r\nh3. Actual Results\r\n\r\nThe operation is not permitted since there are required fields.\r\n !unexpected image.png|thumbnail!\r\n{panel:bgColor=#f9ffff}\r\nEven though the field is required, it has a default value, meaning the workflow should not break.\r\n{panel}\r\nh3. Workaround\r\n\r\nThere is a way tu bypass this limitation. When the moment to create the issue comes:\r\n # From Jira, make the custom field \"Optional\" instead of \"Required\".\r\n # From Bamboo, in the failed test click *cog icon -> Create Jira Issue*.\r\n # From Jira, make the custom field \"Required\" instead of \"Optional\".\r\n # Proceed with the workflow normally.\r\n The issue will be created, the the custom field present, with its default value.\r\n\r\nh3. Workaround 2\r\n# From Jira, create the ticket manually.\r\n# From Bamboo, in the failed test click *cog icon -> Link with Jira Issue*.",
      "summary": "When a custom field is made mandatory in Jira, Bamboo cannot create a Jira issue for test result"
    }
  },
  {
    "key": "BAM-21257",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-02-25T18:32:18.000+0000",
      "description": "h3. Issue\r\nCurrent SSH/SCP task does not support FIPS-enabled servers\r\n\r\nh3. Suggestion\r\nWhen SSHJ is updated to support FIPS, update dependencies to that version",
      "summary": "Update SSH/SCP Task to be FIPS-compatible"
    }
  },
  {
    "key": "BAM-21256",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-03-05T11:41:21.000+0000",
      "created": "2021-02-25T11:40:51.000+0000",
      "description": "h3. Issue Summary\r\n\r\nWhen calling the REST endpoint {{/rest/api/latest/deploy/project/\\{deploymentProjectId\\}/specs}} as a user with Deployment project edit permissions, Bamboo will throw a 403 unauthorized error.\r\n\r\nOn the UI, just with Deployment project edit permissions you can export the project as Bamboo specs.\r\n\r\nh3. Steps to Reproduce\r\n # Call the REST endpoint {{/rest/api/latest/deploy/project/\\{deploymentProjectId\\}/specs}} using a user with Deployment project edit permissions\r\n\r\nh3. Expected Results\r\n\r\nThe specs are exported successfully through REST\r\n\r\nh3. Actual Results\r\n\r\nThe below message is thrown:\r\n{noformat}\r\n{\"message\":\"rest.deployment.repository.error.no.permission\",\"status-code\":403}% \r\n{noformat}\r\n\r\nh3. Workaround\r\n\r\nUse a user with global admin permissions",
      "summary": "REST endpoint /rest/api/latest/deploy/project/{deploymentProjectId}/specs checks for incorrect permissions"
    }
  },
  {
    "key": "BAM-21255",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-02-24T23:39:46.000+0000",
      "description": "h3. Issue Summary\r\nWhen editing a plan Webhooks notification without any changes, causes an error\r\nh3. Steps to Reproduce\r\n# Create a Webhooks notification in a deployment environment\r\n# Edit the notification\r\n# Make no change and save the notification\r\n\r\nh3. Expected Results\r\nThe notification setting pop up is closed\r\nh3. Actual Results\r\n\r\nPage throws an exception\r\n\r\n{noformat}\r\nAn unexpected error has occurred\r\norg.springframework.dao.DataIntegrityViolationException: could not execute batch; SQL [insert into NOTIFICATIONS (RECIPIENT_TYPE, RECIPIENT, NOTIFICATION_SET, CONDITION_KEY, CONDITION_DATA, NOTIFICATION_RULE_ID) values (?, ?, ?, ?, ?, ?)]; constraint [notifications_unique]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute batch\r\n\tat org.springframework.orm.hibernate5.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:245)\r\n\tat org.springframework.orm.hibernate5.HibernateTransactionManager.convertHibernateAccessException(HibernateTransactionManager.java:802)\r\n\tat org.springframework.orm.hibernate5.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:638)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:746)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:714)\r\n\tat sun.reflect.GeneratedMethodAccessor254.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:205)\r\n\tat com.sun.proxy.$Proxy115.commit(Unknown Source)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:534)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:305)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)\r\n\tat com.sun.proxy.$Proxy212.replaceNotification(Unknown Source)\r\n...\r\nCaused by: java.sql.BatchUpdateException: Batch entry 0 insert into NOTIFICATIONS (RECIPIENT_TYPE, RECIPIENT, NOTIFICATION_SET, CONDITION_KEY, CONDITION_DATA, NOTIFICATION_RULE_ID) values ('com.atlassian.bamboo.plugin.system.notifications:recipient.webhook', 'd2da5014-ca25-4bc3-a077-9f490359030f|https://webhook.site/446a8f1e-55ce-4bb3-8987-9dfbe6288a34', 655363, 'bamboo.deployments:deploymentStartedFinished', '', 819213) was aborted: ERROR: duplicate key value violates unique constraint \"notifications_unique\"\r\n  Detail: Key (recipient_type, recipient, notification_set, condition_key, condition_data)=(com.atlassian.bamboo.plugin.system.notifications:recipient.webhook, d2da5014-ca25-4bc3-a077-9f490359030f|https://webhook.site/446a8f1e-55ce-4bb3-8987-9dfbe6288a34, 655363, bamboo.deployments:deploymentStartedFinished, ) already exists.  Call getNextException to see other errors in the batch.\r\n\tat org.postgresql.jdbc.BatchResultHandler.handleError(BatchResultHandler.java:159)\r\n\tat org.postgresql.core.ResultHandlerDelegate.handleError(ResultHandlerDelegate.java:50)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2268)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:510)\r\n\tat org.postgresql.jdbc.PgStatement.internalExecuteBatch(PgStatement.java:851)\r\n\tat org.postgresql.jdbc.PgStatement.executeBatch(PgStatement.java:874)\r\n\tat org.postgresql.jdbc.PgPreparedStatement.executeBatch(PgPreparedStatement.java:1563)\r\n\tat com.zaxxer.hikari.pool.ProxyStatement.executeBatch(ProxyStatement.java:128)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeBatch(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchingBatch.performExecution(BatchingBatch.java:121)\r\n\t... 305 more\r\nCaused by: org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint \"notifications_unique\"\r\n  Detail: Key (recipient_type, recipient, notification_set, condition_key, condition_data)=(com.atlassian.bamboo.plugin.system.notifications:recipient.webhook, d2da5014-ca25-4bc3-a077-9f490359030f|https://webhook.site/446a8f1e-55ce-4bb3-8987-9dfbe6288a34, 655363, bamboo.deployments:deploymentStartedFinished, ) already exists.\r\n{noformat}\r\n\r\n\r\n\r\nh3. Workaround\r\n\r\nIgnore the error.",
      "summary": "Edit and save deployment environment notification (Webhooks) fails"
    }
  },
  {
    "key": "BAM-21254",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-02-24T18:12:39.000+0000",
      "description": "h3. Problem Definition\r\nCurrently Bamboo has a maximum length of 4000 character for variables values:\r\n{code}\r\nERROR [FieldErrorUsageVerifier] CreateGlobalVariable: unreported field errors: variable : [Length exceeds 4000 characters]\r\n{code}\r\n\r\nh3. Suggested Solution\r\n\r\nRemove this limitation or increase the maximum length of variables values.",
      "summary": "Remove/Increase maximum length of variables"
    }
  },
  {
    "key": "BAM-21253",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-02-24T15:20:03.000+0000",
      "description": "h3. Problem Definition\r\n\r\nWhen a branch has the same name of a tag Bamboo checks out the tag instead of the branch HEAD. Here's an example from the _\"Source Code Checkout_\" task when we're building a branch named *develop* that contains a tag *develop*:\r\n\r\n{noformat}\r\n2021-02-24 10:40:55,854 DEBUG [19-BAM::Default Agent::Agent:pool-39-thread-1] [GitCommandProcessor] Running in /var/atlassian/application-data/bamboo/xml-data/build-dir/BB-TEST0-JOB1: [/usr/bin/git log -1 --encoding=UTF-8 --format=%H HEAD]\r\n2021-02-24 10:40:55,854 DEBUG [19-BAM::Default Agent::Agent:pool-39-thread-1] [GitCommandBuilder] {GIT_SSH_VARIANT=ssh, SSH_ASKPASS=/bin/echo}\r\n2021-02-24 10:40:55,875 DEBUG [19-BAM::Default Agent::Agent:pool-39-thread-1] [NativeGitOperationHelper] CacheStats{hitCount=29, missCount=46, loadSuccessCount=31, loadExceptionCount=0, totalLoadTime=18752541500, evictionCount=11}\r\n2021-02-24 10:40:55,877 DEBUG [19-BAM::Default Agent::Agent:pool-39-thread-1] [GitCommandProcessor] Running in /var/atlassian/application-data/bamboo/xml-data/build-dir/_git-repositories-cache/76d1c9cdafeac85625bd969f9fbbf9c0bab05e42: [/usr/bin/git fetch ssh://010b738c-5856-4d22-b7ff-ec4cc696dc84@127.0.0.1:39831/at/test.git +refs/heads/develop:refs/heads/develop --update-head-ok]\r\n2021-02-24 10:40:55,878 DEBUG [19-BAM::Default Agent::Agent:pool-39-thread-1] [GitCommandBuilder] {GIT_SSH_VARIANT=ssh, SSH_ASKPASS=/bin/echo, GIT_SSH=/opt/atlassian/bamboo/temp/bamboo-ssh.9900a68e.sh}\r\n2021-02-24 10:40:56,252 DEBUG [19-BAM::Default Agent::Agent:pool-39-thread-1] [GitCommandProcessor] Running in /var/atlassian/application-data/bamboo/xml-data/build-dir/_git-repositories-cache/76d1c9cdafeac85625bd969f9fbbf9c0bab05e42: [/usr/bin/git log -1 --encoding=UTF-8 --format=%H 1af99a713cffb484a80ccc72c5a5a42a21e92066]\r\n2021-02-24 10:40:56,253 DEBUG [19-BAM::Default Agent::Agent:pool-39-thread-1] [GitCommandBuilder] {GIT_SSH_VARIANT=ssh, SSH_ASKPASS=/bin/echo}\r\n2021-02-24 10:40:56,296 DEBUG [19-BAM::Default Agent::Agent:pool-39-thread-1] [GitCommandProcessor] Running in /var/atlassian/application-data/bamboo/xml-data/build-dir/BB-TEST0-JOB1: [/usr/bin/git clone /var/atlassian/application-data/bamboo/xml-data/build-dir/_git-repositories-cache/76d1c9cdafeac85625bd969f9fbbf9c0bab05e42 --shared --no-checkout '-c filter.lfs.smudge=' '-c filter.lfs.required=false' /var/atlassian/application-data/bamboo/xml-data/build-dir/BB-TEST0-JOB1]\r\n2021-02-24 10:40:56,297 DEBUG [19-BAM::Default Agent::Agent:pool-39-thread-1] [GitCommandBuilder] {GIT_SSH_VARIANT=ssh, SSH_ASKPASS=/bin/echo}\r\n2021-02-24 10:40:56,925 DEBUG [19-BAM::Default Agent::Agent:pool-39-thread-1] [GitCommandProcessor] Running in /var/atlassian/application-data/bamboo/xml-data/build-dir/BB-TEST0-JOB1: [/usr/bin/git show-ref develop]\r\n2021-02-24 10:40:56,925 DEBUG [19-BAM::Default Agent::Agent:pool-39-thread-1] [GitCommandBuilder] {GIT_SSH_VARIANT=ssh, SSH_ASKPASS=/bin/echo}\r\n2021-02-24 10:40:56,958 DEBUG [19-BAM::Default Agent::Agent:pool-39-thread-1] [GitCommandProcessor] --- Full output: ---\r\n\r\n2021-02-24 10:40:56,958 DEBUG [19-BAM::Default Agent::Agent:pool-39-thread-1] [GitCommandProcessor] 1af99a713cffb484a80ccc72c5a5a42a21e92066 refs/remotes/origin/develop\r\n2021-02-24 10:40:56,959 DEBUG [19-BAM::Default Agent::Agent:pool-39-thread-1] [GitCommandProcessor] d74dd3aea3967734e7b4222c9807f0c30e8fed95 refs/tags/develop\r\n2021-02-24 10:40:56,959 DEBUG [19-BAM::Default Agent::Agent:pool-39-thread-1] [GitCommandProcessor] --- End of output: ---\r\n\r\n2021-02-24 10:40:56,960 DEBUG [19-BAM::Default Agent::Agent:pool-39-thread-1] [GitCommandProcessor] Running in /var/atlassian/application-data/bamboo/xml-data/build-dir/BB-TEST0-JOB1: [/usr/bin/git checkout -f develop]\r\n2021-02-24 10:40:56,961 DEBUG [19-BAM::Default Agent::Agent:pool-39-thread-1] [GitCommandBuilder] {GIT_SSH_VARIANT=ssh, SSH_ASKPASS=/bin/echo, GIT_LFS_SKIP_SMUDGE=1}\r\n2021-02-24 10:40:57,075 DEBUG [19-BAM::Default Agent::Agent:pool-39-thread-1] [GitCommandProcessor] Running in /var/atlassian/application-data/bamboo/xml-data/build-dir/BB-TEST0-JOB1: [/usr/bin/git remote set-url origin file:///var/atlassian/application-data/bamboo/xml-data/build-dir/_git-repositories-cache/76d1c9cdafeac85625bd969f9fbbf9c0bab05e42]\r\n2021-02-24 10:40:57,075 DEBUG [19-BAM::Default Agent::Agent:pool-39-thread-1] [GitCommandBuilder] {GIT_SSH_VARIANT=ssh, SSH_ASKPASS=/bin/echo}\r\n2021-02-24 10:40:57,095 INFO [19-BAM::Default Agent::Agent:pool-39-thread-1] [VcsCheckoutTask] BB-TEST0-JOB1-7: Updated source code to revision: 1af99a713cffb484a80ccc72c5a5a42a21e92066\r\n{noformat}\r\n\r\n* The branch is at {{1af99a713cffb484a80ccc72c5a5a42a21e92066}}.\r\n* Th tag is a couple of commits behind at {{d74dd3aea3967734e7b4222c9807f0c30e8fed95}}.\r\n\r\nDespite the fact that Bamboo is reporting the source code was updated to {{1af99a713cffb484a80ccc72c5a5a42a21e92066}} it was in fact updated to the tag at {{d74dd3aea3967734e7b4222c9807f0c30e8fed95}}. This is what I see when I visit the working directory and run *git log*:\r\n\r\n{noformat}\r\ncommit 5d4812893705667d05d111797bb1b292b5649192 (HEAD, tag: develop)\r\nAuthor: Bruno Rosa <#####@atlassian.com>\r\nDate:   Thu Jan 14 10:23:42 2021 +0100\r\n...\r\n{noformat}\r\n\r\nh3. Suggested Solution\r\n\r\nThis happens because the _\"Source Code Checkout\"_ task is running {{/usr/bin/git checkout -f develop}} and git returns the tag instead of the branch. It would be nice if we could force the checkout to happen for the branch when the names match. As you can see from the log snippet above we're running {{/usr/bin/git show-ref develop}} before checking out code so we know what reference we could use to get the branch instead of the tag. We could've triggered the following instead:\r\n\r\n{noformat}\r\ngit checkout -f refs/remotes/origin/develop\r\n{noformat}\r\n \r\nh3. Workaround \r\n\r\n# Delete the *tag*.\r\n# Access the *Bamboo admin > Build resources > Repository settings* and delete the repository cache.\r\n# Clean up the [working directory|https://confluence.atlassian.com/bamboo/locating-important-directories-and-files-289277247.html] of the job.\r\n#* The best way to achieve this is to check the _\"Clean working directory after each build\"_  option inside the job configuration under the *Other* tab. Trigger at least one build with that option turned ON after the repository cache was removed to force a clean git clone/ checkout.\r\n\r\nThis should be enough to prevent Bamboo from checking out the tag and start checking out the branch (HEAD).\r\n\r\nh3. Notes\r\n\r\nAvoid branches and tags with the same name. They are essentially the same thing: pointers to a commit -- with the exception that branch pointers advance as we make commits while tags remain static.",
      "summary": "Checkout branch instead of tag when their names match"
    }
  },
  {
    "key": "BAM-21252",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-07-30T13:38:28.000+0000",
      "created": "2021-02-24T09:18:15.000+0000",
      "description": "h3. Issue Summary\r\n\r\nThe description of the Git and Mercurial caches inside the *Bamboo admin > Build resources > Repository settings* page are showing HTML tags.\r\nh3. Steps to Reproduce\r\n # Access the *Bamboo admin > Build resources > Repository settings* page.\r\n\r\nh3. Expected Results\r\n\r\nThe messages inside that page should not display HTML tags.\r\nh3. Actual Results\r\n\r\nThe following HTML tag is present in the text under both Git and Mercurial sections:\r\n{noformat}\r\n<br />\r\n{noformat}\r\nHere's an example taken from the page:\r\n{quote}Git caches can be configured to reside both on the server and remote agents.{color:#FF0000}<br />{color}The list below contains information about server-side caches only, but delete operation schedules deletion of respective cache directories on available remote agents, if so configured.\r\n{quote}\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Description of Git and Mercurial caches inside the Repository settings page are showing HTML tags"
    }
  },
  {
    "key": "BAM-21251",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-02-24T09:08:57.000+0000",
      "created": "2021-02-23T20:08:22.000+0000",
      "description": "Reintroduce the support for command task in Docker Runner environment with a warning message informing that Bamboo cannot validate if the command is present in the docker image. ",
      "summary": "Allow command task to run in in Docker Runner"
    }
  },
  {
    "key": "BAM-21250",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-02-19T09:09:21.000+0000",
      "description": "h3. Problem Definition\r\n\r\nWhen using Bitbucket Cloud webhooks to trigger build plans it is required in Bamboo to whitelist the Atlassian outgoing IP addresses documented [here|https://confluence.atlassian.com/cloud/database-and-ip-information-744721662.html#AtlassiancloudIPrangesanddomains-OutgoingConnections].\r\n\r\nHowever, those IP addresses can be modified by Atlassian without further notice which would cause Bamboo customers to have their triggers disabled until the IP ranges get updated.\r\n\r\nh3. Suggested Solution\r\n\r\nReceive a notification either through Bamboo UI or directly to the plan admins if they have Bitbucket Cloud webhook triggers configured in Bamboo and any changes on the Atlassian outgoing IPs happen. \r\n\r\nh3. Workaround\r\n\r\nA possible workaround would be to watch the page by logging in with your Atlassian account and clicking on the _Watch_ button at the top right.",
      "summary": "Get notified in Bamboo when the Atlassian IP addresses used by Bitbucket Cloud to send webhooks change"
    }
  },
  {
    "key": "BAM-21248",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-12-08T14:43:36.000+0000",
      "created": "2021-02-18T15:08:32.000+0000",
      "description": "h3. Issue Summary\r\n\r\nPlan's average build duration stored in the plans cache is not recalculated after the plan execution\r\nh3. Steps to Reproduce\r\n # Create a plan with a script task with eg. _sleep 10_. Make sure it's not executed yet\r\n # Immediately go to plan summary page. The average duration in the plan statistics should be displayed as '<1s'\r\n # Execute the plan\r\n # Return to the plan summary page\r\n\r\nh3. Expected Results\r\n\r\nAverage build duration is updated and is now 10 seconds\r\nh3. Actual Results\r\n\r\nAverage build duration is not updated and is still\u00a0<1s'\r\nh3. Workaround\r\n\r\nModify plan's configuration (eg. change plan's description) to force full reload of the plan in the plan cache.\u00a0",
      "summary": "Average build duration  is not recalculated after plan execution"
    }
  },
  {
    "key": "BAM-21247",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-02-18T12:36:59.000+0000",
      "description": "h3. Problem Definition\r\nCurrently under *<Project> >> Project settings >>* is a menu item on the right named \"Application Links\", this is visible to the project admins but these admins are unable to configure the application links from this place.\r\n\r\nh3. Suggested Solution\r\nMake the <<Application Links>> from <Project> >> Project settings >> visible only to Bamboo admins and not to project admins to avoid confusion for the project admin users.\r\n\r\nh3. Workaround\r\nNone",
      "summary": "Hide the Application Links from <Project> >> Project settings >> Application Links panel for non-bamboo admins"
    }
  },
  {
    "key": "BAM-21246",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-04-20T19:14:26.000+0000",
      "created": "2021-02-17T08:07:57.000+0000",
      "description": "h3. Issue Summary\r\n\r\nBamboo's email service fails to authenticate (or rather, attempts to authenticate when no user/pass has been specified) after upgrading the library atlassian-mail. This behavior was observed with MS Exchange.\r\nh3. Steps to Reproduce\r\n # Configure an email service using MS Exchange email server with no authentication (no user or pass configured in Bamboo)\r\n # Test connection\r\n\r\nh3. Expected Results\r\n\r\nConnection successful\r\nh3. Actual Results\r\n\r\nConnection will fail. In the logs you will see:\r\n{noformat}\r\n2021-02-05 10:48:58,275 WARN [mail-queue-processor] [EmailService] Uncaught exception while processing mail queue\r\ncom.atlassian.mail.MailException: javax.mail.AuthenticationFailedException: 535 5.7.3 Authentication unsuccessful\r\n\r\n\tat com.atlassian.mail.server.impl.SMTPMailServerImpl.sendWithMessageId(SMTPMailServerImpl.java:222)\r\n\tat com.atlassian.mail.server.impl.SMTPMailServerImpl.send(SMTPMailServerImpl.java:174)\r\n\tat com.atlassian.bamboo.mail.EmailService.sendEmailSynchronously(EmailService.java:115)\r\n\tat com.atlassian.bamboo.mail.EmailService$MailQueueProcessor.run(EmailService.java:67)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\nCaused by: javax.mail.AuthenticationFailedException: 535 5.7.3 Authentication unsuccessful\r\n\r\n\tat com.sun.mail.smtp.SMTPTransport$Authenticator.authenticate(SMTPTransport.java:892)\r\n\tat com.sun.mail.smtp.SMTPTransport.authenticate(SMTPTransport.java:814)\r\n\tat com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:728)\r\n\tat javax.mail.Service.connect(Service.java:366)\r\n\tat javax.mail.Service.connect(Service.java:246)\r\n\tat javax.mail.Service.connect(Service.java:267)\r\n\tat com.atlassian.mail.server.InternalAuthenticationContext.connectService(InternalAuthenticationContext.java:58)\r\n\tat com.atlassian.mail.server.impl.SMTPMailServerImpl.sendWithMessageId(SMTPMailServerImpl.java:194)\r\n\t... 4 more\r\n{noformat}\r\nh3. Workaround\r\n # Stop Bamboo.\r\n # In the folder <installation-directory>/atlassian-bamboo/WEB-INF/lib, backup and delete the file atlassian-mail-5.0.4.\r\n # Download\u00a0[^atlassian-mail-5.0.0.jar] and place it in that same folder.\r\n # Start Bamboo and configure your email service again.",
      "summary": "Upgrade of library atlassian-mail causes Bamboo to stop sending emails"
    }
  },
  {
    "key": "BAM-21245",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-07-28T12:14:53.000+0000",
      "created": "2021-02-16T08:25:34.000+0000",
      "description": "h3. Issue Summary\r\n\r\nAfter renaming a linked repository, builds of plan branches do not send build notifications to Bitbucket.\r\nh3. Steps to Reproduce\r\n # Create a linked BBS repo\r\n # Create a plan and plan branch with this repo\r\n # Run plan branch, find build notifications in BBS\r\n # Rename linked repo\r\n # Run plan branch again\r\n\r\nh3. Expected Results\r\n\r\nBuild notifications are sent to Bitbucket\r\nh3. Actual Results\r\n\r\nBuild notifications are not sent because:\r\n getRelevantChangesetIds(resultsSummary, filter)\r\n size = 0\r\n Bamboo log:\r\n{noformat}\r\n2021-02-10 10:16:47,606 INFO [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-2] [BitbucketServerBuildStatusUpdater] Sending build notification to Stash (build key: PPV-BSLAE71-16, repository: KL-Service prevo-pakt Respository (release/Dev))\r\n2021-02-10 10:16:47,606 WARN [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-2] [BitbucketServerBuildStatusUpdater] No build status updates have been sent to Stash (build key: PPV-BSLAE71-16, repository: KL-Service prevo-pakt Respository (release/Dev)). Is your application link configured properly?\r\n{noformat}\r\nh3. Workaround\r\n\r\nSave repository in *plan branch* settings. For the *default branch*, just re-saving the repo does not work. Deleting and adding the repo back does the trick.",
      "summary": "Renaming linked repository breaks sending build notifications to Bitbucket"
    }
  },
  {
    "key": "BAM-21244",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-03-05T11:41:34.000+0000",
      "created": "2021-02-15T15:49:53.000+0000",
      "description": "XSRF failure for GET REST requests for new users when \"Default Group Memberships:\" is enabled.\r\nh3. Issue Summary\r\n\r\nIf a value is defined to *Default Group Memberships:* GET requests to REST APIs will fail.\r\nh3. Steps to Reproduce\r\n # Hook Bamboo up to Crowd or LDAP\r\n # Ensure to use the Default Group Memberships option\r\n # Create a user in LDAP and add it to a Bamboo group\r\n # Perform a GET request to $BAMBOO_BASE_URL/rest/api/latest/result/PLAN_KEY\r\n\r\nh3. Expected Results\r\n\r\nRequest succeeds\r\nh3. Actual Results\r\n\r\nRequest fails with XSRF failure.\r\n\r\n\"Internal server error\" in the REST call response:\r\n{noformat}\r\ngabriel@labLDAP ~ % curl --user botuser:password http://bamboo:8085/rest/api/latest/result/PLAN-KEY\r\n\r\n<html>\r\n<head>\r\n    <title>Internal server error</title>\r\n    <meta name=\"decorator\" content=\"install\" />\r\n</head>\r\n\r\n<body>\r\n    <h1>Internal server error</h1>\r\n\r\n\r\n    <h4>Go to...</h4>\r\n    <ul>\r\n        <li><a href=\"/\">Site homepage</a></li>\r\n    </ul>\r\nA system error has occurred - our apologies!    <p>\r\nPlease create a problem report on our <b>support system</b> at <a href=\"https://support.atlassian.com/contact/\">https://support.atlassian.com</a> with the following information:    </p>\r\n    <ol class=\"standard\">\r\n        <li>a description of your problem and what you were doing at the time it occurred\r\n        <li>cut &amp; paste the error and system information found below\r\n        <li>attach the <strong>atlassian-bamboo.log</strong> log file found in your application home.\r\n    </ol>\r\nWe will respond as promptly as possible.<br/>Thank you!\r\n        <p>\r\n            <b>Version:</b> 7.2.2<br>\r\n            <b>Build:</b> 70209<br>\r\n            <b>Build Date:</b> 22 Jan 2021\r\n        </p>\r\n\r\n        <h4>Request information:</h4>\r\n        <ul class=\"standard\">\r\n            <li>Request URL: http://bamboo:8085/500.action</li>\r\n            <li>Scheme: http</li>\r\n            <li>Server: bamboo</li>\r\n            <li>Port: 8085</li>\r\n            <li>URI: /500.action</li>\r\n            <li>Context path: </li>\r\n            <li>Servlet path: /500.action</li>\r\n            <li>Path info: </li>\r\n            <li>Query string: </li>\r\n        </ul>\r\n\r\n        <p><b>Stack Trace:</b></p>\r\n        <pre>java.lang.NullPointerException\r\n\tat com.atlassian.bamboo.util.BambooHibernateUtils.getPropertyByName(BambooHibernateUtils.java:216)\r\n\tat com.atlassian.bamboo.hibernate.ReadOnlyGetMethodEnforcer.getInternalUserAttributeName(ReadOnlyGetMethodEnforcer.java:257)\r\n\tat com.atlassian.bamboo.hibernate.ReadOnlyGetMethodEnforcer.isEntityMutationAllowed(ReadOnlyGetMethodEnforcer.java:245)\r\n\tat com.atlassian.bamboo.hibernate.ReadOnlyGetMethodEnforcer.onFlushDirty(ReadOnlyGetMethodEnforcer.java:77)\r\n\tat org.springframework.orm.hibernate.support.ChainedInterceptorSupport.onFlushDirty(ChainedInterceptorSupport.java:104)\r\n\tat org.springframework.orm.hibernate.support.ChainedInterceptorSupport.onFlushDirty(ChainedInterceptorSupport.java:104)\r\n\tat org.hibernate.event.internal.DefaultFlushEntityEventListener.invokeInterceptor(DefaultFlushEntityEventListener.java:371)\r\n\tat org.hibernate.event.internal.DefaultFlushEntityEventListener.handleInterception(DefaultFlushEntityEventListener.java:348)\r\n\tat org.hibernate.event.internal.DefaultFlushEntityEventListener.scheduleUpdate(DefaultFlushEntityEventListener.java:299)\r\n\tat org.hibernate.event.internal.DefaultFlushEntityEventListener.onFlushEntity(DefaultFlushEntityEventListener.java:170)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.flushEntities(AbstractFlushingEventListener.java:232)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:92)\r\n(...)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:615)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:818)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1626)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n</pre>\r\n</body>\r\n</html\r\n{noformat}\r\nAn \"XSRF: A mutative operation was attempted on InternalUserAttribute within a non-mutative HTTP\" error is thrown in the atlassian-bamboo.log file:\r\n{noformat}\r\n2021-02-15 15:03:21,014 ERROR [http-nio-8085-exec-13] [AutoGroupAdderListener] Could not auto add user botuser to group bamboo-viewer, because the group is read only. User is authenticatingto directory LDAPserver from application crowd-embedded\r\n2021-02-15 15:03:21,018 ERROR [http-nio-8085-exec-13] [ReadOnlyGetMethodEnforcer] State mutation is not allowed\r\n2021-02-15 15:03:21,019 WARN [http-nio-8085-exec-13] [XsrfUtils] XSRF: A mutative operation was attempted on InternalUserAttribute within a non-mutative HTTP request: http://bamboo:8085/rest/api/latest/result/PROJ-PLAN : [null]->\r\n->[[com.atlassian.crowd.model.user.InternalUser@711df7d8[id=115507209,name=botuser,createdDate=2021-02-15 15:03:14.291,updatedDate=Mon Feb 15 15:03:21 GMT 2021,active=true,emailAddress=,firstName=NPM 3,lastName=Bot,displayName=NPM Bot 3,credential=com.atlassian.crowd.embedded.api.PasswordCredential@26e9f9e0[credential=********,encryptedCredential=true],lowerName=botuser,lowerEmailAddress=,lowerFirstName=npm 3,lowerLastName=bot,lowerDisplayName=npm bot 3,directoryId=115441665,externalId=2555fade-03ea-103b-919f-bdb0bf4f07c8], com.atlassian.crowd.model.directory.DirectoryImpl$HibernateProxy$SJIxzaTx@118cc2d1[lowerName=ldapserver,description=<null>,type=CONNECTOR,implementationClass=com.atlassian.crowd.directory.OpenLDAP,allowedOperations=[CREATE_GROUP, UPDATE_USER_ATTRIBUTE, UPDATE_GROUP, UPDATE_GROUP_ATTRIBUTE, DELETE_GROUP],attributes={ldap.basedn=dc=custom,dc=openldap,dc=com, ldap.user.filter=(objectclass=inetorgperson), ldap.user.username=cn, ldap.usermembership.use=false, ldap.password=********, com.atlassian.crowd.directory.sync.lastdurationms=80, autoAddGroups=bamboo-viewer, ldap.group.usernames=uniqueMember, crowd.sync.incremental.enabled=true, ldap.pagedresults.size=1000, ldap.read.timeout=120000, ldap.connection.timeout=10000, crowd.sync.group.membership.after.successful.user.auth.enabled=true, ldap.userdn=cn=admin,dc=custom,dc=openldap,dc=com, ldap.group.filter=(objectclass=groupOfUniqueNames), ldap.roles.disabled=true, ldap.external.id=entryUUID, ldap.url=ldap://ldap:389, ldap.usermembership.use.for.groups=false, ldap.pagedresults=false, ldap.user.password=userPassword, ldap.user.lastname=sn, ldap.group.name=cn, ldap.user.objectclass=inetorgperson, ldap.nestedgroups.disabled=true, directory.cache.synchronise.interval=3600, ldap.secure=false, ldap.referral=false, ldap.user.username.rdn=cn, com.atlassian.crowd.directory.sync.issynchronising=false, ldap.propogate.changes=false, ldap.pool.timeout=0, ldap.user.displayname=displayName, ldap.relaxed.dn.standardisation=true, com.atlassian.crowd.directory.sync.laststartsynctime=1613401394252, ldap.user.firstname=givenName, ldap.user.email=mail, ldap.user.group=memberOf, localUserStatusEnabled=false, ldap.user.encryption=sha, ldap.local.groups=true, ldap.group.description=description, configuration.change.timestamp=1613401031015, ldap.filter.expiredUsers=false, ldap.group.objectclass=groupOfUniqueNames, ldap.search.timelimit=60000}], autoGroupsAdded, true, true, null]]\r\n\r\n2021-02-15 15:03:21,020 ERROR [http-nio-8085-exec-13] [AutoGroupAdderListener] Could not call back resolver\r\ncom.atlassian.crowd.exception.OperationFailedException: java.lang.IllegalStateException: XSRF: A mutative operation was attempted on InternalUserAttribute within a non-mutative HTTP request: http://bamboo:8085/rest/api/latest/result/PROJ-PLAN : [null]->\r\n->[[com.atlassian.crowd.model.user.InternalUser@711df7d8[id=115507209,name=botuser,createdDate=2021-02-15 15:03:14.291,updatedDate=Mon Feb 15 15:03:21 GMT 2021,active=true,emailAddress=,firstName=NPM 3,lastName=Bot,displayName=NPM Bot 3,credential=com.atlassian.crowd.embedded.api.PasswordCredential@26e9f9e0[credential=********,encryptedCredential=true],lowerName=botuser,lowerEmailAddress=,lowerFirstName=npm 3,lowerLastName=bot,lowerDisplayName=npm bot 3,directoryId=115441665,externalId=2555fade-03ea-103b-919f-bdb0bf4f07c8], com.atlassian.crowd.model.directory.DirectoryImpl$HibernateProxy$SJIxzaTx@118cc2d1[lowerName=ldapserver,description=<null>,type=CONNECTOR,implementationClass=com.atlassian.crowd.directory.OpenLDAP,allowedOperations=[CREATE_GROUP, UPDATE_USER_ATTRIBUTE, UPDATE_GROUP, UPDATE_GROUP_ATTRIBUTE, DELETE_GROUP],attributes={ldap.basedn=dc=custom,dc=openldap,dc=com, ldap.user.filter=(objectclass=inetorgperson), ldap.user.username=cn, ldap.usermembership.use=false, ldap.password=********, com.atlassian.crowd.directory.sync.lastdurationms=80, autoAddGroups=bamboo-viewer, ldap.group.usernames=uniqueMember, crowd.sync.incremental.enabled=true, ldap.pagedresults.size=1000, ldap.read.timeout=120000, ldap.connection.timeout=10000, crowd.sync.group.membership.after.successful.user.auth.enabled=true, ldap.userdn=cn=admin,dc=custom,dc=openldap,dc=com, ldap.group.filter=(objectclass=groupOfUniqueNames), ldap.roles.disabled=true, ldap.external.id=entryUUID, ldap.url=ldap://ldap:389, ldap.usermembership.use.for.groups=false, ldap.pagedresults=false, ldap.user.password=userPassword, ldap.user.lastname=sn, ldap.group.name=cn, ldap.user.objectclass=inetorgperson, ldap.nestedgroups.disabled=true, directory.cache.synchronise.interval=3600, ldap.secure=false, ldap.referral=false, ldap.user.username.rdn=cn, com.atlassian.crowd.directory.sync.issynchronising=false, ldap.propogate.changes=false, ldap.pool.timeout=0, ldap.user.displayname=displayName, ldap.relaxed.dn.standardisation=true, com.atlassian.crowd.directory.sync.laststartsynctime=1613401394252, ldap.user.firstname=givenName, ldap.user.email=mail, ldap.user.group=memberOf, localUserStatusEnabled=false, ldap.user.encryption=sha, ldap.local.groups=true, ldap.group.description=description, configuration.change.timestamp=1613401031015, ldap.filter.expiredUsers=false, ldap.group.objectclass=groupOfUniqueNames, ldap.search.timelimit=60000}], autoGroupsAdded, true, true, null]]\r\n\r\n\tat com.atlassian.crowd.directory.AbstractInternalDirectory.storeUserAttributes(AbstractInternalDirectory.java:664)\r\n\tat com.atlassian.crowd.directory.DbCachingRemoteDirectory.storeUserAttributes(DbCachingRemoteDirectory.java:616)\r\n\tat com.atlassian.crowd.manager.directory.DirectoryManagerGeneric.storeUserAttributes(DirectoryManagerGeneric.java:433)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)\r\n(...)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)\r\n\tat org.apache.catalina.valves.StuckThreadDetectionValve.invoke(StuckThreadDetectionValve.java:206)\r\n\tat org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:690)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:615)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:818)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1626)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\nCaused by: java.lang.IllegalStateException: XSRF: A mutative operation was attempted on InternalUserAttribute within a non-mutative HTTP request: http://bamboo:8085/rest/api/latest/result/PROJ-PLAN : [null]->\r\n->[[com.atlassian.crowd.model.user.InternalUser@711df7d8[id=115507209,name=botuser,createdDate=2021-02-15 15:03:14.291,updatedDate=Mon Feb 15 15:03:21 GMT 2021,active=true,emailAddress=,firstName=NPM 3,lastName=Bot,displayName=NPM Bot 3,credential=com.atlassian.crowd.embedded.api.PasswordCredential@26e9f9e0[credential=********,encryptedCredential=true],lowerName=botuser,lowerEmailAddress=,lowerFirstName=npm 3,lowerLastName=bot,lowerDisplayName=npm bot 3,directoryId=115441665,externalId=2555fade-03ea-103b-919f-bdb0bf4f07c8], com.atlassian.crowd.model.directory.DirectoryImpl$HibernateProxy$SJIxzaTx@118cc2d1[lowerName=ldapserver,description=<null>,type=CONNECTOR,implementationClass=com.atlassian.crowd.directory.OpenLDAP,allowedOperations=[CREATE_GROUP, UPDATE_USER_ATTRIBUTE, UPDATE_GROUP, UPDATE_GROUP_ATTRIBUTE, DELETE_GROUP],attributes={ldap.basedn=dc=custom,dc=openldap,dc=com, ldap.user.filter=(objectclass=inetorgperson), ldap.user.username=cn, ldap.usermembership.use=false, ldap.password=********, com.atlassian.crowd.directory.sync.lastdurationms=80, autoAddGroups=bamboo-viewer, ldap.group.usernames=uniqueMember, crowd.sync.incremental.enabled=true, ldap.pagedresults.size=1000, ldap.read.timeout=120000, ldap.connection.timeout=10000, crowd.sync.group.membership.after.successful.user.auth.enabled=true, ldap.userdn=cn=admin,dc=custom,dc=openldap,dc=com, ldap.group.filter=(objectclass=groupOfUniqueNames), ldap.roles.disabled=true, ldap.external.id=entryUUID, ldap.url=ldap://ldap:389, ldap.usermembership.use.for.groups=false, ldap.pagedresults=false, ldap.user.password=userPassword, ldap.user.lastname=sn, ldap.group.name=cn, ldap.user.objectclass=inetorgperson, ldap.nestedgroups.disabled=true, directory.cache.synchronise.interval=3600, ldap.secure=false, ldap.referral=false, ldap.user.username.rdn=cn, com.atlassian.crowd.directory.sync.issynchronising=false, ldap.propogate.changes=false, ldap.pool.timeout=0, ldap.user.displayname=displayName, ldap.relaxed.dn.standardisation=true, com.atlassian.crowd.directory.sync.laststartsynctime=1613401394252, ldap.user.firstname=givenName, ldap.user.email=mail, ldap.user.group=memberOf, localUserStatusEnabled=false, ldap.user.encryption=sha, ldap.local.groups=true, ldap.group.description=description, configuration.change.timestamp=1613401031015, ldap.filter.expiredUsers=false, ldap.group.objectclass=groupOfUniqueNames, ldap.search.timelimit=60000}], autoGroupsAdded, true, true, null]]\r\n\r\n\tat com.atlassian.bamboo.utils.XsrfUtils.fail(XsrfUtils.java:27)\r\n\tat com.atlassian.bamboo.hibernate.ReadOnlyGetMethodEnforcer.fail(ReadOnlyGetMethodEnforcer.java:129)\r\n\tat com.atlassian.bamboo.hibernate.ReadOnlyGetMethodEnforcer.failIfStateMutationNotAllowed(ReadOnlyGetMethodEnforcer.java:106)\r\n\tat com.atlassian.bamboo.hibernate.ReadOnlyGetMethodEnforcer.onSave(ReadOnlyGetMethodEnforcer.java:90)\r\n\tat org.springframework.orm.hibernate.support.ChainedInterceptorSupport.onSave(ChainedInterceptorSupport.java:118)\r\n\tat com.atlassian.bamboo.persister.OidGenerationInterceptor.onSave(OidGenerationInterceptor.java:46)\r\n\tat org.springframework.orm.hibernate.support.ChainedInterceptorSupport.onSave(ChainedInterceptorSupport.java:118)\r\n(...)\r\n\tat com.atlassian.crowd.util.persistence.hibernate.InternalDirectoryEntityHibernateDao.lambda$storeAttributes$5(InternalDirectoryEntityHibernateDao.java:117)\r\n\tat java.util.ArrayList.forEach(ArrayList.java:1259)\r\n\tat com.atlassian.crowd.util.persistence.hibernate.InternalDirectoryEntityHibernateDao.storeAttributes(InternalDirectoryEntityHibernateDao.java:117)\r\n\tat com.atlassian.crowd.dao.user.UserDAOHibernate.storeAttributes(UserDAOHibernate.java:451)\r\n\tat com.atlassian.crowd.directory.AbstractInternalDirectory.storeUserAttributes(AbstractInternalDirectory.java:662)\r\n\t... 160 more\r\n{noformat}\r\nh3. Workaround\r\n * Make sure to log in using the UI for new users before using them to authenticate REST calls.\r\n\r\nOR\r\n * Not use the *Default Group Memberships:* option.",
      "summary": "XSRF failure on GET REST requests for new users when Default Group Memberships is enabled "
    }
  },
  {
    "key": "BAM-21243",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-03-05T11:41:40.000+0000",
      "created": "2021-02-15T13:21:53.000+0000",
      "description": "h3. Issue Summary\r\n\r\nBranch detection is throwing errors when plan variables are used inside linked repositories.\r\n\r\nh3. Steps to Reproduce\r\n# Go to the *Bamboo admin > Linked repositories* page.\r\n# Create a new *Git* repository.\r\n# Point the repository URL to a valid repository but replace the repository name at the end with a variable. For example:\r\n{noformat}\r\nhttps://github.com/github/${bamboo.repositoryName}\r\n{noformat}\r\n# Click *Create > Create plan* at the top of the page.\r\n# Create a new plan and associate it with the repository you just created on step 3.\r\n# No need to create any other tasks other than the default _\"Source Code Checkout configuration\"_ task.\r\n# Once the plan has been created access the *Plan Configuration > Branches* page.\r\n# Check the _\"When new branch in repository is created\"_ and *save* the configuration.\r\n# Now access the *Plan Configuration > Variables* page.\r\n# Create a new variable:\r\n||Variable name||Value||\r\n|repositoryName|docs.git|\r\n# By default branch detection runs every *300* seconds \u2013 the branch detection interval can be changed inside the *Bamboo admin > System > General configuration* page.\r\n# Create a new branch in your repository.\r\n\r\nh3. Expected Results\r\n\r\nNext time branch detection kicks in it will pick up the branch that was created inside the repository and successfully create a plan branch for it.\r\n\r\nh3. Actual Results\r\n\r\n*While branch detection is capable to identify the new branch and create a plan branch for it* Bamboo will start throwing errors reporting it wasn't able to access the repository:\r\n{noformat:title=atlassian-bamboo.log}\r\n2021-02-15 13:15:15,802 ERROR [11-BranchDetectionBackgroundThread:pool-18-thread-1] [BranchDetectionServiceImpl] Error while detecting branches for repository 8683525\r\ncom.atlassian.bamboo.plugins.git.GitCommandException: command [/usr/bin/git -c credential.helper= -c 'credential.helper=store --file=/opt/atlassian/bamboo/temp/gitCredentials6619614630518480174.tmp' ls-remote https://github.com/github/${bamboo.repositoryName}] failed with code 128. Working directory was [/opt/atlassian/bamboo/temp]., stderr:\r\nfatal: unable to access 'https://github.com/github/${bamboo.repositoryName}/': The requested URL returned error: 400\r\n\tat com.atlassian.bamboo.plugins.git.GitCommandProcessor.runCommand(GitCommandProcessor.java:728)\r\n\tat com.atlassian.bamboo.plugins.git.GitCommandProcessor.getRemoteRefs(GitCommandProcessor.java:499)\r\n\tat com.atlassian.bamboo.plugins.git.NativeGitOperationHelper.lambda$getRemoteRefs$1(NativeGitOperationHelper.java:605)\r\n\tat com.atlassian.bamboo.util.CallableResultCache$1.load(CallableResultCache.java:39)\r\n\tat com.atlassian.bamboo.util.CallableResultCache$1.load(CallableResultCache.java:35)\r\n\tat com.google.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3528)\r\n\tat com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2277)\r\n\tat com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2154)\r\n\tat com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2044)\r\n\tat com.google.common.cache.LocalCache.get(LocalCache.java:3952)\r\n\tat com.google.common.cache.LocalCache.getOrLoad(LocalCache.java:3974)\r\n\tat com.google.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:4958)\r\n\tat com.atlassian.bamboo.utils.collections.AlwaysInvalidatingCacheDecorator.get(AlwaysInvalidatingCacheDecorator.java:65)\r\n\tat com.atlassian.bamboo.utils.collections.AlwaysInvalidatingCacheDecorator.getUnchecked(AlwaysInvalidatingCacheDecorator.java:126)\r\n\tat com.atlassian.bamboo.util.CallableResultCache.call(CallableResultCache.java:142)\r\n\tat com.atlassian.bamboo.plugins.git.NativeGitOperationHelper.getRemoteRefs(NativeGitOperationHelper.java:613)\r\n\tat com.atlassian.bamboo.plugins.git.NativeGitOperationHelper.getOpenBranches(NativeGitOperationHelper.java:588)\r\n\tat com.atlassian.bamboo.plugins.git.v2.GitBranchDetector.getOpenBranches(GitBranchDetector.java:46)\r\n\tat com.atlassian.bamboo.repository.RepositoryCachingFacadeImpl$1.getOpenBranchesCaller(RepositoryCachingFacadeImpl.java:65)\r\n\tat com.atlassian.bamboo.repository.RepositoryCachingFacadeImpl$1.call(RepositoryCachingFacadeImpl.java:54)\r\n\tat com.atlassian.bamboo.repository.RepositoryCachingFacadeImpl$1.call(RepositoryCachingFacadeImpl.java:49)\r\n\tat com.atlassian.bamboo.util.CallableResultCache$1.load(CallableResultCache.java:39)\r\n\tat com.atlassian.bamboo.util.CallableResultCache$1.load(CallableResultCache.java:35)\r\n\tat com.google.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3528)\r\n\tat com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2277)\r\n\tat com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2154)\r\n\tat com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2044)\r\n\tat com.google.common.cache.LocalCache.get(LocalCache.java:3952)\r\n\tat com.google.common.cache.LocalCache.getOrLoad(LocalCache.java:3974)\r\n\tat com.google.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:4958)\r\n\tat com.atlassian.bamboo.utils.collections.AlwaysInvalidatingCacheDecorator.get(AlwaysInvalidatingCacheDecorator.java:65)\r\n\tat com.atlassian.bamboo.utils.collections.AlwaysInvalidatingCacheDecorator.getUnchecked(AlwaysInvalidatingCacheDecorator.java:126)\r\n\tat com.atlassian.bamboo.util.CallableResultCache.call(CallableResultCache.java:142)\r\n\tat com.atlassian.bamboo.repository.RepositoryCachingFacadeImpl.getOpenBranches(RepositoryCachingFacadeImpl.java:72)\r\n\tat com.atlassian.bamboo.plan.branch.BranchDetectionServiceImpl.lambda$getOpenBranches$0(BranchDetectionServiceImpl.java:288)\r\n\tat com.atlassian.bamboo.variable.CustomVariableContextImpl.withVariableSubstitutor(CustomVariableContextImpl.java:118)\r\n\tat com.atlassian.bamboo.plan.branch.BranchDetectionServiceImpl.getOpenBranches(BranchDetectionServiceImpl.java:287)\r\n\tat com.atlassian.bamboo.plan.branch.BranchDetectionServiceImpl.detectBranchesForChains(BranchDetectionServiceImpl.java:406)\r\n\tat com.atlassian.bamboo.plan.branch.BranchDetectionServiceImpl.detectBranchesForChains(BranchDetectionServiceImpl.java:372)\r\n\tat com.atlassian.bamboo.plan.branch.BranchDetectionServiceImpl$BranchDetector$1.lambda$run$0(BranchDetectionServiceImpl.java:145)\r\n        ...\r\n{noformat}\r\nThis is rather misleading as one may think branches will no longer be automatically created.\r\n\r\nh3. Workaround\r\n\r\nIn order to make the errors go away you can:\r\n # Go to the *Bamboo admin > Global variables* page.\r\n # Add a new global variable with the same name and value as the one previously created inside the plan:\r\n||Variable name||Value||\r\n|repositoryName|docs.git|\r\n # Bamboo will now replace the variable and branch detection will resume running.",
      "summary": "Branch detection doesn't handle plan variables inside linked repository configuration"
    }
  },
  {
    "key": "BAM-21242",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-07-26T12:13:31.000+0000",
      "created": "2021-02-15T12:40:00.000+0000",
      "description": "h3. Issue Summary\r\n\r\nWhen using tag triggers, Bamboo will log a NullPpointerExceltion if there is data inconsistency in the Database. \r\n\r\nh3. Steps to Reproduce\r\nThis is a way to reproduce the error:\r\n# Create a repository with 1 tag: release1.\r\n# Push the tag to Bitbucket Server.\r\n# Create a Linked Repository in Bamboo and link it to a plan.\r\n# Add a tag trigger to that plan. \r\n# Wait for it to detect the initial tag:\r\n# Delete that tag and create + push a new one: \r\n\r\nh3. Expected Results\r\nNo errors displayed in logs. \r\n\r\nh3. Actual Results\r\n\r\nThe following error is displayed in the server logs:\r\n{noformat}\r\n2021-02-15 15:39:46,076 ERROR [26-TagDetectionBackgroundThread:pool-49-thread-1] [TagDetectionServiceImpl] An exception occurred when trying to read and handle tags from repository\r\njava.lang.NullPointerException\r\n\tat com.atlassian.bamboo.tag.service.NewTagsDetector.compareAndReturnNewTags(NewTagsDetector.java:39)\r\n\tat com.atlassian.bamboo.tag.service.TagDetectionServiceImpl.detectTagsForRepository(TagDetectionServiceImpl.java:107)\r\n\tat com.atlassian.bamboo.tag.service.TagDetectorThread$1.run(TagDetectorThread.java:26)\r\n\tat com.atlassian.bamboo.plugin.BambooPluginUtils$Runnable.call(BambooPluginUtils.java:108)\r\n\tat com.atlassian.bamboo.plugin.BambooPluginUtils$Runnable.call(BambooPluginUtils.java:101)\r\n\tat com.atlassian.bamboo.plugin.BambooPluginUtils.callUnsafeCode(BambooPluginUtils.java:55)\r\n\tat com.atlassian.bamboo.tag.service.TagDetectorThread.run(TagDetectorThread.java:50)\r\n\tat com.atlassian.bamboo.utils.BambooRunnables$1.run(BambooRunnables.java:48)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper.runWith(ImpersonationHelper.java:26)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper.runWithSystemAuthority(ImpersonationHelper.java:17)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper$1.run(ImpersonationHelper.java:41)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n{noformat}\r\n\r\n(i) There are a variety of scenarios to get a NullPointerException, realted to the content of the table *VCS_TAG*, regardless of whether the trigger works or not. \r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Tag trigger shows an NullPointerException in logs"
    }
  },
  {
    "key": "BAM-21241",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-02-15T11:12:07.000+0000",
      "description": "h3. Issue Summary\r\n\r\nBamboo won't display failed tests in the *Tests* tab.\r\nh3. Steps to Reproduce\r\n # Create a plan with tests that will fail.\r\n # Run the plan more than 25 times, making sure the builds having failing tests in each result.\r\n\r\nh3. Expected Results\r\n\r\nIn the *Tests* tab, failed tests will be displayed correctly.\r\nh3. Actual Results\r\n\r\nIn this example, my plan has 34 results, and has been failing since result 6\r\n\r\nWhen selected the option \"Showing last 25 builds\", no results are displayed:\r\n\r\n!image-2021-02-15-12-11-07-329.png|width=888,height=296!\r\n\r\nWhen selecting any other option: it will display the test, but mentioning that the most recent build with the error is #6, which is the first build (that happened 28 builds ago), not the most recent one:\r\n\r\n!image-2021-02-15-12-11-37-890.png|width=899,height=331!\r\n\r\nNo errors are displayed in the logs.\r\nh3. Workaround\r\n\r\nLooking into each build, you will be able to find the correct information.",
      "summary": "Bamboo tests are not displayed properly in the \"Tests\" summary tab "
    }
  },
  {
    "key": "BAM-21240",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-02-15T05:07:02.000+0000",
      "description": "h3. Issue Summary\r\nOutbound proxy with authentication doesn't work for remote agents.\r\n\r\nh3. Steps to Reproduce\r\n# Setup a squid proxy that requires basic auth.\r\n# Configure {{wrapper.conf}} to route via outbound proxy:\r\n{code}\r\nwrapper.java.additional.3=-Dhttp.proxyHost=localhost\r\nwrapper.java.additional.4=-Dhttp.proxyPort=3128\r\nwrapper.java.additional.5=-Dhttp.proxyUser=user\r\nwrapper.java.additional.6=-Dhttp.proxyPassword=pass\r\n{code}\r\n\r\nh3. Expected Results\r\nAgent HTTP client responds to Proxy-Authenticate challenge with Proxy-Authorization details.\r\n\r\nChallenge response expectations for proxies detailed here: https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication\r\n\r\nh3. Actual Results\r\nAgent does not send *Proxy-Authorization* header initially which is aligned with no preemptive authentication, but it then however does not send another request with *Proxy-Authorization* after it receives 407 challenge from the proxy with *Proxy-Authenticate* details for modes of authentication.\r\n\r\nExchange observed in atlassian-bamboo-agent.log file:\r\n{noformat}\r\nINFO   | jvm 1    | 2021/02/03 12:15:01 | 2021-02-03 12:15:01,209 DEBUG [WrapperSimpleAppMain] [wire] http-outgoing-0 >> \"CONNECT url HTTP/1.1[\\r][\\n]\"\r\nINFO   | jvm 1    | 2021/02/03 12:15:01 | 2021-02-03 12:15:01,209 DEBUG [WrapperSimpleAppMain] [wire] http-outgoing-0 >> \"Host: url[\\r][\\n]\"\r\nINFO   | jvm 1    | 2021/02/03 12:15:01 | 2021-02-03 12:15:01,209 DEBUG [WrapperSimpleAppMain] [wire] http-outgoing-0 >> \"User-Agent: Apache-HttpClient/4.5.5 (Java/1.8.0_201)[\\r][\\n]\"\r\nINFO   | jvm 1    | 2021/02/03 12:15:01 | 2021-02-03 12:15:01,209 DEBUG [WrapperSimpleAppMain] [wire] http-outgoing-0 >> \"[\\r][\\n]\"\r\nINFO   | jvm 1    | 2021/02/03 12:15:01 | 2021-02-03 12:15:01,235 DEBUG [WrapperSimpleAppMain] [wire] http-outgoing-0 << \"HTTP/1.1 407 authenticationrequired[\\r][\\n]\"\r\nINFO   | jvm 1    | 2021/02/03 12:15:01 | 2021-02-03 12:15:01,235 DEBUG [WrapperSimpleAppMain] [wire] http-outgoing-0 << \"Via: ...[\\r][\\n]\"\r\nINFO   | jvm 1    | 2021/02/03 12:15:01 | 2021-02-03 12:15:01,236 DEBUG [WrapperSimpleAppMain] [wire] http-outgoing-0 << \"Date: Wed, 03 Feb 2021 02:16:47 GMT[\\r][\\n]\"\r\nINFO   | jvm 1    | 2021/02/03 12:15:01 | 2021-02-03 12:15:01,236 DEBUG [WrapperSimpleAppMain] [wire] http-outgoing-0 << \"Content-Type: text/html[\\r][\\n]\"\r\nINFO   | jvm 1    | 2021/02/03 12:15:01 | 2021-02-03 12:15:01,236 DEBUG [WrapperSimpleAppMain] [wire] http-outgoing-0 << \"Cache-Control: no-cache[\\r][\\n]\"\r\nINFO   | jvm 1    | 2021/02/03 12:15:01 | 2021-02-03 12:15:01,236 DEBUG [WrapperSimpleAppMain] [wire] http-outgoing-0 << \"Content-Length: 2106[\\r][\\n]\"\r\nINFO   | jvm 1    | 2021/02/03 12:15:01 | 2021-02-03 12:15:01,236 DEBUG [WrapperSimpleAppMain] [wire] http-outgoing-0 << \"X-Frame-Options: deny[\\r][\\n]\"\r\nINFO   | jvm 1    | 2021/02/03 12:15:01 | 2021-02-03 12:15:01,236 DEBUG [WrapperSimpleAppMain] [wire] http-outgoing-0 << \"Proxy-Connection: Keep-Alive[\\r][\\n]\"\r\nINFO   | jvm 1    | 2021/02/03 12:15:01 | 2021-02-03 12:15:01,236 DEBUG [WrapperSimpleAppMain] [wire] http-outgoing-0 << \"Proxy-Authenticate: NTLM[\\r][\\n]\"\r\nINFO   | jvm 1    | 2021/02/03 12:15:01 | 2021-02-03 12:15:01,236 DEBUG [WrapperSimpleAppMain] [wire] http-outgoing-0 << \"Proxy-Authenticate: Basic realm=\"...\"[\\r][\\n]\"\r\n...\r\nINFO   | jvm 1    | 2021/02/03 12:15:01 | 2021-02-03 12:15:01,267 ERROR [WrapperSimpleAppMain] [AgentContext] An error has occurred when requesting fingerprint: HTTP/1.1 407 authenticationrequired\r\nINFO   | jvm 1    | 2021/02/03 12:15:01 | Exiting due to fatal exception.\r\nINFO   | jvm 1    | 2021/02/03 12:15:01 | com.atlassian.bamboo.agent.bootstrap.RemoteAgentHttpException: Response: [HTTP/1.1 407 authenticationrequired] received after fingerprint request.\r\nINFO   | jvm 1    | 2021/02/03 12:15:01 | \tat com.atlassian.bamboo.agent.bootstrap.AgentContext.initFingerprint(AgentContext.java:156)\r\nINFO   | jvm 1    | 2021/02/03 12:15:01 | \tat com.atlassian.bamboo.agent.bootstrap.AgentContext.initServerSession(AgentContext.java:101)\r\nINFO   | jvm 1    | 2021/02/03 12:15:01 | \tat com.atlassian.bamboo.agent.bootstrap.AgentContext.run(AgentContext.java:88)\r\nINFO   | jvm 1    | 2021/02/03 12:15:01 | \tat com.atlassian.bamboo.agent.bootstrap.AgentBootstrap.run(AgentBootstrap.java:112)\r\nINFO   | jvm 1    | 2021/02/03 12:15:01 | \tat com.atlassian.bamboo.agent.bootstrap.AgentBootstrap.main(AgentBootstrap.java:51)\r\nINFO   | jvm 1    | 2021/02/03 12:15:01 | \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\nINFO   | jvm 1    | 2021/02/03 12:15:01 | \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\nINFO   | jvm 1    | 2021/02/03 12:15:01 | \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\nINFO   | jvm 1    | 2021/02/03 12:15:01 | \tat java.lang.reflect.Method.invoke(Method.java:498)\r\nINFO   | jvm 1    | 2021/02/03 12:15:01 | \tat org.tanukisoftware.wrapper.WrapperSimpleApp.run(WrapperSimpleApp.java:349)\r\nINFO   | jvm 1    | 2021/02/03 12:15:01 | \tat java.lang.Thread.run(Thread.java:748)\r\n{noformat}\r\n\r\nThis is where it ends. \r\n\r\nh3. Workaround\r\nNo workaround known workaround available. Need to connect directly to your Bamboo Server without using an outbound proxy, or use a proxy that does not require authentication.",
      "summary": "Outbound proxy with authentication doesn't work for remote agents"
    }
  },
  {
    "key": "BAM-21239",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-02-15T01:05:14.000+0000",
      "description": "h3. Problem Definition\r\n\r\nBitbucket Cloud IP addresses for outbound connections are subject to a non infrequent amount of IP range changes which can make managing the Remote Trigger whitelisting problematic for administrators who have a large amount of plans that require updating.\r\n\r\nh3. Suggested Solution\r\n\r\nCentralized / shared location where this whitelist can be maintained would be ideal. This could be then selected on a remote trigger. Or allow global variable usage in this field.\r\n\r\nh3. Workaround\r\n\r\nh6. Option 1 \r\nUse the a *Bamboo Administration >> Bulk Actions* with the *Replace Triggers* action to replace triggers on all plans with the an updated version with the new set of IP addresses.\r\n\r\nh6. Option 2\r\nUtilize Bamboo Specs and source the list from a single location/variable for all your plans.\r\n\r\nh6. Option 3\r\nAllow all for the Remote Trigger whitelist and manage security / whitelisting instead at your firewall.",
      "summary": "Centralized location to whitelist Bitbucket Cloud IP addresses for Remote Trigger"
    }
  },
  {
    "key": "BAM-21238",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-02-14T19:59:01.000+0000",
      "created": "2021-02-14T07:49:43.000+0000",
      "description": "If agent doesn't have Command capability agent should use Server Command path definition to run Command with Docker Runner",
      "summary": "Use server path for Command capability for Docker Runner"
    }
  },
  {
    "key": "BAM-21237",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-07-30T13:38:34.000+0000",
      "created": "2021-02-12T21:20:15.000+0000",
      "description": "h3. Problem Definition\r\nThere're new instance types added at AWS Java SDK which yet not supported by Bamboo:T4G, M5DN, M5N, M5ZN, M6G, M6GD, MAC1, C5A, C5AD, C6G, C6GD, C6GN, D3, D3EN, G4AD, INF1, P4D, R5B, R5DN, R5N, R6G, R6GD, U18TB1, U24TB1\r\n\r\nh3. Suggested Solution\r\nAdd support for these new types \r\n\r\nh3. Workaround \r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available\r\n",
      "summary": "Add support for new AWS instance types"
    }
  },
  {
    "key": "BAM-21236",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-02-12T10:47:38.000+0000",
      "description": "h3. Issue Summary\r\n\r\nBamboo return 401 Unauthorized for any REST request containing a cookie with an invalid JSESSIONID. That also affects endpoints which allow anonymous requests. These requests don't get registered in the access logs and don't respect the Accept-content headers.\r\n\r\nh3. Steps to Reproduce\r\n\r\n # Craft a REST request that contains a dummy JSESSIONID cookie.\r\n # Make a request to an endpoint (/rest/api/latest for example)\r\n\r\nh3. Expected Results\r\n\r\nA response from the endpoint with the proper answer.\r\n\r\nIf it is a standard unauthorized request to Bamboo, that the request get registered into access logs and it to return the correct content according to Accept-content. If an anonymous allowed endpoint, the expected result is the standard response.\r\n\r\nh3. Actual Results\r\n\r\nThe response returns 401 Unauthorized with a HTML response in the body:\r\n\r\n{noformat}\r\n<!doctype html><html lang=\"en\"><head><title>HTTP Status 401 \u2013 Unauthorized</title><style type=\"text/css\">body {font-family:Tahoma,Arial,sans-serif;} h, h, h, b {color:white;background-color:#525D76;} h {font-size:22px;} h {font-size:16px;} h {font-size:14px;} p {font-size:12px;} a {color:black;} .line {height:1px;background-color:#525D76;border:none;}</style></head><body><h>HTTP Status 401 \u2013 Unauthorized</h><hr class=\"line\" /><p><b>Type</b> Status Report</p><p><b>Message</b> os_authType was &#39;any&#39; and an invalid cookie was sent.</p><p><b>Description</b> The request has not been applied because it lacks valid authentication credentials for the target resource.</p><hr class=\"line\" /><h>Apache Tomcat/8.5.57</h></body></html>{noformat}\r\n\r\nThese requests are not registered into the access logs.\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available.",
      "summary": "REST request with invalid JSESSIONID returns 401"
    }
  },
  {
    "key": "BAM-21234",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-07-30T13:38:39.000+0000",
      "created": "2021-02-10T10:08:37.000+0000",
      "description": "If agent doesn't have Command capability agent should use Server Command path definition to run Command with Docker Runner",
      "summary": "Use server path for Command capability for Docker Runner"
    }
  },
  {
    "key": "BAM-21233",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-07-30T13:34:34.000+0000",
      "created": "2021-02-08T14:45:47.000+0000",
      "description": "h3. Issue Summary\r\n\r\n[https://hub.docker.com/r/atlassian/bamboo-agent-base]\u00a0says it's possible to pass VM_OPTS to the container and they will be respected by the agent. However, even though this env var is passed to java -jar command, props are set for the wrapper JVM, not the agent. As a result, the only way to override props is to mount an entire conf file, which isn't a very container friendly approach\r\nh3. Steps to Reproduce\r\n # Run agent container according to docs on DockerHub, with -e VM_OPTS\r\n\r\nh3. Expected Results\r\n\r\nXmx or Xms are overridden for the agent process.\r\nh3. Actual Results\r\n\r\nJava opts are overridden for the wrapper JVM only and the agent starts with default hardcoded settings.\r\nh3. Workaround\r\n\r\nOne can build own image, and execute bamboo-agent.jar rather than installer jar (use now wrapper).\r\nFROM atlassian/bamboo-agent-base:latest\r\nADD bamboo-agent-7.2.2.jar\r\n\u00a0\r\nthen\r\ndocker build -t registry/repo:tag .\r\n\u00a0\r\nAdd 2 envs to docker run to override jar location and pass VM_OPTS\r\n-e AGENT_JAR=/home/bamboo/bamboo-agent-7.2.2.jar -e VM_OPTS=\"-Xmx2048m\"\r\nAlternatively, since an entire Bamboo home is mounted, one can edit the file, but that's not a great solution in a containers world.\r\n\r\nLooking at [https://hub.docker.com/r/dchevell/bamboo-base-agent]\u00a0and what's happening there, it turns out conf file is generated from a template and some props are substituted with env var values.",
      "summary": "Overriding xmx and xms is not possible via env vars in atlassian/bamboo-agent-base"
    }
  },
  {
    "key": "BAM-21232",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-02-08T07:39:18.000+0000",
      "description": "h3. Issue Summary\r\n\r\nAfter https://jira.atlassian.com/browse/BAM-19760\u00a0has been implemented,\u00a0\u00a0[https://confluence.atlassian.com/bamboo/bamboo-permissions-369296034.html]\u00a0was not updated.\r\nh3. Steps to Reproduce\r\n # Follow documentation on restricted admins and their roles\r\n\r\nh3. Expected Results\r\n\r\nDocs should mentioned that only admins can dedicate agents since 7.1.0\r\nh3. Actual Results\r\n\r\nThe page still says:\r\n{noformat}\r\nRestricted admin - perform some administration operations and view all plans in Bamboo; this role excludes permissions that directly influence the host on which the Bamboo Server is located, however, all plan administration and agent administration is available to restricted admins\r\n{noformat}\r\nh3. Workaround\r\n\r\nNone",
      "summary": "Update docs on restricted admin privileges"
    }
  },
  {
    "key": "BAM-21231",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-02-05T23:44:18.000+0000",
      "description": "Currently, it is possible to create a Bitbucket/SVN tag from Bamboo but not be able to check out a specific tag in a task.\r\n\r\nWe know we can create a plan branch for particular tags but that is static and we need a dynamic approach that using a variable.\r\n\r\nIf there is no task for this, do you have any proposal or workaround for it?",
      "summary": "Ability to checkout tags in a version control repository such as GIT"
    }
  },
  {
    "key": "BAM-21230",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-02-05T16:03:31.000+0000",
      "description": "h3. Problem\r\n\r\nCurrently it is not possible to create, update, delete or get plan triggers through REST API.\r\nh3. Suggested solution\r\n\r\nAdd a GET, POST, PUT and DELETE REST API endpoints for plan triggers.",
      "summary": "Add Bamboo REST endpoints for plan triggers"
    }
  },
  {
    "key": "BAM-21227",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-02-03T11:50:00.000+0000",
      "description": "h3. Problem Definition\r\n\r\nUnlike the Bamboo server logs, the build logs cannot be customized.\r\n\r\nh3. Suggested Solution\r\n\r\nAdd time zone to the build log or give users the option to add it themselves.\r\n\r\n * Here's an example of a line from a build log:\r\n{noformat}\r\nsimple\t03-Feb-2021 11:30:00\tUpdating source code to revision: 2f44d55fd219287901ae4b6816f881ff1f2ff411\r\n{noformat}\r\n* It would be nice to modify the output and include the time zone:\r\n{noformat}\r\nsimple\t03-Feb-2021 11:30:00+0000\tUpdating source code to revision: 2f44d55fd219287901ae4b6816f881ff1f2ff411\r\n{noformat}\r\n\r\nh3. Workaround\r\n\r\nN/A",
      "summary": "Add time zone to build logs"
    }
  },
  {
    "key": "BAM-21226",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-02-03T15:54:00.000+0000",
      "created": "2021-02-01T22:01:46.000+0000",
      "description": "Occassionally when bamboo agents are created, they are not ready for production on certain branches.\u00a0 There should be a way to dedicate certain plan branches to a remote agent.",
      "summary": "Allow plan branches to be dedicated to remote agents"
    }
  },
  {
    "key": "BAM-21225",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-02-16T11:56:06.000+0000",
      "created": "2021-01-28T16:32:10.000+0000",
      "description": "h3. Issue Summary\r\n\r\nThe [Deleting a job's current working files|https://confluence.atlassian.com/display/BAMBOO/Deleting+a+job%27s+current+working+files] documentation page is quite outdated and contains some information that need fixing.\r\n\r\nh3. Steps to Reproduce\r\n\r\nA few examples of mistakes/ outdated information:\r\n\r\n# There's no *Files* tab. It should be the *Other* tab.\r\n# We can probably remove the bullet points under section/ step 2. That's no longer valid.\r\n# The *Delete all build files* option should be renamed to *Clean working directory after each build*.\r\n\r\nh3. Expected Results\r\n\r\nHave an up-to-date documentation page.\r\n\r\nh3. Actual Results\r\n\r\nN/A\r\n\r\nh3. Workaround\r\n\r\nN/A",
      "summary": "Update \"Deleting a job's current working files\" documentation page"
    }
  },
  {
    "key": "BAM-21224",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-07-30T13:38:45.000+0000",
      "created": "2021-01-28T09:14:53.000+0000",
      "description": "h3. Issue Summary\r\n\r\nSave and Cancel buttons aren't hidden after an overridden variable is edited in a branch\r\nh3. Steps to Reproduce\r\n # Declare variable in the default branch\r\n # Override this variable in a plan branch\r\n # Edit this variable\r\n # Click \"Save\"\r\n\r\nh3. Expected Results\r\n\r\nVariable is saved, Save and Cancel buttons are hidden\r\nh3. Actual Results\r\n\r\n\u00a0\r\n\r\nSave and Cancel buttons are still there, which is confusing since it's not clear whether or not the variable sas been saved.\r\nh3. Workaround\r\n\r\nNo workarounds",
      "summary": "Save and Cancel buttons aren't hidden after an overridden variable is edited in a branch"
    }
  },
  {
    "key": "BAM-21222",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-02-02T14:40:25.000+0000",
      "created": "2021-01-27T10:53:02.000+0000",
      "description": "h3. Issue Summary\r\n\r\nWhen using more than one stage, with jobs creating artifacts, and environments being triggered by those stages, the release will fail.\r\n\r\nh3. Steps to Reproduce\r\n# Create a plan with two stages. \r\n# In each stage, have a job that generates one artifact. Let's call these:\r\n## StageA -> JobA -> ArtifactA\r\n## StageB -> JobB -> ArtifactB\r\n# Create a Deployment project with two environments. Each environment will have a trigger after a successful stage, and will download each artifact. Looking like this:\r\n## EnvironmentA -> Triggered by StageA -> Downloading ArtifactA\r\n## EnvironmentB -> Triggered by StageB -> Downloading ArtifactB\r\n\r\nFinally, run the plan. \r\n\r\nh3. Expected Results\r\n\r\nBoth environments will be deployed. \r\n\r\nh3. Actual Results\r\n\r\nThe second environment will fail to deploy. In the deployment log we will see\r\n{noformat}\r\nUnable to download artifact Non required shared artifact: [ArtifactB], pattern: [artifactB.txt]\r\n{noformat}\r\nIn the server logs you will see:\r\n{noformat}\r\n[AbstractArtifactManager] Unable to retrieve artifact ArtifactB for PR-PL7-11 via com.atlassian.bamboo.build.artifact.ServerLocalArtifactHandler@140386c6 No matching Artifact found.\r\n{noformat}\r\n\r\nh3. Workaround\r\n\r\nManually deploy EnvironmentB again, creating a new release. ",
      "summary": "Environment fails to download artifact from a stage when release is being promoted"
    }
  },
  {
    "key": "BAM-21221",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-09-28T13:33:52.000+0000",
      "created": "2021-01-26T15:45:53.000+0000",
      "description": "h3. Current text\r\nCurrently, [GitHub|https://confluence.atlassian.com/bamboo/github-289277001.html] documentation shows the following:\r\n{panel:bgColor=#FFFAE6|borderColor=#FFF0B3}(!) To learn how to create personal access tokens (PAT) in GitHub, see [GitHub documentation|https://docs.github.com/en/github/authenticating-to-github/creating-a-personal-access-token].  Your PAT must have access to the following scopes to work with Bamboo: *public_repo*, *read:org*, *read:user*, *repo:status*.\r\n{panel}\r\nFor users who have Private repositories (personal or organization) we will need to add another permission.\r\n\r\nh3. Suggested text\r\n{panel:bgColor=#FFFAE6|borderColor=#FFF0B3}(!) To learn how to create personal access tokens (PAT) in GitHub, see [GitHub documentation|https://docs.github.com/en/github/authenticating-to-github/creating-a-personal-access-token].  Your PAT must have access to the following [scopes|https://docs.github.com/en/developers/apps/scopes-for-oauth-apps#available-scopes] to work with Bamboo: *public_repo*, *read:org*, *read:user*, *repo:status*. If you have private repositories, please use the following:  *repo*, *read:org*, *read:user*. \r\n{panel}\r\n",
      "summary": "Show GH Personal Access Token requirements for private repos"
    }
  },
  {
    "key": "BAM-21220",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-07-30T13:34:40.000+0000",
      "created": "2021-01-26T13:59:49.000+0000",
      "description": "h3. Issue Summary\r\nWhen trying to use the bulk action \"Update SVN credentials\", it doesn't work as expected. The results step shows the following:\r\n !Screen Shot 2021-01-26 at 10.53.57.png|thumbnail! \r\nh3. Steps to Reproduce\r\n Go to {{Cog Icon > Overview > Bulk Action}} and try to update SVN credentials.\r\n\r\nh3. Expected Results\r\nCredentials are updated.\r\nh3. Actual Results\r\nIn the UI, we see it failed and the message mentioned in the Issue Summary.\r\nAnd following ERROR message in atlassian-bamboo.log:\r\n{noformat}\r\n2021-01-26 10:57:00,363 ERROR [http-nio-8721-exec-5] [FieldErrorUsageVerifier] EditRepository: unreported field errors: repository.svn.repositoryRoot : [Please specify the build''s Subversion repository.]\r\n{noformat}\r\n\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available.",
      "summary": "Bulk action to update SVN credentials doesn't work"
    }
  },
  {
    "key": "BAM-21219",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-12-14T15:39:03.000+0000",
      "created": "2021-01-25T21:41:03.000+0000",
      "description": "h3. Issue Summary\r\n\r\nIncorrect warning messages causes warning level log messages to be logged upon start-up.\r\nh3. Steps to Reproduce\r\n # Start Bamboo\r\n\r\nh3. Expected Results\r\n\r\nNo warning messages.\r\nh3. Actual Results\r\n\r\nThe warning messages are shown in the atlassian-bamboo.log file:\r\n{noformat}\r\nWARN [performSetupDatabaseConnectionBackgroundThread] [cache] HHH90001006: Missing cache[default-update-timestamps-region] was created on-the-fly. The created cache will use a provider-specific default configuration: make sure you defined one. You can disable this warning by setting 'hibernate.cache.ehcache.missing_cache_strategy' to 'create'.\r\nWARN [performSetupDatabaseConnectionBackgroundThread] [cache] HHH90001006: Missing cache[default-query-results-region] was created on-the-fly. The created cache will use a provider-specific default configuration: make sure you defined one. You can disable this warning by setting 'hibernate.cache.ehcache.missing_cache_strategy' to 'create'.\r\nWARN [performSetupDatabaseConnectionBackgroundThread] [cache] HHH90001006: Missing cache[bucket.user.propertyset.BucketPropertySetItem] was created on-the-fly. The created cache will use a provider-specific default configuration: make sure you defined one. You can disable this warning by setting 'hibernate.cache.ehcache.missing_cache_strategy' to 'create'.\r\n{noformat}\r\nh3. Workaround\r\n\r\nCurrently there's no workaround.",
      "summary": "Hibernate missing cache generates warning level log messages on start-up"
    }
  },
  {
    "key": "BAM-21218",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-01-25T17:46:22.000+0000",
      "description": "h3. Problem Definition\r\nBamboo's {{changeDetection}} endpoint does not accept payload data, so any webhook payload is stripped and can't be used in a build triggered by that endpoint.\r\n\r\nh3. Suggested Solution\r\nAdd the ability to send over additional information to the {{changeDetection}} endpoint in order to build with additional information.\r\n \r\nh3. Workaround \r\nThere is no guaranteed workaround at this time. One option for data validations would be to use git hooks to extract and test data.\r\n",
      "summary": "Add an option to accept body for changeDetection endpoint"
    }
  },
  {
    "key": "BAM-21217",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-01-25T07:36:11.000+0000",
      "description": "h3. Problem Definition\r\n* Currently Bamboo access logs cannot be customised in order to get the required fields visible based on requirements. There is lack of access log configuration flexibility. \r\n\r\nh3. Suggested Solution\r\nThere should be a way to externalise all the access log settings as currently there are few fields which are not visible without code changes as below:\r\n* request size and response size\r\n* Change the duration pattern by not having the ms unit at the end of the log line but just the number.\r\n\r\nh3. Workaround \r\nNone\r\n",
      "summary": "Externalise all log settings from source code into user-editable configuration"
    }
  },
  {
    "key": "BAM-21216",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-01-25T04:22:39.000+0000",
      "created": "2021-01-25T04:06:46.000+0000",
      "description": "This vulnerability allows unauthenticated remote attackers to inject code and XML as well as perform directory traversal via\u00a0\r\n * CVE-2017-1000487 - command injection\r\n\r\n * sonatype-2016-0398 - directory traversal\r\n\r\n * sonatype-2015-0173 - XML Injection\u00a0\r\n\r\nThe affected versions are before version 7.2.2, and before 8.0.0.\r\n\r\nIt's build time vulnerability for Bamboo plugin and Bamboo Specs code.\r\n\r\n\u00a0\r\n\r\n*Affected versions:*\r\n * version < 7.2.2\r\n\r\n*Fixed versions:*\r\n * 7.2.2\r\n * 8.0.0 \u00a0\r\n\r\nh3. Workaround\r\nh4. For Bamboo plugin code\r\n\r\nUse parent pom of version 6.1.2\r\n\r\n{code}\r\n<parent>\r\n    <groupId>com.atlassian.pom</groupId>\r\n    <artifactId>base-pom</artifactId>\r\n    <version>6.1.2</version>\r\n</parent>\r\n{code}\r\n\r\nh4. For Bamboo Specs Java project\r\nAdd these lines to pom.xml\r\n{code}\r\n<build>\r\n  <extensions>\r\n    <extension>\r\n      <groupId>org.apache.maven.wagon</groupId>\r\n      <artifactId>wagon-ssh-external</artifactId>\r\n      <version>3.4.2</version>\r\n    </extension>\r\n  </extensions>\r\n</build>\r\n{code}\r\n\u00a0",
      "summary": "Code Injection and Directory Traversal in plexus-utils"
    }
  },
  {
    "key": "BAM-21215",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-01-25T03:56:04.000+0000",
      "created": "2021-01-22T17:27:45.000+0000",
      "description": "Affected versions of Atlassian Bamboo allow an unauthenticated remote attacker to\u00a0view a stack trace that may reveal the path for the home directory in disk and if certain files exists on the\u00a0{{tmp}}\u00a0directory, via a Sensitive Data Exposure vulnerability in the /chart endpoint.\r\n\r\nThe affected versions are before version 7.2.2.\u00a0\r\n\r\n*Affected versions:*\r\n * version < 7.2.2\r\n\r\n*Fixed versions:*\r\n * 7.2.2\u00a0",
      "summary": "Accessing the URL /chart?filename=<file_name> exposes sensitive information - CVE-2021-26067"
    }
  },
  {
    "key": "BAM-21214",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-01-21T14:23:06.000+0000",
      "description": "h3. Current Situation\r\nFor both build plans and deployment projects the options for notifications is very limited. \r\n\r\nh3. Accepted solution\r\nAdd more notification types. These should have (but not excluded to):\r\n- For build plans:\r\n-- Successful build.\r\n-- Failed build.\r\n- For deployment projects:\r\n-- Successful deployment\r\n-- Failed deployment",
      "summary": "Add more notification types"
    }
  },
  {
    "key": "BAM-21213",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-01-20T14:55:37.000+0000",
      "description": "h3. Current Situation\r\nIf a user uses nested variables in webhook templates (in the payload section), the payload won't be able to format the payload correctly\r\n\r\nh3. Accepted solution\r\nImplement nested variables in Webhook templates. ",
      "summary": "Nested variables are still not compatible with Webhook templates"
    }
  },
  {
    "key": "BAM-21212",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-01-19T19:57:51.000+0000",
      "description": "h3. Issue Summary\r\n\r\nBamboo database contains duplicate indexes.\r\nh3. Steps to Reproduce\r\n # Install Bamboo and connect to any database (Oracle, PostgreSQL, MySQL or SQL Server)\r\n # Restart Bamboo\r\n\r\nh3. Expected Results\r\n\r\nThe database should not contain any duplicate indexes.\r\nh3. Actual Results\r\n\r\nYou can find duplicate indexes after restarting Bamboo. The duplicate indexes are:\r\n||Table||Indexes names||\r\n|AO_A0B856_WEBHOOK_EVENT|index_ao_a0b856_web110787824, fkix_a0b856_webhook_event_webhookid|\r\n|AO_7A45FB_AOTRACKING_RESULT|index_ao_7a45fb_aot1332136998, fkix_7a45fb_aotracking_result_linked_tracking_entry_id|\r\n|AO_A0B856_WEBHOOK_CONFIG|index_ao_a0b856_web1050270930, fkix_a0b856_webhook_config_webhookid|\r\n|AO_7A45FB_AOTRACKING_USER|index_ao_7a45fb_aot1861572280, fkix_7a45fb_aotracking_user_linked_tracking_entry_id|\r\nh3. Workaround\r\n\r\n# Stop Bamboo server\r\n# Backup Bamboo database for rollback pourposes\r\n# Run the SQL commands below against Bamboo database:\r\n{code:sql}\r\nDROP INDEX fkix_a0b856_webhook_event_webhookid;\r\nDROP INDEX fkix_7a45fb_aotracking_result_linked_tracking_entry_id;\r\nDROP INDEX fkix_a0b856_webhook_config_webhookid;\r\nDROP INDEX fkix_7a45fb_aotracking_user_linked_tracking_entry_id;\r\n{code}\r\n# Start Bamboo server",
      "summary": "Duplicate indexes on the database"
    }
  },
  {
    "key": "BAM-21211",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-01-18T09:22:36.000+0000",
      "description": "It would be nice to make Artifact download task optional, i.e. not fail the task if artifact itself is non-required.\r\n\r\nThe logic behind this is as follows: if artifact is non-required i.e. it's OK not to have it in build results, the task that downloads this artifact should also be optional, i.e. it should not fail the entire build.",
      "summary": "Make artifact download task inherit artifact required property"
    }
  },
  {
    "key": "BAM-21210",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-01-18T08:46:31.000+0000",
      "description": "If a job has artifact download task and the plan that is to produce the artifact never had a single successful build, the UI message is rather confusing, especially if there are multiple stages in the job. This can make a user think that Stage 1 has failed even though it's green:\u00a0\r\n\r\n!image-2021-01-18-10-36-31-474.png!\r\n\r\nThe only way to figure out what is going on is to check server logs:\r\n{code:java}\r\nCaused by: java.lang.IllegalArgumentException: Unable to find at least one successful result for plan: PROJ-ARTCaused by: java.lang.IllegalArgumentException: Unable to find at least one successful result for plan: PROJ-ART at com.atlassian.bamboo.plugins.artifact.ArtifactDownloaderRuntimeDataProvider.populateRuntimeTaskData(ArtifactDownloaderRuntimeDataProvider.java:110) at com.atlassian.bamboo.chains.ChainPluginSupportHelper.lambda$prepareRuntimeTaskData$0(ChainPluginSupportHelper.java:37)\r\n{code}\r\nThere are 2 problems here:\r\n # Misleading message. It'd be great to actually display the reason for not adding the build to the queue, i.e. say that no artifacts are available while the job has artifact download task\r\n # The job is stuck in Waiting to be built state, even if there's an artifact available (successful build of the job that produces an artifact). Perhaps, it may make sense to fail the entire build and state the reason to do so.",
      "summary": "Missing artifact: Better handle job execution with artifact download tasks"
    }
  },
  {
    "key": "BAM-21209",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-12-14T15:38:23.000+0000",
      "created": "2021-01-14T16:14:12.000+0000",
      "description": "In our legacy bamboo projects, we were using the manual job configuration (i.e. using the web interface in Bamboo). Now that we have switched to the [bamboo specs in yaml|https://docs.atlassian.com/bamboo-specs-docs/7.2.1/specs.html]which allows us to maintain our configurations under source control (Bitbucket cloud in our case), we are missing one option:\r\n\r\nThe Pattern Match Labelling seems to be missing (at least from the documentation) and \"empty\" in the job configuration (that is readonly from the web interface of course).\r\n\r\nDo you have documentation about this? Maybe it is already present? When will the feature or maybe Miscellaneous Plugin be availabe?\r\n\r\nYou could alternatively allow us to see the\r\nrelease-naming: next-version-name: section next to the build number since this is what we are using labels for (mostly) right now anyways.",
      "summary": "Bamboo Specs: Need a Miscellaneous Plugin for Pattern Match Labelling"
    }
  },
  {
    "key": "BAM-21207",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-01-13T23:18:43.000+0000",
      "description": "h3. Problem Definition\r\nCurrently there's no way to limit the amount of plan branches that can be created in a plan\r\nh3. Suggested Solution\r\nAdd an admin option to limit how many plan branches can be created per plan\r\nh4. Why this is important \r\nThis would prevent the users from generating unlimited number of plan branches and potentially causing a system crash with the number of builds being triggered automatically.\r\n\r\n",
      "summary": "As administrator I would like to be able to set a limit to the number of plan branches that can be created"
    }
  },
  {
    "key": "BAM-21206",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-01-13T14:50:00.000+0000",
      "description": "h3. Summary\r\n\r\nBamboo should notify users if the URL used to access the application is not matching the current Base URL setting.\r\nh3. Suggestion\r\n\r\nWe should add an alert in the UI similar to what we have in Bitbucket Server:\r\n\r\n!Screen Shot 2021-01-13 at 11.36.57-1.png!",
      "summary": "Base URL missmatch UI alert"
    }
  },
  {
    "key": "BAM-21205",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-01-13T06:18:22.000+0000",
      "description": "h3. Issue Summary\r\nVCS tasks do not work in deployments:\r\n* TAG\r\n* COMMIT\r\n* PUSH\r\n* BRANCH\r\n\r\nh3. Steps to Reproduce\r\n# Create a deployment project & environment\r\n# Add a *Repository Tag* task and select a repository from the dropdown\r\n# Create release\r\n\r\nh3. Expected Results\r\nTag is pushed to target repository\r\n\r\nh3. Actual Results\r\n\r\nThe below exception is thrown in the deployment log:\r\n{noformat}\r\n13-Jan-2021 06:14:47\tStarting task 'Repository Tag' of type 'com.atlassian.bamboo.plugins.vcs:task.vcs.tagging'\r\n13-Jan-2021 06:14:47\tError occurred while running Task '(4)' of type com.atlassian.bamboo.plugins.vcs:task.vcs.tagging.\r\n13-Jan-2021 06:14:47\tcom.atlassian.bamboo.task.TaskException: Repository id 5570562 is invalid. Please reselect from the configuration screen.\r\n13-Jan-2021 06:14:47\t        at com.atlassian.bamboo.utils.BambooPreconditions.checkThat(BambooPreconditions.java:29)\r\n13-Jan-2021 06:14:47\t        at com.atlassian.bamboo.plugins.vcs.task.VcsTagTask.execute(VcsTagTask.java:48)\r\n13-Jan-2021 06:14:47\t        at com.atlassian.bamboo.task.TaskExecutorImpl.lambda$executeTasks$3(TaskExecutorImpl.java:323)\r\n13-Jan-2021 06:14:47\t        at com.atlassian.bamboo.task.TaskExecutorImpl.executeTaskWithPrePostActions(TaskExecutorImpl.java:258)\r\n13-Jan-2021 06:14:47\t        at com.atlassian.bamboo.task.TaskExecutorImpl.executeTasks(TaskExecutorImpl.java:323)\r\n13-Jan-2021 06:14:47\t        at com.atlassian.bamboo.task.TaskExecutorImpl.execute(TaskExecutorImpl.java:118)\r\n13-Jan-2021 06:14:47\t        at com.atlassian.bamboo.build.pipeline.tasks.ExecuteBuildTask.call(ExecuteBuildTask.java:73)\r\n13-Jan-2021 06:14:47\t        at com.atlassian.bamboo.v2.build.agent.DefaultBuildAgent.executeBuildPhase(DefaultBuildAgent.java:190)\r\n13-Jan-2021 06:14:47\t        at com.atlassian.bamboo.v2.build.agent.DefaultBuildAgent.build(DefaultBuildAgent.java:162)\r\n13-Jan-2021 06:14:47\t        at com.atlassian.bamboo.v2.build.agent.BuildAgentControllerImpl.lambda$waitAndPerformBuild$0(BuildAgentControllerImpl.java:137)\r\n13-Jan-2021 06:14:47\t        at com.atlassian.bamboo.variable.CustomVariableContextImpl.withVariableSubstitutor(CustomVariableContextImpl.java:118)\r\n13-Jan-2021 06:14:47\t        at com.atlassian.bamboo.v2.build.agent.BuildAgentControllerImpl.waitAndPerformBuild(BuildAgentControllerImpl.java:130)\r\n13-Jan-2021 06:14:47\t        at com.atlassian.bamboo.v2.build.agent.DefaultBuildAgent.lambda$start$0(DefaultBuildAgent.java:110)\r\n13-Jan-2021 06:14:47\t        at com.atlassian.bamboo.utils.BambooRunnables$1.run(BambooRunnables.java:48)\r\n13-Jan-2021 06:14:47\t        at com.atlassian.bamboo.security.ImpersonationHelper.runWith(ImpersonationHelper.java:26)\r\n13-Jan-2021 06:14:47\t        at com.atlassian.bamboo.security.ImpersonationHelper.runWithSystemAuthority(ImpersonationHelper.java:17)\r\n13-Jan-2021 06:14:47\t        at com.atlassian.bamboo.security.ImpersonationHelper$1.run(ImpersonationHelper.java:41)\r\n13-Jan-2021 06:14:47\t        at java.lang.Thread.run(Thread.java:748)\r\n{noformat}\r\n\r\nh3. Workaround\r\nh6. Workaround 1\r\nAdd a *Source code checkout* task to the environment for the same repository that you want to perform the VCS task for.\r\n\r\nh6. Workaround 2\r\nUse a Script task to perform the Git commands to perform the action instead. E.g. Tagging:\r\n\r\nExample below:\r\nh5. In the Build Plan\r\n# Add a script task with the following Inline Script\r\n{code:sh}\r\necho \"commit_to_tag=${bamboo.planRepository.revision}\" > variables.txt\r\n{code}\r\n\r\nh5. In the Deployment Plan\r\n# Add the Inject Bamboo Variables Task with the following settings:\r\n#* *Path to properties file*: {{../PROJ-PLAN-JOB/variables.txt}}\r\n{{PROJ-PLAN-JOB}} is the Key of the Build Job where the script was created\r\n#* *Namespace*: {{inject}}\r\nThis can stay as-is, we'll reference the variable later as {{$\\{bamboo.inject.commit_to_tag}}}\r\n#* *Scope of the variables*: Result\r\n# Add a Script task with the following Inline Script:\r\n{code:sh}\r\ngit remote set-url origin <ssh or http URL to your repository>\r\ngit tag ${bamboo.deploy.version} ${bamboo.inject.commit_to_tag}\r\ngit push origin ${bamboo.deploy.version}\r\n{code}",
      "summary": "VCS tasks do not work in deployments"
    }
  },
  {
    "key": "BAM-21204",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-01-12T11:32:05.000+0000",
      "description": "It'd be great if Bamboo can support the following use case:\r\n * add linked Bitbucket Cloud repo to Bamboo\r\n * push Bamboo specs to this repo (yaml or java)\r\n * create specs repo from this linked repo\r\n * add\u00a0/rest/api/latest/repository/scan?repositoryId=123456 webhook to BB Cloud repo\r\n * push to Bitbucket Cloud repo\r\n\r\nh3. Current behavior\r\n\r\nPushes to a Bitbucket Cloud repository trigger a webhook and specs scanning does take place. However, specs scanning isn't followed by a build.\r\n\r\nReplacing webhook with\u00a0/rest/triggers/1.0/remote/changeDetection does trigger a build, however, changes to bamboo-specs are ignored (as expected).\r\nh3. Desired Behavior\r\n\r\nOnce specs scanning is completed, automatically start change detection, i.e. a combination of the two calls - specs scanning and change detection.\r\n\r\nMaybe this can be a new trigger type or some settings - run change detection on specs scanning.",
      "summary": "Bamboo Specs Improvement: automatically run change detection after specs scanning"
    }
  },
  {
    "key": "BAM-21203",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-01-11T11:48:56.000+0000",
      "description": "h3. Issue Summary\r\nIn Bamboo 7.1.4, when navigating to System Information page, in the count of number of plans it actually shows the count of number of jobs in UI instance statistics instead of number of plans.\r\n\r\nh3. Steps to Reproduce\r\n# Please make sure you are aware of how plans you have in your environment. For example: Let's say you have only one plan and one job under this plan. \r\n# Now navigate to Bamboo Administration Overview >> System >> System Information. Please make a note of the Number Of Plans shown here. Let's say you are seeing the number 1 here\r\n# Now create a new plan.\r\n# Then navigate to the newly create plan and click on Configure Plan.\r\n# Add two jobs in this plan.\r\n# Now once again navigate to Bamboo Administration Overview >> System >> System Information. Please make a note the Number of Plans displayed here now.\r\n\r\nh3. Expected Results\r\nYou should be able to see only Number 2 in the Number of Plans displayed under the System Information.\r\n\r\nh3. Actual Results\r\nWe can see 3 as a count in the Number of Plans displayed under the System Information, which is actually the number of jobs rather than number of plans.\r\n\r\nh3. Workaround\r\nCurrently there is no known workaround for this behaviour. A workaround will be added here when available",
      "summary": "Incorrect information displayed in System Information Page for the count of number of plans"
    }
  },
  {
    "key": "BAM-21202",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-01-08T05:49:42.000+0000",
      "description": "h3. Issue Summary\r\nWhen any chain is missing its ACL object, no dependencies can be added to any plan by non-admin users.\r\n\r\nh3. Steps to Reproduce\r\n# Create two or three plans\r\n# Manually delete a ACL_OBJECT_IDENTITY for one of the plans of class {{com.atlassian.bamboo.chains.DefaultChain}}\r\n# Try to add a child plan dependency to a non affected plan\r\n\r\nh3. Expected Results\r\nPlan dependencies can be added.\r\nIf the ACL object is a requirement, skip the corrupted plan and log an error but still allow other plans to be added as dependencies.\r\nACL objects don't go missing in the first place (unknown how this occurs at this point)\r\n\r\nh3. Actual Results\r\n\r\nThe below exception is thrown in the $BAMBOO_HOME/logs/atlassian-bamboo.log file:\r\n{noformat}\r\n2019-03-23 00:08:53,276 INFO [http-nio-127.0.0.1-8085-exec-83] [AccessLogFilter] user GET https://bamboo/chain/admin/config/editChainDependencies.action?buildKey=PROJ-PLAN 6632571kb\r\n...\r\n2019-03-23 00:09:04,471 INFO [http-nio-127.0.0.1-8085-exec-142] [AccessLogFilter] user GET https://bamboo/rest/api/latest/search/plans?fuzzy=true&permission=BUILD&searchTerm=&_=1553314135264 4284492kb\r\n...\r\n2019-03-23 00:09:06,048 TRACE [http-nio-127.0.0.1-8085-exec-142] [BambooPermissionManagerImpl] Checking permission BUILD for hibernate identity: HibernateObjectIdentityImpl{Java Type=class com.atlassian.bamboo.chains.DefaultChain, Identifier=287638344}\r\n2019-03-23 00:09:06,049 WARN [http-nio-127.0.0.1-8085-exec-142] [BambooRuntimeExceptionMapper] Unexpected error from REST call\r\ncom.google.common.util.concurrent.UncheckedExecutionException: org.acegisecurity.acls.NotFoundException: Could not find ACL\r\n\tat com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2203)\r\n\tat com.google.common.cache.LocalCache.get(LocalCache.java:3937)\r\n\tat com.google.common.cache.LocalCache.getOrLoad(LocalCache.java:3941)\r\n\tat com.google.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:4824)\r\n\tat com.google.common.cache.LocalCache$LocalLoadingCache.getUnchecked(LocalCache.java:4830)\r\n\tat com.atlassian.bamboo.security.BambooCachingPermissionManagerFacadeImpl$BambooCachingPermissionManager.readAclById(BambooCachingPermissionManagerFacadeImpl.java:47)\r\n\tat com.atlassian.bamboo.security.BambooPermissionManagerImpl.hasPermission(BambooPermissionManagerImpl.java:377)\r\n\tat com.atlassian.bamboo.security.BambooPermissionManagerImpl.hasPermission(BambooPermissionManagerImpl.java:355)\r\n\tat com.atlassian.bamboo.security.BambooPermissionManagerImpl.hasPermission(BambooPermissionManagerImpl.java:96)\r\n\tat com.atlassian.bamboo.security.BambooCachingPermissionManagerFacadeImpl.hasPermission(BambooCachingPermissionManagerFacadeImpl.java:87)\r\n\tat com.atlassian.bamboo.plugins.rest.service.PlanRestServiceImpl.lambda$null$8(PlanRestServiceImpl.java:342)\r\n\tat java.util.function.Predicate.lambda$and$0(Predicate.java:69)\r\n\tat java.util.function.Predicate.lambda$and$0(Predicate.java:69)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:174)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\r\n\tat java.util.stream.Streams$StreamBuilderImpl.forEachRemaining(Streams.java:419)\r\n\tat java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:742)\r\n\tat java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:580)\r\n\tat java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:270)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\r\n\tat java.util.concurrent.ConcurrentHashMap$KeySpliterator.forEachRemaining(ConcurrentHashMap.java:3527)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n{noformat}\r\n\r\nh3. Workaround\r\nh6. Workaround 1\r\nHave Bamboo administrators add the required dependencies to the plan. This doesn't fix the problems but will at least allow the plan configuration to be updated in the interim.\r\n\r\nh6. Workaround 2\r\nIdentify the plans that are missing the ACL object and causing the error by running the below SQL query on your Bamboo database:\r\n{noformat}\r\nSELECT * FROM BUILD WHERE BUILD_TYPE = 'CHAIN' AND BUILD_ID NOT IN (SELECT OBJECT_ID_IDENTITY FROM ACL_OBJECT_IDENTITY WHERE OBJECT_ID_CLASS = 'com.atlassian.bamboo.chains.DefaultChain');\r\n{noformat}\r\n\r\nThe plan(s) that is causing the issue is unlikely to be the plan you're trying to add the dependency to. Due the corruption, the plan must be removed to get dependencies working again.\r\n\r\nUnfortunately cloning the plan will also clone the corruption, so its recommended if you need to backup and restore the the plan, to do so with [Bamboo Specs|https://confluence.atlassian.com/bamboo/bamboo-specs-894743906.html]: *Actions > View plan as Java Specs*\r\n\r\nIf the affected plans history, builds and artifacts are too important to lose, please open a support ticket at https://support.atlassian.com/ and we can work with you to assess the missing ACL objects and recreate them via direct database modifications.",
      "summary": "When any chain is missing its ACL object, no dependencies can be added to a plan by non-admin users"
    }
  },
  {
    "key": "BAM-21201",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-01-07T08:07:37.000+0000",
      "description": "Current documentation says Bamboo supports Oracle 12c R1 and R2: [https://confluence.atlassian.com/bamboo0609/installing-and-upgrading/supported-platforms]\r\n\r\nThe page needs to be updated since:\r\n * 12c R1 *isn't* supported since 7.x (so it needs to be removed from supported platforms)\r\n * 19c *is* supported since 7.x\u00a0(so it needs to be added to supported platforms)\r\n\r\nPostgres 9.4 and 9.5 are listed as supported while they are not",
      "summary": "Update docs on supported Oracle and Postgres DB versions"
    }
  },
  {
    "key": "BAM-21200",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-01-06T23:00:40.000+0000",
      "description": "h3. Issue Summary\r\nBuild Result Summaries show only 10 results, and the pagination links do not appear to render.\r\n\r\nh3. Steps to Reproduce\r\n # Go to any build page, eg: {{bamboo-url/browse/PROJ-PLAN}}, with more than 10 build results\r\n # Scroll to the bottom of the results summary table\r\n\r\nh3. Expected Results\r\nSee all build results, paginated\r\n\r\nh3. Actual Results\r\nOnly 10 build results are seen. If pagination is available, the previous/next arrows are not hyperlinked.\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Viewing Build Summary page shows only 10 build results"
    }
  },
  {
    "key": "BAM-21199",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-01-06T10:03:38.000+0000",
      "description": "If there are no agents that can build the job, then job result summary clearly states that:\r\n\r\n!image-2021-01-06-10-51-07-376.png!\r\n\r\nHowever, if you clock the arrow button on the left in the middle of the page, you can then click on a job name, which shows almost identical summary, which, however, says that job can be built on an agent:\r\n\r\n!image-2021-01-06-11-00-05-863.png!\r\n\r\nObviously, what's meant here is that this particular job (not build) can be built on the default (or any other) agent. However, it's confusing, since this message is displayed in the context of a particular build.\r\n\r\nIt'd be great to add smth like \"but there are no available agents\" to the Agent message.",
      "summary": "Misleading message in Job result summary"
    }
  },
  {
    "key": "BAM-21198",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2021-01-05T19:34:07.000+0000",
      "description": "Hi,\r\n\r\nI don't think it's possible now, but we would like to have the ability to only automatically merge branches if the branch name matches certain regex.\r\n\r\nSo for example merge only bugfix and hotfix branches with develop automatically, and have this setting be in the configuration for the plan itself, not per branch. Because I know that you can enable automatic merging manually per branch, but it means someone has to go in and click that for all new branch. \r\nAnd I know you an enable automatic merges for all branches. And I also know you can have 2 Bamboo plans where you add bugfix branches and hotfix branches only and then you can enable the automatic merging for all branches, but that's not what we want. We want to just have 1 Bamboo plan with the ability to automatic merge branches that match a certain prefix.\r\n\r\nThanks!",
      "summary": "Allow automatic branch merging via matching branch regex."
    }
  },
  {
    "key": "BAM-21196",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-12-29T10:47:16.000+0000",
      "description": "h3. Problem Definition\r\n\r\nUsers are currently unable to modify / extend the Git commands that are run by Bamboo during the Source Code Check task.\r\n\r\nh3. Suggested Solution\r\n\r\nIt would be nice to be able to pass additional Git arguments to the Source Code Check task to have more control over the output of the checkout ([clone options|https://git-scm.com/docs/git-clone#Documentation/git-clone.txt] / [fetch options|https://git-scm.com/docs/git-fetch]). Much like with other tasks (e.g. Docker, Command and etc) it would be very helpful to have a field where you can pass additional arguments to the Git command Bamboo is triggering to modify the output of the checkout task.\r\n \r\nh3. Workaround \r\n\r\nFor example, there's currently no way to checkout a repository branch without bringing in all the tags using the Source Code Checkout task. The workaround to this case would be to use a Script task to clone/ fetch the repository and use the *--no-tags* argument to achieve that.\r\n\r\nIn most cases the workaround will be to use the Script task and lay out the Git commands you need to run manually.\r\n\r\n",
      "summary": "Allow users to add Git arguments to the Source Code Checkout task"
    }
  },
  {
    "key": "BAM-21195",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-03-05T11:41:51.000+0000",
      "created": "2020-12-29T04:46:24.000+0000",
      "description": "h3. Issue Summary\r\nNo read timeout for socket operations such as CONNECT and SSL handshake when communicating with Crowd can cause long running HTTP threads if there is an issue with connecting to the remote end while establishing the socket. Even if Crowd/proxy becomes available again, that connection can still stay hung which will cause additional requests for that user (if SSO is enabled) to park waiting for a cache lock that it will never get due to the initial thread still being stuck in the CONNECT or handshake.\r\n\r\nh3. Steps to Reproduce\r\n# Configure Bamboo 7.2.2 and Crowd 4.2.2\r\n# Setup a squid outbound proxy\r\n# Enable SSO in Bamboo\r\n# Connect to Crowd via squid outbound proxy\r\n# Stop the squid proxy\r\n# Start netcat on the same port as proxy:\r\n{noformat}\r\nsudo nc -k -l 3128\r\n{noformat}\r\n# Login to Crowd to start a SSO session\r\n# Open Bamboo to try and resume the SSO session.\r\n\r\nh3. Expected Results\r\nConnection to Crowd times out in a reasonable timeframe.\r\n\r\nh3. Actual Results\r\nThe HTTP thread remains stuck.\r\n\r\nIn CONNECT to proxy:\r\n{noformat}\r\n\"http-nio-8085-exec-21\" #269 daemon prio=5 os_prio=0 tid=0x00007f4710525800 nid=0x2c6f runnable [0x00007f4621881000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\tat java.net.SocketInputStream.socketRead0(Native Method)\r\n\tat java.net.SocketInputStream.socketRead(SocketInputStream.java:116)\r\n\tat java.net.SocketInputStream.read(SocketInputStream.java:171)\r\n\tat java.net.SocketInputStream.read(SocketInputStream.java:141)\r\n\tat org.apache.http.impl.io.SessionInputBufferImpl.streamRead(SessionInputBufferImpl.java:137)\r\n\tat org.apache.http.impl.io.SessionInputBufferImpl.fillBuffer(SessionInputBufferImpl.java:153)\r\n\tat org.apache.http.impl.io.SessionInputBufferImpl.readLine(SessionInputBufferImpl.java:280)\r\n\tat org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:138)\r\n\tat org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:56)\r\n\tat org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:259)\r\n\tat org.apache.http.impl.DefaultBHttpClientConnection.receiveResponseHeader(DefaultBHttpClientConnection.java:163)\r\n\tat org.apache.http.impl.conn.CPoolProxy.receiveResponseHeader(CPoolProxy.java:157)\r\n\tat org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:273)\r\n\tat org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:125)\r\n\tat org.apache.http.impl.execchain.MainClientExec.createTunnelToTarget(MainClientExec.java:485)\r\n\tat org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:410)\r\n\tat org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)\r\n\tat org.apache.http.impl.client.cache.CachingExec.callBackend(CachingExec.java:592)\r\n\tat org.apache.http.impl.client.cache.CachingExec.execute(CachingExec.java:269)\r\n\tat org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)\r\n\tat org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)\r\n\tat org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)\r\n\tat org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)\r\n\tat com.atlassian.crowd.integration.rest.service.RestExecutor$MethodExecutor.executeCrowdServiceMethod(RestExecutor.java:498)\r\n\tat com.atlassian.crowd.integration.rest.service.RestExecutor$MethodExecutor.andReceive(RestExecutor.java:370)\r\n\tat com.atlassian.crowd.integration.rest.service.RestCrowdClient.userAuthenticated(RestCrowdClient.java:155)\r\n\tat com.atlassian.crowd.directory.RemoteCrowdDirectory.userAuthenticated(RemoteCrowdDirectory.java:833)\r\n\tat com.atlassian.crowd.directory.RemoteDirectory.userAuthenticated(RemoteDirectory.java:589)\r\n\tat com.atlassian.crowd.directory.DbCachingRemoteDirectory.userAuthenticated(DbCachingRemoteDirectory.java:296)\r\n\tat com.atlassian.crowd.manager.directory.DirectoryManagerGeneric.userAuthenticated(DirectoryManagerGeneric.java:309)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$$Lambda$325/1231124175.proceedWithInvocation(Unknown Source)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:295)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)\r\n\tat com.sun.proxy.$Proxy176.userAuthenticated(Unknown Source)\r\n\tat com.atlassian.crowd.manager.application.ApplicationServiceGeneric.userAuthenticated(ApplicationServiceGeneric.java:2309)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$$Lambda$325/1231124175.proceedWithInvocation(Unknown Source)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:295)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)\r\n\tat com.sun.proxy.$Proxy180.userAuthenticated(Unknown Source)\r\n\tat com.atlassian.crowd.embedded.core.CrowdServiceImpl.userAuthenticated(CrowdServiceImpl.java:109)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$$Lambda$325/1231124175.proceedWithInvocation(Unknown Source)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:295)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)\r\n\tat com.sun.proxy.$Proxy181.userAuthenticated(Unknown Source)\r\n\tat com.atlassian.crowd.integration.seraph.CrowdAuthenticator.lambda$triggerUserAuthenticatedNotification$0(CrowdAuthenticator.java:460)\r\n\tat com.atlassian.crowd.integration.seraph.CrowdAuthenticator$$Lambda$1381/1901252110.call(Unknown Source)\r\n\tat com.google.common.cache.LocalCache$LocalManualCache$1.load(LocalCache.java:4876)\r\n\tat com.google.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3528)\r\n\tat com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2277)\r\n\tat com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2154)\r\n\t- locked <0x00000000ed461490> (a com.google.common.cache.LocalCache$StrongWriteEntry)\r\n\tat com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2044)\r\n\tat com.google.common.cache.LocalCache.get(LocalCache.java:3952)\r\n\tat com.google.common.cache.LocalCache$LocalManualCache.get(LocalCache.java:4871)\r\n\tat com.atlassian.crowd.integration.seraph.CrowdAuthenticator.triggerUserAuthenticatedNotification(CrowdAuthenticator.java:457)\r\n\tat com.atlassian.crowd.integration.seraph.CrowdAuthenticator.getUser(CrowdAuthenticator.java:419)\r\n{noformat}\r\n\r\nOr in SSL handshake:\r\n{noformat}\r\n\"http-nio-8085-exec-41\" daemon prio=5 tid=0x00000000000001f3 nid=0 runnable \r\n   java.lang.Thread.State: RUNNABLE\r\n\tat java.net.SocketInputStream.socketRead0(Native Method)\r\n\tat java.net.SocketInputStream.socketRead(SocketInputStream.java:116)\r\n\tat java.net.SocketInputStream.read(SocketInputStream.java:171)\r\n\tat java.net.SocketInputStream.read(SocketInputStream.java:141)\r\n\tat sun.security.ssl.InputRecord.readFully(InputRecord.java:465)\r\n\tat sun.security.ssl.InputRecord.read(InputRecord.java:503)\r\n\tat sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:990)\r\n\t- locked <0x000000002e93de34> (a java.lang.Object)\r\n\tat sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1388)\r\n\t- locked <0x0000000007d60371> (a java.lang.Object)\r\n\tat sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1416)\r\n\tat sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1400)\r\n\tat org.apache.http.conn.ssl.SSLConnectionSocketFactory.createLayeredSocket(SSLConnectionSocketFactory.java:436)\r\n\tat org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.upgrade(DefaultHttpClientConnectionOperator.java:191)\r\n\tat org.apache.http.impl.conn.PoolingHttpClientConnectionManager.upgrade(PoolingHttpClientConnectionManager.java:390)\r\n\tat org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:428)\r\n\tat org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)\r\n\tat org.apache.http.impl.client.cache.CachingExec.callBackend(CachingExec.java:592)\r\n\tat org.apache.http.impl.client.cache.CachingExec.execute(CachingExec.java:269)\r\n\tat org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)\r\n\tat org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)\r\n\tat org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)\r\n\tat org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)\r\n\tat com.atlassian.crowd.integration.rest.service.RestExecutor$MethodExecutor.executeCrowdServiceMethod(RestExecutor.java:498)\r\n{noformat}\r\n\r\nDuplicating requests for the same user will cause additional threads to build up waiting for a cache lock:\r\n{noformat}\r\n\"http-nio-8085-exec-23\" #271 daemon prio=5 os_prio=0 tid=0x00007f4710528000 nid=0x2c71 waiting on condition [0x00007f4621682000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  <0x00000000ed461450> (a com.google.common.util.concurrent.SettableFuture)\r\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\r\n\tat com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:502)\r\n\tat com.google.common.util.concurrent.AbstractFuture$TrustedFuture.get(AbstractFuture.java:83)\r\n\tat com.google.common.util.concurrent.Uninterruptibles.getUninterruptibly(Uninterruptibles.java:196)\r\n\tat com.google.common.cache.LocalCache$LoadingValueReference.waitForValue(LocalCache.java:3581)\r\n\tat com.google.common.cache.LocalCache$Segment.waitForLoadingValue(LocalCache.java:2174)\r\n\tat com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2161)\r\n\tat com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2044)\r\n\tat com.google.common.cache.LocalCache.get(LocalCache.java:3952)\r\n\tat com.google.common.cache.LocalCache$LocalManualCache.get(LocalCache.java:4871)\r\n\tat com.atlassian.crowd.integration.seraph.CrowdAuthenticator.triggerUserAuthenticatedNotification(CrowdAuthenticator.java:457)\r\n\tat com.atlassian.crowd.integration.seraph.CrowdAuthenticator.getUser(CrowdAuthenticator.java:419)\r\n{noformat}\r\n\r\nh3. Workaround\r\nBamboo must be restarted to release the threads or the TCP connection between Bamboo/outbound proxy/Crowd must be forcibly ended.",
      "summary": "No read timeout for socket operations such as CONNECT and SSL handshake when communicating with Crowd can cause long running HTTP threads"
    }
  },
  {
    "key": "BAM-21194",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-12-23T22:34:23.000+0000",
      "description": "h3. Problem Definition\r\n\r\nCurrently it is not possible to see all the trigger details at once since you have to click on a single trigger definition to see all the details.\r\nh3. Suggested Solution\r\n\r\nAdd to *Project > Plans > Triggers*\u00a0and *Deployment project > Triggers* pages a list of the triggers in a timeline format to allow users to see which trigger will trigger first.\r\nh3. Workaround\r\n\r\nThere's no workaround for this.",
      "summary": "Add trigger details in a timeline format to Bamboo page"
    }
  },
  {
    "key": "BAM-21193",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-12-22T21:26:57.000+0000",
      "description": "h3. Issue Summary\r\n\r\nIf *all the following conditions* are met, the source code checkout task will not work as intended:\r\n\r\n# Checking out code for more than one repository using the same Source code checkout task\r\n# At least one repository is being cloned at the root of the working directory\r\n# Git cache on the agent is enabled\r\n# Docket runner is being used to run the Job\r\n# \"Clean working directory after each build\" is enabled \r\n\r\nh3. Steps to Reproduce\r\n# Create a plan with two repositories\r\n# Make sure \"repository caching on agents\" is enabled (for the default repo)\r\n# Add a source code checkout task with the following (or similar) config:\r\n## Clone the main repo at {{<working directory>}}\r\n## Clone the second repo at {{<working directory>/subfolder}}\r\n# Add a script task to list the content of the working directory \r\n# Enable Docker Runner\r\n# Enable \"Clean working directory after each build\"\r\n# Run the plan\r\n\r\nh3. Expected Results\r\n\r\nIf the checkout succeeds, the script task will list the content of the working dir.\r\n\r\nh3. Actual Results\r\n\r\nThe build will be green but the script task will return no results.\r\nh5. Cache on agent enabled:\r\n{noformat}\r\nsimple\t22-Dec-2020 13:13:57\tStarting task 'list content' of type 'com.atlassian.bamboo.plugins.scripttask:task.builder.script'\r\ncommand\t22-Dec-2020 13:13:57\tBeginning to execute external process for build 'Acpt - Clone_Repo_test - Default Job #60 (EB-CLON-JOB1-60)'\\n ... running command line: \\n/var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/T/runInDocker6558735839153796389.sh /Users/gabriel.ribeiro/bamboo-agent-home/temp/EB-CLON-JOB1-60-ScriptBuildTask-4998711379937999561.sh\\n ... in: /var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/T\\n\r\nbuild\t22-Dec-2020 13:13:59\t-----------CONTENT OF THE WORK DIR AFTER CHECKOUT START----------\r\nbuild\t22-Dec-2020 13:13:59\ttotal 0\r\nbuild\t22-Dec-2020 13:13:59\t-----------CONTENT OF THE WORK DIR AFTER CHECKOUT END----------\r\nsimple\t22-Dec-2020 13:13:59\tFinished task 'list content' with result: Success\r\n{noformat}\r\n\r\nThe following exception is thrown in the agent logs:\r\n{noformat}\r\n2020/12/22 10:13:55 | 313823648 [0-BAM::192.168.10.92 (3)::Agent:pool-3-thread-1] WARN  com.atlassian.bamboo.plugins.git.v2.AbstractGitExecutor  - Deleting git workspace /Users/gabriel.ribeiro/bamboo-agent-home/xml-data/build-dir/EB-CLON-JOB1 due to exception\r\nINFO   | jvm 1    | 2020/12/22 10:13:55 | com.atlassian.bamboo.repository.RepositoryException: Checkout to revision 046e302b8af33e1cc9e0169466257db2d8a64b8d has failed.command [/usr/local/bin/git clone /Users/gabriel.ribeiro/bamboo-agent-home/xml-data/build-dir/_git-repositories-cache/46d5b1c4fc5dae834e521f0b86222d54b1332ebd --shared --no-checkout '-c filter.lfs.smudge=' '-c filter.lfs.required=false' /Users/gabriel.ribeiro/bamboo-agent-home/xml-data/build-dir/EB-CLON-JOB1] failed with code 128. Working directory was [/Users/gabriel.ribeiro/bamboo-agent-home/xml-data/build-dir/EB-CLON-JOB1]., stderr:\r\nINFO   | jvm 1    | 2020/12/22 10:13:55 | fatal: destination path '/Users/gabriel.ribeiro/bamboo-agent-home/xml-data/build-dir/EB-CLON-JOB1' already exists and is not an empty directory.\r\nINFO   | jvm 1    | 2020/12/22 10:13:55 | \tat com.atlassian.bamboo.plugins.git.NativeGitOperationHelper.checkout(NativeGitOperationHelper.java:500)\r\nINFO   | jvm 1    | 2020/12/22 10:13:55 | \tat com.atlassian.bamboo.plugins.git.v2.GitWorkingCopyManager.lambda$checkout$1(GitWorkingCopyManager.java:267)\r\nINFO   | jvm 1    | 2020/12/22 10:13:55 | \tat io.atlassian.util.concurrent.ManagedLocks$ManagedLockImpl.withLock(ManagedLocks.java:293)\r\nINFO   | jvm 1    | 2020/12/22 10:13:55 | \tat com.atlassian.bamboo.plugins.git.v2.GitWorkingCopyManager.checkout(GitWorkingCopyManager.java:252)\r\nINFO   | jvm 1    | 2020/12/22 10:13:55 | \tat com.atlassian.bamboo.plugins.git.v2.GitWorkingCopyManager.retrieveSourceCode(GitWorkingCopyManager.java:120)\r\nINFO   | jvm 1    | 2020/12/22 10:13:55 | \tat com.atlassian.bamboo.plugins.stash.v2.BitbucketServerWorkingCopyManager.retrieveSourceCode(BitbucketServerWorkingCopyManager.java:91)\r\nINFO   | jvm 1    | 2020/12/22 10:13:55 | \tat com.atlassian.bamboo.plugins.vcs.task.VcsCheckoutTask.fillWorkingDirFromVcs(VcsCheckoutTask.java:206)\r\nINFO   | jvm 1    | 2020/12/22 10:13:55 | \tat com.atlassian.bamboo.plugins.vcs.task.VcsCheckoutTask.execute(VcsCheckoutTask.java:119)\r\nINFO   | jvm 1    | 2020/12/22 10:13:55 | \tat com.atlassian.bamboo.task.TaskExecutorImpl.lambda$executeTasks$3(TaskExecutorImpl.java:323)\r\nINFO   | jvm 1    | 2020/12/22 10:13:55 | \tat com.atlassian.bamboo.task.TaskExecutorImpl.executeTaskWithPrePostActions(TaskExecutorImpl.java:258)\r\nINFO   | jvm 1    | 2020/12/22 10:13:55 | \tat com.atlassian.bamboo.task.TaskExecutorImpl.executeTasks(TaskExecutorImpl.java:323)\r\nINFO   | jvm 1    | 2020/12/22 10:13:55 | \tat com.atlassian.bamboo.task.TaskExecutorImpl.executePreparationTasks(TaskExecutorImpl.java:97)\r\nINFO   | jvm 1    | 2020/12/22 10:13:55 | \tat com.atlassian.bamboo.build.pipeline.tasks.PrepareBuildTask.call(PrepareBuildTask.java:81)\r\nINFO   | jvm 1    | 2020/12/22 10:13:55 | \tat com.atlassian.bamboo.v2.build.agent.DefaultBuildAgent.executeBuildPhase(DefaultBuildAgent.java:190)\r\nINFO   | jvm 1    | 2020/12/22 10:13:55 | \tat com.atlassian.bamboo.v2.build.agent.DefaultBuildAgent.build(DefaultBuildAgent.java:162)\r\nINFO   | jvm 1    | 2020/12/22 10:13:55 | \tat com.atlassian.bamboo.v2.build.agent.BuildAgentControllerImpl.lambda$waitAndPerformBuild$0(BuildAgentControllerImpl.java:131)\r\nINFO   | jvm 1    | 2020/12/22 10:13:55 | \tat com.atlassian.bamboo.variable.CustomVariableContextImpl.withVariableSubstitutor(CustomVariableContextImpl.java:118)\r\nINFO   | jvm 1    | 2020/12/22 10:13:55 | \tat com.atlassian.bamboo.v2.build.agent.BuildAgentControllerImpl.waitAndPerformBuild(BuildAgentControllerImpl.java:125)\r\nINFO   | jvm 1    | 2020/12/22 10:13:55 | \tat com.atlassian.bamboo.v2.build.agent.DefaultBuildAgent.lambda$start$0(DefaultBuildAgent.java:110)\r\nINFO   | jvm 1    | 2020/12/22 10:13:55 | \tat com.atlassian.bamboo.utils.BambooRunnables$1.run(BambooRunnables.java:48)\r\nINFO   | jvm 1    | 2020/12/22 10:13:55 | \tat com.atlassian.bamboo.security.ImpersonationHelper.runWith(ImpersonationHelper.java:26)\r\nINFO   | jvm 1    | 2020/12/22 10:13:55 | \tat com.atlassian.bamboo.security.ImpersonationHelper.runWithSystemAuthority(ImpersonationHelper.java:17)\r\nINFO   | jvm 1    | 2020/12/22 10:13:55 | \tat com.atlassian.bamboo.security.ImpersonationHelper$1.run(ImpersonationHelper.java:41)\r\nINFO   | jvm 1    | 2020/12/22 10:13:55 | \tat java.lang.Thread.run(Thread.java:748)\r\nINFO   | jvm 1    | 2020/12/22 10:13:55 | Caused by: com.atlassian.bamboo.plugins.git.GitCommandException: command [/usr/local/bin/git clone /Users/gabriel.ribeiro/bamboo-agent-home/xml-data/build-dir/_git-repositories-cache/46d5b1c4fc5dae834e521f0b86222d54b1332ebd --shared --no-checkout '-c filter.lfs.smudge=' '-c filter.lfs.required=false' /Users/gabriel.ribeiro/bamboo-agent-home/xml-data/build-dir/EB-CLON-JOB1] failed with code 128. Working directory was [/Users/gabriel.ribeiro/bamboo-agent-home/xml-data/build-dir/EB-CLON-JOB1]., stderr:\r\nINFO   | jvm 1    | 2020/12/22 10:13:55 | fatal: destination path '/Users/gabriel.ribeiro/bamboo-agent-home/xml-data/build-dir/EB-CLON-JOB1' already exists and is not an empty directory.\r\nINFO   | jvm 1    | 2020/12/22 10:13:55 | \tat com.atlassian.bamboo.plugins.git.GitCommandProcessor.runCommand(GitCommandProcessor.java:729)\r\nINFO   | jvm 1    | 2020/12/22 10:13:55 | \tat com.atlassian.bamboo.plugins.git.GitCommandProcessor.runCommand(GitCommandProcessor.java:658)\r\nINFO   | jvm 1    | 2020/12/22 10:13:55 | \tat com.atlassian.bamboo.plugins.git.GitCommandProcessor.runCommand(GitCommandProcessor.java:649)\r\nINFO   | jvm 1    | 2020/12/22 10:13:55 | \tat com.atlassian.bamboo.plugins.git.GitCommandProcessor.runLocalCloneCommand(GitCommandProcessor.java:349)\r\nINFO   | jvm 1    | 2020/12/22 10:13:55 | \tat com.atlassian.bamboo.plugins.git.NativeGitOperationHelper.createLocalRepository(NativeGitOperationHelper.java:433)\r\nINFO   | jvm 1    | 2020/12/22 10:13:55 | \tat com.atlassian.bamboo.plugins.git.NativeGitOperationHelper.checkout(NativeGitOperationHelper.java:473)\r\nINFO   | jvm 1    | 2020/12/22 10:13:55 | \t... 23 more\r\n{noformat}\r\n\r\nh5. Cache on agent disabled:\r\n{noformat}\r\nsimple\t22-Dec-2020 13:14:46\tStarting task 'list content' of type 'com.atlassian.bamboo.plugins.scripttask:task.builder.script'\r\ncommand\t22-Dec-2020 13:14:46\tBeginning to execute external process for build 'Acpt - Clone_Repo_test - Default Job #61 (EB-CLON-JOB1-61)'\\n ... running command line: \\n/var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/T/runInDocker7184225876901690045.sh /Users/gabriel.ribeiro/bamboo-agent-home/temp/EB-CLON-JOB1-61-ScriptBuildTask-1814243841586037060.sh\\n ... in: /var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/T\\n\r\nbuild\t22-Dec-2020 13:14:47\t-----------CONTENT OF THE WORK DIR AFTER CHECKOUT START----------\r\nbuild\t22-Dec-2020 13:14:47\ttotal 4\r\nbuild\t22-Dec-2020 13:14:47\tdrwxr-xr-x  5 root root  160 Dec 22 13:14 .\r\nbuild\t22-Dec-2020 13:14:47\tdrwxr-xr-x  3 root root 4096 Dec 22 13:14 ..\r\nbuild\t22-Dec-2020 13:14:47\tdrwxr-xr-x 13 root root  416 Dec 22 13:14 .git\r\nbuild\t22-Dec-2020 13:14:47\tdrwxr-xr-x  6 root root  192 Dec 22 13:14 bamboo-specs\r\nbuild\t22-Dec-2020 13:14:47\tdrwxr-xr-x  6 root root  192 Dec 22 13:14 subfolder\r\nbuild\t22-Dec-2020 13:14:47\t-----------CONTENT OF THE WORK DIR AFTER CHECKOUT END----------\r\n{noformat}\r\n\r\nh3. Workaround\r\n\r\nDisable cache on the agent\r\n\r\nOR\r\n\r\nRun the job on the agent environment (outside container).\r\n\r\nOR\r\n\r\nUse separate source code checkout tasks for each repository.\r\n\r\nOR\r\n\r\nUse a separate subdirectory for each repository\r\n",
      "summary": "Cloning multiple repositories using a single Source Code checkout task will not work as intended if cache on agent is enabled"
    }
  },
  {
    "key": "BAM-21192",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-12-22T13:38:03.000+0000",
      "description": "When configuring Bamboo to run over HTTPS using Tomcat, we have the following information in the server.xml:\r\n{code:xml}\r\n        <!--\r\n        ====================================================================================\r\n        To run Bamboo via HTTPS:\r\n             * Uncomment the Connector below\r\n             * Execute:\r\n                 %JAVA_HOME%\\bin\\keytool -genkey -alias tomcat -keyalg RSA (Windows)\r\n                 $JAVA_HOME/bin/keytool -genkey -alias tomcat -keyalg RSA  (Unix)\r\n               with a password value of \"changeit\" for both the certificate and the keystore itself.\r\n             * Restart and visit https://localhost:8443/\r\n\r\n             For more info, see :\r\n              https://confluence.atlassian.com/display/BAMBOO/Securing+Bamboo+with+Tomcat+using+SSL\r\n              and\r\n              http://tomcat.apache.org/tomcat-8.5-doc/ssl-howto.html\r\n        ====================================================================================\r\n        -->\r\n        <!--\r\n        <Connector\r\n            port=\"8443\"\r\n\r\n            maxThreads=\"150\" minSpareThreads=\"25\"\r\n            connectionTimeout=\"20000\"\r\n            disableUploadTimeout=\"true\"\r\n            acceptCount=\"100\"\r\n\r\n            enableLookups=\"false\"\r\n            maxHttpHeaderSize=\"8192\"\r\n\r\n            useBodyEncodingForURI=\"true\"\r\n            URIEncoding=\"UTF-8\"\r\n\r\n            scheme=\"https\" secure=\"true\" SSLEnabled=\"true\" sslProtocol=\"TLS\"\r\n            clientAuth=\"false\" />\r\n         -->\r\n        <!--\r\n{code}\r\nHowever the connector is missing the {{keystoreFile=}} parameter.\r\n\r\nPlease include it in the connector configuration.",
      "summary": "Connector to run Bamboo over HTTPS using Tomcat does not include Keystore location"
    }
  },
  {
    "key": "BAM-21191",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-12-18T21:04:10.000+0000",
      "description": "Hi Bamboo Support,\r\n\r\n\u00a0Could you please provide me with some links to documentation on Bamboo CLI \u2013 or any Tutorials or Training Videos that might help with getting started with Bamboo CLI.\r\n\r\n\u00a0Appreciate your time and thanks in advance.\r\n\r\n\u00a0\r\n\r\n\u00a0Regards,\r\n\r\nAshraf",
      "summary": "Documentation on Bamboo CLI Usage. "
    }
  },
  {
    "key": "BAM-21189",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-01-22T15:41:20.000+0000",
      "created": "2020-12-17T17:23:59.000+0000",
      "description": "h3. Issue Summary\r\n\r\nWhen a build is triggered by Git tag, tag related variables are not being fetched.\r\nh3. Steps to Reproduce\r\n # Configure a 'Tag trigger' in a plan\r\n # Add a source code checkout task and a script task with the following contents:\r\n{noformat}\r\necho ========\r\necho ${bamboo.plan.storageTag}\r\necho ${bamboo.TagBuildTriggerReason.buildKey}\r\necho ${bamboo.TagBuildTriggerReason.customRevision}\r\necho ${bamboo.TagBuildTriggerReason.tagName}\r\necho ========\r\n{noformat}\r\n\r\n # Push a tag to this repository\r\n # A new build should be run\r\n\r\nh3. Expected Results\r\n\r\nThe build is run successfully showing the tag related variable contents.\r\nh3. Actual Results\r\n\r\nWe get {{Bad substitution:}} error when it is invoked and the build eventually fails.\r\n{noformat}\r\nsimple\t15-Dec-2020 18:18:21\tStarting task 'Script' of type 'com.atlassian.bamboo.plugins.scripttask:task.builder.script'\r\ncommand\t15-Dec-2020 18:18:21\tBeginning to execute external process for build 'love - bro - Default Job #7 (PROJ-PLAN-JOB1-7)'\\n ... running command line: \\n/home/jeyanthan/bamboo-home/atlassian-bamboo-7.2.1/temp/PROJ-PLAN-JOB1-7-ScriptBuildTask-3441415439196977110.sh\\n ... in: /home/jeyanthan/bamboo-home/atlassian-bamboo-7.2.1/xml-data/build-dir/LOVE-BRO-JOB1\\n\r\nerror\t15-Dec-2020 18:18:21\t/home/jeyanthan/bamboo-home/atlassian-bamboo-7.2.1/temp/PROJ-PLAN-JOB1-7-ScriptBuildTask-3441415439196977110.sh: 4: Bad substitution\r\n{noformat}\r\nh3. Workaround\r\n\r\nRerun the same plan and it turns green and displays all the variable values.",
      "summary": "When a build is triggered by Git tag, tag related variables throw Bad substitution error"
    }
  },
  {
    "key": "BAM-21187",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-12-16T20:04:36.000+0000",
      "description": "h3. Problem Definition\r\n\r\nCurrently there's no way to set a memory limit for RSS containers\r\nh3. Suggested Solution\r\n\r\nAdd option to to limit the memory for a RSS containers\r\nh4. Why this is important\r\n\r\nIt's possible that a malicious code can consume all system available memory and eventually bring down the instance.\r\nh3. Workaround\r\nSet a limit in Docker\r\n\r\n#  cat /etc/systemd/system/docker_limit.slice\u00a0{noformat}\r\n[Unit]\r\nDescription=Slice that limits docker resources\r\nBefore=slices.target\r\n\r\n[Slice]\r\nCPUAccounting=true\r\nCPUQuota=90%\r\nMemoryAccounting=true\r\nMemoryHigh=1G\r\nMemoryMax=1.2G\r\n{noformat}\r\n#* {{MemoryLimit}} (cgroupv1) may be required instead of {{MemoryMax}} (cgroupv2) depending on the cgroup version in your OS: https://www.freedesktop.org/software/systemd/man/systemd.resource-control.html\r\n# cat /etc/docker/daemon.json \r\n{noformat}\r\n{\r\n    \"exec-opts\": [\"native.cgroupdriver=systemd\"],\r\n    \"cgroup-parent\": \"docker_limit.slice\"\r\n}\r\n{noformat}\r\n\r\nAdditionally you can limit Maven's heap size\r\n* Create a\u00a0{{.mvn/jvm.config}}\u00a0in the repository stored spec:\r\n{code:java|title=example}\r\n-Xmx128m -Xms128m\r\n{code}\r\n",
      "summary": "Add UI option to limit memory consumption for RSS containers in Bamboo"
    }
  },
  {
    "key": "BAM-21186",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-12-14T14:58:51.000+0000",
      "description": "h3. Issue Summary\r\n\r\nCommitting to divergent branch can start building plan before updating Bamboo plan by Specs. Probability of occurrence of this issue is low.\r\nh3. Steps to Reproduce\r\n # Create repository on Bitbucket Server with Bamboo Specs YAML file\r\n # Create Bamboo Plan with this repository\r\n # Commit some changes to the repository.\r\n\r\nh3. Workaround\r\nRun build manually after plan was updated by Specs\r\n\r\nh3. Expected Results\r\n\r\nSpecs update is happening before triggering the build.\r\nh3. Actual Results\r\nSometimes build is trigger before the Specs update.",
      "summary": "Committing to divergent branch may first start a build instead of update Specs"
    }
  },
  {
    "key": "BAM-21185",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-04-20T19:15:00.000+0000",
      "created": "2020-12-11T16:39:33.000+0000",
      "description": "Please advise whether following\u00a0vulnerability affecting Bamboo?\r\n\r\n\u00a0\r\n\r\nApache has released an update to address a vulnerability affecting Tomcat. Successful exploitation of the vulnerability may allow an attacker to perform Denial-of-Service (DoS) and/or obtain sensitive information on a vulnerable system.\r\n\r\n\u00a0\r\n\r\n\u00a0\r\n|*Vulnerability Information*|\r\n|*CVE*|*CVSS Base Score*|*GITSIR\u2019s Rating**|*Product Name*|*Version*|\r\n|CVE-2020-17527|Not Available|Not Available|Apache Tomcat|Apache Tomcat 10.0.0-M1 to 10.0.0-M9\r\nApache Tomcat 9.0.0.M5 to 9.0.39\r\nApache Tomcat 8.5.1 to 8.5.59|\r\n\r\n\u00a0\r\n|*GITSIR\u2019s Rating**|*CVSS Base Score (x)*|\r\n|High|x >= 8.0|\r\n|Medium|4.0 <= x < 8.0|\r\n|Low|x < 4.0|",
      "summary": "CVE-2020-17527 - Does this vulnerability affecting Bamboo?"
    }
  },
  {
    "key": "BAM-21184",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-12-11T14:42:30.000+0000",
      "description": "h3. Issue Summary\r\n\r\nSending a deployment template webhook using the variable {{bamboo.resultsUrl}} does fail to be sent.\r\n\r\nh3. Steps to Reproduce\r\n # Create a deployment webhook template using the variable {{bamboo.resultsUrl}}\r\n # Configure a deployment to send notifications using the webhook template that was just created\r\n # Trigger the deployment notification\r\n\r\nh3. Expected Results\r\n\r\nThe webhook is sent.\r\n\r\nh3. Actual Results\r\n\r\nThe webhook fails to be sent and the below exception is thrown in the atlassian-bamboo.log file:\r\n{noformat}\r\n020-12-11 10:42:44,394 ERROR [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-1] [WebhookTransport] [Webhook id=11173890, name=Deploy webhook, uuid=12b486a7-351d-41b0-bf62-a0f0bbcd0037] Variable not found: resultsUrl\r\ncom.atlassian.bamboo.notification.transports.webhook.VariableNotFoundException: Variable not found resultsUrl\r\n\tat com.atlassian.bamboo.notification.transports.webhook.VariableSubstitutorDecorator.substituteString(VariableSubstitutorDecorator.java:24)\r\n\tat com.atlassian.bamboo.notification.transports.webhook.WebhookTransport.sendNotification(WebhookTransport.java:68)\r\n\tat com.atlassian.bamboo.notification.NotificationDispatcherImpl.dispatchNotifications(NotificationDispatcherImpl.java:45)\r\n\tat com.atlassian.bamboo.deployments.notification.DeploymentNotificationEventListener.onDeploymentFinished(DeploymentNotificationEventListener.java:84)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat com.atlassian.event.internal.SingleParameterMethodListenerInvoker.invoke(SingleParameterMethodListenerInvoker.java:42)\r\n\tat com.atlassian.event.internal.AsynchronousAbleEventDispatcher.lambda$null$0(AsynchronousAbleEventDispatcher.java:37)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat com.atlassian.bamboo.utils.BambooRunnables$1.run(BambooRunnables.java:48)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper.runWith(ImpersonationHelper.java:26)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper.runWithSystemAuthority(ImpersonationHelper.java:17)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper$1.run(ImpersonationHelper.java:41)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n{noformat}\r\n\r\nh3. Workaround\r\n\r\nNo workaround",
      "summary": "Sending a deployment template webhook using the variable bamboo.resultsUrl fails to be sent"
    }
  },
  {
    "key": "BAM-21183",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-12-10T13:34:34.000+0000",
      "description": "h3. Issue Summary\r\n\r\nIf the total result count is less than given max-result, then in response max-result is equal to the total result count, not the given value.\r\nh3. Steps to Reproduce\r\n\r\nRequest [http://localhost:8085/rest/api/latest/plan?max-result=50&start-index=50] - response\u00a0[^bambo_plans_0_to_50.json]\r\nh3. Expected Results\r\n\r\n\"max-result\" to be returned 50.\r\nh3. Actual Results\r\n\r\nresponse max-result is equal to the total result count\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Incorrect max-result when total result count is less than given max-result"
    }
  },
  {
    "key": "BAM-21182",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-12-10T13:29:57.000+0000",
      "description": "h3. Issue Summary\r\n\r\nIf the start-index is greater than the total result count, then the last X plans are returned\r\nh3. Steps to Reproduce\r\n\r\nBamboo has 30 build plans \r\n\r\n1st request: [http://localhost:8085/rest/api/latest/plan] - result [^bambo_plans_0_to_25.json], - all is OK \r\n\r\n2nd request: [http://localhost:8085/rest/api/latest/plan?start-index=25] -\u00a0[^bambo_plans_25_to_50.json] - all is OK, last 5 plans are returned \r\n\r\n3rd request: [http://localhost:8085/rest/api/latest/plan?start-index=50]\u00a0\u00a0\r\nh3. Expected Results\r\n\r\nno result should be returned\r\nh3. Actual Results\r\n\r\n[^bambo_plans_50_to_75.json]\u00a0- not OK, but are returned last 25 plans\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Incorrect Plan REST API end-point results if start-index greater than total result count"
    }
  },
  {
    "key": "BAM-21181",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-12-09T21:20:44.000+0000",
      "description": "h3. Issue Summary\r\nIf the macOS running the remote agent service has a version of Java newer than 8, the wrapper will fail to start due to the incorrect Java version.\r\n\r\nh3. Steps to Reproduce\r\n# Install Java 8+ on a macOS;\r\n# Install a remote agent using the jar file;\r\n# Install agent daemon (bamboo-agent.sh install);\r\n# Start the agent (bamboo-agent.sh start);\r\n\r\nh3. Expected Results\r\nThe agent will start normally.\r\n\r\nh3. Actual Results\r\n\r\nThe agent will fail to start with the following error in the atlassain-bamboo-agent.log\r\n{noformat}\r\nDEBUG  | wrapper  | 2020/12/09 17:04:16 | Unable to resolve the real path of wrapper.java.command as a relative reference: java. No such file or directory (Problem at: /Users/agent-home/bin/java)\r\nDEBUG  | wrapper  | 2020/12/09 17:04:16 | Attempt to locate wrapper.java.command on system PATH: java\r\nDEBUG  | wrapper  | 2020/12/09 17:04:16 | Resolved the real path of wrapper.java.command from system PATH: /System/Library/Frameworks/JavaVM.framework/Versions/A/Commands/java\r\nDEBUG  | wrapper  | 2020/12/09 17:04:16 | Magic number for file /System/Library/Frameworks/JavaVM.framework/Versions/A/Commands/java: 0xcffaedfe\r\nDEBUG  | wrapper  | 2020/12/09 17:04:16 | Java Command Line (Query Java Version):\r\nDEBUG  | wrapper  | 2020/12/09 17:04:16 |   Command[0] : /System/Library/Frameworks/JavaVM.framework/Versions/A/Commands/java\r\nDEBUG  | wrapper  | 2020/12/09 17:04:16 |   Command[1] : -version\r\nDEBUG  | jvm ver. | 2020/12/09 17:04:16 | openjdk version \"11.0.9\" 2020-10-20\r\nDEBUG  | jvm ver. | 2020/12/09 17:04:16 | OpenJDK Runtime Environment AdoptOpenJDK (build 11.0.9+11)\r\nDEBUG  | jvm ver. | 2020/12/09 17:04:16 | OpenJDK 64-Bit Server VM AdoptOpenJDK (build 11.0.9+11, mixed mode)\r\n{noformat}\r\n\r\n{noformat}\r\nFATAL  | wrapper  | 2020/12/09 18:09:12 | The version of Java specified by wrapper.java.command (11.0.9)\r\nFATAL  | wrapper  | 2020/12/09 18:09:12 |  is greater than the maximum allowed (8).\r\n{noformat}\r\n\r\nh3. Workaround\r\n\r\nh4. Option A\r\n# Navigate to the folder containing the JDK (default {{/Library/Java/JavaVirtualMachines/}});\r\n# Find the JDK higher than 8, go to the Contents folder inside it;\r\n# It should contain a file Info.plist, rename it. e.g. Info.plist.disabled;\r\n# Start the remote agent.\r\n\r\nh4. Option B\r\n# Go to <Agent home>/conf and open the wrapper.conf;\r\n# In the wrapper.java.command change it for a full path to your java 8 executable. e.g {{/Library/Java/JavaVirtualMachines/adoptopenjdk-8.jdk/Contents/Home/bin/java}};\r\n# Save the file and start the agent.\r\n",
      "summary": "Remote agent service on macOS might not pick the correct Java version"
    }
  },
  {
    "key": "BAM-21180",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-12-09T18:00:44.000+0000",
      "description": "h3. Problem Definition\r\nAfter an agent is assigned and a build is queued, if the agent becomes unavailable while the build is in queue, the build will fail\r\nh3. Suggested Solution\r\nReassign to a different available agent.\r\nh4. Why this is important \r\nAny agent capable of building could be automatically assigned without a need for manual intervention",
      "summary": "Reassign build to new agent before fail when agent becomes unavailable"
    }
  },
  {
    "key": "BAM-21179",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-12-09T10:01:58.000+0000",
      "description": "h3. Issue Summary\r\n\r\nWhen Bamboo is configured to run using the AJP protocol with Apache Tomcat 8.5.51 or higher (bundled with Bamboo 7.0 and newer) the connector will fail to start.\r\n\r\nh3. Steps to Reproduce\r\n # Configure the AJP connector following the instructions on the {{server.xml}} file\r\n # Start Bamboo\r\n\r\nh3. Expected Results\r\n\r\nAJP connector will successfully start\r\n\r\nh3. Actual Results\r\n\r\nThe below exception is thrown in the {{<installation_directory>/logs/catalina.out}} file and the connector fails to start:\r\n{noformat}\r\n09-Dec-2020 10:52:10.649 SEVERE [main] org.apache.catalina.core.StandardService.startInternal Failed to start connector [Connector[AJP/1.3-8009]]\r\n        org.apache.catalina.LifecycleException: Protocol handler start failed\r\n                at org.apache.catalina.connector.Connector.startInternal(Connector.java:1057)\r\n                at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n                at org.apache.catalina.core.StandardService.startInternal(StandardService.java:440)\r\n                at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n                at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:766)\r\n                at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n                at org.apache.catalina.startup.Catalina.start(Catalina.java:688)\r\n                at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n                at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n                at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n                at java.lang.reflect.Method.invoke(Method.java:498)\r\n                at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:343)\r\n                at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:474)\r\n        Caused by: java.lang.IllegalArgumentException: The AJP Connector is configured with secretRequired=\"true\" but the secret attribute is either null or \"\". This combination is not valid.\r\n                at org.apache.coyote.ajp.AbstractAjpProtocol.start(AbstractAjpProtocol.java:274)\r\n                at org.apache.catalina.connector.Connector.startInternal(Connector.java:1055)\r\n                ... 12 more\r\n{noformat}\r\n\r\nThis error is caused by Apache Tomcat 8.5.51 and newer having the {{secretRequired}} parameter set to true by default. When {{secretRequired}} is true the AJP/1.3 Connector will not start unless the {{secret}} attribute is configured to a non-null, non-zero length string.\r\n\r\nh3. Workaround\r\n\r\nAdd a secret variable on the AJP connector on {{server.xml}} configuration which matches the secret added on the AJP configuration at proxy level.\r\n\r\nAnother potential solution is to disable this requirement by specifying {{secretRequired=\"false\"}} on the {{server.xml}} , however this is not recommended due to security concerns.",
      "summary": "Bamboo AJP connector will fail to start if no secret is added on the server.xml"
    }
  },
  {
    "key": "BAM-21178",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-12-14T15:38:23.000+0000",
      "created": "2020-12-08T11:31:55.000+0000",
      "description": "Artifact handlers are supported in Java specs and it'd be great to be able to configure those in YAML specs as well (S3 etc).",
      "summary": "Support artifact handlers in YAML specs"
    }
  },
  {
    "key": "BAM-21177",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-12-07T11:30:33.000+0000",
      "description": "h3. Summary\r\n\r\nIt would be nice to include some sort of check as part of an upgrade task to look for the data types of the Bamboo tables/ columns and update (ALTER) those columns if they're incorrect.\r\n\r\nh3. Scenario\r\n\r\nBamboo connected to Microsoft SQL Server. If the Bamboo tables/ columns are defined as varchar as opposed to *nvarchar* there will be implicit conversions run for every query no matter how small they are. This means database queries might start taking more time and resources (CPU) to run. In order to avoid running into this issue we could proactively check tables/ columns and change their data type where we see fit.",
      "summary": "Check for table/ column data types during an application upgrade to try and prevent database performance issues"
    }
  },
  {
    "key": "BAM-21175",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-12-03T16:19:38.000+0000",
      "description": "h3. Issue Summary\r\n\r\nThe *Total memory* report inside the *Bamboo admin > Overview > System > System information* page is reporting the value set for the _\"Initial memory pool\"_ inside the Java properties instead of the _\"Maximum memory pool\"_.\r\n\r\nh3. Steps to Reproduce\r\n{panel:title=|borderStyle=dashed|borderColor=#6a8eb3|titleBGColor=#f8f8f8|bgColor=#f8f8f8}\r\nYou must have Bamboo running as a Windows Service.\r\n{panel}\r\n# Follow the steps inside [this page|https://confluence.atlassian.com/bamboo/configuring-your-system-properties-289277345.html] to update the Java properties.\r\n# Go to the *Java* tab.\r\n# Increase the Maximum memory pool from 1024 to *2048*.\r\n# Restart the Service.\r\n# Access Bamboo from the UI and go to the *Bamboo admin > Overview > System > System information* page.\r\n# Find the *Total memory* report.\r\n\r\nh3. Expected Results\r\n\r\n*Total memory* will report 2048 MB since we increased the Maximum memory pool.\r\n\r\nh3. Actual Results\r\n\r\n*Total memory* will continue to report whatever number you have for the Initial memory pool. That number will only change if you change the Initial memory pool.\r\n\r\nh3. Notes\r\n\r\nThis is not affecting the ability of the JVM to use the amount of memory set for the Maximum memory pool. It only seems to be affecting reporting inside the System information page.\r\n\r\nh3. Workaround\r\n\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Total memory inside the System information page is taking the Initial memory pool size set for the Java properties"
    }
  },
  {
    "key": "BAM-21174",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-05-31T11:14:54.000+0000",
      "created": "2020-12-02T14:11:43.000+0000",
      "description": "h3. Issue Summary\r\n\r\nWhen importing several spec branches, Bamboo will not run specs on a particular branch if the plan branch was manually created rather than detected through VCS.\r\n\u00a0\r\nh3. Steps to Reproduce\r\n # Import a specs repository containing several spec branches\r\n # Access the plan imported, and manually create the branch as shown below\r\n !Screenshot 2020-12-02 at 13.20.32.png|thumbnail!\r\n\r\nh3. Expected Results\r\n\r\nBamboo will run the specs on the branch that you manually created.\r\n\r\nh3. Actual Results\r\n\r\nBamboo will ignore the spec branch that was manually created. Note, that if the branch is manually detected from VCS Bamboo does run the specs on it.\r\n\r\nh3. Workaround\r\n\r\nThere is no workaround other than detecting the branch through VCS rather than creating it manually. If you had created the branch manually already, you can delete it and re-add it once again but this time using the auto detect branches functionality.",
      "summary": "Specs do not run for a custom branch when this is created manually and not through VCS detection"
    }
  },
  {
    "key": "BAM-21173",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-12-06T21:13:30.000+0000",
      "created": "2020-12-02T13:32:38.000+0000",
      "description": "h3. Issue Summary\r\n\r\nWhen using specs to import a deployment project which contains an \"After succesful stage\" trigger pointing to a custom plan branch, this will be ignored and will not trigger after that custom branch stage builds successfully.\r\n\r\nh3. Steps to Reproduce\r\n # Create a specs linked repository that contains two branches containing the YAML specs below. For the example below the spec branches will be {{master}} and {{develop}}.\r\n{code}\r\n---\r\nversion: 2\r\n\r\nplan:\r\n  project-key: NEW\r\n  key: KEY\r\n  name: Test Project\r\n\r\ntriggers:\r\n  - polling:\r\n      period: 86400\r\n\r\nbranches:\r\n  create: manually\r\n\r\nstages:\r\n  - Stage 1:\r\n      jobs:\r\n        - Stage 1\r\n  - Stage 2:\r\n      jobs:\r\n        - Stage 2\r\n\r\nStage 1:\r\n  tasks:\r\n    - script: echo \"Stage 1 done\"\r\n\r\nStage 2:\r\n  tasks:\r\n    - script: echo \"Stage 2 done\"\r\n---\r\nversion: 2\r\n\r\ndeployment:\r\n  name: NEW\r\n  source-plan: NEW-KEY\r\n\r\nrelease-naming:\r\n  next-version-name: ${bamboo.buildResultKey}\r\n  applies-to-branches: true\r\n  auto-increment: false\r\n\r\nenvironments:\r\n  - production\r\n\r\nproduction:\r\n\r\n  tasks:\r\n    - clean\r\n    - script: echo \"Deployment on ${bamboo.deploy.environment} done!\"\r\n\r\n  triggers:\r\n    - stage-success:\r\n        stage: Stage 1\r\n        branch: develop\r\n{code}\r\n # Manually create the {{develop}} plan branch through VCS detection\r\n # Re-scan the specs repository and confirm that both specs branches imported successfully\r\n # Trigger the {{develop}} plan branch\r\n\r\nh3. Expected Results\r\n\r\nThe \"After successful stage\" trigger works for the custom branch works, and the deployment completes successfully\r\n\r\nh3. Actual Results\r\n\r\nThe trigger is ignored and the deployment does not occur. \r\n\r\nBy looking on the database, we can see that the {{triggers_xml_data}} column within the {{deployment_environment}} table is referencing the stage for {{master}} branch instead of the correct one which should be the {{develop}} stage. \r\n\r\nThe data below was generated while importing the above specs.\r\n{code}\r\n<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\r\n<configuration xml:space=\"preserve\">\r\n  <triggers>\r\n    <defined>true</defined>\r\n    <triggerDefinition>\r\n      <id>1</id>\r\n      <name>After successful stage</name>\r\n      <userDescription/>\r\n      <isEnabled>true</isEnabled>\r\n      <pluginKey>com.atlassian.bamboo.triggers.atlassian-bamboo-triggers:afterSuccessfulStage</pluginKey>\r\n      <triggeringRepositories/>\r\n      <config>\r\n        <item>\r\n          <key>deployment.trigger.afterSuccessfulStage.triggeringBranch</key>\r\n          <value>NEW-KEY0</value>\r\n        </item>\r\n        <item>\r\n          <key>deployment.trigger.afterSuccessfulStage.triggeringPlan</key>\r\n          <value>NEW-KEY</value>\r\n        </item>\r\n        <item>\r\n          <key>deployment.trigger.afterSuccessfulStage.triggeringStage</key>\r\n          <value>4063237</value>\r\n        </item>\r\n        <item>\r\n          <key>deployment.trigger.afterSuccessfulStage.branchSelectionMode</key>\r\n          <value>CUSTOM</value>\r\n        </item>\r\n      </config>\r\n    </triggerDefinition>\r\n  </triggers>\r\n  <bambooDelimiterParsingDisabled>true</bambooDelimiterParsingDisabled>\r\n</configuration>\r\n{code}\r\n\r\nWhen checking the {{build}} table we can see that stage number 4063237 refers to {{NEW-KEY-JOB1}} or the {{master}} branch and not the {{develop}} stage one.\r\n{noformat}\r\nSELECT build_type,full_key,stage_id FROM build where stage_id='4063237';\r\n\"build_type\",\"full_key\",\"stage_id\"\r\n\"JOB\",\"NEW-KEY-JOB1\",4063237\r\n{noformat}\r\n\r\n\r\nh3. Workaround\r\n\r\nNo workaround.",
      "summary": "Deployment trigger 'After a Successful Stage' does not trigger when points to a custom divergent branch"
    }
  },
  {
    "key": "BAM-21172",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-07-28T12:14:53.000+0000",
      "created": "2020-12-01T11:21:26.000+0000",
      "description": "h3. Issue Summary\r\n\r\nWhen editing an already created variable inside a plan branch, the variable name selector gets back to the default value \"Choose from inherited variables\", requiring manual selection of the correct variable being edited every time. Also, when saving, the table or the values are not responding to the interaction, even though the value was saved.\r\nh3. Steps to Reproduce\r\n # Create a variable in a plan\r\n # Create a plan branch\r\n # Override a variable in the plan branch\r\n # Try to edit the created variable\r\n\r\nh3. Expected Results\r\n * You are able to edit the variable without needing to re-select it\r\n * Your actions result in a correct UI state.\r\n\r\nh3. Actual Results\r\n * You need to select the variable you just clicked to edit\r\n * After saving, you need to trust that the variable was saved even though the interface doesn't show any signs of having actually succeeded\r\n\r\nh3. Workaround\r\n\r\nRe-select the correct variable you just clicked to edit, modify as you require, make sure to click the \"Save\" button and that no errors are dispalyed, and refresh the page. The value will be update.",
      "summary": "Editing a variable in plan branches is not working correctly"
    }
  },
  {
    "key": "BAM-21171",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-12-01T10:41:15.000+0000",
      "description": "h3. Issue Summary\r\n\r\nBamboo variables can be nested. System variables cannot.\r\nh3. Steps to Reproduce\r\n # Create a variable that contains a ${system...} variable. For example ${system.PATH}\r\n # Use the variable in the plan\r\n\r\nh3. Expected Results\r\n\r\nThe variable would resolve to the system variable, which is a nested variable and should resolve to the actual value. For example, variable ${bamboo.systemPath}, which could resolve to ${system.PATH} and finally would resolve to the actual PATH of the system.\r\nh3. Actual Results\r\n\r\nThe variable gets resolved only to ${system.PATH}.\r\nh3. Workaround\r\n\r\nUse the ${system...} variables directly",
      "summary": "Support system variables nesting"
    }
  },
  {
    "key": "BAM-21170",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-12-01T06:07:18.000+0000",
      "description": "h3. Issue Summary\r\nAfter upgrading to 7.+ trying to upgrade/upload a plugin freezes at the installing step. Other users trying to do the same after one upload is already blocked will be met with a warning about long running tasks.\r\n\r\nThis is caused by a background upgrade in the docker plugin which blocks UPM. It runs through every docker task and encrypts passwords it finds. On instances with large counts of docker tasks this can take some time.\r\n\r\nh3. Steps to Reproduce\r\n # Create many docker tasks on an instance pre 7.+\r\n # Upgrade to 7.+\r\n # Upload a plugin or try and upgrade a plugin\r\n\r\nh3. Expected Results\r\nPlugin successfully upgrades/installs\r\n\r\nh3. Actual Results\r\nUpgrade/install gets stuck at the installing step. Other users are not able to perform upgrades or installs due to a \"long running task\"\r\n\r\nThe below entry will be found in the bamboo log file after starting up:\r\n{noformat}\r\nUpgrading plugin com.atlassian.bamboo.plugins.bamboo-docker-plugin{noformat}\r\nbut there is no matching \"upgraded\" line that matches:\r\n{noformat}\r\nUpgraded plugin com.atlassian.bamboo.plugins.bamboo-docker-plugin\r\n{noformat}\r\n\r\nAlso thread dumps reveal a {{UpmAsynchronousTaskManager}} thread blocked by an {{AtlassianEvent}} thread performing the docker upgrade task:\r\n{noformat}\r\n...\r\ncom.atlassian.bamboo.plugins.docker.upgrade.EncryptSecureFieldsUpgradeTask.doUpgrade\r\n...\r\n{noformat}\r\n\r\nh3. Workaround\r\n\r\n# Wait for the docker upgrade to complete in the background. This can be determined by finding the following line in the bamboo logs:\r\n{noformat}\r\nUpgraded plugin com.atlassian.bamboo.plugins.bamboo-docker-plugin\r\n{noformat}\r\n# Manually place plugins to upgrade in the <Bamboo-home/plugins folder, replacing older versions. Then restart Bamboo",
      "summary": "Docker plugin upgrade takes very long time "
    }
  },
  {
    "key": "BAM-21169",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-11-29T21:20:44.000+0000",
      "description": "h3. Issue Summary\r\nWe've seen a few cases where the a build is left \"In Progress\" and no update is sent, even though the build is completed.\r\n\r\nFrom what we can see the non-updating build status is sent using the old REST API.\r\nThere is not a whole lot of data available, but it seems frequent enough that we need to investigate what is going on.\r\n\r\nh3. Steps to Reproduce\r\n # Unknown at the moment\r\n\r\nh3. Expected Results\r\nBuild status updated when build is completed.\r\n\r\nh3. Actual Results\r\n\r\nBuild status is not updated\r\n\r\nh3. Workaround\r\n\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Buildstatus not updated sometimes"
    }
  },
  {
    "key": "BAM-21167",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-12-08T14:43:36.000+0000",
      "created": "2020-11-26T19:37:17.000+0000",
      "description": "h3. Issue Summary\r\n\r\nCreating a Bitbucket Server repository in RSS mode using OpenSSH keys doesn't work. Bamboo throws the following error message:\r\n{noformat:title=Specs logs}\r\n26-Nov-2020 14:08:16\tcom.atlassian.bamboo.specs.api.exceptions.PropertiesValidationException: Clone url or ssh key pair is not valid\r\n26-Nov-2020 14:08:16\tjava.lang.IllegalArgumentException: com.atlassian.bamboo.specs.api.exceptions.PropertiesValidationException: Clone url or ssh key pair is not valid\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.configuration.external.PlanConfigImportServiceImpl.lambda$validateAndCreateRepositoryObjects$21(PlanConfigImportServiceImpl.java:1259)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.variable.CustomVariableContextImpl.withVariableSubstitutor(CustomVariableContextImpl.java:129)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.configuration.external.PlanConfigImportServiceImpl.validateAndCreateRepositoryObjects(PlanConfigImportServiceImpl.java:1235)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.configuration.external.PlanConfigImportServiceImpl.lambda$modifyTopLevelPlanFunction$2(PlanConfigImportServiceImpl.java:560)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.core.ScopedExclusionServiceImpl.tryWithLock(ScopedExclusionServiceImpl.java:74)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.configuration.external.PlanConfigImportServiceImpl.modifyExistingTopLevelPlan(PlanConfigImportServiceImpl.java:461)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.configuration.external.PlanConfigImportServiceImpl.lambda$importPlan$0(PlanConfigImportServiceImpl.java:426)\r\n26-Nov-2020 14:08:16\t\tat org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.persistence.BambooTransactionHibernateTemplate.execute(BambooTransactionHibernateTemplate.java:28)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.configuration.external.PlanConfigImportServiceImpl.importPlan(PlanConfigImportServiceImpl.java:405)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.configuration.external.rss.DefaultSpecsConsumer.importPlanProperties(DefaultSpecsConsumer.java:120)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.configuration.external.rss.importers.PlanImporterProvider.lambda$getEntityProvider$1(PlanImporterProvider.java:38)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.configuration.external.rss.AllTypesSpecsImporter.importBambooYamlsWithImporter(AllTypesSpecsImporter.java:88)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.configuration.external.rss.AllTypesSpecsImporter.importBambooYamlsOfAllTypes(AllTypesSpecsImporter.java:52)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.configuration.external.rss.JavaSpecsImportServiceImpl.lambda$processSpecs$2(JavaSpecsImportServiceImpl.java:77)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.configuration.external.rss.SpecsOptimizeProcessor.processSpecs(SpecsOptimizeProcessor.java:42)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.configuration.external.rss.JavaSpecsImportServiceImpl.processSpecs(JavaSpecsImportServiceImpl.java:63)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.configuration.external.RepositoryStoredSpecsServiceImpl.runBambooSpecs(RepositoryStoredSpecsServiceImpl.java:175)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.configuration.external.RssDetectionServiceImpl.runRssDetection(RssDetectionServiceImpl.java:330)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.configuration.external.detection.RssDetectionRunnable.run(RssDetectionRunnable.java:42)\r\n26-Nov-2020 14:08:16\t\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n26-Nov-2020 14:08:16\t\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n26-Nov-2020 14:08:16\t\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n26-Nov-2020 14:08:16\t\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.utils.BambooRunnables$1.run(BambooRunnables.java:48)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.security.ImpersonationHelper.runWith(ImpersonationHelper.java:26)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.security.ImpersonationHelper.runWithSystemAuthority(ImpersonationHelper.java:17)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.security.ImpersonationHelper$1.run(ImpersonationHelper.java:41)\r\n26-Nov-2020 14:08:16\t\tat java.lang.Thread.run(Thread.java:748)\r\n26-Nov-2020 14:08:16\tCaused by: com.atlassian.bamboo.specs.api.exceptions.PropertiesValidationException: Clone url or ssh key pair is not valid\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.plugins.stash.v2.exporter.BitbucketServerExporter.validateOrGenerateSshKeys(BitbucketServerExporter.java:325)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.plugins.stash.v2.exporter.BitbucketServerExporter.importLocationData(BitbucketServerExporter.java:290)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.plugins.stash.v2.exporter.BitbucketServerExporter.importLocationData(BitbucketServerExporter.java:71)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.configuration.external.exporters.RepositoryExporterImpl.importRepository(RepositoryExporterImpl.java:275)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.configuration.external.PlanConfigImportServiceImpl.lambda$validateAndCreateRepositoryObjects$21(PlanConfigImportServiceImpl.java:1241)\r\n26-Nov-2020 14:08:16\t\t... 28 more\r\n{noformat}\r\nh3. Steps to Reproduce\r\n # Create an application link to Bitbucket Server if you haven't one already.\r\n # Create/ add a Bitbucket Server repository to your plan using Java Specs:\r\n{noformat:title=Java Specs}\r\n.planRepositories(new BitbucketServerRepository()\r\n                        .name(\"myRepository\")\r\n                        .repositoryViewer(new BitbucketServerRepositoryViewer())\r\n                        .server(new ApplicationLink()\r\n                                .name(\"<applicationName>\"))\r\n                        .projectKey(\"<projectKey>\")\r\n                        .repositorySlug(\"<repositorySlug>\")\r\n                        .sshPublicKey(\"<sshPublicKey>\")\r\n                        .sshPrivateKey(\"<sshPrivateKey>\")\r\n                        .sshCloneUrl(\"<sshCloneUrl>\")\r\n                        .branch(\"master\"))\r\n{noformat}\r\n{noformat:title=Example}\r\n.planRepositories(new BitbucketServerRepository()\r\n                        .name(\"BbS\")\r\n                        .repositoryViewer(new BitbucketServerRepositoryViewer())\r\n                        .server(new ApplicationLink()\r\n                                .name(\"Bitbucket 7.6.0\")\r\n                                .id(\"1dc14b2e-02aa-38c3-89f4-a2d782eb18dc\"))\r\n                        .projectKey(\"SPECS\")\r\n                        .repositorySlug(\"godzilla\")\r\n                        .sshPublicKey(\"ssh-rsa AAAAB3N...\")\r\n                        .sshPrivateKey(\"BAMSCRT@0@0@2e8329V...\")\r\n                        .sshCloneUrl(\"ssh://git@bitbucket760:7999/specs/godzilla.git\")\r\n                        .branch(\"master\"))\r\n{noformat}\r\n# Create an SSH key pair using the following commands (the authentication is supposed to work whether you choose a password or not):\r\n{noformat}\r\nssh-keygen -t rsa -C \"your_email@example.com\"\r\n{noformat}\r\n{panel}\r\n(i) According to *man ssh-keygen* when the *-m* option is not used OpenSSH will write newly-generated private keys in its own format.\r\n{panel}\r\n# Copy the public key to your Java Specs code.\r\n# Take the private key and access Bamboo to encrypt it using the following steps:\r\n ** [Bamboo Specs encryption|https://confluence.atlassian.com/bamboo0701/bamboo-specs-encryption-1031178142.html]\r\n # Use the encrypted private key in your Java Specs code.\r\n # Go to Bitbucket Server and add the public key to the repository you're trying to add to your plan in the Java Specs code.\r\n ** Taking the example above I should be adding my public key to the repository named godzilla.\r\n # Push the changes made to your Java Specs code to your repository.\r\n # Access the *Bamboo admin > Linked repositories* page and find your repository.\r\n # Go to the *Specs status* tab.\r\n # Try to *Scan* your repository.\r\n\r\nh3. Expected Results\r\nBamboo will add a repository to your plan managed via Java Specs and you'll see a _\"Specs execution successful\"_ message.\r\n\r\nh3. Actual Results\r\n\r\nThe scan process fails with _\"Error in Bamboo Specs\"_\u00a0and the below exception is thrown in the Specs logs:\r\n{noformat:title=Specs logs}\r\n26-Nov-2020 14:08:16\tcom.atlassian.bamboo.specs.api.exceptions.PropertiesValidationException: Clone url or ssh key pair is not valid\r\n26-Nov-2020 14:08:16\tjava.lang.IllegalArgumentException: com.atlassian.bamboo.specs.api.exceptions.PropertiesValidationException: Clone url or ssh key pair is not valid\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.configuration.external.PlanConfigImportServiceImpl.lambda$validateAndCreateRepositoryObjects$21(PlanConfigImportServiceImpl.java:1259)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.variable.CustomVariableContextImpl.withVariableSubstitutor(CustomVariableContextImpl.java:129)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.configuration.external.PlanConfigImportServiceImpl.validateAndCreateRepositoryObjects(PlanConfigImportServiceImpl.java:1235)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.configuration.external.PlanConfigImportServiceImpl.lambda$modifyTopLevelPlanFunction$2(PlanConfigImportServiceImpl.java:560)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.core.ScopedExclusionServiceImpl.tryWithLock(ScopedExclusionServiceImpl.java:74)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.configuration.external.PlanConfigImportServiceImpl.modifyExistingTopLevelPlan(PlanConfigImportServiceImpl.java:461)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.configuration.external.PlanConfigImportServiceImpl.lambda$importPlan$0(PlanConfigImportServiceImpl.java:426)\r\n26-Nov-2020 14:08:16\t\tat org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.persistence.BambooTransactionHibernateTemplate.execute(BambooTransactionHibernateTemplate.java:28)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.configuration.external.PlanConfigImportServiceImpl.importPlan(PlanConfigImportServiceImpl.java:405)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.configuration.external.rss.DefaultSpecsConsumer.importPlanProperties(DefaultSpecsConsumer.java:120)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.configuration.external.rss.importers.PlanImporterProvider.lambda$getEntityProvider$1(PlanImporterProvider.java:38)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.configuration.external.rss.AllTypesSpecsImporter.importBambooYamlsWithImporter(AllTypesSpecsImporter.java:88)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.configuration.external.rss.AllTypesSpecsImporter.importBambooYamlsOfAllTypes(AllTypesSpecsImporter.java:52)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.configuration.external.rss.JavaSpecsImportServiceImpl.lambda$processSpecs$2(JavaSpecsImportServiceImpl.java:77)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.configuration.external.rss.SpecsOptimizeProcessor.processSpecs(SpecsOptimizeProcessor.java:42)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.configuration.external.rss.JavaSpecsImportServiceImpl.processSpecs(JavaSpecsImportServiceImpl.java:63)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.configuration.external.RepositoryStoredSpecsServiceImpl.runBambooSpecs(RepositoryStoredSpecsServiceImpl.java:175)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.configuration.external.RssDetectionServiceImpl.runRssDetection(RssDetectionServiceImpl.java:330)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.configuration.external.detection.RssDetectionRunnable.run(RssDetectionRunnable.java:42)\r\n26-Nov-2020 14:08:16\t\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n26-Nov-2020 14:08:16\t\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n26-Nov-2020 14:08:16\t\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n26-Nov-2020 14:08:16\t\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.utils.BambooRunnables$1.run(BambooRunnables.java:48)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.security.ImpersonationHelper.runWith(ImpersonationHelper.java:26)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.security.ImpersonationHelper.runWithSystemAuthority(ImpersonationHelper.java:17)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.security.ImpersonationHelper$1.run(ImpersonationHelper.java:41)\r\n26-Nov-2020 14:08:16\t\tat java.lang.Thread.run(Thread.java:748)\r\n26-Nov-2020 14:08:16\tCaused by: com.atlassian.bamboo.specs.api.exceptions.PropertiesValidationException: Clone url or ssh key pair is not valid\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.plugins.stash.v2.exporter.BitbucketServerExporter.validateOrGenerateSshKeys(BitbucketServerExporter.java:325)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.plugins.stash.v2.exporter.BitbucketServerExporter.importLocationData(BitbucketServerExporter.java:290)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.plugins.stash.v2.exporter.BitbucketServerExporter.importLocationData(BitbucketServerExporter.java:71)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.configuration.external.exporters.RepositoryExporterImpl.importRepository(RepositoryExporterImpl.java:275)\r\n26-Nov-2020 14:08:16\t\tat com.atlassian.bamboo.configuration.external.PlanConfigImportServiceImpl.lambda$validateAndCreateRepositoryObjects$21(PlanConfigImportServiceImpl.java:1241)\r\n26-Nov-2020 14:08:16\t\t... 28 more\r\n{noformat}\r\nh3. Workaround\r\nCheck the content of your private key:\r\n{noformat}\r\n-----BEGIN OPENSSH PRIVATE KEY-----\r\n{noformat}\r\nIf it starts with the message above you'll need to convert it to RSA format following these instructions:\r\n # {color:#FF0000}Backup your private key{color}.\r\n # Run the following command to convert the key:\r\n{noformat}\r\nssh-keygen -p -N \"\" -m pem -f /path/to/private/key\r\n{noformat}\r\n# Check the content again and you should now see the following line:\r\n{noformat}\r\n-----BEGIN RSA PRIVATE KEY-----\r\n{noformat}",
      "summary": "OpenSSH keys are not supported when creating Bitbucket Server repositories in RSS mode"
    }
  },
  {
    "key": "BAM-21166",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-11-25T15:45:07.000+0000",
      "description": "h3. Problem Definition\r\n\r\nStarting from Bamboo 7.0 onwards, the default size of atlassian-bamboo.log is increased to 100mb from 25mb and maximum files to retain is still just 5.\r\n\r\nIn busy instances, the server cannot hold sufficient logs as they are removed from the default directory after retaining the last 5 logs.\r\n{noformat}\r\n#using 'bamboo home aware' appender. If the File is relative a relative Path the file goes into {bamboo.home}/logs\r\nlog4j.appender.filelog=com.atlassian.bamboo.log.BambooRollingFileAppender\r\nlog4j.appender.filelog.File=atlassian-bamboo.log\r\nlog4j.appender.filelog.MaxFileSize=100MB\r\nlog4j.appender.filelog.MaxBackupIndex=5\r\nlog4j.appender.filelog.layout=org.apache.log4j.PatternLayout\r\nlog4j.appender.filelog.layout.ConversionPattern=%d %p [%t] [%c{1}] %m%n\r\n{noformat}\r\nh3. Suggested Solution\r\n\r\nTo retain the server log history, it is best to retain at least 20 logs like the solution below or increase the file size to 200mb in {{log4j.properties}}.\r\n{noformat}\r\n#using 'bamboo home aware' appender. If the File is relative a relative Path the file goes into {bamboo.home}/logs\r\nlog4j.appender.filelog=com.atlassian.bamboo.log.BambooRollingFileAppender\r\nlog4j.appender.filelog.File=atlassian-bamboo.log\r\nlog4j.appender.filelog.MaxFileSize=100MB\r\nlog4j.appender.filelog.MaxBackupIndex=20\r\nlog4j.appender.filelog.layout=org.apache.log4j.PatternLayout\r\nlog4j.appender.filelog.layout.ConversionPattern=%d %p [%t] [%c{1}] %m%n\r\n{noformat}\r\nh3. Why this is important\r\n\r\nDue to the current default setup, one can no longer track logs above 500mb on what happened on a busy server especially when DEBUG is enabled in some classes. as the limit of 5 files are removed already by default.\r\nh3. Workaround\r\n\r\nAfter upgrading Bamboo to 7.0 or above, ensure that the value of {{log4j.appender.filelog.MaxBackupIndex}} is increased in {{<Bamboo-Install>/atlassian-bamboo/WEB-INF/classes/log4j.properties}}\u00a0file.",
      "summary": "Increase the default log size of atlassian-bamboo.log"
    }
  }
]