[
  {
    "key": "BAM-21051",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-01-22T15:41:21.000+0000",
      "created": "2020-08-25T04:03:52.000+0000",
      "description": "h3. Issue Summary\r\nIf *Update group membership on login* is enabled and there is an underlying change to the user in LDAP/Crowd (email, firstname, lastname etc) or their group membership is updated, GET requests to REST APIs will fail.\r\n\r\nh3. Steps to Reproduce\r\n# Hook Bamboo up to Crowd or LDAP\r\n# Ensure Update group memberships when logging in: Everytime is enabled\r\n# Create a user in Crowd and add it to a Bamboo group\r\n# Login as that user into Bamboo\r\n# Now go into Crowd and update their first or last name (or in LDAP, go from no email attribute to an empty string)\r\n# Perform a GET request to $BAMBOO_BASE_URL/rest/api/latest/result/$PLAN_KEY.json\r\n\r\nh3. Expected Results\r\nRequest succeeds\r\n\r\nh3. Actual Results\r\nRequest fails with XSRF failure.\r\n\r\nThe below exception is thrown if the user attributes were updated:\r\n{noformat}\r\njava.lang.IllegalStateException: XSRF: A mutative operation was attempted on InternalUser within a non-mutative HTTP request: $BAMBOO_BASE_URL/rest/api/latest/result/RESULT_KEY.json :\r\n[[old row]]->[[new row]]\r\n\t\tat com.atlassian.bamboo.utils.XsrfUtils.fail(XsrfUtils.java:27)\r\n\t\tat com.atlassian.bamboo.hibernate.ReadOnlyGetMethodEnforcer.fail(ReadOnlyGetMethodEnforcer.java:125)\r\n\t\tat com.atlassian.bamboo.hibernate.ReadOnlyGetMethodEnforcer.onFlushDirty(ReadOnlyGetMethodEnforcer.java:76)\r\n\t\tat org.hibernate.event.internal.DefaultFlushEntityEventListener.invokeInterceptor(DefaultFlushEntityEventListener.java:355)\r\n\t\tat org.hibernate.event.internal.DefaultFlushEntityEventListener.handleInterception(DefaultFlushEntityEventListener.java:332)\r\n\t\tat org.hibernate.event.internal.DefaultFlushEntityEventListener.scheduleUpdate(DefaultFlushEntityEventListener.java:283)\r\n\t\tat org.hibernate.event.internal.DefaultFlushEntityEventListener.onFlushEntity(DefaultFlushEntityEventListener.java:154)\r\n\t\tat org.hibernate.event.internal.AbstractFlushingEventListener.flushEntities(AbstractFlushingEventListener.java:235)\r\n\t\tat org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:94)\r\n\t\tat org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:44)\r\n\t\tat org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1415)\r\n\t\tat org.hibernate.internal.SessionImpl.list(SessionImpl.java:1501)\r\n\t\tat org.hibernate.query.internal.AbstractProducedQuery.doList(AbstractProducedQuery.java:1537)\r\n\t\tat org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1505)\r\n\t\tat com.atlassian.crowd.dao.membership.MembershipDAOHibernate.search(MembershipDAOHibernate.java:304)\r\n\t\tat com.atlassian.crowd.directory.AbstractInternalDirectory.searchGroupRelationships(AbstractInternalDirectory.java:872)\r\n\t\tat com.atlassian.crowd.directory.DbCachingRemoteDirectory.updateGroupsMembershipOnLogin(DbCachingRemoteDirectory.java:349)\r\n\t\tat com.atlassian.crowd.directory.DbCachingRemoteDirectory.updateUserFromRemoteDirectory(DbCachingRemoteDirectory.java:285)\r\n\t\tat com.atlassian.crowd.directory.DbCachingRemoteDirectory.authenticateAndUpdateInternalUser(DbCachingRemoteDirectory.java:253)\r\n\t\tat com.atlassian.crowd.directory.DbCachingRemoteDirectory.performAuthenticationAndUpdateAttributes(DbCachingRemoteDirectory.java:192)\r\n\t\tat com.atlassian.crowd.directory.DbCachingRemoteDirectory.authenticate(DbCachingRemoteDirectory.java:172)\r\n\t\tat com.atlassian.crowd.manager.directory.DirectoryManagerGeneric.authenticateUser(DirectoryManagerGeneric.java:284)\r\n\t\tat sun.reflect.GeneratedMethodAccessor2027.invoke(Unknown Source)\r\n\t\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\t\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\t\tat com.sun.proxy.$Proxy170.authenticateUser(Unknown Source)\r\n\t\tat com.atlassian.crowd.manager.application.ApplicationServiceGeneric.authenticateUser(ApplicationServiceGeneric.java:182)\r\n\t\tat sun.reflect.GeneratedMethodAccessor2026.invoke(Unknown Source)\r\n\t\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\t\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\t\tat com.sun.proxy.$Proxy173.authenticateUser(Unknown Source)\r\n\t\tat com.atlassian.crowd.embedded.core.CrowdServiceImpl.authenticate(CrowdServiceImpl.java:70)\r\n\t\tat sun.reflect.GeneratedMethodAccessor2025.invoke(Unknown Source)\r\n\t\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\t\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\t\tat com.sun.proxy.$Proxy174.authenticate(Unknown Source)\r\n\t\tat com.atlassian.crowd.embedded.atlassianuser.EmbeddedCrowdAuthenticator.authenticate(EmbeddedCrowdAuthenticator.java:24)\r\n\t\tat com.atlassian.crowd.embedded.atlassianuser.EmbeddedCrowdAuthenticator$$FastClassBySpringCGLIB$$af97c51b.invoke(&lt;generated&gt;)\r\n\t\tat com.atlassian.crowd.embedded.atlassianuser.EmbeddedCrowdAuthenticator$$EnhancerBySpringCGLIB$$cb218de2.authenticate(&lt;generated&gt;)\r\n\t\tat bucket.user.DefaultUserAccessor.authenticate(DefaultUserAccessor.java:711)\r\n\t\tat sun.reflect.GeneratedMethodAccessor2024.invoke(Unknown Source)\r\n\t\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\t\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\t\tat com.sun.proxy.$Proxy183.authenticate(Unknown Source)\r\n\t\tat com.atlassian.bamboo.user.authentication.BambooAuthenticator.authenticate(BambooAuthenticator.java:47)\r\n\t\tat com.atlassian.seraph.auth.DefaultAuthenticator.login(DefaultAuthenticator.java:90)\r\n\t\tat com.atlassian.bamboo.user.authentication.BambooAuthenticator.login(BambooAuthenticator.java:32)\r\n\t\tat com.atlassian.seraph.auth.DefaultAuthenticator.getUserFromBasicAuthentication(DefaultAuthenticator.java:530)\r\n\t\tat com.atlassian.seraph.auth.DefaultAuthenticator.getUser(DefaultAuthenticator.java:341)\r\n\t\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:609)\r\n\t\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\t\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:818)\r\n\t\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1623)\r\n\t\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\t\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\t\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\t\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\t\tat java.lang.Thread.run(Thread.java:748)\r\n{noformat}\r\n\r\nIf group membership has changed:\r\n{noformat}\r\njava.lang.IllegalStateException: XSRF: A mutative operation was attempted on InternalMembership within a non-mutative HTTP request: $BAMBOO_BASE_URL/rest/api/latest/result/RESULT_KEY.json : [null]->[new row]\r\n\tat com.atlassian.bamboo.utils.XsrfUtils.fail(XsrfUtils.java:27)\r\n\tat com.atlassian.bamboo.hibernate.ReadOnlyGetMethodEnforcer.fail(ReadOnlyGetMethodEnforcer.java:127)\r\n\tat com.atlassian.bamboo.hibernate.ReadOnlyGetMethodEnforcer.failIfStateMutationNotAllowed(ReadOnlyGetMethodEnforcer.java:104)\r\n\tat com.atlassian.bamboo.hibernate.ReadOnlyGetMethodEnforcer.onSave(ReadOnlyGetMethodEnforcer.java:88)\r\n\tat com.atlassian.bamboo.persister.OidGenerationInterceptor.onSave(OidGenerationInterceptor.java:46)\r\n\tat org.hibernate.event.internal.AbstractSaveEventListener.substituteValuesIfNecessary(AbstractSaveEventListener.java:419)\r\n\tat org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:275)\r\n\tat org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:201)\r\n\tat org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:144)\r\n\tat org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:192)\r\n\tat org.hibernate.event.internal.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:38)\r\n\tat org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:177)\r\n\tat org.hibernate.event.internal.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:32)\r\n\tat org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:73)\r\n\tat org.hibernate.internal.SessionImpl.fireSave(SessionImpl.java:709)\r\n\tat org.hibernate.internal.SessionImpl.save(SessionImpl.java:701)\r\n\tat org.hibernate.internal.SessionImpl.save(SessionImpl.java:696)\r\n\tat com.atlassian.crowd.util.persistence.hibernate.HibernateDao.save(HibernateDao.java:299)\r\n\tat com.atlassian.crowd.dao.membership.MembershipDAOHibernate.addUserToGroup(MembershipDAOHibernate.java:131)\r\n\tat com.atlassian.crowd.directory.AbstractInternalDirectory.addUserToGroup(AbstractInternalDirectory.java:816)\r\n\tat com.atlassian.crowd.directory.DbCachingRemoteDirectory.addUserToGroupInternal(DbCachingRemoteDirectory.java:806)\r\n\tat com.atlassian.crowd.directory.DbCachingRemoteDirectory.updateGroupsMembershipOnLogin(DbCachingRemoteDirectory.java:389)\r\n\tat com.atlassian.crowd.directory.DbCachingRemoteDirectory.updateUserFromRemoteDirectory(DbCachingRemoteDirectory.java:288)\r\n\tat com.atlassian.crowd.directory.DbCachingRemoteDirectory.authenticateAndUpdateInternalUser(DbCachingRemoteDirectory.java:256)\r\n\tat com.atlassian.crowd.directory.DbCachingRemoteDirectory.authenticate(DbCachingRemoteDirectory.java:173)\r\n\tat com.atlassian.crowd.manager.directory.DirectoryManagerGeneric.authenticateUser(DirectoryManagerGeneric.java:304)\r\n\tat sun.reflect.GeneratedMethodAccessor2308.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat com.sun.proxy.$Proxy175.authenticateUser(Unknown Source)\r\n\tat com.atlassian.crowd.manager.application.ApplicationServiceGeneric.authenticateUser(ApplicationServiceGeneric.java:177)\r\n\tat sun.reflect.GeneratedMethodAccessor2348.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat com.sun.proxy.$Proxy179.authenticateUser(Unknown Source)\r\n\tat com.atlassian.crowd.embedded.core.CrowdServiceImpl.authenticate(CrowdServiceImpl.java:70)\r\n\tat sun.reflect.GeneratedMethodAccessor2347.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat com.sun.proxy.$Proxy180.authenticate(Unknown Source)\r\n\tat com.atlassian.crowd.embedded.atlassianuser.EmbeddedCrowdAuthenticator.authenticate(EmbeddedCrowdAuthenticator.java:24)\r\n\tat com.atlassian.crowd.embedded.atlassianuser.EmbeddedCrowdAuthenticator$$FastClassBySpringCGLIB$$af97c51b.invoke(&lt;generated&gt;)\r\n\tat com.atlassian.crowd.embedded.atlassianuser.EmbeddedCrowdAuthenticator$$EnhancerBySpringCGLIB$$cb218de2.authenticate(&lt;generated&gt;)\r\n\tat bucket.user.DefaultUserAccessor.authenticate(DefaultUserAccessor.java:711)\r\n\tat sun.reflect.GeneratedMethodAccessor2346.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat com.sun.proxy.$Proxy189.authenticate(Unknown Source)\r\n\tat com.atlassian.bamboo.user.authentication.BambooAuthenticator.authenticate(BambooAuthenticator.java:47)\r\n\tat com.atlassian.seraph.auth.DefaultAuthenticator.login(DefaultAuthenticator.java:90)\r\n\tat com.atlassian.bamboo.user.authentication.BambooAuthenticator.login(BambooAuthenticator.java:32)\r\n\tat com.atlassian.seraph.auth.DefaultAuthenticator.getUserFromBasicAuthentication(DefaultAuthenticator.java:530)\r\n\tat com.atlassian.seraph.auth.DefaultAuthenticator.getUser(DefaultAuthenticator.java:341)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:609)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:818)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1623)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n{noformat}\r\n\r\nBoth stacks have been heavily truncated to remove filters, springframework and catalina lines.\r\n\r\nh3. Workaround\r\n\r\nh6. Workaround 1\r\nUse Personal Access Tokens to authenticate with the API instead:\r\n* [Personal access tokens|https://confluence.atlassian.com/bamboo/personal-access-tokens-976779873.html]\r\n\r\nh6. Workaround 2\r\nLogin as the user via the UI so that updates are performed. REST calls will now work until theres another change to the user or their group membership.",
      "summary": "XSRF failure for GET REST requests when Update group membership on login is enabled and user or group membership is updated"
    }
  },
  {
    "key": "BAM-21050",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-09-22T13:36:36.000+0000",
      "created": "2020-08-24T12:16:13.000+0000",
      "description": "h3. Issue Summary\r\n\r\nBamboo is trying to find the value of a secret variable in the logs (e.g. password) and redact every occurrence of it.\r\n\r\nh3. Steps to Reproduce\r\n# Add a plan variable named *bamboo.password* with value *build*.\r\n!Screen Shot 2020-08-24 at 09.05.20.png|thumbnail!\r\n# Create a Script task with the following content:\r\n#* echo \"This is my build!\"\r\n!Screen Shot 2020-08-24 at 09.07.14.png|thumbnail!\r\n# Trigger a new build.\r\n# Check the logs of the build.\r\n\r\nh3. Expected Results\r\n\r\n# The build should echo the message: This is my build!\r\n# None of the occurrences of the word *build* in the logs should be redacted.\r\n\r\nh3. Actual Results\r\n\r\n# The build displays the following message:\r\n{noformat}\r\n24-Aug-2020 12:08:13\tThis is my ********!\r\n{noformat}\r\n# Every occurrence of the word build in the logs has been redacted:\r\n{noformat}\r\nsimple\t24-Aug-2020 12:08:12\tBuild BAM - BOO - Default Job #13 (BAM-BOO-JOB1-13) started ********ing on agent Default Agent, bamboo version: 7.1.1\r\nsimple\t24-Aug-2020 12:08:12\t\r\nsimple\t24-Aug-2020 12:08:12\tBuild working directory is /var/atlassian/application-data/bamboo/xml-data/********-dir/BAM-BOO-JOB1\r\nsimple\t24-Aug-2020 12:08:12\tExecuting ******** BAM - BOO - Default Job #13 (BAM-BOO-JOB1-13)\r\nsimple\t24-Aug-2020 12:08:12\tRunning pre-******** action: VCS Version Collector\r\nsimple\t24-Aug-2020 12:08:12\tStarting task 'Script' of type 'com.atlassian.bamboo.plugins.scripttask:task.********er.script'\r\ncommand\t24-Aug-2020 12:08:12\tBeginning to execute external process for ******** 'BAM - BOO - Default Job #13 (BAM-BOO-JOB1-13)'\\n ... running command line: \\n/var/atlassian/application-data/bamboo/temp/BAM-BOO-JOB1-13-ScriptBuildTask-3782544177082813963.sh\\n ... in: /var/atlassian/application-data/bamboo/xml-data/********-dir/BAM-BOO-JOB1\\n ... using extra environment variables: \\nbamboo_password=********\\nbamboo_resultsUrl=http://bamboo711:8085/browse/BAM-BOO-JOB1-13\\nbamboo_dependenciesDisabled=false\\nbamboo_********Failed=false\\nbamboo_********_working_directory=/var/atlassian/application-data/bamboo/xml-data/********-dir/BAM-BOO-JOB1\\nbamboo_********Key=BAM-BOO-JOB1\\nbamboo_capability_system_docker_executable=/usr/bin/docker\\nbamboo_shortPlanName=BOO\\nbamboo_agentWorkingDirectory=/var/atlassian/application-data/bamboo/xml-data/********-dir\\nbamboo_capability_system_git_executable=/usr/bin/git\\nbamboo_********Number=13\\nbamboo_shortJobName=Default Job\\nbamboo_********ResultsUrl=http://bamboo711:8085/browse/BAM-BOO-JOB1-13\\nbamboo_capability_system_jdk_JDK=/opt/java/openjdk\\nbamboo_agentId=360449\\nbamboo_planName=BAM - BOO\\nbamboo_plan_storageTag=plan-589825\\nbamboo_shortPlanKey=BOO\\nbamboo_hg_cache_directory=/var/atlassian/application-data/bamboo/xml-data/********-dir/_hg-repositories-cache\\nbamboo_ManualBuildTriggerReason_userName=brosa\\nbamboo_shortJobKey=JOB1\\nbamboo_git_cache_directory=/var/atlassian/application-data/bamboo/xml-data/********-dir/_git-repositories-cache\\nbamboo_********TimeStamp=2020-08-24T12:08:11.944Z\\nbamboo_tmp_directory=/var/atlassian/application-data/bamboo/temp\\nbamboo_working_directory=/var/atlassian/application-data/bamboo/xml-data/********-dir/BAM-BOO-JOB1\\nbamboo_planKey=BAM-BOO\\nbamboo_capability_system_jdk_JDK_1_8=/opt/java/openjdk\\nbamboo_********ResultKey=BAM-BOO-JOB1-13\\nbamboo_********PlanName=BAM - BOO - Default Job\\nbamboo_capability_system_jdk_JDK_1_8_0_262=/opt/java/openjdk\\n\r\nbuild\t24-Aug-2020 12:08:13\tThis is my ********!\r\nsimple\t24-Aug-2020 12:08:13\tFinished task 'Script' with result: Success\r\nsimple\t24-Aug-2020 12:08:13\tRunning post ******** plugin 'NCover Results Collector'\r\nsimple\t24-Aug-2020 12:08:13\tRunning post ******** plugin 'Artifact Copier'\r\nsimple\t24-Aug-2020 12:08:13\tRunning post ******** plugin 'npm Cache Cleanup'\r\nsimple\t24-Aug-2020 12:08:13\tRunning post ******** plugin 'Clover Results Collector'\r\nsimple\t24-Aug-2020 12:08:13\tRunning post ******** plugin 'Docker Container Cleanup'\r\nsimple\t24-Aug-2020 12:08:13\tFinalising the ********...\r\nsimple\t24-Aug-2020 12:08:13\tStopping timer.\r\nsimple\t24-Aug-2020 12:08:13\tBuild BAM-BOO-JOB1-13 completed.\r\nsimple\t24-Aug-2020 12:08:13\tRunning on server: post build plugin 'NCover Results Collector'\r\nsimple\t24-Aug-2020 12:08:13\tRunning on server: post build plugin 'Build Hanging Detection Configuration'\r\nsimple\t24-Aug-2020 12:08:13\tRunning on server: post build plugin 'Clover Delta Calculator'\r\nsimple\t24-Aug-2020 12:08:13\tRunning on server: post build plugin 'Maven Dependencies Postprocessor'\r\nsimple\t24-Aug-2020 12:08:13\tAll post build plugins have finished\r\nsimple\t24-Aug-2020 12:08:13\tGenerating build results summary...\r\nsimple\t24-Aug-2020 12:08:13\tSaving build results to disk...\r\nsimple\t24-Aug-2020 12:08:13\tStore variable context...\r\nsimple\t24-Aug-2020 12:08:13\tIndexing build results...\r\nsimple\t24-Aug-2020 12:08:13\tFinished building BAM-BOO-JOB1-13.\r\n{noformat}\r\n\r\nThis makes it pretty easy to figure out what is the value of the *bamboo.password* variable.\r\n\r\nh3. Workaround\r\n\r\nChange your password to a word or combination of letters that's not present in the build logs i.e. make sure there's no other occurrences of it in the logs.",
      "summary": "Bamboo is redacting every occurrence of a password variable's value in build logs"
    }
  },
  {
    "key": "BAM-21049",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-08-24T09:43:39.000+0000",
      "created": "2020-08-22T00:55:25.000+0000",
      "description": "YAML Spec should have the option to specify a description for tasks. mainly Scripts. For plans and projects with numerous amount of script tasks, it is important to distinguish what each tasks is doing. This feature would be really good for YAML specs and Bamboo Specs in general.\u00a0",
      "summary": "YAML Specs should include Descriptions"
    }
  },
  {
    "key": "BAM-21048",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-08-21T18:41:34.000+0000",
      "created": "2018-10-09T18:40:08.000+0000",
      "description": "Our deployments are not Java and we have no Java skills. We are deploying many API's, across many environments which is unmanageable via the UI and we want to drive the behavior directly from source as we now can do with build plans.\r\n\r\nNote: I have raised this against Bitbucket server as the solution tightly couples the two (Bamboo & Bitbucket) products.\r\n\r\nThe desire is to have the functionality indicated here\u00a0[https://confluence.atlassian.com/bamboo/creating-and-configuring-a-deployment-project-338363448.html]\r\nh2. Viewing a Bamboo deployment project in the YAML format\r\n\r\nBamboo instance administrators can view the deployment configuration in the YAML format in\u00a0*Deployment project configuration >\u00a0Actions*:\r\n\r\n!https://confluence.atlassian.com/bamboo/files/338363448/858568780/1/1477571011774/yaml_deployment_project.png|width=896,height=132!\r\n Last modified on Jun 20, 2018",
      "summary": "Please introduce YAML deployment plans (like build plans)"
    }
  },
  {
    "key": "BAM-21047",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-08-21T10:32:33.000+0000",
      "description": "h3. Issue Summary\r\n\r\nIt'd be nice if there was an option to forcefully pull an image for docker runner, so that when, say, latest tag is updated it's available on all agents. Currently, docker pull use an existing tag on a host and will not go to a remote.\r\nh3. Steps to Reproduce\r\n # Configure job to be executed in a docker image. Run the job\r\n # Update docker image, push to registry, re run the job. Bamboo will use an old tag\r\n\r\nh3. Workaround\r\n\r\nRun docker pull tasks before the main task",
      "summary": "Pull Image for Docker Runner"
    }
  },
  {
    "key": "BAM-21046",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-08-21T09:01:27.000+0000",
      "description": "h3. Problem Definition\r\n\r\nWhen a linked repository is deleted and readded in a plan, the respective plan branches start to point the master branch instead of the respective branch.\r\nh3. How to Replicate\r\n # Create a test plan and add a plan level 'Bitbucket cloud' linked repository (that has some branches in it).\r\n # Now create a plan branch manually and refer it to a sample branch\r\n # Delete the linked repository\r\n # Redefine the same linked repository in the same plan.\r\n # Go to the plan branch -> Repositories (tab)\r\n # The Branch section will point to 'master' instead of the previously referenced branch.\r\n\r\nh3. Suggested Solution\r\n\r\nBamboo should preserve the branch name so that if the same repository is referenced back, we can restore the exact branch.\r\nh3. Why this is important\r\n\r\nThere are occasions when the reference to the respective linked repository is lost. Due to this, when we define the same repository once again, the respective relationship is lost and thus the builds in plan branch are erratic and results in fetching commits from the master branch instead of the previous plan branch.\r\nh3. Workaround\r\n\r\nWhenever the same linked repository is defined, go to every branch plan's repository settings and change the branch option to point to the respective branch instead of 'master'.",
      "summary": "Bitbucket cloud linked repositories do not preserve branch name relation"
    }
  },
  {
    "key": "BAM-21043",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-07-28T12:14:54.000+0000",
      "created": "2020-08-19T03:14:15.000+0000",
      "description": "h3. Issue Summary\r\nRerunning a build after deleting a stage can break result removal and expiry.\r\n\r\nh3. Steps to Reproduce\r\n# Create a 3 stage plan\r\n# Run a build\r\n# Delete the 2nd stage\r\n# *Rerun* the build from Step 2 (don't perform a *new* build, if it was build #1, rerun build result #1)\r\n# Attempt to manually delete the result or expire it\r\n\r\nh3. Expected Results\r\nThe result can be removed or expired.\r\n\r\nh3. Actual Results\r\nResult cannot be deleted or expired.\r\n\r\nThe below exception is thrown in the $BAMBOO_HOME/logs/atlassian-bamboo.log (or UI if deleting a result) file:\r\n{noformat}\r\n2020-08-19 13:09:59,399 ERROR [2-BuildExpiryBean:pool-5-thread-1] [SqlExceptionHelper] ERROR: update or delete on table \"buildresultsummary\" violates foreign key constraint \"fk_4p9t5luuw2awjxfgensarfhpn\" on table \"chain_stage_result\"\r\n  Detail: Key (buildresultsummary_id)=(284065795) is still referenced from table \"chain_stage_result\".\r\n2020-08-19 13:09:59,400 ERROR [2-BuildExpiryBean:pool-5-thread-1] [BuildExpiryBeanImpl] A problem has occurred during expiry of BAM-BOO\r\norg.springframework.dao.DataIntegrityViolationException: could not execute batch; SQL [delete from BUILDRESULTSUMMARY where BUILDRESULTSUMMARY_ID=?]; constraint [fk_4p9t5luuw2awjxfgensarfhpn]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute batch\r\n\tat org.springframework.orm.hibernate5.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:247)\r\n\tat org.springframework.orm.hibernate5.HibernateTemplate.doExecute(HibernateTemplate.java:391)\r\n\tat org.springframework.orm.hibernate5.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:350)\r\n\tat com.atlassian.bamboo.persistence.BambooTransactionHibernateTemplate$1.doInTransaction(BambooTransactionHibernateTemplate.java:36)\r\n\tat org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)\r\n\tat com.atlassian.bamboo.persistence.BambooTransactionHibernateTemplate.execute(BambooTransactionHibernateTemplate.java:28)\r\n\tat com.atlassian.bamboo.persistence.BambooTransactionHibernateTemplate.execute(BambooTransactionHibernateTemplate.java:33)\r\n\tat com.atlassian.bamboo.build.expiry.BuildExpiryBeanImpl.expireBuildPlan(BuildExpiryBeanImpl.java:270)\r\n\tat com.atlassian.bamboo.build.expiry.BuildExpiryBeanImpl$1.call(BuildExpiryBeanImpl.java:137)\r\n\tat com.atlassian.bamboo.build.expiry.BuildExpiryBeanImpl$1.call(BuildExpiryBeanImpl.java:101)\r\n\tat com.google.common.util.concurrent.TrustedListenableFutureTask$TrustedFutureInterruptibleTask.runInterruptibly(TrustedListenableFutureTask.java:125)\r\n\tat com.google.common.util.concurrent.InterruptibleTask.run(InterruptibleTask.java:57)\r\n\tat com.google.common.util.concurrent.TrustedListenableFutureTask.run(TrustedListenableFutureTask.java:78)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat com.atlassian.bamboo.utils.BambooRunnables$1.run(BambooRunnables.java:48)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper.runWith(ImpersonationHelper.java:26)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper.runWithSystemAuthority(ImpersonationHelper.java:17)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper$1.run(ImpersonationHelper.java:41)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute batch\r\n\tat org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:112)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchingBatch.performExecution(BatchingBatch.java:128)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchingBatch.doExecuteBatch(BatchingBatch.java:104)\r\n\tat org.hibernate.engine.jdbc.batch.internal.AbstractBatchImpl.execute(AbstractBatchImpl.java:147)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.executeBatch(JdbcCoordinatorImpl.java:212)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:625)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:470)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:356)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1454)\r\n\tat org.hibernate.internal.SessionImpl.flush(SessionImpl.java:1440)\r\n\tat com.atlassian.bamboo.build.expiry.BuildExpiryBeanImpl.lambda$expireBuildPlan$0(BuildExpiryBeanImpl.java:279)\r\n\tat org.springframework.orm.hibernate5.HibernateTemplate.doExecute(HibernateTemplate.java:384)\r\n\t... 18 more\r\nCaused by: java.sql.BatchUpdateException: Batch entry 0 delete from BUILDRESULTSUMMARY where BUILDRESULTSUMMARY_ID=284065795 was aborted: ERROR: update or delete on table \"buildresultsummary\" violates foreign key constraint \"fk_4p9t5luuw2awjxfgensarfhpn\" on table \"chain_stage_result\"\r\n  Detail: Key (buildresultsummary_id)=(284065795) is still referenced from table \"chain_stage_result\".  Call getNextException to see other errors in the batch.\r\n\tat org.postgresql.jdbc.BatchResultHandler.handleError(BatchResultHandler.java:148)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2212)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:509)\r\n\tat org.postgresql.jdbc.PgStatement.executeBatch(PgStatement.java:853)\r\n\tat org.postgresql.jdbc.PgPreparedStatement.executeBatch(PgPreparedStatement.java:1546)\r\n\tat com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeBatch(NewProxyPreparedStatement.java:2544)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchingBatch.performExecution(BatchingBatch.java:118)\r\n\t... 29 more\r\nCaused by: org.postgresql.util.PSQLException: ERROR: update or delete on table \"buildresultsummary\" violates foreign key constraint \"fk_4p9t5luuw2awjxfgensarfhpn\" on table \"chain_stage_result\"\r\n  Detail: Key (buildresultsummary_id)=(284065795) is still referenced from table \"chain_stage_result\".\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2468)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2211)\r\n\t... 34 more\r\n{noformat}\r\n\r\nYou may also see the following:\r\n{noformat}\r\n2020-08-13 14:58:15,795 WARN [2-BuildExpiryBean:pool-5-thread-1] [BuildExpiryBeanImpl] Unable to expire BAM-BRAN-36\r\norg.springframework.dao.InvalidDataAccessApiUsageException: deleted object would be re-saved by cascade (remove deleted object from associations): [com.atlassian.bamboo.resultsummary.vcs.RepositoryChangesetImpl#281837570]; nested exception is org.hibernate.ObjectDeletedException: deleted object would be re-saved by cascade (remove deleted object from associations): [com.atlassian.bamboo.resultsummary.vcs.RepositoryChangesetImpl#281837570]\r\n\tat org.springframework.orm.hibernate5.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:277)\r\n\tat org.springframework.orm.hibernate5.HibernateTemplate.doExecute(HibernateTemplate.java:387)\r\n\tat org.springframework.orm.hibernate5.HibernateTemplate.execute(HibernateTemplate.java:336)\r\n\tat com.atlassian.bamboo.plan.PlanHibernateDao.getPlanByKey(PlanHibernateDao.java:80)\r\n\tat com.sun.proxy.$Proxy134.getPlanByKey(Unknown Source)\r\n\tat com.atlassian.bamboo.plan.PlanManagerImpl.getPlanByKey(PlanManagerImpl.java:104)\r\n\tat com.atlassian.bamboo.plan.PlanManagerImpl.getPlanByKey(PlanManagerImpl.java:154)\r\n\tat com.atlassian.bamboo.security.acegi.intercept.aopalliance.AuthorityOverrideMethodSecurityInterceptor.invoke(AuthorityOverrideMethodSecurityInterceptor.java:22)\r\n\tat com.sun.proxy.$Proxy138.getPlanByKey(Unknown Source)\r\n\tat com.atlassian.bamboo.resultsummary.BuildResultsSummaryManagerImpl.removeChainResult(BuildResultsSummaryManagerImpl.java:801)\r\n\tat com.atlassian.bamboo.resultsummary.BuildResultsSummaryManagerImpl.removeResultSummary(BuildResultsSummaryManagerImpl.java:778)\r\n\tat com.atlassian.bamboo.resultsummary.BuildResultsSummaryManagerImpl.removeResultSummary(BuildResultsSummaryManagerImpl.java:764)\r\n\tat com.atlassian.bamboo.security.acegi.intercept.aopalliance.AuthorityOverrideMethodSecurityInterceptor.invoke(AuthorityOverrideMethodSecurityInterceptor.java:22)\r\n\tat com.sun.proxy.$Proxy191.removeResultSummary(Unknown Source)\r\n\tat com.atlassian.bamboo.build.expiry.BuildExpiryBeanImpl.expireResultSummaries(BuildExpiryBeanImpl.java:314)\r\n\tat com.atlassian.bamboo.build.expiry.BuildExpiryBeanImpl.lambda$expireBuildPlan$0(BuildExpiryBeanImpl.java:278)\r\n\tat org.springframework.orm.hibernate5.HibernateTemplate.doExecute(HibernateTemplate.java:384)\r\n\tat org.springframework.orm.hibernate5.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:350)\r\n\tat com.atlassian.bamboo.persistence.BambooTransactionHibernateTemplate$1.doInTransaction(BambooTransactionHibernateTemplate.java:36)\r\n\tat org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)\r\n\tat com.atlassian.bamboo.persistence.BambooTransactionHibernateTemplate.execute(BambooTransactionHibernateTemplate.java:28)\r\n\tat com.atlassian.bamboo.persistence.BambooTransactionHibernateTemplate.execute(BambooTransactionHibernateTemplate.java:33)\r\n\tat com.atlassian.bamboo.build.expiry.BuildExpiryBeanImpl.expireBuildPlan(BuildExpiryBeanImpl.java:270)\r\n\tat com.atlassian.bamboo.build.expiry.BuildExpiryBeanImpl$1.call(BuildExpiryBeanImpl.java:137)\r\n\tat com.atlassian.bamboo.build.expiry.BuildExpiryBeanImpl$1.call(BuildExpiryBeanImpl.java:101)\r\nCaused by: org.hibernate.ObjectDeletedException: deleted object would be re-saved by cascade (remove deleted object from associations): [com.atlassian.bamboo.resultsummary.vcs.RepositoryChangesetImpl#281837570]\r\n\tat org.hibernate.internal.SessionImpl.forceFlush(SessionImpl.java:1483)\r\n\tat org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:170)\r\n\tat org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.performSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:97)\r\n\tat org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:73)\r\n\tat org.hibernate.internal.SessionImpl.fireSaveOrUpdate(SessionImpl.java:678)\r\n\tat org.hibernate.internal.SessionImpl.saveOrUpdate(SessionImpl.java:670)\r\n\tat org.hibernate.engine.spi.CascadingActions$5.cascade(CascadingActions.java:219)\r\n\tat org.hibernate.engine.internal.Cascade.cascadeToOne(Cascade.java:471)\r\n\tat org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:396)\r\n\tat org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:197)\r\n\tat org.hibernate.engine.internal.Cascade.cascadeCollectionElements(Cascade.java:504)\r\n\tat org.hibernate.engine.internal.Cascade.cascadeCollection(Cascade.java:436)\r\n\tat org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:399)\r\n\tat org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:197)\r\n\tat org.hibernate.engine.internal.Cascade.cascade(Cascade.java:130)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.cascadeOnFlush(AbstractFlushingEventListener.java:159)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.prepareEntityFlushes(AbstractFlushingEventListener.java:150)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:83)\r\n\tat org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:44)\r\n\tat org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1415)\r\n\tat org.hibernate.internal.SessionImpl.list(SessionImpl.java:1952)\r\n\tat org.hibernate.internal.CriteriaImpl.list(CriteriaImpl.java:370)\r\n\tat org.hibernate.internal.CriteriaImpl.uniqueResult(CriteriaImpl.java:392)\r\n\tat com.atlassian.bamboo.plan.PlanHibernateDao$1.doInHibernate(PlanHibernateDao.java:91)\r\n\tat org.springframework.orm.hibernate5.HibernateTemplate.doExecute(HibernateTemplate.java:384)\r\n\t... 66 more\r\n{noformat}\r\n* This stacktrace has been heavily truncated\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Rerunning a build after deleting a stage can break result removal and expiry"
    }
  },
  {
    "key": "BAM-21042",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-11-23T14:21:39.000+0000",
      "created": "2020-08-19T02:23:53.000+0000",
      "description": "h3. Issue Summary\r\nOracle provides a feature called Native Network Encryption: [ORACLE\\-BASE \\- Native Network Encryption for Database Connections|https://oracle-base.com/articles/misc/native-network-encryption-for-database-connections] This feature was previously part of the Advanced Security Option license, and provides connection encryption without requiring client side configuration. \r\n\r\nWhen this feature is enabled, it adds 350ms+ to the time required to establish a database connection. This alone will cause noteworthy performance degradation, but when combined with the default database connection pool manager in Bamboo, c3p0, it can cause intermittent outages and extreme performance degradation.\r\n\r\nOracle have stated that this latency is working as intended: [Slow Connection Using 12c Client When Network Encryption Is Enabled|https://support.oracle.com/knowledge/Oracle Database Products/2247689_1.html]\r\n\r\n(!) It can affect any instance/DBMS (not just Oracle) where checking out a database connection takes longer than usual (e.g. just high latency) due to how c3p0 behaves. *The performance degradation and outages are not aligned with whats expected given the latency on the checkout*\r\n\r\nh3. Steps to Reproduce\r\n# Install any version of Bamboo\r\n# Install Oracle DB 11g or later with Native Network Encryption enabled\r\n# Introduce load to the system\r\n# Monitor Bamboo for delayed or timeout responses\r\n\r\nh3. Expected Results\r\nBamboo should work as per normal.\r\n\r\nh3. Actual Results\r\nThere is a prolonged delay in establishing database connections that causes c3p0 to get stuck in a loop of attempting to obtain additional database connections. As obtaining these database connections is slow, this will take longer than normal.\r\n\r\nBamboo will remain unresponsive until it reaches the c3p0 maximum pool size for the node.\r\n\r\nThis issue will not be visible in the logs by default, but the following KB provides additional details on how to diagnose this issue: [Confluence Unresponsive Due to High Database Connection Latency|https://confluence.atlassian.com/confkb/confluence-unresponsive-due-to-high-database-connection-latency-983794798.html]\r\n\r\nh3. Workaround\r\n\r\nA workaround is detailed on this KB: [Confluence Unresponsive Due to High Database Connection Latency|https://confluence.atlassian.com/confkb/confluence-unresponsive-due-to-high-database-connection-latency-983794798.html]. While Confluence specific, the same applies to Bamboo.\r\n\r\nHowever, it may be preferably to implement SSL to the database with proper certificate exchange, or disable Native Network Encryption entirely. ",
      "summary": "Running Bamboo with Oracle Database Native Network Encryption Degrades Performance or Causes Outages"
    }
  },
  {
    "key": "BAM-21041",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-08-18T17:43:29.000+0000",
      "description": "h3. Problem Definition\r\nA build is producing a large list of files/artifacts that can't be grouped / packaged / compressed\r\nh3. Suggested Solution\r\nAdd an option to limit artifact result list. When the list exceeds a certain threshold _(for example 50)_, add an ellipsis _\" . . . \"_ and cut the list short for the notifications. \r\nh4. Why this is important \r\nUnnecessary long list of files in a build notification \r\n",
      "summary": "Add option to minimize list of artifacts in build notifications"
    }
  },
  {
    "key": "BAM-21040",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-09-03T07:14:39.000+0000",
      "created": "2020-08-18T12:51:19.000+0000",
      "description": "h3. Issue Summary\r\n\r\nExtra docker run args are ignored when provided in YAML spec\r\nh3. Steps to Reproduce\r\n # Import YAML spec in a repository with bamboo-specs/bamboo.yaml that has:\r\n\r\n\u00a0\r\n{code:java}\r\nDefault Job:\r\n  key: JOB1\r\n  docker:\r\n    image: ubuntu\r\n    volumes:\r\n      ${bamboo.working.directory}: ${bamboo.working.directory}\r\n      ${bamboo.tmp.directory}: ${bamboo.tmp.directory}\r\n    docker-run-arguments:\r\n    - --net=host\r\n{code}\r\n2. Run specs scan.\r\nh3. Expected Results\r\n\r\nThe created plan, namely docker runner config should container extra args --net=host\r\nh3. Actual Results\r\n\r\nDocker run args are ignored. The resulting yaml looks like this:\r\n{noformat}\r\n      dockerConfiguration:\r\n        dockerRunArguments: []\r\n        enabled: true\r\n        image: ubuntu\r\n        volumes:\r\n          ${bamboo.working.directory}: ${bamboo.working.directory}\r\n          ${bamboo.tmp.directory}: ${bamboo.tmp.directory}\r\n{noformat}\r\nh3. Workaround\r\n\r\nInstall attached patch:\r\n # Shutdown the Bamboo server\r\n # Locate <bamboo_install_dir>/atlassian_bamboo/WEB-INF/lib/atlassian-bamboo-import-export-7.1.1.jar.\r\n # Replace it with the jar file attached to this ticket (it's recommended to make a backup of the original file)\r\n # Start the server again\r\n # Re-scan any YML Specs affected by this issue.",
      "summary": "Extra docker run args are ignored when provided in YAML spec"
    }
  },
  {
    "key": "BAM-21039",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-08-17T04:12:49.000+0000",
      "description": "h3. Issue Summary\r\n\r\nBamboo installations that do not have access to DockerHub have issues with running specs in Docker since Bamboo always pulls specs runner image before creating and starting a container.\r\nh3. Steps to Reproduce\r\n # Start Bamboo\r\n # Pull specs runner image\r\n # Cut connection to Docker Hub\r\n # Run specs scanning.\r\n\r\nh3. Expected Results\r\n\r\nBamboo can run specs build.\r\nh3. Actual Results\r\n\r\nBamboo tries to pull the image and fails to do so if there's no connection to Docker Hub.\r\nh3. Workaround\r\n\r\nAllow connection to Docker Hub or use own Docker registry.",
      "summary": "Do not always pull specs runner image if Docker has it pre-pulled"
    }
  },
  {
    "key": "BAM-21038",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-08-13T16:59:04.000+0000",
      "description": "h3. Issue Summary\r\n\r\nBamboo user reaches a catch-22 situation when creating +new plans+ through Specs if they have the following situation:\r\n\r\nh4. Plan A - Master (PROJ-MAS)\r\n{code:java}\r\n    public Plan master() {\r\n        final Plan plan = new Plan(new Project()\r\n                .key(new BambooKey(\"PROJ\"))\r\n                .name(\"Master Plan\"),\r\n                \"Master Plan\",\r\n                new BambooKey(\"MAS\"))\r\n                .stages(new Stage(\"Default Stage\")\r\n                        .jobs(new Job(\"Build UI for Acpt\",\r\n                                new BambooKey(\"JOB1\"))\r\n                                .artifacts(new Artifact()\r\n                                        .name(\"Text file\")\r\n                                        .copyPattern(\"**/*.txt\")\r\n                                        .shared(true)\r\n                                        .required(true))\r\n                                .tasks(new ScriptTask()\r\n                                        .enabled(false)\r\n                                        .inlineBody(\"echo test > artifact.txt\"))))\r\n                .dependencies(new Dependencies()\r\n                        .childPlans(new PlanIdentifier(\"PROJ\", \"CHILD\")));\r\n        return plan;\r\n    }\r\n{code}\r\nh4. Plan B - Child (PROJ-CHILD)\r\n{code:java}\r\n    public Plan child() {\r\n        final Plan plan = new Plan(new Project()\r\n                .key(new BambooKey(\"PROJ\"))\r\n                .name(\"Child plan\"),\r\n                \"Child plan\",\r\n                new BambooKey(\"CHILD\"))\r\n                .stages(new Stage(\"Default Stage\")\r\n                        .jobs(new Job(\"Download Artifact\",\r\n                                new BambooKey(\"JOB1\"))\r\n                                .tasks(new ArtifactDownloaderTask()\r\n                                        .sourcePlan(new PlanIdentifier(\"PROJ\", \"MAS\"))\r\n                                        .artifacts(new DownloadItem()\r\n                                        .allArtifacts(true)))));\r\n        return plan;\r\n    }\r\n\r\n{code}\r\n\r\nh3. Steps to Reproduce\r\n # Try to publish the above code\r\n\r\nh3. Expected Results\r\nBamboo Specs API should be able to handle these situations and publish the plans accordingly.\r\nh3. Actual Results\r\nIf we try to publish the master plan (PROJ-MAS), it will fail with the following error:\r\n{noformat}\r\n2020-08-13 14:00:13,610 INFO [BambooServer] Publishing plan PROJ-MAS\r\n2020-08-13 14:00:14,561 INFO [BambooServer] An error occurred while publishing plan PROJ-MAS: Plan Dependencies: plan PROJ-CHILD does not exist\r\n2020-08-13 14:00:14,562 INFO [BambooServer] (for more information, enable more detailed logging with system property -Dbamboo.specs.log.level=DEBUG)\r\nException in thread \"main\" com.atlassian.bamboo.specs.api.exceptions.BambooSpecsPublishingException: An error occurred while publishing plan PROJ-MAS: Plan Dependencies: plan PROJ-CHILD does not exist\r\n\tat com.atlassian.bamboo.specs.util.BambooServer.translateRestException(BambooServer.java:174)\r\n\tat com.atlassian.bamboo.specs.util.BambooServer.translateException(BambooServer.java:144)\r\n\tat com.atlassian.bamboo.specs.util.BambooServer.publish(BambooServer.java:101)\r\n\tat tutorial.PlanSpec.main(PlanSpec.java:38)\r\nCaused by: com.atlassian.bamboo.specs.exceptions.BambooSpecsRestRequestException: Plan Dependencies: plan PROJ-CHILD does not exist\r\n\tat com.atlassian.bamboo.specs.util.RestHelper.lambda$sendRequest$2(RestHelper.java:72)\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:222)\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:164)\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:139)\r\n\tat com.atlassian.bamboo.specs.util.RestHelper.sendRequest(RestHelper.java:75)\r\n\tat com.atlassian.bamboo.specs.util.RestHelper.post(RestHelper.java:183)\r\n\tat com.atlassian.bamboo.specs.util.SendQueue$1.run(SendQueue.java:23)\r\n{noformat}\r\n\r\nIf we try to publish the Child plan (PROJ-CHILD), it will fail with the following error:\r\n\r\n{noformat}\r\n2020-08-13 13:54:49,018 INFO [BambooServer] Publishing plan PROJ-CHILD\r\n2020-08-13 13:54:49,923 INFO [BambooServer] An error occurred while publishing plan PROJ-CHILD: Artifact download / source plan: Chain [oid=<null>,key=MAS,projectKey=PROJ] does not exist.\r\n2020-08-13 13:54:49,923 INFO [BambooServer] (for more information, enable more detailed logging with system property -Dbamboo.specs.log.level=DEBUG)\r\nException in thread \"main\" com.atlassian.bamboo.specs.api.exceptions.BambooSpecsPublishingException: An error occurred while publishing plan PROJ-CHILD: Artifact download / source plan: Chain [oid=<null>,key=MAS,projectKey=PROJ] does not exist.\r\n\tat com.atlassian.bamboo.specs.util.BambooServer.translateRestException(BambooServer.java:174)\r\n\tat com.atlassian.bamboo.specs.util.BambooServer.translateException(BambooServer.java:144)\r\n\tat com.atlassian.bamboo.specs.util.BambooServer.publish(BambooServer.java:101)\r\n\tat tutorial.PlanSpec.main(PlanSpec.java:37)\r\nCaused by: com.atlassian.bamboo.specs.exceptions.BambooSpecsRestRequestException: Artifact download / source plan: Chain [oid=<null>,key=MAS,projectKey=PROJ] does not exist.\r\n\tat com.atlassian.bamboo.specs.util.RestHelper.lambda$sendRequest$2(RestHelper.java:72)\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:222)\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:164)\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:139)\r\n\tat com.atlassian.bamboo.specs.util.RestHelper.sendRequest(RestHelper.java:75)\r\n\tat com.atlassian.bamboo.specs.util.RestHelper.post(RestHelper.java:183)\r\n\tat com.atlassian.bamboo.specs.util.SendQueue$1.run(SendQueue.java:23)\r\n{noformat}\r\n\r\nh3. Workaround\r\nPublish the plans separately, removing the {{.dependencies()}} from the code if PLAN A or {{ArtifactDownloaderTask()}} if PLAN B.\r\n",
      "summary": "Catch-22 situation when creating plans that depend on each other "
    }
  },
  {
    "key": "BAM-21037",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-09-24T07:12:49.000+0000",
      "created": "2020-08-13T05:10:16.000+0000",
      "description": "h3. Issue Summary\r\n\r\nBamboo fails to scan yaml specs with the error. Adding `-Dbamboo.specs.max.aliases.for.collections=3000` to server JAVA_OPTS does not help.\r\n\r\nSpecs scanning log:\r\n\r\n\u00a0\r\n{code:java}\r\nBamboo YAML import failed: Invalid format of the YAML file: Number of aliases for non-scalar nodes exceeds the specified max=50\u00a0\r\n{code}\r\n\r\nBamboo server log:\r\n\r\n\r\n{code:java}\r\n2020-08-13 04:57:23,023 INFO [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-3] [BitbucketServerRssStatusUpdater] Sending RSS notification to Stash (repository: specsio)2020-08-13 04:57:23,023 INFO [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-3] [BitbucketServerRssStatusUpdater] Sending RSS notification to Stash (repository: specsio)2020-08-13 04:57:23,034 INFO [16-BAM::SpecsDetection:pool-23-thread-3] [RssDetectionRunnable] Exception while executing RSS detection for RssDetectionWork[repository=1507343,branch=master]com.atlassian.bamboo.specs.yaml.YamlSpecsValidationException: Invalid format of the YAML file: Number of aliases for non-scalar nodes exceeds the specified max=50 at com.atlassian.bamboo.configuration.external.yaml.BambooYamlSpecsServiceImpl.splitDocuments(BambooYamlSpecsServiceImpl.java:54) at com.atlassian.bamboo.configuration.external.rss.YamlSpecsImportServiceImpl.processSimplifiedYaml(YamlSpecsImportServiceImpl.java:106) at com.atlassian.bamboo.configuration.external.RepositoryStoredSpecsServiceImpl.tryProcessYaml(RepositoryStoredSpecsServiceImpl.java:290) at com.atlassian.bamboo.configuration.external.RepositoryStoredSpecsServiceImpl.runBambooSpecs(RepositoryStoredSpecsServiceImpl.java:155) at com.atlassian.bamboo.configuration.external.RssDetectionServiceImpl.runRssDetection(RssDetectionServiceImpl.java:330) at com.atlassian.bamboo.configuration.external.detection.RssDetectionRunnable.run(RssDetectionRunnable.java:42) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) at java.util.concurrent.FutureTask.run(FutureTask.java:266) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at com.atlassian.bamboo.utils.BambooRunnables$1.run(BambooRunnables.java:48) at com.atlassian.bamboo.security.ImpersonationHelper.runWith(ImpersonationHelper.java:26) at com.atlassian.bamboo.security.ImpersonationHelper.runWithSystemAuthority(ImpersonationHelper.java:17) at com.atlassian.bamboo.security.ImpersonationHelper$1.run(ImpersonationHelper.java:41) at java.lang.Thread.run(Thread.java:748)Caused by: org.yaml.snakeyaml.error.YAMLException: Number of aliases for non-scalar nodes exceeds the specified max=50 at org.yaml.snakeyaml.composer.Composer.composeNode(Composer.java:147) at org.yaml.snakeyaml.composer.Composer.composeValueNode(Composer.java:257) at org.yaml.snakeyaml.composer.Composer.composeMappingChildren(Composer.java:248) at org.yaml.snakeyaml.composer.Composer.composeMappingNode(Composer.java:236) at org.yaml.snakeyaml.composer.Composer.composeNode(Composer.java:162) at org.yaml.snakeyaml.composer.Composer.composeValueNode(Composer.java:257) at org.yaml.snakeyaml.composer.Composer.composeMappingChildren(Composer.java:248) at org.yaml.snakeyaml.composer.Composer.composeMappingNode(Composer.java:236) at org.yaml.snakeyaml.composer.Composer.composeNode(Composer.java:162) at org.yaml.snakeyaml.composer.Composer.composeValueNode(Composer.java:257) at org.yaml.snakeyaml.composer.Composer.composeMappingChildren(Composer.java:248) at org.yaml.snakeyaml.composer.Composer.composeMappingNode(Composer.java:236) at org.yaml.snakeyaml.composer.Composer.composeNode(Composer.java:162) at org.yaml.snakeyaml.composer.Composer.getNode(Composer.java:95) at org.yaml.snakeyaml.constructor.BaseConstructor.getData(BaseConstructor.java:134) at org.yaml.snakeyaml.Yaml$1.next(Yaml.java:494) at com.atlassian.bamboo.configuration.external.yaml.BambooYamlSpecsServiceImpl.splitDocuments(BambooYamlSpecsServiceImpl.java:46) ... 14 more{code}\r\nh3. Steps to Reproduce\r\n\r\nScan repo with yaml spec file in the attachment\r\nh3. Expected Results\r\n\r\nSpec scanning is a success\r\nh3. Actual Results\r\n\r\nSpec scanning fails\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Fail to scan yaml specs: number of aliases for non-scalar nodes exceeds the specified max=50"
    }
  },
  {
    "key": "BAM-21036",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-09-03T07:13:12.000+0000",
      "created": "2020-08-12T21:05:41.000+0000",
      "description": "As things stand, Bamboo's pretty new feature of a [Build warnings parser task|https://confluence.atlassian.com/bamboo/configuring-build-warnings-parser-task-957148051.html] is only available via UI, not per Bamboo Specs.\r\n\r\nRequest is to make it available for Java as well as for YAML Specs, so that this task can be used from a IaC context rather than from manual CI/CD pipeline setups only.",
      "summary": "Bamboo YML Specs should support the Build warnings parser task"
    }
  },
  {
    "key": "BAM-21034",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-09-03T07:14:40.000+0000",
      "created": "2020-08-11T09:43:14.000+0000",
      "description": "h3. Issue Summary\r\n\r\nWhen plan overrides default branch of linked repository YAML export doesn't generate correct code.\r\nh3. Steps to Reproduce\r\n # Create linked repository\r\n # Add repository to plan and override default branch\r\n # Export plan to YAML\r\n\r\nh3. Expected Results\r\n{code:java}\r\n---\r\nversion: 2\r\nplan:\r\n  project-key: PROJ\r\n  key: PLAN\r\n  name: My plan\r\n  master-branch: production\r\nstages:\r\n...\r\n{code}\r\nh3. Actual Results\r\n{code:java}\r\n---\r\nversion: 2\r\nplan:\r\n  project-key: PROJ\r\n  key: PLAN\r\n  name: My plan\r\nstages:\r\n...\r\n{code}\r\nh3. Workaround\r\n\r\nEnter valid branch name when copy content of produced YAML code to repository file",
      "summary": "Default plan branch is not exported to YAML"
    }
  },
  {
    "key": "BAM-21033",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-09-03T07:14:39.000+0000",
      "created": "2020-08-07T18:38:19.000+0000",
      "description": "h3. Issue Summary\r\nIf the repository cache is corrupted in Bamboo and a new branch is created, the initial build for the plan brach.\r\n\r\nh3. Steps to Reproduce\r\n# Create a new plan \r\n# Enable automatic branch creation selecting the \"When new branch in repository is created\" option.\r\n# Go to the {{bamboo/xml-data/build-dir/_git-repositories-cache/<HASH>/.git}} folder for this repository and delete some files from there (keeping the .git folder}\r\n# Create a new branch at the repository\r\n\r\nh3. Expected Results\r\nBamboo should identify the cache is corrupted during the initial build, recreate it, and retry to run the build.\r\nh3. Actual Results\r\nThe initial build greys out and the below exception is thrown in the atlassian.bamboo.log file:\r\n{noformat}\r\n2020-08-07 18:04:56,618 ERROR [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-15] [UpdateCreatingCommitInformationListener] Exception when initiating chain branch status\r\njava.lang.RuntimeException: com.atlassian.bamboo.plugins.stash.repository.StashRepositoryException: com.atlassian.bamboo.repository.RepositoryException: Cannot fetch branch 'refs/heads/development2' from 'ssh://git@bitbucket:7999/proj/test_cases.git' to source directory '/var/atlassian/application-data/bamboo/xml-data/build-dir/_git-repositories-cache/f9128b767ea46dc7220dc0e3d4f3c73ebd10a25c'. command [/usr/bin/git fetch ssh://af18cdd8-419e-4144-8f15-056b9465cb54@127.0.0.1:33027/proj/test_cases.git +refs/heads/development2:refs/heads/development2 --update-head-ok] failed with code 128. Working directory was [/var/atlassian/application-data/bamboo/xml-data/build-dir/_git-repositories-cache/f9128b767ea46dc7220dc0e3d4f3c73ebd10a25c]., stderr:\r\nfatal: not a git repository (or any parent up to mount point /var/atlassian/application-data)\r\nStopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).\r\n\tat com.google.common.base.Throwables.propagate(Throwables.java:241)\r\n\tat com.atlassian.bamboo.build.creation.UpdateCreatingCommitInformationListener.lambda$onChainCreatedEventInternal$0(UpdateCreatingCommitInformationListener.java:55)\r\n\tat com.atlassian.bamboo.variable.CustomVariableContextImpl.withVariableSubstitutor(CustomVariableContextImpl.java:107)\r\n\tat com.atlassian.bamboo.build.creation.UpdateCreatingCommitInformationListener.onChainCreatedEventInternal(UpdateCreatingCommitInformationListener.java:51)\r\n\tat com.atlassian.bamboo.build.creation.UpdateCreatingCommitInformationListener.onChainCreatedEvent(UpdateCreatingCommitInformationListener.java:32)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat com.atlassian.event.internal.SingleParameterMethodListenerInvoker.invoke(SingleParameterMethodListenerInvoker.java:42)\r\n\tat com.atlassian.event.internal.AsynchronousAbleEventDispatcher.lambda$null$0(AsynchronousAbleEventDispatcher.java:37)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat com.atlassian.bamboo.utils.BambooRunnables$1.run(BambooRunnables.java:48)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper.runWith(ImpersonationHelper.java:26)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper.runWithSystemAuthority(ImpersonationHelper.java:17)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper$1.run(ImpersonationHelper.java:41)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\nCaused by: com.atlassian.bamboo.plugins.stash.repository.StashRepositoryException: com.atlassian.bamboo.repository.RepositoryException: Cannot fetch branch 'refs/heads/development2' from 'ssh://git@bitbucket:7999/proj/test_cases.git' to source directory '/var/atlassian/application-data/bamboo/xml-data/build-dir/_git-repositories-cache/f9128b767ea46dc7220dc0e3d4f3c73ebd10a25c'. command [/usr/bin/git fetch ssh://af18cdd8-419e-4144-8f15-056b9465cb54@127.0.0.1:33027/proj/test_cases.git +refs/heads/development2:refs/heads/development2 --update-head-ok] failed with code 128. Working directory was [/var/atlassian/application-data/bamboo/xml-data/build-dir/_git-repositories-cache/f9128b767ea46dc7220dc0e3d4f3c73ebd10a25c]., stderr:\r\nfatal: not a git repository (or any parent up to mount point /var/atlassian/application-data)\r\nStopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).\r\n\tat com.atlassian.bamboo.plugins.stash.v2.BitbucketServerBranchDetector.getFirstCommitApproximation(BitbucketServerBranchDetector.java:59)\r\n\tat com.atlassian.bamboo.plan.branch.BranchCommitInformationManagerImpl.initialiseCommitInformation(BranchCommitInformationManagerImpl.java:64)\r\n\tat com.atlassian.bamboo.build.creation.UpdateCreatingCommitInformationListener.lambda$onChainCreatedEventInternal$0(UpdateCreatingCommitInformationListener.java:53)\r\n\t... 16 more\r\nCaused by: com.atlassian.bamboo.repository.RepositoryException: Cannot fetch branch 'refs/heads/development2' from 'ssh://git@bitbucket:7999/proj/test_cases.git' to source directory '/var/atlassian/application-data/bamboo/xml-data/build-dir/_git-repositories-cache/f9128b767ea46dc7220dc0e3d4f3c73ebd10a25c'. command [/usr/bin/git fetch ssh://af18cdd8-419e-4144-8f15-056b9465cb54@127.0.0.1:33027/proj/test_cases.git +refs/heads/development2:refs/heads/development2 --update-head-ok] failed with code 128. Working directory was [/var/atlassian/application-data/bamboo/xml-data/build-dir/_git-repositories-cache/f9128b767ea46dc7220dc0e3d4f3c73ebd10a25c]., stderr:\r\nfatal: not a git repository (or any parent up to mount point /var/atlassian/application-data)\r\nStopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).\r\n\tat com.atlassian.bamboo.plugins.git.NativeGitOperationHelper.fetch(NativeGitOperationHelper.java:544)\r\n\tat com.atlassian.bamboo.plugins.git.v2.GitBranchDetector.lambda$getLastCommit$1(GitBranchDetector.java:91)\r\n\tat io.atlassian.util.concurrent.ManagedLocks$ManagedLockImpl.withLock(ManagedLocks.java:284)\r\n\tat com.atlassian.bamboo.plugins.git.v2.GitBranchDetector.getLastCommit(GitBranchDetector.java:82)\r\n\tat com.atlassian.bamboo.plugins.git.v2.GitBranchDetector.lambda$getFirstCommitApproximation$0(GitBranchDetector.java:62)\r\n\tat io.atlassian.util.concurrent.ManagedLocks$ManagedLockImpl.withLock(ManagedLocks.java:284)\r\n\tat com.atlassian.bamboo.plugins.git.v2.GitBranchDetector.getFirstCommitApproximation(GitBranchDetector.java:57)\r\n\tat com.atlassian.bamboo.plugins.stash.v2.BitbucketServerBranchDetector.getFirstCommitApproximation(BitbucketServerBranchDetector.java:55)\r\n\t... 18 more\r\nCaused by: com.atlassian.bamboo.plugins.git.GitCommandException: command [/usr/bin/git fetch ssh://af18cdd8-419e-4144-8f15-056b9465cb54@127.0.0.1:33027/proj/test_cases.git +refs/heads/development2:refs/heads/development2 --update-head-ok] failed with code 128. Working directory was [/var/atlassian/application-data/bamboo/xml-data/build-dir/_git-repositories-cache/f9128b767ea46dc7220dc0e3d4f3c73ebd10a25c]., stderr:\r\nfatal: not a git repository (or any parent up to mount point /var/atlassian/application-data)\r\nStopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).\r\n\tat com.atlassian.bamboo.plugins.git.GitCommandProcessor.runCommand(GitCommandProcessor.java:729)\r\n\tat com.atlassian.bamboo.plugins.git.GitCommandProcessor.runFetchCommand(GitCommandProcessor.java:310)\r\n\tat com.atlassian.bamboo.plugins.git.NativeGitOperationHelper.fetch(NativeGitOperationHelper.java:527)\r\n\t... 25 more\r\n{noformat}\r\n\r\nthen, the change detection will also identify the problem:\r\n\r\n{noformat}\r\n2020-08-07 18:04:56,729 ERROR [7-DelayedChangeDetectionThread:pool-13-thread-4] [ChainExecutionManagerImpl] Errors getting changes for PROJ-TC2-1\r\ncom.atlassian.bamboo.repository.RepositoryException: com.atlassian.bamboo.plugins.stash.repository.StashRepositoryException: com.atlassian.bamboo.repository.RepositoryException: : Cannot fetch branch 'refs/heads/development2' from 'ssh://git@bitbucket:7999/proj/test_cases.git' to source directory '/var/atlassian/application-data/bamboo/xml-data/build-dir/_git-repositories-cache/f9128b767ea46dc7220dc0e3d4f3c73ebd10a25c'. command [/usr/bin/git fetch ssh://7aa2b9bb-b978-428b-991a-cae21aa04ac6@127.0.0.1:33027/proj/test_cases.git +refs/heads/development2:refs/heads/development2 --update-head-ok] failed with code 128. Working directory was [/var/atlassian/application-data/bamboo/xml-data/build-dir/_git-repositories-cache/f9128b767ea46dc7220dc0e3d4f3c73ebd10a25c]., stderr:\r\nfatal: not a git repository (or any parent up to mount point /var/atlassian/application-data)\r\nStopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).\r\n\tat com.atlassian.bamboo.v2.trigger.DefaultChangeDetectionManager.collectInitialStateForBranchBuild(DefaultChangeDetectionManager.java:364)\r\n\tat com.atlassian.bamboo.v2.trigger.DefaultChangeDetectionManager.collectAllChangesSinceLastBuild(DefaultChangeDetectionManager.java:160)\r\n\tat com.atlassian.bamboo.v2.trigger.DefaultChangeDetectionManager.collectAllChangesSinceLastBuild(DefaultChangeDetectionManager.java:190)\r\n\tat com.atlassian.bamboo.build.BuildDetectionActionFactoryImpl$InitialBuildDetectionAction.performDelayedChangeDetection(BuildDetectionActionFactoryImpl.java:230)\r\n\tat com.atlassian.bamboo.chains.ChainExecutionManagerImpl$1.getChainState(ChainExecutionManagerImpl.java:250)\r\n\tat com.atlassian.bamboo.chains.ChainExecutionManagerImpl.tryStartChainState(ChainExecutionManagerImpl.java:322)\r\n\tat com.atlassian.bamboo.chains.ChainExecutionManagerImpl.delayedStart(ChainExecutionManagerImpl.java:242)\r\n\tat sun.reflect.GeneratedMethodAccessor2198.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)\r\n\tat com.sun.proxy.$Proxy239.delayedStart(Unknown Source)\r\n{noformat}\r\nAnd finally the cache is deleted:\r\n{noformat}\r\n2020-08-07 18:11:40,513 WARN [20-BAM::Agente 3::Agent:pool-43-thread-1] [AbstractGitExecutor] Deleting git workspace /var/atlassian/application-data/bamboo/xml-data/build-dir/_git-repositories-cache/95acacd8e4e70cecfab3d59ff372ac662c4257e4 due to exception\r\n{noformat}\r\n\r\nh3. Workaround\r\n\r\nRun a manual build",
      "summary": "Initial build for new branches will not run if the repository cache is corrupted"
    }
  },
  {
    "key": "BAM-21032",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-08-07T07:23:25.000+0000",
      "description": "h3. Issue Summary\r\nDuring setup its possible to double click on some setup steps (e.g. when creating an admin user) and break the installation. Pre 6.7.0, it's possible that the same error was caused by the below bug too (but it will have additional errors)\r\n* [BAM\\-19993: Trailing space username will crash Bamboo during administrator setup (fixed in Bamboo 6.7.0)|https://jira.atlassian.com/browse/BAM-19993]\r\n\r\nh3. Steps to Reproduce\r\n# Progress through a Bamboo installation\r\n# When you get to creating an admin user, double click finish (or double tap enter)\r\n\r\nh3. Expected Results\r\nCan't submit the form twice and create duplicate entries / break the installation\r\n\r\nh3. Actual Results\r\nYou get an error in the UI and the below exception is shown in the UI in the atlassian-bamboo.log file.\r\n{{CWD_APPLICATION.UK_APP_L_NAME}}\r\n{noformat}\r\n2020-08-07 07:13:37,837 INFO [http-nio-8085-exec-25] [BucketClobStringType] DBMS: h2\r\n2020-08-07 07:13:37,845 ERROR [http-nio-8085-exec-23] [BatchingBatch] HHH000315: Exception executing batch [org.h2.jdbc.JdbcBatchUpdateException: Unique index or primary key violation: \"PUBLIC.UK_APP_L_NAME_INDEX_5 ON PUBLIC.CWD_APPLICATION(LOWER_APPLICATION_NAME) VALUES 32769\"; SQL statement:\r\ninsert into CWD_APPLICATION (APPLICATION_NAME, LOWER_APPLICATION_NAME, CREATED_DATE, UPDATED_DATE, ACTIVE, DESCRIPTION, APPLICATION_TYPE, CREDENTIAL, ID) values (?, ?, ?, ?, ?, ?, ?, ?, ?) [23505-199]], SQL: insert into CWD_APPLICATION (APPLICATION_NAME, LOWER_APPLICATION_NAME, CREATED_DATE, UPDATED_DATE, ACTIVE, DESCRIPTION, APPLICATION_TYPE, CREDENTIAL, ID) values (?, ?, ?, ?, ?, ?, ?, ?, ?)\r\n2020-08-07 07:13:37,846 WARN [http-nio-8085-exec-23] [SqlExceptionHelper] SQL Error: 23505, SQLState: 23505\r\n2020-08-07 07:13:37,846 ERROR [http-nio-8085-exec-23] [SqlExceptionHelper] Unique index or primary key violation: \"PUBLIC.UK_APP_L_NAME_INDEX_5 ON PUBLIC.CWD_APPLICATION(LOWER_APPLICATION_NAME) VALUES 32769\"; SQL statement:\r\ninsert into CWD_APPLICATION (APPLICATION_NAME, LOWER_APPLICATION_NAME, CREATED_DATE, UPDATED_DATE, ACTIVE, DESCRIPTION, APPLICATION_TYPE, CREDENTIAL, ID) values (?, ?, ?, ?, ?, ?, ?, ?, ?) [23505-199]\r\n2020-08-07 07:13:37,853 ERROR [http-nio-8085-exec-23] [ExceptionMappingInterceptor] org.hibernate.exception.ConstraintViolationException: could not execute batch\r\njavax.persistence.PersistenceException: org.hibernate.exception.ConstraintViolationException: could not execute batch\r\n\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:154)\r\n\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:181)\r\n\tat org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1514)\r\n\tat org.hibernate.query.internal.AbstractProducedQuery.uniqueResult(AbstractProducedQuery.java:1547)\r\n\tat org.hibernate.query.internal.AbstractProducedQuery.uniqueResultOptional(AbstractProducedQuery.java:1498)\r\n\tat org.hibernate.query.criteria.internal.compile.CriteriaQueryTypeQueryAdapter.uniqueResultOptional(CriteriaQueryTypeQueryAdapter.java:84)\r\n\tat com.atlassian.crowd.util.persistence.hibernate.HibernateDao.findByPropertyOptional(HibernateDao.java:153)\r\n\tat com.atlassian.crowd.util.persistence.hibernate.HibernateDao.findByProperty(HibernateDao.java:165)\r\n\tat com.atlassian.crowd.dao.application.ApplicationDAOHibernate.findByName(ApplicationDAOHibernate.java:112)\r\n\tat com.atlassian.crowd.dao.application.ApplicationDAOHibernate.findByName(ApplicationDAOHibernate.java:36)\r\n\tat com.atlassian.crowd.embedded.core.CrowdEmbeddedApplicationFactory.getApplication(CrowdEmbeddedApplicationFactory.java:23)\r\n\tat com.atlassian.crowd.embedded.EmbeddedCrowdBootstrapImpl.getOrCreateApplication(EmbeddedCrowdBootstrapImpl.java:57)\r\n\tat com.atlassian.crowd.embedded.EmbeddedCrowdBootstrapImpl.initialiseEmbeddedCrowd(EmbeddedCrowdBootstrapImpl.java:44)\r\n\tat com.atlassian.crowd.embedded.EmbeddedCrowdBootstrapImpl.initialiseEmbeddedCrowd(EmbeddedCrowdBootstrapImpl.java:38)\r\n{noformat}\r\n\r\nWhen you restart Bamboo, you are sent back to the admin creation screen. Clicking finish here causes the same problem again on a different table / index {{CWD_DIRECTORY.UK_DIR_L_NAME}}:\r\n{noformat}\r\n2020-08-07 07:46:02,380 ERROR [http-nio-8085-exec-16] [BatchingBatch] HHH000315: Exception executing batch [org.h2.jdbc.JdbcBatchUpdateException: Unique index or primary key violation: \"UK_DIR_L_NAME_INDEX_A ON PUBLIC.CWD_DIRECTORY(LOWER_DIRECTORY_NAME) VALUES ('bamboo internal directory', 65537)\"; SQL statement:\r\ninsert into CWD_DIRECTORY (DIRECTORY_NAME, LOWER_DIRECTORY_NAME, CREATED_DATE, UPDATED_DATE, ACTIVE, DESCRIPTION, IMPL_CLASS, LOWER_IMPL_CLASS, DIRECTORY_TYPE, ID) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) [23505-196]], SQL: insert into CWD_DIRECTORY (DIRECTORY_NAME, LOWER_DIRECTORY_NAME, CREATED_DATE, UPDATED_DATE, ACTIVE, DESCRIPTION, IMPL_CLASS, LOWER_IMPL_CLASS, DIRECTORY_TYPE, ID) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\r\n2020-08-07 07:46:02,381 WARN [http-nio-8085-exec-16] [SqlExceptionHelper] SQL Error: 23505, SQLState: 23505\r\n2020-08-07 07:46:02,381 ERROR [http-nio-8085-exec-16] [SqlExceptionHelper] Unique index or primary key violation: \"UK_DIR_L_NAME_INDEX_A ON PUBLIC.CWD_DIRECTORY(LOWER_DIRECTORY_NAME) VALUES ('bamboo internal directory', 65537)\"; SQL statement:\r\ninsert into CWD_DIRECTORY (DIRECTORY_NAME, LOWER_DIRECTORY_NAME, CREATED_DATE, UPDATED_DATE, ACTIVE, DESCRIPTION, IMPL_CLASS, LOWER_IMPL_CLASS, DIRECTORY_TYPE, ID) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) [23505-196]\r\n2020-08-07 07:46:02,382 ERROR [http-nio-8085-exec-16] [ExceptionMapperStandardImpl] HHH000346: Error during managed flush [org.hibernate.exception.ConstraintViolationException: could not execute batch]\r\n2020-08-07 07:46:02,384 ERROR [http-nio-8085-exec-16] [ExceptionMappingInterceptor] could not execute batch; SQL [insert into CWD_DIRECTORY (DIRECTORY_NAME, LOWER_DIRECTORY_NAME, CREATED_DATE, UPDATED_DATE, ACTIVE, DESCRIPTION, IMPL_CLASS, LOWER_IMPL_CLASS, DIRECTORY_TYPE, ID) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]; constraint [\"UK_DIR_L_NAME_INDEX_A ON PUBLIC.CWD_DIRECTORY(LOWER_DIRECTORY_NAME) VALUES ('bamboo internal directory', 65537)\"; SQL statement:\r\ninsert into CWD_DIRECTORY (DIRECTORY_NAME, LOWER_DIRECTORY_NAME, CREATED_DATE, UPDATED_DATE, ACTIVE, DESCRIPTION, IMPL_CLASS, LOWER_IMPL_CLASS, DIRECTORY_TYPE, ID) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) [23505-196]]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute batch\r\norg.springframework.dao.DataIntegrityViolationException: could not execute batch; SQL [insert into CWD_DIRECTORY (DIRECTORY_NAME, LOWER_DIRECTORY_NAME, CREATED_DATE, UPDATED_DATE, ACTIVE, DESCRIPTION, IMPL_CLASS, LOWER_IMPL_CLASS, DIRECTORY_TYPE, ID) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]; constraint [\"UK_DIR_L_NAME_INDEX_A ON PUBLIC.CWD_DIRECTORY(LOWER_DIRECTORY_NAME) VALUES ('bamboo internal directory', 65537)\"; SQL statement:\r\ninsert into CWD_DIRECTORY (DIRECTORY_NAME, LOWER_DIRECTORY_NAME, CREATED_DATE, UPDATED_DATE, ACTIVE, DESCRIPTION, IMPL_CLASS, LOWER_IMPL_CLASS, DIRECTORY_TYPE, ID) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) [23505-196]]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute batch\r\n\tat org.springframework.orm.hibernate5.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:247)\r\n\tat org.springframework.orm.hibernate5.HibernateTransactionManager.convertHibernateAccessException(HibernateTransactionManager.java:785)\r\n...\r\n\tat com.sun.proxy.$Proxy305.initialiseEmbeddedCrowd(Unknown Source)\r\n\tat com.atlassian.bamboo.ww2.actions.setup.SetupUtilityBean.setupUser(SetupUtilityBean.java:212)\r\n\tat com.atlassian.bamboo.ww2.actions.setup.SetupAdminUserAction.execute(SetupAdminUserAction.java:33)\r\n...\r\n\tat java.lang.Thread.run(Thread.java:748)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute batch\r\n\tat org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:112)\r\n...\r\n\tat org.springframework.orm.hibernate5.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:609)\r\n\t... 180 more\r\nCaused by: org.h2.jdbc.JdbcBatchUpdateException: Unique index or primary key violation: \"UK_DIR_L_NAME_INDEX_A ON PUBLIC.CWD_DIRECTORY(LOWER_DIRECTORY_NAME) VALUES ('bamboo internal directory', 65537)\"; SQL statement:\r\ninsert into CWD_DIRECTORY (DIRECTORY_NAME, LOWER_DIRECTORY_NAME, CREATED_DATE, UPDATED_DATE, ACTIVE, DESCRIPTION, IMPL_CLASS, LOWER_IMPL_CLASS, DIRECTORY_TYPE, ID) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) [23505-196]\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeBatch(JdbcPreparedStatement.java:1234)\r\n\tat com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeBatch(NewProxyPreparedStatement.java:2544)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchingBatch.performExecution(BatchingBatch.java:118)\r\n\t... 200 more\r\n{noformat}\r\n\r\nh3. Workaround\r\nOnce this issue has been encountered, you will need to do the entire installation again to a new {{$BAMBOO_HOME}} directory and database.",
      "summary": "During setup its possible to double click on some setup steps and break the installation"
    }
  },
  {
    "key": "BAM-21031",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-11-23T14:21:39.000+0000",
      "created": "2020-08-04T23:43:37.000+0000",
      "description": "h3. Issue Summary\r\nUser directories page fails to load if a directory has more than one sync status with {{org.hibernate.NonUniqueResultException: query did not return a unique result}}.\r\n\r\nh3. Steps to Reproduce\r\nWhile it's unknown how to get more than one sync status per directory (this is likely a bug itself) under normal circumstances, simply visiting *Bamboo Administration >> User directories* with two sync statuses in the database (table: {{CWD_SYNCHRONISATION_STATUS}}) for one directory will reproduce this.\r\n\r\nh3. Expected Results\r\nPage loads.\r\n\r\nh3. Actual Results\r\nPage won't load.\r\n\r\nThe below exception is shown in UI and in the {{$BAMBOO_HOME/logs/atlassian-bamboo.log}} file:\r\n{noformat}\r\nCaused by: org.hibernate.NonUniqueResultException: query did not return a unique result: 2\r\n\tat org.hibernate.query.internal.AbstractProducedQuery.uniqueElement(AbstractProducedQuery.java:1577)\r\n\tat org.hibernate.query.internal.AbstractProducedQuery.uniqueResult(AbstractProducedQuery.java:1547)\r\n\tat com.atlassian.crowd.dao.directory.DirectorySynchronisationStatusDAOHibernate.findLastForDirectory(DirectorySynchronisationStatusDAOHibernate.java:36)\r\n\tat com.atlassian.crowd.manager.directory.InDatabaseDirectorySynchronisationInformationStore.getLast(InDatabaseDirectorySynchronisationInformationStore.java:60)\r\n\tat com.atlassian.crowd.manager.directory.SynchronisationStatusManagerImpl.getDirectorySynchronisationInformation(SynchronisationStatusManagerImpl.java:93)\r\n\tat com.atlassian.crowd.manager.directory.SynchronisationStatusManagerImpl.getDirectorySynchronisationInformation(SynchronisationStatusManagerImpl.java:121)\r\n\tat com.atlassian.crowd.manager.directory.DirectoryManagerGeneric.getDirectorySynchronisationInformation(DirectoryManagerGeneric.java:267)\r\n\tat com.atlassian.crowd.embedded.core.CrowdDirectoryServiceImpl.getDirectorySynchronisationInformation(CrowdDirectoryServiceImpl.java:208)\r\n\tat com.atlassian.bamboo.crowd.DelegatingCrowdDirectoryService.getDirectorySynchronisationInformation(DelegatingCrowdDirectoryService.java:88)\r\n\tat com.atlassian.crowd.embedded.admin.list.DirectoriesController.getDirectoryListItems(DirectoriesController.java:294)\r\n\tat com.atlassian.crowd.embedded.admin.list.DirectoriesController.getReferenceData(DirectoriesController.java:75)\r\n\tat com.atlassian.crowd.embedded.admin.list.DirectoriesController.list(DirectoriesController.java:86)\r\n{noformat}\r\n* Note: This stacktrace has been heavily truncated to remove low level java, interceptors and non-relevant frameworks.\r\n\r\nh3. Workaround\r\n\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "User directories page fails to load if a directory has more than one sync status"
    }
  },
  {
    "key": "BAM-21030",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-08-04T19:49:02.000+0000",
      "description": "h3. Problem Definition\r\n\r\nWhen searching for a deployment project using the _\"After deployment_\" trigger provided by the [After Deployment Trigger for Bamboo|https://marketplace.atlassian.com/apps/1216136/after-deployment-trigger-for-bamboo?hosting=server&tab=overview] app the results might be (unexpectedly) empty.\r\n\r\nThis does *not* mean your Bamboo indexes are corrupt, your deployment project no longer exists or you no longer have permissions to access it. The [After Deployment Trigger for Bamboo|https://marketplace.atlassian.com/apps/1216136/after-deployment-trigger-for-bamboo?hosting=server&tab=overview] app uses the following Bamboo REST endpoint to search for data:\r\n\r\n* [https://docs.atlassian.com/atlassian-bamboo/REST/7.0.3/#d2e2642]\r\n\r\nBy default this endpoint will only return the first 12 results when searching for data after typing in at least 3 characters. The problem is that the app does not filter out other results (e.g. plans, plan branches, projects and etc) and instead it only hides them. So if your deployment project is not in the first 12 results when you start searching for it you have to continue typing to narrow the scope of the search otherwise it won't show up in the results.\r\n\r\nThis is rather confusing and a bit misleading because the search result will be empty until it finds at least one deployment project that matches the expression you're searching for in the first 12 results.\r\n\r\nh3. Suggested Solution\r\n\r\nFilter out the results of the REST call to look for deployment projects only instead of hiding the other results from the UI.\r\n \r\nh3. Workaround\r\n\r\nYou'll need to keep typing in to narrow down the scope of the search until you find your deployment project.\r\n\r\nFor example, if you're searching for a deployment project named _\"This is my deployment project_\" and you start typing _\"Thi_\" but get an empty list it's very likely that your deployment project is not present in the first 12 results of the search. If the first 12 results don't return any deployment projects you'll get an empty list. Try searching for _\"This is\"_ or _\"This is my\"_ to see if the deployment project shows up. The more characters you give the more precise the search will be and the higher the chances you'll find your deployment project in the list.",
      "summary": "Empty search results when looking for deployment projects using the search provided by the After Deployment Trigger for Bamboo app"
    }
  },
  {
    "key": "BAM-21029",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-08-04T11:35:56.000+0000",
      "description": "h3. Problem Definition\r\n\r\nStarting from Bamboo 7.1, we now have Conditional task plugin bundled with the product. Currently, there is no page to explain the working of this task.\r\nh3. Suggested Solution\r\n\r\nAdd a page to our documentation to explain how this task works.\r\nh3. Why this is important\r\n\r\nAs a new user, it's hard to understand how to use this feature. The current documentation in the Plugins page has limited information about the plugin usage and doesn't cover any scenarios in detail and thus it is best to have a dedicated section that explains its working.",
      "summary": "Documentation page for Conditional task"
    }
  },
  {
    "key": "BAM-21028",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-09-03T07:14:40.000+0000",
      "created": "2020-08-04T09:55:49.000+0000",
      "description": "h3. Issue Summary\r\n\r\nTrying to configure a new application link or loading the Application link page to list the status of existing Applinks will show \"NETWORK ERROR\" in red.\r\nThe REST client\u00a0{{atlassian-rest-module:3.2.16}}\u00a0while reading headers (eg. Content-Type) does a\u00a0_case-sensitive lookup_\u00a0for them (headers name should be\u00a0_case-insensitive_). So when headers are in lower case it can't parse them properly. The problem is triggered by the proxy server, which is converting all HTTP header names to lower-case.\r\n\r\n\r\nh3. Steps to Reproduce\r\n # Setup two Atlassian applications behind a proxy\r\n # Setup HAProxy with HTX enabled on one of the application\r\n # Configure Application link between the two applications\r\n\r\nh3. Expected Results\r\n\r\nThe application link can be configured and established\r\n\r\nh3. Actual Results\r\n\r\nThe application link is not configured correctly with \"NETWORK ERROR\" due to wrong headers.\r\n\r\nDiagnosis\r\n\r\nGenerate HAR file in the process of configuring or loading the Application link page.\r\n * On Application link page load, locate\u00a0{{/rest/applinks-oauth/latest/applicationlink/<applinkid>/authentication}}\u00a0and see\u00a0*UNEXPECTED_RESPONSE*\u00a0in its body.\r\n\r\n Notes\r\n * As per\u00a0[RFC 2616|https://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.2], HTTP 1.1 expects headers name to be case-insensitive.\r\n * HTTP 2.0 enforce the requirement for the headers to be all lowercase as per\u00a0[RFC 7540 about HTTP/2|https://tools.ietf.org/html/rfc7540#section-8.1.2], see\u00a0JRASERVER-70517\r\n\r\nh3. Workaround\r\n\r\nOn the proxy side, disable the handling of headers to all lowercase:\r\n * Example HAProxy, set\u00a0{{no option http-use-htx}}\r\n * Example for Envoy -\u00a0[header_casing|https://www.envoyproxy.io/docs/envoy/latest/configuration/http/http_conn_man/header_casing]",
      "summary": "Application Link Status page fails to load due to Case-sensitive checks for Headers"
    }
  },
  {
    "key": "BAM-21027",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-07-29T07:57:09.000+0000",
      "description": "h3. Problem Definition\r\nCurrently the plan admins can change the default artifact handler configuration to change the storage location of the artifacts from the plans and thus can override the default artifact handler configuration selection. \r\n\r\nh3. Suggested Solution\r\nThere should be a way to restrict the plans admins to change the default artifact handler configuration.\r\n\r\nh3. Workaround \r\nNone\r\n",
      "summary": "Need to restrict the plan admins to change the default artifact handler configured by the system admins"
    }
  },
  {
    "key": "BAM-21026",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-07-28T15:26:52.000+0000",
      "description": "h3. Problem Definition\r\n\r\nIf mounting an EBS volume in an Elastic Image configuration, there is not a way to tell Bamboo to only ever have a single instance active using that configuration.\r\n\r\nWhen an instance is active with a particular configuration and another build is triggered, which uses that config, one of two things happens:\r\n# Build is put in queue to be used on that agent (OK)\r\n# Bamboo attempts to spin up a new EC2 instance using the configuration.  Then errors out because the EBS volume is already in use by another EC2 instance.\r\n\r\nh3. Suggested Solution\r\n\r\nAdd an option in the image configuration to limit the number of concurrent copies of a single image configuration.\r\n\r\n\r\nh3. Workaround\r\n\r\n# If the data on the EBS volume is Static, create an EBS snapshot to mount to the Elastic Agent Instance, rather than mounting a defined volume.  This will allow Bamboo to create a new volume based on the snapshot for each agent instance.\r\n[Configuring elastic instances to use the EBS|https://confluence.atlassian.com/bamboo0700/configuring-elastic-instances-to-use-the-ebs-1014682672.html]\r\n# If the data on the EBS volume frequently changes, you'll need to create a separate EBS volume for each build, and create individual Elastic Image configurations and dedicate each image config to an individual build with its own unique EBS volume.\r\n\r\n\r\n",
      "summary": "Add the ability to limit maximum active Elastic Agents using a single configuration"
    }
  },
  {
    "key": "BAM-21025",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-09-03T07:14:39.000+0000",
      "created": "2020-07-28T13:57:30.000+0000",
      "description": "h3. Issue Summary\r\n\r\nIf Script task body contains empty lines for inline script body it produces YAML Specs which can't be used by Bamboo\r\nh3. Steps to Reproduce\r\n # Create Plan with script task which contains\u00a0empty lines for inline body\r\n # Export plan to YAML Specs\r\n # Use generated Specs for plan import\r\n\r\nh3. Expected Results\r\n\r\nPlan is imported and works as expected\r\nh3. Actual Results\r\n\r\nError message\r\nh3. Workaround\r\n\r\nUpdate script task inline body and remove empty lines",
      "summary": "Script task with empty lines in body generates invalid YAML Specs"
    }
  },
  {
    "key": "BAM-21024",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-07-28T08:32:00.000+0000",
      "description": "h3. Issue Summary\r\n\r\nSometimes the capability and capability set gets orphaned when the image (elastic image) it is attached to no longer exists.\r\nh3. Steps to Reproduce\r\n\r\nThere are no steps to reproduce.\r\nh3. Expected Results\r\n\r\nWhen an image is deleted, the respective capabilities have to be deleted as well.\r\nh3. Actual Results\r\n\r\nEven after deleting capabilities from the elastic images, they still show in Bamboo executables and in subsequent tasks.\r\n\r\nh3. Workaround\r\nOrphaned capabilities need to be removed manually from the database but this should only be done if they are actually causing a problem (which is very rare) and in collaboration with our support team. Raise a ticket here if you think orphaned capabilities are causing an issue and we can investigate further: https://support.atlassian.com/",
      "summary": "capability and capability set are orphaned when an image is removed"
    }
  },
  {
    "key": "BAM-21023",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-07-28T08:06:34.000+0000",
      "description": "h3. Issue Summary\r\nBranch plan Specs builds fail when creating new Artifact Download task if there is duplicate branch plan\r\n\r\nh3. Steps to Reproduce\r\n# Create Specs plan with the following YAML:\r\n{noformat}\r\n---\r\nversion: 2\r\nplan:\r\n  project-key: SPECS\r\n  key: ABC\r\n  name: bamboo specs yaml\r\n\r\nstages:\r\n  - stage 1:\r\n    - testing\r\n\r\ntesting:\r\n  tasks:\r\n    - script: echo hello > test.txt\r\n\r\n...\r\n{noformat}\r\n# Create branch \"test\" that have the same YAML Specs in Bitbucket Server\r\nIt will automatically create branch plan \"test\" in Bamboo\r\n# Create a duplicate branch plan in Bamboo, two Bamboo branch plan \"test\" and \"test 1\" using the same branch \"test\" in Bitbucket Server\r\n# Modify YAML Specs in branch \"test\" with the following content:\r\n{noformat}\r\n---\r\nversion: 2\r\nplan:\r\n  project-key: SPECS\r\n  key: STASH\r\n  name: bamboo specs yaml\r\n\r\nstages:\r\n  - stage 1:\r\n    - testing\r\n  - stage 2:\r\n    - download\r\n\r\ntesting:\r\n  tasks:\r\n    - script: echo hello > test.txt\r\n  artifacts:\r\n    -\r\n      name: stage1artifact\r\n      location: .\r\n      pattern: 'test.txt'\r\n      required: true\r\n      shared: true\r\n\r\ndownload:\r\n  tasks:\r\n    - artifact-download:\r\n        source-plan: SPECS-STASH\r\n        artifacts:\r\n          - name: stage1artifact\r\n\r\n...\r\n{noformat}\r\n\r\nh3. Expected Results\r\nSpecs build for branch \"test\" will succeed\r\n\r\nh3. Actual Results\r\nSpecs build for branch \"test\" fail. The below exception is thrown in the atlassian-bamboo.log file:\r\n{noformat}\r\n2020-06-26 14:36:46,701 INFO [15-BAM::SpecsDetection:pool-22-thread-4] [DivergentBranchSpecsConsumer] Updating divergent branch(es) for plan SPECS-STASH and branch VCS Branch [test]\r\n2020-06-26 14:36:46,758 INFO [15-BAM::SpecsDetection:pool-22-thread-4] [DivergentBranchSpecsConsumer] Updating plan branch SPECS-STASH2 as divergent branch for plan SPECS-STASH and branch VCS Branch [test]\r\n2020-06-26 14:36:46,778 INFO [15-BAM::SpecsDetection:pool-22-thread-4] [AbstractQuartzTriggerActivator] Scheduler job repository.change.jobs.CHAIN:SPECS-STASH2:1 not found, not deleted\r\n2020-06-26 14:36:46,887 ERROR [15-BAM::SpecsDetection:pool-22-thread-4] [DivergentBranchSpecsConsumer] Exception when importing divergent branch\r\njava.util.NoSuchElementException: No value present\r\n\tat java.util.Optional.get(Optional.java:135)\r\n\tat com.atlassian.bamboo.plugins.artifact.export.ArtifactDownloaderTaskExporter.toTaskConfiguration(ArtifactDownloaderTaskExporter.java:124)\r\n\tat com.atlassian.bamboo.configuration.external.helpers.TaskDefinitionExportHelper.importTaskDefinition(TaskDefinitionExportHelper.java:143)\r\n\tat com.atlassian.bamboo.configuration.external.PlanConfigImportServiceImpl.importTaskProperties(PlanConfigImportServiceImpl.java:1475)\r\n\tat com.atlassian.bamboo.configuration.external.PlanConfigImportServiceImpl.lambda$createTasks$28(PlanConfigImportServiceImpl.java:1455)\r\n\tat java.util.ArrayList.forEach(ArrayList.java:1249)\r\n\tat com.atlassian.bamboo.configuration.external.PlanConfigImportServiceImpl.createTasks(PlanConfigImportServiceImpl.java:1455)\r\n...\r\n2020-06-26 14:36:46,942 INFO [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-8] [BitbucketServerRssStatusUpdater] Sending RSS notification to Stash (repository: stash-master)\r\n2020-06-26 14:36:46,961 INFO [15-BAM::SpecsDetection:pool-22-thread-4] [RssDetectionRunnable] Exception while executing RSS detection for RssDetectionWork[repository=3309569,branch=test]\r\njava.util.NoSuchElementException: No value present\r\n...\r\n2020-06-26 14:36:46,961 ERROR [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-14] [AsynchronousAbleEventDispatcher] There was an exception thrown trying to dispatch event [com.atlassian.stash.plugin.remote.event.StashBranchChangedRemoteEvent@3b4384ac[branchName=test,repositoryProject=TST,repositorySlug=stash,committer=kahloun.foong,sourceId=c0e3a34a-0796-3201-994a-0c24f39fb323,sourceUrl=http://localhost:7990]] from the invoker [SingleParameterMethodListenerInvoker{method=public void com.atlassian.bamboo.plugins.stash.events.BranchChangedEventListener.onBranchChangedEvent(com.atlassian.stash.plugin.remote.event.StashBranchChangedRemoteEvent), listener=com.atlassian.bamboo.plugins.stash.events.BranchChangedEventListener@30c2f031}]\r\njava.lang.RuntimeException: No value present. Listener: com.atlassian.bamboo.plugins.stash.events.BranchChangedEventListener event: com.atlassian.stash.plugin.remote.event.StashBranchChangedRemoteEvent\r\n...\r\n2020-06-26 14:39:06,968 INFO [15-BAM::SpecsDetection:pool-22-thread-2] [ImmutablePlanCacheServiceImpl] Invalidating SPECS-STASH2\r\n2020-06-26 14:39:06,968 INFO [15-BAM::SpecsDetection:pool-22-thread-2] [ImmutablePlanCacheServiceImpl] Invalidating SPECS-STASH1\r\n2020-06-26 14:39:06,968 INFO [15-BAM::SpecsDetection:pool-22-thread-2] [ImmutablePlanCacheServiceImpl] Invalidating SPECS-STASH\r\n2020-06-26 14:39:07,058 INFO [15-BAM::SpecsDetection:pool-22-thread-2] [AllTypesSpecsImporter] Bamboo Specs import took 1.235 s\r\n\r\n{noformat}\r\n\r\nh3. Notes\r\n* If no duplicate branch plan, the Specs build will work fine\r\n* If the branch plan named \"test\" is deleted (branch plan \"test 1\" still remain), the problem still happen\r\n* If the branch plan named \"test 1\" is deleted (branch plan \"test\" still remain), Specs build works fine\r\n\r\nh3. Workaround\r\nThere is no need to use Artifact Download task. A Shared artifact will be downloaded automatically to the next stage without Artifact Download task.",
      "summary": "Specs build fail when creating new Artifact Download task"
    }
  },
  {
    "key": "BAM-21022",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-07-28T06:15:58.000+0000",
      "description": "\r\nSummary\r\nIf a time is set for Idle agent shutdown then *all* Elastic agents will use this setting including agents that have been manually started.\r\n\r\nh2. Environment\r\nBamboo 7.0.4\r\nAWS EC2 instance\r\nElastic Agent\r\n\r\nh2. Steps to Reproduce\r\n# Under https://<bamboo-url>/admin/elastic/editElasticConfig.action or Bamboo administration >> Overview >> Elastic Bamboo >> Configuration, hit Edit configuration\r\n# In Automatic elastic instance management, select Custom under Elastic instance management\r\n# Set up '10' for Idle agent shutdown delay\r\n# In Miscellaneous, select Automatic termination\r\n# Set up '10 for Shutdown delay\r\n# Save the configuration\r\n\r\n# # Under https://<bamboo-url>/admin/elastic/editElasticConfig.action or Bamboo administration >> Overview >> Elastic Instances >>  Start New Elastic Instances\r\n\r\nh2. Desired Results\r\nAfter 10 minute of being idle, any instance that has been started automatically by Bamboo should terminate in AWS. Elastic agents that were started manually should not follow the idle timeout.\r\n\r\nActual Results\r\nAll Elastic agents will timeout if Idle.\r\n\r\nCustoer has a use case where they would like to start 2 Elastic agent that persist during business hours. Currently they need to script with cron to ensure that there are always two agents and restarting them if they have idled. The preference and this feature request it to have manually started agents *not* idle timeout or atleast have a separate configurable timeout.",
      "summary": "Configure idle time time for different Elastic agents."
    }
  },
  {
    "key": "BAM-21021",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-07-24T11:40:57.000+0000",
      "description": "h3. Issue Summary\r\n\r\nIt's not possible to define plan variable with empty value as YAML Specs doesn't support empty String nodes.\r\n\r\nJava Specs allows to configure variable with empty value\r\n\r\nSee\u00a0[https://community.atlassian.com/t5/Bamboo-questions/BUG-How-to-declare-an-emtpy-variable-in-Bamboo-YAML-specs/qaq-p/1439865]\u00a0for details\r\nh3. Steps to Reproduce\r\n # Create YAML file and define plan variable with empty value\r\n # Push change to repository\r\n\r\nh3. Expected Results\r\n\r\nPlan created and variable has empty value\r\nh3. Actual Results\r\n\r\nSpecs processing fails.\r\nh3. Workaround\r\n\r\nUse dummy value and handle it when analyze variable value.",
      "summary": "Use empty value for plan variable at YAML Specs"
    }
  },
  {
    "key": "BAM-21018",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-07-24T10:22:54.000+0000",
      "created": "2020-07-22T09:18:08.000+0000",
      "description": "h3. Issue Summary\r\n\r\nJava versioning scheme uses major versions followed by the update version (for example JDK 8 u191, where the update version is 191).\u00a0\r\n\r\nBamboo fails to configure an embedded database when run in an environment having Java update version > 255\r\nh3. Steps to Reproduce\r\n # Run Bamboo in any environment with Java update version higher than 255 (for example JDK 8 u261, JDK 7 u261)\r\n # Configure embedded database\r\n\r\nh3. Expected Results\r\n\r\nBamboo is up and running\r\nh3. Actual Results\r\n\r\nThe below exception is thrown in logs:\r\n{noformat}\r\n2020-07-21 15:48:25,386 WARN [C3P0PooledConnectionPoolManager[identityToken->2wrsidabvnbwofd3bf7h|26ae5d]-HelperThread-#1] [ThreadPoolAsynchronousRunner] An Error forced the closing of Thread[C3P0PooledConnectionPoolManager[identityToken->2wrsidabvnbwofd3bf7h|26ae5d]-HelperThread-#1,5,main]. Will attempt to reconstruct, but this might mean that something bad is happening.\r\njava.lang.NoClassDefFoundError: Could not initialize class org.h2.value.CompareMode\r\n.....\r\nCaused by: java.lang.IllegalArgumentException: Invalid version number: Version number may be negative or greater than 255\r\n    at com.ibm.icu.util.VersionInfo.getInstance(VersionInfo.java:191)\r\n    at com.ibm.icu.impl.ICUDebug.getInstanceLenient(ICUDebug.java:65)\r\n    at com.ibm.icu.impl.ICUDebug.<clinit>(ICUDebug.java:69)\r\n    ... 17 more\r\n{noformat}\r\nh3. Workaround\r\n\r\n* Downgrade Java version to an update version less than 255.\r\n* Delete ${BAMBOO_INSTALL_DIR}/atlassian-bamboo/WEB-INF/lib/icu4j-3.8.jar file and restart Bamboo.",
      "summary": "Bamboo crashes with H2 db and Java update version higher than 255"
    }
  },
  {
    "key": "BAM-21017",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-07-22T01:01:49.000+0000",
      "description": "h3. Problem Definition\r\n\r\nWhen an artifact definition is deleted from a plan, the artifact download task consuming that artifact inside a plan and/or deployment environment defaults to the option of downloading \"All artifacts\" from the UI. However, it is still pointing to that artifact -- the one that was removed -- in the database. Trying to view the plan and/or deployment project as Java Specs or YAML results in an error because Bamboo is no longer capable of locating the artifact.\r\n\r\nh4. View deployment project as Java Specs or YAML\r\n# For deployment projects, the following message is displayed when the artifact definition is no longer available inside the source build plan:\r\n{quote}\r\n(!) No *shared* artifacts found for related plan. Configure the build plan to publish shared artifacts.\r\n{quote}\r\n# Upon trying to view the deployment project as Java Specs or YAML the following error is shown:\r\n{quote}\r\nh3. An unexpected error has occurred\r\n{panel:bgColor=#fff8c4}\r\n(!) Export to Bamboo Specs failed: Cannot find artifact with id: #########\r\n{panel}\r\n{quote}\r\n# The following error is thrown in the {{atlassian-bamboo.log}} file:\r\n{noformat}\r\n2020-08-10 10:55:19,558 ERROR [http-nio-8085-exec-23] [ViewDeploymentProjectSpecs] Cannot find artifact with id: 3080193\r\njava.lang.IllegalStateException: Cannot find artifact with id: 3080193\r\n        at com.atlassian.bamboo.plugins.artifact.export.ArtifactDownloaderTaskExporter.addDownloadItemsToSpec(ArtifactDownloaderTaskExporter.java:250)\r\n        at com.atlassian.bamboo.plugins.artifact.export.ArtifactDownloaderTaskExporter.toSpecsEntity(ArtifactDownloaderTaskExporter.java:230)\r\n        at com.atlassian.bamboo.plugins.artifact.export.ArtifactDownloaderTaskExporter.toSpecsEntity(ArtifactDownloaderTaskExporter.java:72)\r\n        at com.atlassian.bamboo.configuration.external.helpers.TaskDefinitionExportHelper.toSpecsEntity(TaskDefinitionExportHelper.java:65)\r\n        at com.atlassian.bamboo.configuration.external.DeploymentExportServiceImpl.lambda$generateEnvironment$3(DeploymentExportServiceImpl.java:145)\r\n        at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\r\n        at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n        at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1384)\r\n        at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\r\n        at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\r\n        at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\r\n        at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\r\n        at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n        at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:485)\r\n        at com.atlassian.bamboo.configuration.external.DeploymentExportServiceImpl.generateEnvironment(DeploymentExportServiceImpl.java:146)\r\n        at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\r\n        at java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)\r\n        at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:483)\r\n        at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\r\n        at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\r\n        at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\r\n        at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n        at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:485)\r\n        at com.atlassian.bamboo.configuration.external.DeploymentExportServiceImpl.generateDeployment(DeploymentExportServiceImpl.java:132)\r\n        at com.atlassian.bamboo.configuration.external.DeploymentExportServiceImpl.exportDeploymentToSpecs(DeploymentExportServiceImpl.java:112)\r\n        at com.atlassian.bamboo.deployments.projects.actions.ViewDeploymentProjectSpecs.yaml(ViewDeploymentProjectSpecs.java:81)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at ognl.OgnlRuntime.invokeMethod(OgnlRuntime.java:899)\r\n        at ognl.OgnlRuntime.callAppropriateMethod(OgnlRuntime.java:1544)\r\n        at ognl.ObjectMethodAccessor.callMethod(ObjectMethodAccessor.java:68)\r\n        ...\r\n{noformat}\r\n\r\nh4. View plan as Java Specs or YAML\r\n# Upon trying to view a plan as Java Specs or YAML the following error is thrown in the {{atlassian-bamboo.log}} file:\r\n{noformat}\r\n2020-08-10 10:57:30,299 ERROR [http-nio-8085-exec-9] [FiveOhOh] 500 Exception was thrown.\r\njava.lang.IllegalStateException: Cannot find artifact with id: 3080193\r\n        at com.atlassian.bamboo.plugins.artifact.export.ArtifactDownloaderTaskExporter.addDownloadItemsToSpec(ArtifactDownloaderTaskExporter.java:250)\r\n        at com.atlassian.bamboo.plugins.artifact.export.ArtifactDownloaderTaskExporter.toSpecsEntity(ArtifactDownloaderTaskExporter.java:230)\r\n        at com.atlassian.bamboo.plugins.artifact.export.ArtifactDownloaderTaskExporter.toSpecsEntity(ArtifactDownloaderTaskExporter.java:72)\r\n        at com.atlassian.bamboo.configuration.external.helpers.TaskDefinitionExportHelper.toSpecsEntity(TaskDefinitionExportHelper.java:65)\r\n        at com.atlassian.bamboo.configuration.external.PlanConfigExportServiceImpl.lambda$null$15(PlanConfigExportServiceImpl.java:307)\r\n        at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\r\n        at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n        at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1384)\r\n        at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\r\n        at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\r\n        at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\r\n        at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\r\n        at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n        at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:485)\r\n        at com.atlassian.bamboo.configuration.external.PlanConfigExportServiceImpl.lambda$generateJobs$24(PlanConfigExportServiceImpl.java:308)\r\n        at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\r\n        at java.util.HashMap$KeySpliterator.forEachRemaining(HashMap.java:1556)\r\n        at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\r\n        at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\r\n        at java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\r\n        at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n        at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\r\n        at com.atlassian.bamboo.configuration.external.PlanConfigExportServiceImpl.generateJobs(PlanConfigExportServiceImpl.java:351)\r\n        at com.atlassian.bamboo.configuration.external.PlanConfigExportServiceImpl.lambda$generateStages$13(PlanConfigExportServiceImpl.java:287)\r\n        at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\r\n        at java.util.Collections$2.tryAdvance(Collections.java:4719)\r\n        at java.util.Collections$2.forEachRemaining(Collections.java:4727)\r\n        at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\r\n        at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\r\n        at java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\r\n        at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n        at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\r\n        at com.atlassian.bamboo.configuration.external.PlanConfigExportServiceImpl.generateStages(PlanConfigExportServiceImpl.java:291)\r\n        at com.atlassian.bamboo.configuration.external.PlanConfigExportServiceImpl.generateTopLevelPlanProperties(PlanConfigExportServiceImpl.java:250)\r\n        at com.atlassian.bamboo.configuration.external.PlanConfigExportServiceImpl.exportPlanToSpecs(PlanConfigExportServiceImpl.java:142)\r\n        at com.atlassian.bamboo.ww2.actions.build.admin.config.ViewPlanSpecs.yamlCode(ViewPlanSpecs.java:99)\r\n        at com.atlassian.bamboo.ww2.actions.build.admin.config.ViewPlanSpecs.yaml(ViewPlanSpecs.java:48)\r\n        ...\r\n{noformat}\r\n\r\nh3. Suggested Solution\r\n # Once the artifact definition is deleted from a plan, the artifact download task pointing to that artifact definition should be removed from the plan and/or deployment environment.\r\n # Another suggestion would be to add a warning message to the logs saying that the artifact download task was not exported/skipped because its configuration is invalid and needs to be fixed -- and allow the export to happen.\r\n* Add an audit log event with information on the artifact deletion as described in BAM-17199.\r\n\r\nh4. Why this is important\r\n # Need to know who deleted the artifact definition.\r\n # Allow the Specs or YAML export without the artifact download task.",
      "summary": "Unable to view deployment project and plan as Java Specs or YAML when artifact definition is removed"
    }
  },
  {
    "key": "BAM-21016",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-07-21T21:54:21.000+0000",
      "description": "Bamboo should have a way to update existing Remote Agent's JVM launch arguments.  For instance, if an admin needs to set or overwrite an arbitrary JVM argument, like {{-Djava.io.tmpdir}}, they can make one setting and all Remote Agent get the new configuration.",
      "summary": "way to update JVM arguments for existing Remote Agent "
    }
  },
  {
    "key": "BAM-21015",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-07-21T16:54:56.000+0000",
      "description": "It would be nice to allow comments or descriptions to be provided by the user for each plan variable to provide documentation to other users (or my future self).",
      "summary": "Allow Comments on Plan Variables"
    }
  },
  {
    "key": "BAM-21014",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-07-21T11:27:16.000+0000",
      "created": "2020-07-21T00:05:01.000+0000",
      "description": "Scenario.\r\n\r\nI have my artefacts retention set to 1 build.\r\n\r\nI have a deployment project that relies on that artefact being in place.\r\n\r\nI run bamboo specs update which creates a new build.\r\n\r\nThe artefact is deleted, however there is no artefact to replace it.",
      "summary": "Bamboo Plan Spec Scan should not be counted towards artefact retention rules"
    }
  },
  {
    "key": "BAM-21013",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-07-20T22:40:14.000+0000",
      "description": "h3. Problem Definition\r\nCurrently not all plugins can be installed by moving their files to <bamboo-home>/plugins\r\nh3. Suggested Solution\r\nProvide a way to remote install/update/remove new application plugins through the terminal\r\n\r\nh4. Why this is important \r\nIt facilitates managing multiple Bamboo instances",
      "summary": "Allow remote plugin deployment"
    }
  },
  {
    "key": "BAM-21012",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-07-20T20:23:39.000+0000",
      "description": "What is currently possible with Bamboo's Audit log is to enable / disable it and to delete existing logs.\r\n\r\nThe content of an Audit log is fix and cannot be changed by users, thus far. E.g. the creation of a user is not written to Bamboo's Audit log, neither adding this user to the Admin group or changing it's global permissins and also not changing the password for this new admin user.\r\n\r\nSo the request per this ticket is to\r\n * automatically add user, permission and related password change activities.\r\n * Preferably stuff the Audit logging page with further logging options that are p,er default, not enabled so to be customizable for auditing processes.\r\n\r\nAn addditinal option of \"Export\" like to XLS or in CSV format would also be great for further use of the Audit log outside Bamboo.",
      "summary": "Allow Audit log to be configurable and containing user and permission information"
    }
  },
  {
    "key": "BAM-21011",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-07-17T09:25:08.000+0000",
      "description": "h3. Issue Summary\r\n\r\nWhen changing artifact dependencies on build plan job, changes are not stored. After clicking *Save* to apply the changes and consequently refreshing the page, the changes are reverted to the previous value.\r\n\r\nAlso, these changes do not appear on the audit logs.\r\nh3. Steps to Reproduce\r\n # Create a plan with two stages, one job on each stage.\r\n # For job one, create 2 artifacts.\r\n # For job two, in the section \"Artifacts -> Artifacts dependencies\" Create a new artifact dependency to one of the artifacts.\r\n # Click on *Edit*. Change the artifact selected. Click *Save.*\r\n # Refresh page.\r\n# Go to Plan Audit logs check for the dependency change information.\r\n\r\nh3. Expected Results\r\n\r\nThe changes are stored and reflected after refreshing the page.\r\nh3. Actual Results\r\n\r\nThe changes are not stored, and after refreshing the page we can see that the artifact dependency value still reflects the previous artifact selected.\r\nh3. Workaround\r\n\r\nThe only possible workaround is to delete the existing artifact dependency and create a new one with the correct value.",
      "summary": "When changing artifact dependencies on build plan job, changes are not stored"
    }
  },
  {
    "key": "BAM-21010",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-07-17T01:42:14.000+0000",
      "description": "h3. Issue Summary\r\nHitting enter when searching for a user causes filtering to be reset. Essentially the below URL does not actually filter the list:\r\n{code}\r\n$BAMBOO_URL/admin/user/viewUsers.action?filter=usertosearch\r\n{code}\r\n\r\nIt also affects the deployments dashboard at:\r\n{code}\r\n$BAMBOO_URL/deploy/viewAllDeploymentProjects.action?filter=a\r\n{code}\r\n\r\nh3. Steps to Reproduce\r\n# *Bamboo Administration >> User Management >> Users* or *Deploy >> All deployment projects*\r\n# Type in a user or deployment to search, it starts filtering correctly\r\n# Press enter\r\n\r\nh3. Expected Results\r\nThe page still filters correctly based on what is entered\r\n\r\nh3. Actual Results\r\nYou'll be taken to {{$BAMBOO_URL/admin/user/viewUsers.action?filter=usertosearch}} and it won't be filtered\r\n\r\nh3. Workaround\r\nAllow the search to complete by not hitting enter\r\n\r\nIf you need to perform a user search directly for an automation, use the REST API:\r\n{{$BAMBOO_BASE_URL/rest/api/latest/admin/users?filter=usertosearch}}",
      "summary": "Hitting enter when searching for a user or deployment causes filtering to be reset"
    }
  },
  {
    "key": "BAM-21009",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-07-15T14:25:36.000+0000",
      "description": "The [Bamboo Supported Platforms|https://confluence.atlassian.com/bamboo/supported-platforms-289276764.html] documentation doesn't mention that the Oracle compression is not supported. \r\n\r\nCurrently, Bamboo cannot handle add/drop column operation on compressed tables.",
      "summary": "Bamboo documentation doesn't mention that Oracle compression is not supported"
    }
  },
  {
    "key": "BAM-21008",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-07-14T19:41:58.000+0000",
      "description": "In Bamboo versions above 7, the JDBC driver does not come embedded. The documentation below doesn't reflect these changes:\r\n\r\n* [Oracle|https://confluence.atlassian.com/bamboo/oracle-289276820.html]\r\n\r\nPlease update the documentation to include the new steps to set up Bamboo with Oracle.",
      "summary": "Update \"Connecting to an external database Oracle\" documentation"
    }
  },
  {
    "key": "BAM-21007",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-07-13T21:34:11.000+0000",
      "description": "h3. Issue Summary\r\n\r\nRoot to the 64-bit Windows issues (which can e.g. be Bamboo not starting as service) is that the Windows Zip Archive contains the Bamboo 32-bit binaries only.\r\nh3. Improvement Suggestion\r\n\r\nI see basically three options here of what can de done:\r\n # Skip shipping Zip Archive as there exist the 32-bit and the 64-bit Windows Installers on [Bamboo Download Archives|https://www.atlassian.com/software/bamboo/download-archives]\r\n # Keep going to provide a Zip Archive but then\r\n ** change it's content to 64-bit binaries as 64-bit Windows Server versions should he much more common than 32-bit Windows,\r\n ** clearly document that it contains 32-bit or 64-bit binaries e.g. in [Installing Bamboo on Windows|https://confluence.atlassian.com/bamboo/installing-bamboo-on-windows-289276813.html] and preferably already make that clear on the aforementioned link\r\n # Start delivering a 32-bit and a 64-bit Zip Archive for each new Bamboo release. By that it would be similar to the Windows Installers existing as a 32-bit and a 64-bit variant.\r\n\r\nh3. Workaround\r\n\r\nUse either the 32-bit or the 64-bit Windows Installer for any fresh Bamboo installation or for a Bamboo upgrade on Windows depending on the Windows version Bamboo shall ruh on.",
      "summary": "Bamboo installation for a 64-bit Windows using Zip Archive causes various problems"
    }
  },
  {
    "key": "BAM-21006",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-07-13T12:31:25.000+0000",
      "description": "h3. Issue Summary\r\nIf a test name has a dot in its name (\".\" character), Bamboo won't parse test results properly\r\n\r\nh3. Steps to Reproduce\r\n# Create a plan that produces test results, with tests in it (for example, maven + JUnit). \r\n# Make sure at least one test name has a dot in it.\r\n\r\nh3. Expected Results\r\nBamboo parses results normally.\r\n\r\nh3. Actual Results\r\n\r\nBamboo will split tests with every dot that finds in the name, making tests results inconsistent with what is reported in the build log. \r\n\r\nh3. Workaround\r\n\r\nAvoid using dots in test names. ",
      "summary": "If a test name has a dot in its name (\".\" character), Bamboo won't parse test results properly"
    }
  },
  {
    "key": "BAM-21005",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-07-09T16:42:56.000+0000",
      "description": "h3. Issue Summary\r\n\r\nCannot update a subnet id that is longer than VARCHAR 256 in the elastic image configuration page.\r\nh3. Steps to Reproduce\r\n # Go\u00a0to\u00a0*Bamboo administration -> Image configurations*\r\n # Choose multiple options under\u00a0*Virtual Private Cloud Subnet*\u00a0and make sure the text box characters are over 256.**\r\n # Hit Save\r\n\r\nh3. Expected Results\r\n\r\nChoose multiple subnet IDs and save successfully.\r\nh3. Actual Results\r\n\r\nThe below exception is thrown in the server log file:\r\n{noformat}\r\norg.springframework.dao.DataIntegrityViolationException: could not execute batch; SQL \\[update ELASTIC_IMAGE set NAME=\\?, DESCRIPTION=\\?, AMI_IMAGE_ID=\\?, EBS_SNAPSHOT_ID=\\?, INSTANCE_TYPE=\\?, PER_SECOND_BILLING=\\?, AVAILABILITY_ZONE=\\?, SHIPPED_WITH_BAMBOO=\\?, IMAGE_DISABLED=\\?, LEGACY_EBS_HANDLING=\\?, PRODUCT=\\?, REGION=\\?, ROOT_DEVICE_TYPE=\\?, ARCHITECTURE=\\?, PLATFORM=\\?, SUBNET_ID=\\?, IMAGE_FILES_VERSION=\\?, OS_NAME=\\?, VIRTUALISATION_TYPE=\\?, ROOT_FS_SIZE_OVERRIDE=\\?, CAPABILITY_SET=\\? where ELASTIC_IMAGE_ID=\\?]; nested exception is org.hibernate.exception.DataException: could not execute batch\r\n\tat org.springframework.orm.hibernate5.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:251\\)\r\n\tat org.springframework.orm.hibernate5.HibernateTransactionManager.convertHibernateAccessException(HibernateTransactionManager.java:801\\)\r\n\tat org.springframework.orm.hibernate5.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:637\\)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:746\\)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:714\\)\r\n\tat sun.reflect.GeneratedMethodAccessor223.invoke(Unknown Source\\)\r\n...\r\n...\r\nCaused by: org.hibernate.exception.DataException: could not execute batch\r\n\tat org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:118\\)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42\\){noformat}\r\nh3. Workaround\r\n\r\nWorkaround will be updated here once we\u00a0have one.",
      "summary": "Choosing multiple subnet ID throws an exception"
    }
  },
  {
    "key": "BAM-21004",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-07-09T14:04:32.000+0000",
      "description": "h3. Problem Definition\r\n\r\nCurrently, there is no API endpoint that allows the creation of a Bamboo build plan. The endpoint to\r\n{quote}list all plans on Bamboo service that user is allowed to see (READ permission).\r\n{quote}\r\nis\r\n{code:java}\r\n/plan\r\n{code}\r\nusing the GET method. So querying existing plans is possible via REST.\r\nh3. Suggested Solution\r\n\r\nImplement a REST solution to create a Bamboo build plan. The above plan query endpoint could be used for that, with method POST and e.g. parameters for plan name and plan key.\r\n\r\nAlternatively the below existing internal endpoint could be used.\r\n{code:java}\r\n/rest/api/latest/build/admin/create/createPlan.action\r\n{code}\r\nh3. Workaround\r\n\r\nBamboo Specs may be applied which then needs to be published with Maven.",
      "summary": "Allow build plan creation per REST API"
    }
  },
  {
    "key": "BAM-21003",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-07-09T09:03:45.000+0000",
      "description": "h3. Issue Summary\r\nReport Date Filter Range is shifted in different timezone\r\n\r\nh3. Steps to Reproduce\r\n# Start Bamboo with timezone GMT+8\r\n# Run a build on 23 Jun 2020, 4:02:21 PM GMT+8\r\n# Access Bamboo Reports function, for example http://localhost:8085/reports/viewReport.action\r\n# Select \"Build Activity\" Report and Date filter \"Select range\"\r\n# Use From \"24/06/2020\" and To \"25/06/2020\" to generate report\r\n# Use From \"20/06/2020\" and To \"24/06/2020\" to generate report\r\n\r\nh3. Expected Results\r\n* Step 5 *will not* have the build result in Step 2\r\n* Step 6 *will have* the build result in Step 2\r\n\r\nh3. Actual Results\r\n* Step 5 *have* the build result in Step 2\r\n* Step 6 *does not* have the build result in Step 2\r\n\r\nh3. Workaround\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Report Date Filter Range affected by timezone"
    }
  },
  {
    "key": "BAM-21002",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-07-10T11:27:59.000+0000",
      "created": "2020-07-08T07:06:17.000+0000",
      "description": "h3. Issue Summary\r\n\r\nBroken link here\u00a0[https://docs.atlassian.com/bamboo-specs-docs/7.0.4/specs.html?yaml#overriding-branch-setting-using-specs]\u00a0for documentation and a typo \"See see Working with specs for branches for more details.\"\r\nh3. Steps to Reproduce\r\n\r\nOpen link and click link\u00a0\"Working with specs for branches\"\r\nh3. Expected Results\r\n\r\nLink\u00a0 \"Working with specs for branches\" points to existing page.\r\nh3. Actual Results\r\n\r\nIt's not.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Broken Bamboo Specs documentation link"
    }
  },
  {
    "key": "BAM-21001",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-09-03T07:13:12.000+0000",
      "created": "2020-07-07T17:59:04.000+0000",
      "description": "h3. Issue Summary\r\n\r\nWhen audit logging silently fails and stops running, there is an \"AuditLogSaveThread\" logged out to the Bamboo Server log as denotehd in bug ticket BAM-18855 \u2013 Improve audit log handling code but nothing else explicitly indicates this error.\r\nh3. Expected or Wished Behavior\r\n\r\nThe fact that audit log is no more running in Bamboo should show up in Bamboo's healty check. By that, a Bamboo user with Admin permissions can see that, clearly written out, and already start planning for, worst case, a required restart of Bamboo Server.\r\n\r\nIt should also be possible that Bamboo adds a monitoring thread for the audit log thread and on audit thread getting killed or stuck / unresponsive for a certain amount of time (or e.g. by signal reception on the audit log thread termination not in the context of a Bamboo shutdown) possibly something like an \"AuditLogRecoveryThread\" could be started and automatically restart audit logging and load back the original and saved logs.\r\n\r\nEven after a successful audit log recovery, this incidence should be logged out, e.g. to Bamboo's health check registry.\r\nh3. Workaround\r\n\r\nAs of the bug mentioned above, the only known workaround and thus the only measure to re-activate Bamboo's audit log is a Bamboo Server restart.",
      "summary": "Notification of and recovery for audit log being stopped unexpectedly"
    }
  },
  {
    "key": "BAM-21000",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-09-02T10:23:35.000+0000",
      "created": "2020-07-07T14:52:17.000+0000",
      "description": "h3. Problem Definition\r\n\r\nCurrently, the documentation [YAML reference - variables|https://docs.atlassian.com/bamboo-specs-docs/7.0.4/specs.html?yaml#variables]\u00a0does not provide clear examples of how to use variables in YAML.\r\nh3. Suggested Solution\r\n\r\nImprove the YAML documentation with clear examples of how to use variables in YAML, such as:\r\n{code:java}\r\n---\r\nversion: 2\r\nplan:\r\n  project-key: PROJ\r\n  key: PLAN\r\n  name: My Plan\r\n\r\nvariables:\r\n  password: admin\r\n  username: admin\r\n\r\n#...\r\n#...\r\n{code}",
      "summary": "Improve variables examples in YAML documentation"
    }
  },
  {
    "key": "BAM-20999",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-12-14T15:38:23.000+0000",
      "created": "2020-07-06T06:31:29.000+0000",
      "description": "h2. Problem Definition\r\n\r\nYAML Specs has a gap where build expiry configuration cannot be configured, like it can in Java Specs.\r\n\r\nh2. Suggested Solution\r\nProvide a way to configure build expiry with a YAML Spec.",
      "summary": "Override build expiry configuration for YAML Specs"
    }
  },
  {
    "key": "BAM-20998",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-07-03T19:05:06.000+0000",
      "description": "h3. Issue Summary\r\n\r\nBy checking \"Agent-local artifact handler\" for a build that runs on a remote agent, two instead of one artifacts are created on producer side and the consuming deployment environment fails with error \"Unable to download artifact\".\r\nh3. Steps to Reproduce\r\n # Create a simple plan that basically produces an artifact (could be as simple as a file created and filled with some text per a Bamboo Script task).\r\n # Create the appropriate artifact definition for this plan with \"Required\" set.\r\n # Check \"Agent-local artifact handler\" in the Bamboo UI under _Cog >> Overview >> Artifact handlers_, for shared and non-shared.\r\n # Create a consumer which is a deployment environment, there run the Artifact Download task and select that artifact from the producer plan to copy it in.\r\n # The deployment environemnt has trigger \"After successful build\" set.\r\n # Either delegate the build to run on a remote agent or set the remote agent's Capabilities and this plan's Requirements to match and thus dynamically force the build to run on the agent.\r\n # Finally run the build plan, either manually or per e.g. commit trigger in case the build plan contains a Source Code Download task.\r\n\r\nh3. Expected Results\r\n * The build plan creates one single artifact.\r\n * The deployment environment is able to successfully download the artifact being produced by the build plan.\r\n\r\nh3. Actual Results\r\n * The *build plan creates two artifacts*, even if its build working directory is cleaned prior to a new build, of which only the second one is accessible and can be opened. Both artifacts\u00a0 have the same and a valid file size and seem identical.\r\n * The *deployment environment* with which the artifact is shared *fails* with the log containing the following error message.\r\n\r\n{noformat}\r\n30-Jun-2020 17:31:56\tUnable to download artifact Non required shared artifact: [TEST], pattern: [test.txt]\r\n...\r\n30-Jun-2020 17:31:56\tFinished task 'Download artifact from related build!' with result: Error\r\n30-Jun-2020 17:31:56\tFinalising the build...\r\n{noformat}\r\n\r\nh3. Workaround\r\n\r\nAs long as that plan is running on Bamboo Server or a local agent, everything behaves as expected. So basically two options allow overcoming that error:\r\n # Run this build with the configuration from above on Bamboo Server or on a local agent.\r\n # Stay with the build on a remote agent, but uncheck \"Agent-local artifact handler\", so basically change the Artifact handler setting back to default.",
      "summary": "Use of \"Agent-local artifact handler\" for a remote agent build creates error on producer and on consumer side"
    }
  },
  {
    "key": "BAM-20997",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-07-02T19:14:11.000+0000",
      "description": "h3. Issue Summary\r\n\r\nWhen user want to configure Deployment\u00a0 with release from plan branch by Bamboo Specs they have to provide plan branch key, e.g. TESTX where X is some number\r\n\r\n{code}\r\n\r\nnew Deployment(new PlanIdentifier(\"PROJ\", \"TEST17\"), \"My deployment\")\r\n\r\n{code}\r\n\r\n\u00a0\r\n\r\nThis key can be found only by browser URL when navigate plan branch details.\r\n\r\nIt would be more convenient if Java/YAML specs allow to provide master plan key and plan branch name to make it user friendly, something like\r\n\r\n{code}\r\n\r\nnew Deployment(new PlanBranchIdentifier(\"PROJ\", \"TEST\", \"my-plan-branch\"), \"My deployment\")\r\n\r\n{code}",
      "summary": "Allow to provide plan branch name for deployment project at Bamboo Specs"
    }
  },
  {
    "key": "BAM-20996",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-07-24T10:22:55.000+0000",
      "created": "2020-07-01T20:39:03.000+0000",
      "description": "h3. Issue Summary\r\n\r\nIf Bamboo configured as systemctl service then validation task\u00a0FileNameEncodingIsReasonable fails with misleading message\r\nh3. Steps to Reproduce\r\n # Configure Bamboo service for systemctl\r\n # Start Bamboo\r\n\r\nh3. Expected Results\r\n\r\nTask\u00a051210 : Verify file name encoding (bootstrap) passes\r\nh3. Actual Results\r\n\r\nThe below log message:\r\n{noformat}\r\n2020-06-30 06:24:57,773 INFO [localhost-startStop-1] [BootstrapUpgradeManagerImpl] 51210 : Verify file name encoding (bootstrap)\r\n2020-06-30 06:24:57,773 INFO [localhost-startStop-1] [BootstrapUpgradeManagerImpl] ---------------------------------------------\r\n2020-06-30 06:24:57,776 WARN [localhost-startStop-1] [FileNameEncodingIsReasonable] Encoding [Cp1252] used to encode file names is not capable of handling extended character sets. You may encounter failures during artifact transfers.\r\n\r\n{noformat}\r\nh3. Workaround\r\n# Make sure that Bamboo is configured with UTF-8 encoding by configuring the following JVM options:\r\n{noformat}\r\n-Dsun.jnu.encoding=UTF-8\r\n-Dfile.encoding=UTF-8\r\n{noformat}\r\n[Configuring your system properties|https://confluence.atlassian.com/bamboo/configuring-your-system-properties-289277345.html]\r\n# Disable validation task by commenting the following line in the file {{<bamboo-install>/atlassian-bamboo/WEB-INF/classes/upgrade.xml}}:\r\n{noformat}\r\n    <!--<upgrade build=\"51210\" build-min=\"0\" build-max=\"999999\"\r\n             class=\"com.atlassian.bamboo.upgrade.tasks.validation.FileNameEncodingIsReasonable\"/>-->\r\n\r\n{noformat}",
      "summary": "File name encoding validation task works incorrectly when Bamboo started by systemctl"
    }
  },
  {
    "key": "BAM-20995",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-07-24T10:22:56.000+0000",
      "created": "2020-06-29T11:38:44.000+0000",
      "description": "h3. Issue Summary\r\n\r\nBranch plan create through a pull request is not disabled when the PR is deleted. \r\n\r\nh3. Steps to Reproduce\r\n# Create a plan, with the branch configuration set to \"When pull request is created\"\r\n# Create a repository in Bitbucket server. Link this repository to the plan. \r\n# In Bitbucket, create a branch and then a PR. A plan branch will be created in Bamboo.\r\n# In Bitbucket, delete the PR.\r\n\r\nh3. Expected Results\r\nJust like when a branch is deleted, we expect the plan branch to be disabled immediately. \r\n\r\nh3. Actual Results\r\n\r\nThe plan branch remains enabled. \r\n\r\nh3. Workaround\r\n\r\nThe plan branch needs to be disabled or deleted manually.",
      "summary": "Branch plan created through a pull request is not disabled when the PR is deleted"
    }
  },
  {
    "key": "BAM-20994",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-06-29T11:22:53.000+0000",
      "description": "h3. Description\r\n\r\nSome CI tools such as Travis CI use environment variables like CI=1 to control the non-interactive execution of their build process. At the moment this cannot be controlled from within Bamboo in the case where Bamboo calls Travis CI or another tool that uses the same variable.\r\nh3. Proposed solution\r\n\r\nAdd a configuration switch to export the CI=1 environment variable for the build agent (remote or elastic).\r\nh3. Workaround\r\n\r\nDefine the variable CI=1 as a global environment variable at the OS level on the machine that runs the Bamboo agent, for example in /etc/environment.",
      "summary": "Add the ability to set CI=1 to the build agent environment"
    }
  },
  {
    "key": "BAM-20993",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-10-08T07:57:25.000+0000",
      "created": "2020-06-29T08:51:45.000+0000",
      "description": "h3. Issue Summary\r\n\r\nOn user rename Bamboo updates old build result trigger reason to reflect new user name for manually triggered builds. It may cause build starting slow down.\r\nh3. Steps to Reproduce\r\n # Connect Bamboo to LDAP repo\r\n # Initiate bulk update of users at LDAP side\r\n # Synchronize users\r\n # See user synchronization started\r\n\r\nh3. Expected Results\r\n\r\nBuilds can be normally build\r\nh3. Actual Results\r\n\r\nBuilds don't start as some DB tables are locked\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behaviour. A workaround will be added here when available\r\nh3. Solution\r\n\r\nSee [comment|https://jira.atlassian.com/browse/BAM-20993?focusedCommentId=2888795&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-2888795] to learn more about solution and difference between 8.1.0 and 8.0.3",
      "summary": "Bamboo slows down extremely when a lot of users renamed at the same time"
    }
  },
  {
    "key": "BAM-20992",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-06-25T23:47:40.000+0000",
      "description": "Bamboo can be configured to spin up Elastic agents as needed. Unfortunately, when a user submits a new job and there is no *current* Elastic agent available the user receives a message saying that there are no agents available and the job will be queued.\r\n\r\n\"Build Job has been queued, but there's no agent capable of building it.\"\r\n\r\nElastic agents are capable but they're not online to build it, but we get this wrong message all the time and people complain or panic about their jobs. Whilst the message *is* correct it causes user stress.\r\n\r\nThis feature request is to use a different message if Elastic agents are configured that indicates that we are \"waiting for an Elastic agent\".\r\n\r\n",
      "summary": "Message indicates no agents can run job before Elastic agents start misleading."
    }
  },
  {
    "key": "BAM-20991",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-06-25T14:57:14.000+0000",
      "description": "When you select a quick link, there's no way to share or bookmark the link. So next time you need A. To open the page, B. send it to somebody, you need to remember the correct\u00a0 quick filter and select.",
      "summary": "Make Quick filters URL shareable"
    }
  },
  {
    "key": "BAM-20990",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-12-14T15:38:24.000+0000",
      "created": "2020-06-25T14:16:24.000+0000",
      "description": "h3. Current situation\r\n\r\nAs of today, YAML Specs is not compatible with code coverage.\r\n\r\nh3. Accepted solution\r\n\r\nDevelop the option to provide code coverage in YAML Specs. ",
      "summary": "Add code coverage functionality in YAML Specs"
    }
  },
  {
    "key": "BAM-20989",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-09-07T11:57:19.000+0000",
      "created": "2020-06-23T15:01:04.000+0000",
      "description": "h3. Issue Summary\r\n\r\nSince we updated the wrapper for remote agents on 6.10, the remote agents have to be re-installed when upgrading as the upgrade is not picked up automatically due to the wrapper update.\r\n\r\nThis information is not reflected on our docs:\r\n* https://confluence.atlassian.com/bamboo/bamboo-upgrade-guide-720411366.html\r\n* https://confluence.atlassian.com/bamboo/bamboo-remote-agent-installation-guide-289276832.html\r\n\r\nh3. Steps to Reproduce\r\n # Upgrade from 6.9.x or less to 6.10.x or more\r\n\r\nh3. Expected Results\r\nRemote agents are upgraded automatically\r\n\r\nh3. Actual Results\r\n\r\nThis is not the case due to the wrapper update. However, our docs still state that this is the case.\r\n\r\nh3. Workaround\r\n\r\nNo workaround",
      "summary": "Update documentation to state that agents do not get automatically upgraded when going from 6.9.x or less to 6.10.x or more"
    }
  },
  {
    "key": "BAM-20988",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-09-24T07:17:17.000+0000",
      "created": "2020-06-23T06:28:32.000+0000",
      "description": "h3. Issue Summary\r\nInvalid username error will be presented when attempting to save a Bitbucket Cloud repository (or testing connection) when no workspace exists that matches the username.\r\n\r\nh3. Steps to Reproduce\r\n# Change your Bitbucket Cloud workspace that matches your username to a different ID:\r\n#* [Change a workspace id|https://confluence.atlassian.com/bitbucket/change-a-workspace-id-966686598.html]\r\n# Attempt to create a Bitbucket Cloud Repository in Bamboo\r\n# Fill all fields and hit Save\r\n\r\nh3. Expected Results\r\nRepository is saved successfully.\r\n\r\nh3. Actual Results\r\nInvalid username is presented\r\n\r\nThe below warnings are shown in the {{$BAMBOO_HOME/logs/atlassian-bamboo.log}} file where _foobar_ is the username used:\r\n{noformat}\r\n2020-06-23 03:24:34,743 WARN [http-nio-8085-exec-14] [RESTCall] Response from GET https://api.bitbucket.org/2.0/workspaces/foobar/ (404)\r\n2020-06-23 03:24:35,282 WARN [http-nio-8085-exec-14] [RESTCall] Response from GET https://api.bitbucket.org/2.0/users/foobar/ (404)\r\n2020-06-23 03:24:35,819 WARN [http-nio-8085-exec-14] [RESTCall] Response from GET https://api.bitbucket.org/2.0/teams/foobar/ (404)\r\n{noformat}\r\n\r\nh3. Notes\r\nThe list of repositories still loads successfully, the problem only occurs when attempting to save.\r\n\r\nh3. Workaround\r\nCreate a workspace (or rename an existing one) in Bitbucket Cloud to one that matches your Bitbucket username:\r\n* [Change a workspace id|https://confluence.atlassian.com/bitbucket/change-a-workspace-id-966686598.html]\r\n\r\n",
      "summary": "Invalid username when attempting to save a Bitbucket Cloud repository when no workspace exists that matches username"
    }
  },
  {
    "key": "BAM-20987",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-07-24T10:26:14.000+0000",
      "created": "2020-06-22T20:49:02.000+0000",
      "description": "h3. Problem Definition\r\n\r\nThere is no option in YAML Specs to override the default number of concurrent builds.\r\n However, it is possible to do this from the Bamboo UI by choosing \"Override default number of concurrent builds\" option under *Plan configuration -> Other* tab.\r\nh3. Suggested Solution\r\n\r\nAdd a Specs option to override the default number of concurrent builds (similar to the option we set in the Bamboo UI).\u00a0\r\nh3. Workaround\r\n\r\nThe only way to\u00a0override the default number of concurrent builds is by using Java Specs:\r\n{code:java}\r\nimport com.atlassian.bamboo.specs.api.builders.plan.configuration.ConcurrentBuilds;\r\n\r\n    public Plan plan() {\r\n        final Plan plan = new Plan(new Project()\r\n                .key(new BambooKey(\"PROJ\"))\r\n                .name(\"PROJ\"),\r\n            new BambooKey(\"PLAN\"))\r\n            .pluginConfigurations(new ConcurrentBuilds()\r\n                    .useSystemWideDefault(false)\r\n                    .maximumNumberOfConcurrentBuilds(3))\r\n        return plan;\r\n    }\r\n{code}",
      "summary": "Option to override default number of concurrent builds in YAML"
    }
  },
  {
    "key": "BAM-20986",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-07-24T10:22:54.000+0000",
      "created": "2020-06-22T20:00:30.000+0000",
      "description": "h3. Issue Summary\r\n\r\nWhen user don't have permission to environment at queue then queue view is truncated.\r\nh3. Steps to Reproduce\r\n # Create 2 deployment environments\r\n # Grant Env 1 view permissions for user Joe\r\n # Don't grant Env 2 view permissions for user Joe\r\n # Disable all agents\r\n # Start deployment to Env 2\r\n # Start deployment to Env 1\r\n # Login as user Joe and open queue /currentActivity.action\r\n\r\nh3. Expected Results\r\n\r\nSee 2 items in queued list. Env 2 is not named. Env 1 is named\r\nh3. Actual Results\r\n\r\nOnly element in queue list says you don't have permissions to view deployment. Env 1 is not present in list\r\n\r\nException in logs\r\n{code}\r\n2020-06-19 13:01:42,770 ERROR [http-nio-8085-exec-144] [JsonStreamResult] java.lang.NullPointerException: Entry removal semantics not supported (on environmentName). \r\nat com.google.common.base.Preconditions.checkNotNull(Preconditions.java:226) \r\nat com.atlassian.bamboo.struts.JsonStream.put(JsonStream.java:77) \r\nat com.atlassian.bamboo.ww2.actions.build.AbstractBuildJsonDecorator.getBaseJson(AbstractBuildJsonDecorator.java:135) \r\nat com.atlassian.bamboo.ww2.actions.build.CurrentlyDeployingJsonDecorator.getJson(CurrentlyDeployingJsonDecorator.java:72) \r\nat com.atlassian.bamboo.ww2.actions.build.BuildJsonProviderAction.streamBuildsInProgress(BuildJsonProviderAction.java:214) \r\nat com.atlassian.bamboo.ww2.actions.build.BuildJsonProviderAction.streamJson(BuildJsonProviderAction.java:150) \r\nat com.atlassian.bamboo.ww2.actions.build.DashboardSummaryAction.streamJson(DashboardSummaryAction.java:12) \r\nat com.atlassian.bamboo.struts.JsonStreamResult.execute(JsonStreamResult.java:35)\r\n{code}\r\n\r\nh3. Workaround\r\n\r\n\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "List of queued items is truncated if user has no access to deployment environment"
    }
  },
  {
    "key": "BAM-20985",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-01-22T15:41:21.000+0000",
      "created": "2020-06-19T14:04:31.000+0000",
      "description": "h3. Issue Summary\r\n\r\nModifying Specs from branch plan and then using Gatekeeper to merge and push into master plan does not trigger Specs build in master plan when there's a merge conflict\r\nh3. Steps to Reproduce\r\n # Use the following YAML Specs to create the plan:\r\n{noformat}\r\n---\r\nversion: 2\r\nplan:\r\n  project-key: SPECS\r\n  key: STASH\r\n  name: bamboo specs yaml\r\n\r\nbranches:\r\n  create: for-new-branch\r\n  integration:\r\n    merge-to: master\r\n    push-on-success: true\r\n\r\nstages:\r\n  - stage 1:\r\n    - Job1\r\n    \r\nJob1:\r\n  tasks:\r\n    - script:\r\n        scripts:\r\n          - echo hello\r\n\r\n...\r\n{noformat}\r\n # Create a branch, commit and push.\r\n # Change specs on this branch to change the stage name and echo part:\r\n{noformat}\r\nstages:\r\n  - stage 2:\r\n    - Job1\r\n    \r\nJob1:\r\n  tasks:\r\n    - script:\r\n        scripts:\r\n          - echo hello2\r\n\r\n...\r\n{noformat}\r\n # Commit, but *don't push.*\r\n # Change specs on master, making a change that will cause merge conflict on gatekeeper for the branch (change the same thing):\r\n{noformat}\r\nJob1:\r\n  tasks:\r\n    - script:\r\n        scripts:\r\n          - echo hello3\r\n\r\n...\r\n{noformat}\r\n # Commit and push.\r\n # Bamboo Specs will detect new commit on master and update configuration on master.\r\n # Now push the branch changes from Step 3.\r\n # Bamboo will detect and update configuration changes on branch.\r\n # Gatekeeper will try to merge, merge conflict, build fails.\r\n # Fix the merge conflicts\u00a0*on the branch* without merging branches, just make sure the changes are enough, for example changing the echo to be same as master branch but change\r\n{noformat}\r\nstages:\r\n  - stage 2:\r\n    - Job1\r\n    \r\nJob1:\r\n  tasks:\r\n    - script:\r\n        scripts:\r\n          - echo hello3\r\n\r\n...\r\n{noformat}\r\n # Commit and push.\r\n # Bamboo Specs will detect commit on branch and update configuration on branch.\r\n # Gatekeeper will merge branch into master.\r\n\r\nh3. Expected Results\r\nAfter branch plan finish running in Step 14 and push to master branch, master branch will perform Specs build\r\n\r\nh3. Actual Results\r\n * Bamboo Specs will detect the new commit on master, but it will use the last commit of the branch to update Specs, it ignores the merge commit from gatekeeper. The consequence is that Bamboo Specs ignore the changes that would update master, leaving the VCS master with a different Bamboo Specs than what is currently applied in the plan.\r\n * From the above Steps to Reproduce, the stage name is not changed in master plan\r\n * The below log message is thrown in the atlassian-bamboo.log file:\r\n{noformat}\r\n2020-06-19 21:48:07,028 INFO [15-BAM::SpecsDetection:pool-22-thread-2] [RssDetectionServiceImpl] Skipping Specs detection. Bamboo Specs have already been executed for a newer revision (current=xxx, previous=yyy) in repository 'stash-master'.\r\n\r\n{noformat}\r\nxxx = commit in Step 11 from branch plan\r\nyyy = commit in Step 5 from master plan\r\n\r\nh3. Workaround\r\n* When merge conflicts happen with Bamboo Specs in the gatekeeper, rerun Specs from the Repository Settings. \r\n* Alternatively, disable Bamboo push-on-success merge and then perform the merge and push manually ",
      "summary": "Gatekeeper merge and push does not trigger Specs build"
    }
  },
  {
    "key": "BAM-20984",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-06-18T05:20:56.000+0000",
      "description": "h3. Issue Summary\r\nDeleting branch plan that overrides variable can break scheduled backup / export. This can break the export or backup until certain actions within the application cause the hibernate cache to become in sync with the real state.\r\n\r\nh3. Steps to Reproduce\r\n# Create a plan with a branch plan\r\n# Add a variable to the main plan\r\n# On the branch plan, override the value of the main variable\r\n# Perform an export or scheduled backup\r\n# Now delete the branch plan that overrides the variable\r\n# Wait for background deletion service to remove it\r\n# Perform export or scheduled backup again\r\n\r\nh3. Expected Results\r\nExport or backup succeds\r\n\r\nh3. Actual Results\r\nExport or backup fails\r\n\r\nThe below exception is thrown in the {{$BAMBOO_HOME/logs/atlassian-bamboo.log}} file:\r\n{noformat}\r\n2020-06-18 15:12:52,006 INFO [http-nio-8085-exec-15] [XmlMigrator] Exporting with: com.atlassian.bamboo.migration.stream.VariableDefinitionMapper\r\n2020-06-18 15:12:52,088 INFO [http-nio-8085-exec-15] [DefaultLoadEventListener] HHH000327: Error performing load command : org.hibernate.ObjectNotFoundException: No row with the given identifier exists: [com.atlassian.bamboo.variable.VariableDefinitionImpl#273809420]\r\n2020-06-18 15:12:52,104 INFO [http-nio-8085-exec-15] [XmlMigrator] Updating destination zip /var/bamboo-home/main/exports/export-10.zip\r\n2020-06-18 15:12:52,105 INFO [http-nio-8085-exec-15] [XmlMigrator] Unmounted /var/bamboo-home/main/exports/export-10.zip\r\n2020-06-18 15:12:52,463 INFO [http-nio-8085-exec-15] [ServerLifecycleManagerImpl] Server state changed to 'RUNNING' from 'PAUSED' by 'bamboo'\r\n2020-06-18 15:12:52,463 ERROR [http-nio-8085-exec-15] [Export] org.springframework.orm.hibernate5.HibernateObjectRetrievalFailureException: No row with the given identifier exists: [com.atlassian.bamboo.variable.VariableDefinitionImpl#273809420]; nested exception is org.hibernate.ObjectNotFoundException: No row with the given identifier exists: [com.atlassian.bamboo.variable.VariableDefinitionImpl#273809420]\r\norg.springframework.orm.hibernate5.HibernateObjectRetrievalFailureException: No row with the given identifier exists: [com.atlassian.bamboo.variable.VariableDefinitionImpl#273809420]; nested exception is org.hibernate.ObjectNotFoundException: No row with the given identifier exists: [com.atlassian.bamboo.variable.VariableDefinitionImpl#273809420]\r\n\tat org.springframework.orm.hibernate5.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:280)\r\n\tat org.springframework.orm.hibernate5.HibernateTemplate.doExecute(HibernateTemplate.java:387)\r\n\tat org.springframework.orm.hibernate5.HibernateTemplate.execute(HibernateTemplate.java:336)\r\n\tat com.atlassian.bamboo.persistence3.BambooHibernateObjectDao.findAll(BambooHibernateObjectDao.java:56)\r\n\tat com.atlassian.bamboo.variable.VariableDefinitionHibernateDao.findAll(VariableDefinitionHibernateDao.java:162)\r\n...\r\n\tat com.atlassian.bamboo.migration.stream.VariableDefinitionMapper.exportData(VariableDefinitionMapper.java:115)\r\n\tat com.atlassian.bamboo.migration.XmlMigrator.exportToStream(XmlMigrator.java:507)\r\n\tat com.atlassian.bamboo.migration.XmlMigrator.exportXml(XmlMigrator.java:456)\r\n\tat com.atlassian.bamboo.migration.XmlMigrator$$FastClassBySpringCGLIB$$b6578fc7.invoke(<generated>)\r\n...\r\n\tat com.atlassian.bamboo.migration.XmlMigrator$$EnhancerBySpringCGLIB$$e6b55684.exportXml(<generated>)\r\n\tat com.atlassian.bamboo.migration.ImportExportManagerImpl.bambooExport(ImportExportManagerImpl.java:86)\r\n\tat com.atlassian.bamboo.ww2.actions.admin.migration.Export.execute(Export.java:84)\r\n...\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\nCaused by: org.hibernate.ObjectNotFoundException: No row with the given identifier exists: [com.atlassian.bamboo.variable.VariableDefinitionImpl#273809420]\r\n\tat org.hibernate.boot.internal.StandardEntityNotFoundDelegate.handleEntityNotFound(StandardEntityNotFoundDelegate.java:28)\r\n\tat org.hibernate.event.internal.DefaultLoadEventListener.load(DefaultLoadEventListener.java:230)\r\n\tat org.hibernate.event.internal.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:265)\r\n\tat org.hibernate.event.internal.DefaultLoadEventListener.doOnLoad(DefaultLoadEventListener.java:124)\r\n\tat org.hibernate.event.internal.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:92)\r\n\tat org.hibernate.internal.SessionImpl.fireLoad(SessionImpl.java:1257)\r\n\tat org.hibernate.internal.SessionImpl.internalLoad(SessionImpl.java:1140)\r\n\tat org.hibernate.type.EntityType.resolveIdentifier(EntityType.java:682)\r\n\tat org.hibernate.type.EntityType.resolveIdentifier(EntityType.java:698)\r\n\tat org.hibernate.type.ManyToOneType.assemble(ManyToOneType.java:300)\r\n\tat org.hibernate.cache.internal.QueryResultsCacheImpl.assembleCachedResult(QueryResultsCacheImpl.java:210)\r\n\tat org.hibernate.cache.internal.QueryResultsCacheImpl.get(QueryResultsCacheImpl.java:184)\r\n\tat org.hibernate.cache.internal.QueryResultsCacheImpl.get(QueryResultsCacheImpl.java:136)\r\n\tat org.hibernate.loader.Loader.getResultFromQueryCache(Loader.java:2618)\r\n\tat org.hibernate.loader.Loader.listUsingQueryCache(Loader.java:2526)\r\n\tat org.hibernate.loader.Loader.list(Loader.java:2498)\r\n\tat org.hibernate.loader.criteria.CriteriaLoader.list(CriteriaLoader.java:109)\r\n\tat org.hibernate.internal.SessionImpl.list(SessionImpl.java:1959)\r\n\tat org.hibernate.internal.CriteriaImpl.list(CriteriaImpl.java:370)\r\n\tat com.atlassian.bamboo.persistence3.BambooHibernateObjectDao$1.doInHibernate(BambooHibernateObjectDao.java:63)\r\n\tat com.atlassian.bamboo.persistence3.BambooHibernateObjectDao$1.doInHibernate(BambooHibernateObjectDao.java:56)\r\n\tat org.springframework.orm.hibernate5.HibernateTemplate.doExecute(HibernateTemplate.java:384)\r\n\t... 314 more\r\n{noformat}\r\n\r\nh3. Workaround\r\nCreate a new global variable at *Bamboo Administration >> Overview >> Global variables* (or update the value of an existing one). This will cause the cache to be in sync again and exports/backup will work again until the bug is encountered again.\r\n\r\nAlternatively, switch to native database (e.g. pg_dump and mysqldump) and filesystem backups until the bug is resolved.",
      "summary": "Deleting branch plan that overrides global variable can break export / backup"
    }
  },
  {
    "key": "BAM-20983",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-01-22T15:41:22.000+0000",
      "created": "2020-06-17T07:39:24.000+0000",
      "description": "h3. Issue Summary\r\n\r\nUpgrading Bamboo to 7 causes any changes to directories to be reset to default values within a Docker task. The fields affected are:\r\n * Container working directory\r\n * Host directory\r\n * Container data volume\r\n\r\nh3. Steps to Reproduce\r\n # Start a Bamboo 6.8.3 instance\r\n # Configure a build and deployment plan with a Docker task, change the type to a Docker run task\r\n # Change the default values for:\r\n ** Container working directory\r\n ** Host directory\r\n ** Container data volume\r\n # Upgrade to Bamboo 7.0.4\r\n\r\nh3. Expected Results\r\n\r\nExisting configurations for are preserved\r\nh3. Actual Results\r\n\r\nConfigurations are reset to default:\r\n * Container working directory: /data\r\n * Host directory: ${bamboo.working.directory}\r\n * Container data volume: /data\r\n\r\nThe below is logged in {{$BAMBOO_HOME/atlassian-bamboo.log}} when upgrading:\r\n{noformat}\r\n2020-06-17 07:25:49,348 INFO [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-2] [PluginUpgrader] Upgrading plugin com.atlassian.bamboo.plugins.bamboo-docker-plugin\r\n2020-06-17 07:25:49,349 INFO [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-2] [ConfigurableVolumesAndWorkDirUpgradeTask] Starting upgrade task to set default volume and work dir configuration in existing docker tasks.\r\n2020-06-17 07:25:49,676 INFO [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-2] [ConfigurableVolumesAndWorkDirUpgradeTask] Upgraded 1 docker tasks in 1 jobs.\r\n2020-06-17 07:25:49,812 INFO [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-2] [ConfigurableVolumesAndWorkDirUpgradeTask] Upgraded 1 docker tasks in 1 environments.\r\n2020-06-17 07:25:49,813 INFO [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-2] [ConfigurableVolumesAndWorkDirUpgradeTask] Finished upgrade task to set default volume and work dir configuration in existing docker tasks.\r\n2020-06-17 07:25:49,829 INFO [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-2] [PluginUpgrader] Upgraded plugin com.atlassian.bamboo.plugins.bamboo-docker-plugin to version 1 - Set default volume and work dir configuration in existing docker tasks.\r\n2020-06-17 07:25:49,831 INFO [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-2] [EncryptSecureFieldsUpgradeTask] Encrypt password fields for Docker tasks\r\n2020-06-17 07:25:49,924 INFO [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-2] [EncryptSecureFieldsUpgradeTask] Encrypted password fields for Docker task in build plans. Updated 0 tasks.\r\n2020-06-17 07:25:49,984 INFO [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-2] [EncryptSecureFieldsUpgradeTask] Encrypted password fields for Docker task in deployment environments. Updated 0 tasks.\r\n2020-06-17 07:25:49,986 INFO [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-2] [PluginUpgrader] Upgraded plugin com.atlassian.bamboo.plugins.bamboo-docker-plugin to version 2 - Encrypt passwords for Docker tasks\r\n2020-06-17 07:25:49,988 INFO [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-2] [PluginUpgrader] Plugin com.atlassian.bamboo.plugins.bamboo-docker-plugin  upgrade completed. Current version is: 2\r\n{noformat}\r\nh3. Workaround (use when upgrading to unpatched 7.x)\r\n\r\nPrior to upgrade, log in to the database and perform the following INSERT:\r\n{code:java}\r\nINSERT INTO BANDANA(bandana_id, build_id, chain_id, bandana_key, serialized_data) VALUES(<unique_id>, 0, 0, 'com.atlassian.bamboo.plugins.bamboo-docker-plugin:build', '<string>1</string>')\r\n{code}",
      "summary": "Upgrading Bamboo to 7 causes any changes to directories to be reset to default values within a Docker task"
    }
  },
  {
    "key": "BAM-20982",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-06-15T23:46:46.000+0000",
      "description": "h3. Problem Definition\r\nCurrently variables must be entered manually when running custom builds\r\nh3. Suggested Solution\r\nDisplay option to copy default variables / used in the previous ran build plan\r\n\r\n{quote}You could make the dropdown like so ...\r\n\r\nRun plan\r\n\r\nRun custom plan starting with default values ...\r\n\r\nRun custom plan starting with last build values ...{quote}\r\n\r\nh4. Why this is important \r\nAllow for internal requirement to be fulfilled easily",
      "summary": "Allow option to copy variables from last custom build run"
    }
  },
  {
    "key": "BAM-20981",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-06-15T23:45:58.000+0000",
      "description": "h3. Problem Definition\r\nAdd option to only allow builds as custom run\r\nh3. Suggested Solution\r\nDisable the option to run builds / only allow custom run\r\n(In plan details, under disable/enable plan, add force custom only)\r\nh4. Why this is important \r\nAllow for internal requirement to be fulfilled easily",
      "summary": "Allow option to force custom run plans only"
    }
  },
  {
    "key": "BAM-20980",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-04-06T15:03:05.000+0000",
      "created": "2020-06-15T18:05:28.000+0000",
      "description": "h3. Issue Summary\r\n\r\nCurrently all Bamboo users manually write their Bamboo YAML Specs so to specify a Bamboo build plan or deployment. Just on Bamboo Specs scan after commit and push to a Git repository, a syntax error is found and the plan is not set up / adapted until the error is corrected in the YAML Specs file.\r\nh3. Expected in Bamboo\r\n\r\nIt would be great to have a *YAML Schema Validation for Bamboo* that looks somewhat like so: [Demo \u2013 YAML support for VS Code with built-in kubernetes syntax support|https://raw.githubusercontent.com/redhat-developer/vscode-yaml/master/images/demo.gif].\r\n\r\nFind more information on \"_YAML support for VS Code with built-in kubernetes syntax support_\" below.\r\n * [GitHub - YAML support for VS Code|https://github.com/redhat-developer/vscode-yaml]\r\n * [JSON Schema Everywhere \u2013 Schema Validation for YAML|https://json-schema-everywhere.github.io/yaml]\r\n\r\nh3. Actual in Bamboo\r\n\r\nBamboo behavior is as sketched above. What exists is the following free add-on for Bitbucket Server: [yaml-validator-hook|https://marketplace.atlassian.com/apps/1213552/yaml-validator-hook?hosting=server&tab=overview]. It is parsing Bamboo's YAML Specs on Git commit and printing out an error found to console.",
      "summary": "YAML Schema Validation for Bamboo"
    }
  },
  {
    "key": "BAM-20978",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-06-12T13:54:19.000+0000",
      "description": "h3. Problem Definition\r\nIf there are connections issues with a Bamboo repository in a plan created from specs, it will still show the message to resave the repository even though changes in the UI cannot be made in a plan created from specs.\r\n\r\n !Screen Shot 2020-06-12 at 10.49.22.png|thumbnail! \r\n\r\nh3. Suggested Solution\r\nChange the message if the plan was created using specs.",
      "summary": "Message to resave repository appears in a Bamboo specs plan"
    }
  },
  {
    "key": "BAM-20977",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-07-24T10:22:54.000+0000",
      "created": "2020-06-12T13:51:18.000+0000",
      "description": "h3. Issue Summary\r\n\r\nWithout changing anything on the Java Specs, but just in the source, new plan branches are created on each pull request (PR) and the build is correctly triggered.\r\n\r\n(!) However, on a syntactically correct change and commit of the Bamboo Specs defining this plan, a subsequent repository scan fails.\r\n\r\n+Bamboo+: 6.7.2 and 6.10.4\r\n \r\n+Bitbucket Server+ (BBS): 7.3.0 with a separate Source Code repository and a Bamboo Specs repository\r\n\r\nh3. Steps to Reproduce\r\n # Create a _PlanSpec.java_ so that it's spinning up your Bamboo plan, like so:\r\n{code:java}\r\n@BambooSpec\r\npublic class PlanSpec {\r\n    \r\n    public Plan plan() {\r\n        final Plan plan = new Plan(new Project()\r\n                .key(new BambooKey(\"PBPR\"))\r\n                .name(\"PlanBranch-PR\"),\r\n            \"PlanBranch-and-PR-planReop-JavaSpecs-1\",\r\n            new BambooKey(\"JAJA\"))\r\n            .description(\"Use plan repository for source code\")\r\n            .pluginConfigurations(new ConcurrentBuilds()\r\n                    .useSystemWideDefault(false)\r\n                    .maximumNumberOfConcurrentBuilds(3))\r\n            .stages(new Stage(\"Default Stage\")\r\n                    .jobs(new Job(\"Default Job\",\r\n                            new BambooKey(\"JOB1\"))\r\n                            .tasks(new VcsCheckoutTask()\r\n                                    .description(\"Checkout Default Repository\")\r\n                                    .checkoutItems(new CheckoutItem().defaultRepository()),\r\n                                new ScriptTask()\r\n                                    .description(\"Print out content of working directory\")\r\n                                    .inlineBody(\"ls -al ${bamboo.build.working.directory}\"))\r\n                            .finalTasks(new CleanWorkingDirectoryTask()\r\n                                    .description(\"Clean me up!\"))))\r\n            .planRepositories(new BitbucketServerRepository()\r\n                    .name(\"New plan BB C source repo\")\r\n                    .repositoryViewer(new BitbucketServerRepositoryViewer())\r\n                    .server(new ApplicationLink()\r\n                            .name(\"Bitbucket\")\r\n                            .id(\"e428c969-cc66-3e2d-ae7e-30171ed766ab\"))\r\n                    .projectKey(\"TEST\")\r\n                    .repositorySlug(\"c-source\")\r\n                    .sshPublicKey(\"...\")\r\n                    .sshPrivateKey(\"...\")\r\n                    .sshCloneUrl(\"ssh://git@localhost:7999/test/c-source.git\")\r\n                    .verboseLogs(true)\r\n                    .fetchWholeRepository(true)\r\n                    .changeDetection(new VcsChangeDetection()))\r\n            \r\n            .triggers(new BitbucketServerTrigger())\r\n            .planBranchManagement(new PlanBranchManagement()\r\n                    .createForPullRequest()\r\n                    .delete(new BranchCleanup()\r\n                        .whenRemovedFromRepositoryAfterDays(7)\r\n                        .whenInactiveInRepositoryAfterDays(30))\r\n                    .notificationForCommitters()\r\n                    .issueLinkingEnabled(false));\r\n        return plan;\r\n    }\r\n    \r\n    public PlanPermissions planPermission() {\r\n        final PlanPermissions planPermission = new PlanPermissions(new PlanIdentifier(\"PBPR\", \"JAJA\"))\r\n            .permissions(new Permissions()\r\n                    .userPermissions(\"bamboo\", PermissionType.ADMIN, PermissionType.VIEW, PermissionType.CLONE, PermissionType.BUILD, PermissionType.EDIT));\r\n        return planPermission;\r\n    }\r\n{code}\r\n # Use this plan in order to verify that it is working without any change to its Bamboo Specs\r\n ** Create a new branch in your Git Source Code repository (e.g. per \"Edit\" directly in BBS UI), then change any of its files and save it\r\n ** Perform _git add_ and _git commit_ (or from BBS UI \"Commit\") and push the change back to central (automatic in BBS, explicit on command-line)\r\n ** Next create a pull request PR (e.g. pull from this new branch to master)\r\n ** This PR will create a new plan branch in Bamboo and automatically run the build there\r\n (you may vary these 4 steps and repeat them a s often as wished, they will always succeed)\r\n # Next navigate to the Bamboo Java Specs repository in BBS, open file _PlanSpec.java_ from above, perform a simpe change like modification of the plan's description (but could be any) and save this change\r\n # Commit this change in BBS UI or _git add_, _git commit_ and _git push_ from command-line. That triggers the Bamboo Java Specs being scanned.\r\n # This scanning process fails (see error message below). Thus this plan change cannot get applied and Bamboo indicated \"Specs configuratin update\" error in red.\r\n # By that, this plan is automatically disabled. You can select \"Enable plan\" as a select option under the \"Actions\" button and continue performing changes, committing and pushing those to your Source Code repository asdescribed in step 2 and that works as before (though, on base of the unchanged plan configuration only).\r\n\r\nh3. Expected Results\r\n\r\nBamboo Java Specs update works fine, thus Specs scan succeeds and Specs changes are applied.\r\nh3. Actual Results\r\n\r\nNo changes are applied and plan defined by Specs code gets disabled.\r\n\r\nThe below exception is thrown on repository scan:\r\n{noformat}\r\ncom.atlassian.bamboo.specs.api.exceptions.PropertiesValidationException: Plan branch / workflow: You can't change the default repository because automatic branch management for this plan is dependent on pull request  and PR plan branches exist for this build.Update plan's branching configuration or delete existing pull request plans to enable switching the default repository.\r\njava.lang.IllegalArgumentException: com.atlassian.bamboo.specs.api.exceptions.PropertiesValidationException: Plan branch / workflow: You can't change the default repository because automatic branch management for this plan is dependent on pull request  and PR plan branches exist for this build.Update plan's branching configuration or delete existing pull request plans to enable switching the default repository.\r\n\r\n...\r\n\r\ncom.atlassian.bamboo.configuration.external.RepositoryStoredSpecsServiceImpl.importBambooYamlsOfAllTypes(RepositoryStoredSpecsServiceImpl.java:621)\r\n\tat com.atlassian.bamboo.configuration.external.RepositoryStoredSpecsServiceImpl.processSpecs(RepositoryStoredSpecsServiceImpl.java:397)\r\n\tat com.atlassian.bamboo.configuration.external.RepositoryStoredSpecsServiceImpl.runBambooSpecs(RepositoryStoredSpecsServiceImpl.java:279)\r\n\tat com.atlassian.bamboo.configuration.external.RssDetectionServiceImpl.runRssDetection(RssDetectionServiceImpl.java:262)\r\n\tat com.atlassian.bamboo.configuration.external.detection.RssDetectionRunnable.run(RssDetectionRunnable.java:42)\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat com.atlassian.bamboo.utils.BambooRunnables$1.run(BambooRunnables.java:48)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper.runWith(ImpersonationHelper.java:26)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper.runWithSystemAuthority(ImpersonationHelper.java:17)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper$1.run(ImpersonationHelper.java:41)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\nCaused by: com.atlassian.bamboo.specs.api.exceptions.PropertiesValidationException: Plan branch / workflow: You can't change the default repository because automatic branch management for this plan is dependent on pull request  and PR plan branches exist for this build.Update plan's branching configuration or delete existing pull request plans to enable switching the default repository.\r\n{noformat}\r\nh3. Workaround\r\n # Set up a new build plan from scratch using the changed Bamboo Java Specs (per changing the plan name, you may conserve your recent plan and thus not lose previously created plan branches and its results).\r\n # Using Linked repository like so _.linkedRepositories()_ for Source Code repository in\u00a0 Bamboo Java Specs instead of plan repository avoids this issue to happen. Therefore, you may consider consequently using Linked repositories instead.",
      "summary": "Plan branch creation on pull request with use of plan repository in Bamboo Java Spec fails"
    }
  },
  {
    "key": "BAM-20976",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-06-12T01:49:35.000+0000",
      "description": "h2. Problem Definition\r\nBamboo forces the Content-Disposition for anything that isn't text, image, XML to attachment rather than inline. It would be great to have an option to serve PDFs as inline so they can be previewed directly in the browser for PDF based text reports.\r\n\r\nh2. Suggested Solution\r\nProvide an option to allow PDFs to be inlined.",
      "summary": "Allow PDFs to be served with a Content-Disposition of inline so they can be previewed in browser"
    }
  },
  {
    "key": "BAM-20975",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-07-24T10:22:54.000+0000",
      "created": "2020-06-11T05:07:11.000+0000",
      "description": "h3. Issue Summary\r\nQuick filters are not included a Bamboo backup / XML export\r\n\r\nh3. Steps to Reproduce\r\n# Create a quick filter rule at *Bamboo Administration >> Quick filters*\r\n# Toggle it on as a user\r\n# Create a Bamboo XML export at *Bamboo Administration > Export*\r\n# Import it into a new instance\r\n\r\nh3. Expected Results\r\nQuick filters are present\r\n\r\nh3. Actual Results\r\nQuick filters are all absent\r\n\r\nh3. Workaround\r\nUse native database tooling to perform the backup, e.g. pg_dump and mysqldump\r\n\r\nIf performing a migration from the same database types -- you can use the alternative cloning scenario to copy the database and the filesystem rather than using Bamboo export:\r\n* [Cloning a Bamboo instance \\- Alternative cloning scenario|https://confluence.atlassian.com/bamboo/cloning-a-bamboo-instance-289277407.html#CloningaBambooinstance-Alternativecloningscenario]",
      "summary": "Quick filters are not included a Bamboo backup / XML export"
    }
  },
  {
    "key": "BAM-20974",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-06-10T13:05:13.000+0000",
      "description": "h3. Issue Summary\r\n\r\nIf a command outputs something to stdout in encoding different than UTF-8, Bamboo won't display it correctly in the log page.\r\nh3. Steps to Reproduce\r\n # Create a build with a script task\r\n # As a part of the task run command that outputs non-UTF-8 string, with special characters to stdout, for instance java program shown below run with `-Dfile.encoding=windows-1257` java command line switch\r\n # Repeat running Bamboo with the same encoding option: it will still fail.\r\n\r\n\u00a0\r\n{code:java}\r\npackage com.company;\r\n\r\nimport java.nio.charset.Charset;\r\n\r\npublic class Main {\r\n\r\n    public static void main(String[] args) {\r\n       // write your code here\r\n        System.out.println(\"\u0104\u010c\u0118\u0116\u012e\u0160\u0172\u016a\");\r\n    }\r\n}\r\n{code}\r\nh3. Expected Results\r\n\r\nIf Bamboo is run with encoding set to command encoding, logs should be displayed correctly\r\nh3. Actual Results\r\n\r\nLog handling is hard coded as UTF-8, but command output will be handled according to file.encoding option resulting in incorrectly displayed logs (??? instead of actual characters)\r\nh3. Workaround\r\n\r\nIn order to see the stdout output:\r\n * set Bamboo character encoding to match the command's encoding (using `-Dfile.encoding' JVM parameter)\r\n * in the log page, click on the view link (at this point the command output will still be mangled)\r\n * switch the page's character encoding in the browser options to view the command output",
      "summary": "Bamboo doesn't handle command output in encoding different than UTF-8 well"
    }
  },
  {
    "key": "BAM-20973",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-07-24T10:26:16.000+0000",
      "created": "2020-06-09T16:28:50.000+0000",
      "description": "The Bamboo YAML specs documentation examples for configuring a Cron based scheduled trigger are invalid.\r\n\r\nhttps://docs.atlassian.com/bamboo-specs-docs/7.0.3/specs.html?yaml#schedule-with-cron-expression\r\n\r\n{noformat}\r\n---\r\nversion: 2\r\n\r\n#short syntax\r\ntriggers:\r\n  - cron: 0 * * * ? *\r\n---\r\nversion: 2\r\n\r\n#long syntax\r\ntriggers:\r\n  - cron:\r\n      expression: 0 0 * * ? *\r\n{noformat}\r\n\r\nIn the Cron expressions, the {{?}} can only be in the 4th, or 5th place according to the [quartz trigger syntax|http://www.quartz-scheduler.org/documentation/quartz-2.3.0/tutorials/crontrigger.html]\r\n\r\n",
      "summary": "Yaml Specs documentation has incorrect examples for CRON triggers "
    }
  },
  {
    "key": "BAM-20972",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-06-08T21:15:33.000+0000",
      "description": "h3. Issue Summary\r\nWhen creating the first Application Link Bamboo will insert a new row in bandana table with the following key name:\r\n{noformat}\r\ncom.atlassian.oauth.consumer.ConsumerService:host.__HOST_SERVICE__\r\n{noformat}\r\nThe serialized_data will contain the below information:\r\n{code:xml}\r\n<properties>\r\n  <property name=\"privateKey\" value=\"ARandomPrivateKey\"/>\r\n  <property name=\"name\" value=\"Bamboo\"/>\r\n  <property name=\"key\" value=\"Bamboo:6572144991\"/>\r\n  <property name=\"description\" value=\"Atlassian Bamboo at http://localhost:8085 \"/>\r\n  <property name=\"signatureMethod\" value=\"RSA_SHA1\"/>\r\n  <property name=\"publicKey\" value=\"ARandomPublicKey\"/>\r\n</properties>\r\n{code}\r\nThis data is used when a new OAuth token is generated. The URL shown in the description will be the same one in the OAuth token:\r\n !Screen Shot 2020-06-08 at 17.16.27.png|thumbnail! \r\n\r\nIf the Application link URL changes, this database data will not get updated, and the new OAuth tokens created will not show the most recent URL.\r\n\r\n*Note:* This will not affect the application, it's just a display issue.\r\n\r\nh3. Steps to Reproduce\r\n# Create an application link;\r\n# Try to use the features provided by the application link;\r\n# Bamboo will ask to Login and Approve in the other application (this will create the OAuth token);\r\n# Check OAuth token in the other application;\r\n# Change the Bamboo URL in the application link;\r\n# Delete the OAuth token and create a new one;\r\n\r\nh3. Expected Results\r\nThe OAuth token shows the same URL configured in the application link\r\n\r\nh3. Actual Results\r\nThe OAuth token URL will display the application URL set when the first application link was made.\r\n\r\nh3. Workaround\r\n# Stop Bamboo;\r\n# Made a database backup;\r\n# Run the query below replacing *OldURL* and *NewURL*:\r\n#* {code:sql}\r\nUPDATE bandana set serialized_data = replace(serialized_data, 'OldURL', 'NewURL')\r\nwhere bandana.bandana_key = 'com.atlassian.oauth.consumer.ConsumerService:host.__HOST_SERVICE__';\r\n{code}\r\n# Start Bamboo;\r\n# Delete the application link on both sides;\r\n# Create a new application link;\r\n\r\nThe new OAuth token generated should show the right Bamboo URL ",
      "summary": "OAuth token shows the wrong Bamboo URL"
    }
  },
  {
    "key": "BAM-20970",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-07-24T10:22:53.000+0000",
      "created": "2020-06-08T10:44:25.000+0000",
      "description": "h3. Issue Summary\r\nWhen creating new environments with YAML, \"default-environment-permissions\" doesn't work\r\n\r\nh3. Steps to Reproduce\r\n# Create a deployment project.\r\n# Make it deployable with YAML. \r\n# In the YAML file, create a brand new environment. For example:\r\n{noformat}\r\nenvironments:\r\n  - NewEnv\r\n\r\nNewEnv:\r\n  tasks:\r\n    - script:\r\n        - echo \"Hello World\"\r\n {noformat}\r\n# Set permissions for this environment using \"default-environment-permissions\". For example:\r\n{noformat}\r\n(...)\r\ndefault-environment-permissions:\r\n    - users:\r\n      - user1\r\n      groups:\r\n       - group1\r\n      permissions:\r\n       - view\r\n{noformat}\r\n# Deploy the environment and permissions.\r\n\r\nh3. Expected Results\r\nEnvironment will have the permissions set.\r\n\r\nh3. Actual Results\r\nEnvironment doesn't have permissions\r\n\r\nh3. Notes\r\nSame problem will happen if Deployment Project deleted through UI and clicking on Specs Scan in Bamboo to recreate the Deployment Project\r\n\r\nh3. Workaround\r\n# Explicit permissions will work. For example:\r\n{noformat}\r\nenvironment-permissions:\r\n- NewEnv:\r\n  - users:\r\n      - user1\r\n    groups:\r\n      - group1\r\n    permissions:\r\n      - view\r\n{noformat}\r\nOR\r\n# Delete the stored deployment permission YAML file at {{<bamboo-home>/xml-data/build-dir/serverSide/REPOSITORY_STORED_SPECS/repository-<ID>-master/imported-internal-yamls/<buildNumber>/combined-deployment-permissions}}\r\n<ID> is the repository ID and <buildNumber> is the build number shown in {{bamboo.cfg.xml}}",
      "summary": "When creating new environments with YAML, \"default-environment-permissions\" doesn't work"
    }
  },
  {
    "key": "BAM-20969",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-06-04T09:41:57.000+0000",
      "description": "h3. Issue Summary\r\n\r\nEncrypt password with Specs > Bamboo Specs encryption and then use it as password for Docker pull\\push task at another Bamboo instance. Bamboo fails to execute this task\r\nh3. Steps to Reproduce\r\n # See description\r\n\r\nh3. Expected Results\r\n\r\nProvided value is encrypted when entered and decrypted when required\r\nh3. Actual Results\r\n\r\nTask fails with error:\r\n{noformat}\r\nCaused by: org.bouncycastle.crypto.InvalidCipherTextException: pad block corrupted\r\n\tat org.bouncycastle.crypto.paddings.PKCS7Padding.padCount(Unknown Source)\r\n\tat org.bouncycastle.crypto.paddings.PaddedBufferedBlockCipher.doFinal(Unknown Source)\r\n\tat com.atlassian.bamboo.crypto.instance.SecretEncryptionServiceInternalImpl.decrypt(SecretEncryptionServiceInternalImpl.java:131)\r\n\t... 105 more\r\n{noformat}\r\nh3. Workaround\r\n\r\n\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Can't use encrypted password for docker task credentials"
    }
  },
  {
    "key": "BAM-20967",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-06-02T21:37:28.000+0000",
      "description": "h3. Problem Definition\r\nThe *Administration* > *Bulk action* page allows for changes to multiple plans, however at the second step, when the plans are selected, if the list of plans is large, it will take a long time until all is loaded. \r\nh3. Suggested Solution\r\nPlease include paging / sorting / searching to this step. \r\nh4. Why this is important \r\nDepending on the size of the instance it can be very difficult to use the feature",
      "summary": "Improve the plan list in the Bulk Action feature"
    }
  },
  {
    "key": "BAM-20966",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-08-28T07:15:13.000+0000",
      "created": "2020-06-02T08:19:32.000+0000",
      "description": "A plan branch having been created (Create plan barnch->When new branch in repository is created) is timed out after x days (Delete plan branch->After branch inactivity in repository), gets created again manually\u00a0 with a later manual creation, is timed out once more, I do have two duplicate entries in the \"Branches\" tree (below Plan Configuration). If I click on the plan branch I get an error message like: \"An unexpected error has occured: Build xyz does not exist\". \r\n\r\nOn the main page of the build plan, the deleted plan branches are not visible, even after clicking on \"View all branches\".\r\n\r\nThere should be a way to remove the deprecated plan branches from the tree.",
      "summary": "Timed-out plan-branches still visible in Plan-Branch tree"
    }
  },
  {
    "key": "BAM-20964",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-05-29T12:22:02.000+0000",
      "description": "h3. Issue Summary\r\n\r\nRerunning a build result after changing the stage job will cause the build to refresh non-stop\r\nh3. Steps to Reproduce\r\n # Create two Jobs in the same Stage\r\n # First JobA with Script task \"sleep 10\"\r\n # Second JobB with Script task \"echo hello\"\r\n # Create two local agents so that both Jobs can be performed at the same time\r\n # Run the build\r\n # Create a new Second Stage without any new Job\r\n # Move the second JobB to the Second Stage\r\n # Rerun the build result in Step 5\r\n\r\nh3. Expected Results\r\n\r\nJobA will run first before starting JobB.\r\nh3. Actual Results\r\n * JobA and JobB start running at the same time\r\n * JobB finishes first even though it is in the Second Stage\r\n * Even though both Jobs have completed, the main build status is still In Progress\r\n * Clicking on JobB in the build result will make the page refreshing non-stop\r\n\r\nh3. Workaround\r\n\r\nRestart Bamboo",
      "summary": "Page refresh non-stop if rerun build after changing stage job"
    }
  },
  {
    "key": "BAM-20963",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-05-29T11:46:43.000+0000",
      "created": "2020-05-29T11:18:50.000+0000",
      "description": "JAVA spec are really not friendly to work with for a non-Java devs.\r\n\r\nYAML spec should be get more features.\r\n\r\nI can get away with using script steps for almost everything but build notifications with Slack are for example not supported.\u00a0",
      "summary": "Expand YAML spec features"
    }
  },
  {
    "key": "BAM-20962",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-05-28T16:01:47.000+0000",
      "description": "h3. \u00a0Problem Definition\r\n\r\nCurrently, the behavior of the *Create Plan* checkbox at the project level is not clear, making users confused about it. \r\n When a Bamboo user selects *Create* checkbox on the Global Permission:\r\n !Screen Shot 2020-05-28 at 13.05.38.png|thumbnail!\r\n\r\nIn this context, the checkbox mentioned above does not make sense to exist, as Bamboo will ignore it. In other words, the group/user will always be able to create or clone plans within that project, regardless of selecting the \"Create Plan\" checkbox.\r\n !Screen Shot 2020-05-28 at 13.09.47.png|thumbnail!\r\nh3. Suggested Solution\r\n\r\n-When the user select *Create Plan* checkbox at the project level, Bamboo will need to override the permissions on the Global Permission. For example, when the *Create* checkbox is checked on the Global Permission, all *Create Plan* checkbox must be checked by default, if the user unchecked it, Bamboo will respect their decision, blocking the create/clone plans within the projects.- \r\n\r\nAdd an option to explicitly revoke permissions on project level.\r\n\r\n\u00a0",
      "summary": "Explicitly revoke global permissions (i.e. Create Plan) on a project level"
    }
  },
  {
    "key": "BAM-20960",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-10-20T14:02:04.000+0000",
      "created": "2020-05-27T16:03:14.000+0000",
      "description": "h3. Issue Summary\r\n\r\nAfter upgrading Bamboo to 7.0, All the Maven tasks (whose corresponding Maven executables are enabled with repository isolation option) are failing with the below error.\r\nh3. Steps to Reproduce\r\n # Define a Maven 3.x executable in Bamboo 6.x\r\n # Enable [repository isolation|https://confluence.atlassian.com/bamboo/configuring-repository-isolation-for-maven-executables-289277167.html] for one of the Maven executables\r\n # Add a Maven 3.x task and choose this executable.\r\n # Run and confirm this Maven task is running\r\n # Upgrade Bamboo to 7.0.4\r\n # Run the same plan\r\n\r\nh3. Expected Results\r\n\r\nMaven 3.x task runs without any errors.\r\nh3. Actual Results\r\n\r\nThe below exception is thrown in the build log:\r\n{noformat}\r\nsimple\t25-May-2020 14:59:57\tStarting task 'Compile pom-web' of type 'com.atlassian.bamboo.plugins.maven:task.builder.mvn3'\r\nerror\t25-May-2020 14:59:57\tError occurred while running Task 'Compile pom' of type com.atlassian.bamboo.plugins.maven:task.builder.mvn3.\r\nerror\t25-May-2020 14:59:57\tcom.atlassian.bamboo.task.TaskException: Failed to execute task\r\n...\r\n...\r\nerror\t25-May-2020 14:59:57\t\tat com.atlassian.bamboo.plugins.maven.task.Maven3BuildTask.execute(Maven3BuildTask.java:72)\r\nerror\t25-May-2020 14:59:57\t\t... 16 more\r\nerror\t25-May-2020 14:59:57\tCaused by: com.thoughtworks.xstream.converters.ConversionException: \r\nerror\t25-May-2020 14:59:57\t---- Debugging information ----\r\nerror\t25-May-2020 14:59:57\tcause-exception     : com.thoughtworks.xstream.mapper.CannotResolveClassException\r\nerror\t25-May-2020 14:59:57\tcause-message       : org.apache.commons.logging.LogFactory$Log4jLog\r\nerror\t25-May-2020 14:59:57\tclass               : org.apache.commons.configuration.XMLConfiguration$XMLFileConfigurationDelegate\r\nerror\t25-May-2020 14:59:57\trequired-type       : org.apache.commons.configuration.XMLConfiguration$XMLFileConfigurationDelegate\r\nerror\t25-May-2020 14:59:57\tconverter-type      : com.thoughtworks.xstream.converters.reflection.ReflectionConverter\r\nerror\t25-May-2020 14:59:57\tpath                : /com.atlassian.bamboo.ww2.actions.build.admin.create.CustomizedXMLConfiguration/delegate/log\r\nerror\t25-May-2020 14:59:57\tline number         : 63\r\nerror\t25-May-2020 14:59:57\tclass[1]            : com.atlassian.bamboo.ww2.actions.build.admin.create.CustomizedXMLConfiguration\r\nerror\t25-May-2020 14:59:57\trequired-type[1]    : com.atlassian.bamboo.ww2.actions.build.admin.create.CustomizedXMLConfiguration\r\nerror\t25-May-2020 14:59:57\tversion             : not available\r\nerror\t25-May-2020 14:59:57\t-------------------------------\r\nerror\t25-May-2020 14:59:57\t\tat com.thoughtworks.xstream.core.TreeUnmarshaller.convert(TreeUnmarshaller.java:77)\r\nerror\t25-May-2020 14:59:57\t\tat com.thoughtworks.xstream.core.AbstractReferenceUnmarshaller.convert(AbstractReferenceUnmarshaller.java:72)\r\nerror\t25-May-2020 14:59:57\t\tat com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:66)\r\nerror\t25-May-2020 14:59:57\t\tat com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshallField(AbstractReflectionConverter.java:499)\r\n{noformat}\r\nh3. Workaround\r\n# Stop Bamboo.\r\n# (!)\u00a0Backup the database.\r\n# Run the below delete query\r\n{code:sql}\r\nDELETE FROM BANDANA\r\nWHERE BANDANA_KEY LIKE 'com.atlassian.bamboo.capability.DefaultCapabilityConfigurationManager:%' and serialized_data like '%Log4jLog%';\r\n{code}\r\n# Start Bamboo\r\n# Navigate to this Maven executable and enable the \"Local Repository Isolation\" box (this would have been disabled as a result of running the above query).\r\n\r\nh4. Validation\r\n# Run the below select query to confirm it's in the bandana table:\r\n{code:sql}\r\nSELECT * FROM BANDANA WHERE BANDANA_KEY LIKE 'com.atlassian.bamboo.capability.DefaultCapabilityConfigurationManager:%' and serialized_data like '%org.apache.commons.logging.LogAdapter$Slf4jLocationAwareLog%'{code}",
      "summary": "Maven tasks fail to run when repository isolation is enabled in the executable"
    }
  },
  {
    "key": "BAM-20959",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-05-26T11:17:09.000+0000",
      "description": "There is no support for Podman as container runtime for Bamboo.\r\n\r\nRHEL (and most other rpm-based Linux versions) are promoting podman to use as a container runtime and hence customers would like to use this as a container runtime as it is supported by the vendor.",
      "summary": "Need support for Podman as a container runtime"
    }
  },
  {
    "key": "BAM-20958",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-05-26T07:53:17.000+0000",
      "description": "h3. Issue Summary\r\nIt is possible to create deployment release from old build result through REST API even though the latest build result have been used to create a deployment release\r\n\r\nh3. Steps to Reproduce\r\n# Create 2 build results, for example: \r\n#* PROJ-PLAN-3 with commit A\r\n#* PROJ-PLAN-4 with commit B\r\nThe build results do not have the related deployment release yet\r\n# Create deployment release with PROJ-PLAN-4\r\nThe release will have commits A and B\r\n# Confirm that it is not possible to create deployment release with old build results PROJ-PLAN-3 anymore through Bamboo GUI\r\n# Run the following command to create deployment release with build result PROJ-PLAN-3\r\n{noformat}\r\ncurl -u username:password -X POST -d '{\"planResultKey\":\"PROJ-PLAN-3\",\"name\":\"version2\",\"nextVersionName\":\"version3\"}' -H 'Content-Type: application/json' http://localhost:8085/rest/api/latest/deploy/project/950273/version\r\n\r\n{noformat}\r\n\r\nh3. Expected Results\r\nIt should fail to create\r\n\r\nh3. Actual Results\r\nThe REST call manage to create deployment release with build result PROJ-PLAN-3\r\n\r\nh3. Notes\r\nRelease created in Step 2 have commit A that exist in release created in Step 4\r\n\r\nh3. Workaround\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "No build restriction when creating deployment release through REST"
    }
  },
  {
    "key": "BAM-20957",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-05-23T06:46:21.000+0000",
      "created": "2020-05-22T20:40:10.000+0000",
      "description": "It would be great to have the ability to run elastic agents in different AWS VPC's",
      "summary": "Multiple aws accounts and multiple regions for elastic agents"
    }
  },
  {
    "key": "BAM-20955",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-05-20T21:49:25.000+0000",
      "description": "h3. Problem Definition\r\nIn certain specific cases, you might need artifacts from multiple successful builds. Add an option to allow the selection of multiple artifacts from multiple build keys in Deployment.\r\n\r\nh3. Suggested Solution\r\nImprove how the Artifact Downloader works / Create an easier way to manage the scenario above, allowing the selection of artifacts from different builds. \r\n\r\nh4. Why this is important \r\nThere's no easy way to accomplish this now and it would be extremely helpful if the Artifact Downloader task allowed the selection from specific builds.",
      "summary": "Allow selective artifact in Artifact Download task"
    }
  },
  {
    "key": "BAM-20954",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-05-19T06:45:44.000+0000",
      "description": "h3. Issue Summary\r\n\r\nFor the Repository Tag task, in the event that *Jira applications variables* substitution does not occur, the repository is tagged with the Jira application variable definition key.\r\nh3. Steps to Reproduce\r\n # create a plan\r\n # create a Job with a Repository Tag task with *${bamboo.jira.version}* as the tag\r\n # build the plan with a repository trigger\r\n\r\nh3. Expected Results\r\n\r\nThe job should fail since the build trigger was not a Jira Release and Jira application variables were not substituted\r\nh3. Actual Results\r\n\r\nJob succeeds with the\u00a0Jira application variables key as the repository Tag\r\n\r\n!tagtask.jpg|width=234,height=165!\r\nh3. Workaround\r\n\r\nNone at the moment",
      "summary": "Variable substitution failure not enforced for Repository Tag Task"
    }
  },
  {
    "key": "BAM-20953",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-11-23T14:21:38.000+0000",
      "created": "2020-05-18T12:33:00.000+0000",
      "description": "h3. Issue Summary\r\n\r\nDocumentation\u00a0[https://docs.atlassian.com/bamboo-specs-docs/7.0.3/specs.html?yaml#repository-triggers-a-build-on-commit]\u00a0says it's possible to configure polling trigger with cron expression. But given example conflicts with scheduled trigger\u00a0[https://docs.atlassian.com/bamboo-specs-docs/7.0.3/specs.html?yaml#schedule-with-cron-expression]\r\nh3. Steps to Reproduce\r\n # Create YAML specs with snipped from documentation\r\n # Check created plan\r\n\r\nh3. Expected Results\r\n\r\nPolling trigger with cron expression was created\r\n\r\nh3. Actual Results\r\n\r\nScheduled trigger with cron expression created\r\n\r\nh3. Workaround\r\n\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "YAML Specs doesn't support polling trigger by cron expression"
    }
  },
  {
    "key": "BAM-20952",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-11-08T12:08:43.000+0000",
      "created": "2020-05-18T06:50:00.000+0000",
      "description": "h3. Issue Summary\r\nAfter disabling signup option, the Sign up button still exist if anonymous permission is enabled\r\n\r\nh3. Steps to Reproduce\r\n# Disable signup option at {{Administration >> Security >> Security settings}}\r\n# Enable Anonymous user permission at {{Administration >> Security >> Global permission}}\r\n# Disable Anonymous user permission in all Plan Configurations\r\n# Logout\r\n# Check if there is a Sign up button in the Bamboo Home page (instead of the top right)\r\n\r\nh3. Expected Results\r\nSign up button will not appear\r\n\r\nh3. Actual Results\r\n* The top right Sign up button have disappeared\r\n* The Sign up button in the Bamboo Home page still exist\r\nClicking on this Sign up button will request user to login. After login, it will have error to access sign up page. User still unable to perform sign up\r\n\r\nh3. Workaround 1\r\nDisable Anonymous user Global Permission\r\n\r\nh3. Workaround 2\r\n# Shutdown Bamboo\r\n# Edit the file {{<bamboo-install>/atlassian-bamboo/feature/dashboard/welcome-mat/welcome-mat.soy}} to remove the following lines:\r\n{noformat}\r\n                                    {if $showSignup}\r\n                                        {call aui.buttons.button}\r\n                                            {param text: getText('bamboo.banner.signup') /}\r\n                                            {param tagName: 'a' /}\r\n                                            {param extraClasses: 'aui-style' /} // hack - needed until we use ADG\r\n                                            {param extraAttributes: [ 'href': contextPath() + '/signupUser!doDefault.action' ] /}\r\n                                        {/call}\r\n                                    {/if}\r\n{noformat}\r\n# Restart Bamboo\r\n",
      "summary": "Disable signup does not remove Sign up button"
    }
  },
  {
    "key": "BAM-20951",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-05-18T00:27:24.000+0000",
      "description": "h3. Problem Definition\r\nWhen running Bamboo in Docker and trying to use Docker Runner one might need to change the default volume mounts (e.g. for mounting {{$\\{bamboo.working.directory\\}}} and {{$\\{bamboo.tmp.directory\\}}}) for all builds and deployments on the system. \r\n\r\nIn order to use Docker Runner when Bamboo itself is being run in Docker, you need to mount the docker socket of the host into the container. However, this means that every time Bamboo issues {{docker run}} commands, those are sent to the host to actually be run, including volume mounts. Because Bamboo will try to mount internal paths which the host may not have or recognise, the default mounts for {{$\\{bamboo.working.directory\\}}} and {{$\\{bamboo.tmp.directory\\}}} will fail.\r\n\r\nThis can have a number of unintended side effects, such as not being able to run script tasks (which are generated into Bamboo's temp directory and then cannot be found by the Docker Runner container), Docker Runner containers not having access to the real build dir etc.\r\n\r\nh3. Suggested Solution\r\nAllow setting default values for volume mounts that are used for all new build and deployment plans\r\n\r\nh3. Workaround\r\nYou can manually configure each build and deployment plan with the correct volume mapping, and ensure the equivalent paths are mounted to the Bamboo container on the host.\r\n\r\nFor example, given a Bamboo instance started like this:\r\n\r\n{code}\r\ndocker run -d \\\r\n    --name bamboo \\\r\n    -p 8085:8085 \\\r\n    -p 54663:54663 \\\r\n    -v bambooHome:/var/atlassian/application-data/bamboo \\\r\n    -v /path/to/my/bamboo/build-dir:/var/atlassian/application-data/bamboo/xml-data/build-dir \\\r\n    -v /path/to/my/bamboo/temp:/var/atlassian/application-data/bamboo/temp \\\r\n    -v /var/run/docker.sock:/var/run/docker.sock \\\r\n    atlassian/bamboo:version-with-docker-installed\r\n{code}\r\n(Where Bamboo's build dir and temp dir have both been mounted to folder locations on the host, as well as mounting the host's docker Socket)\r\n\r\nYou can edit the Volumes in a given plan's Docker configuration with the following values:\r\n\r\n\r\n||Host directory||Container directory||\r\n|/path/to/my/bamboo/build-dir|${bamboo.working.directory}/..|\r\n|/path/to/my/bamboo/temp|${bamboo.tmp.directory}|\r\n\r\nIn this configuration, everything works as expected.",
      "summary": "Allow configuring default volumes for Docker Runner"
    }
  },
  {
    "key": "BAM-20950",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-05-15T16:12:12.000+0000",
      "description": "Using Bamboo's MSTest Parser task shows the following on lack of test-cases in build log.\r\n{noformat}\r\nsimple 14-May-2020 13:20:37 Failing task since test cases were expected but none were found.\r\nsimple 14-May-2020 13:20:37 Finished task 'MSTest Parser' with result: Failed{noformat}\r\nSo this task fails and with it the build plan and thus Bamboo Server marks it as failed. That is basically a correct behavior, from the task's as well as from Bamboo side.\r\n\r\n(!) Though, since there is no dedicted error line in the log, it is tedious to find that out.\r\n\r\n*Therefore, there should be an option to explicitly force an error log-out for any MSTest Parser task failure that could appear.*\r\n\r\nAs a work-around, log parsing and some scripting can be applied, however a Bamboo-centric option would clearly be preference.",
      "summary": "MSTest Parser task shall explicitly log error in build log"
    }
  },
  {
    "key": "BAM-20949",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-05-15T00:20:38.000+0000",
      "description": "h3. Problem Definition\r\nCurrently Gradle is installed through a third party vendor\r\n\r\nh3. Suggested Solution\r\nBundle Gradle with Bamboo install\r\n\r\nh4. Why this is important \r\nThe configuration of Gradle is limited, as an example the JDK version cannot be changed in the UI\r\n\r\nh3. Workaround \r\nIn gradle.properties in the .gradle directory in your HOME_DIRECTORY set org.gradle.java.home=/<JAVA_PATH>\r\n*or*\r\nIn your build.gradle\r\ncompileJava.options.fork = true\r\ncompileJava.options.forkOptions.executable = /<JAVA_PATH>",
      "summary": "Bundle Gradle task with Bamboo and enable modifying JDK version"
    }
  },
  {
    "key": "BAM-20948",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-05-14T18:31:34.000+0000",
      "description": "h3. Problem Definition\r\n\r\nAs for now, Bamboo does not show details about the test cases that are skipped or quarantined.\r\n\r\nh3. Suggested Solution\r\n\r\nUsers should be able to see the details about the tests even though they are being skipped if this information is present in the test result XML file.\r\n\r\n",
      "summary": "Build result summary should show details about skipped/Quarantined tests"
    }
  },
  {
    "key": "BAM-20947",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-05-14T07:59:28.000+0000",
      "description": "h3. Issue Summary\r\n\r\nWhen the linked repository is configured to use 'Mirror', Bamboo clones from the master repository instead of mirror repository whenever we have \"Branch merging enabled\" activated.\r\nh3. Steps to Reproduce\r\n # Create a linked repository (Bitbucket server type) and choose a mirror from the dropdown (and Enable Verbose logging under Advanced option).\r\n # Add this repository to a plan and have a Source code checkout task and enable Branch merging in that plan (choosing to create a plan branch when pull request is created).\r\n # Create a new pull request in Bitbucket on that repository.\r\n # A new plan branch is created and run successfully.\r\n\r\nh3. Expected Results\r\n\r\nThe build is expected to clone from a mirror when branch merging is activated.\r\nh3. Actual Results\r\n\r\nThe build is cloned from master repository.\r\nh3. Workaround\r\n\r\nPerform branch merging using a Script task.",
      "summary": "Bamboo fails to clone from mirror when Branch merging option is enabled in a plan"
    }
  },
  {
    "key": "BAM-20946",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-07-24T10:22:53.000+0000",
      "created": "2020-05-14T00:31:32.000+0000",
      "description": "h3. Issue Summary\r\n\r\nProviding a passphrase encrypted by another Bamboo instance can break repositories and cause Bamboo to not start up.\r\nh3. Steps to Reproduce\r\n\r\n1. Encode some text by Specs > Bamboo specs encryption dialog\r\n 2. Try to create a new repo using the UI with an ssh key for access\r\n 3. In the ssh key passphrase field of the created new linked repo UI enter the value from step 1.\r\nh3. Expected Results\r\n\r\nBamboo should invalidate repository creation\r\nh3. Actual Results\r\n\r\nIt will result in broken repo list and a server that won't start up any more.\r\n\r\nThe below exception is thrown in the atlassian-bamboo.log file when Bamboo is restarted and the instance will not start up:\r\n{noformat}\r\n2020-04-21 08:02:09,526 INFO \\[localhost-startStop-1] \\[CachedRepositoryDefinitionManagerImpl] Repository cache initialising...\r\n...\r\n2020-04-21 08:02:10,781 INFO \\[localhost-startStop-1] \\[SecretEncryptionServiceImpl] Can't decrypt data. It's possible data was encrypted by different cipher. Run Bamboo with system property \\-Dbamboo.security.decryption.ignore.errors=true to ignore this error\r\n2020-04-21 08:02:10,782 FATAL \\[localhost-startStop-1] \\[BambooContainer] Cannot start Bamboo\r\njava.lang.RuntimeException: org.bouncycastle.crypto.InvalidCipherTextException: pad block corrupted\r\n{noformat}\r\nh3. Workaround\r\n\r\nThe repository with the bad encryption will need to be removed from the database (VCS_LOCATION). Please raise a support ticket for further help.",
      "summary": "Invalid passphrase value can cause Bamboo to not start up"
    }
  },
  {
    "key": "BAM-20945",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-05-18T08:17:55.000+0000",
      "created": "2020-05-13T12:30:27.000+0000",
      "description": "h3. Issue Summary\r\nBuild plan password variable could not be transferred to deployment even though it works with normal variable\r\n\r\nh3. Steps to Reproduce\r\n# Create Plan Variable test.username and test.password\r\n# Run the build\r\n# Create a deployment environment with Script task to echo the variables\r\n# Run the deployment\r\n\r\nh3. Expected Results\r\nBoth variables managed to be transferred to deployment\r\n\r\nh3. Actual Results\r\nOnly test.username is transferred to deployment. The deployment fail with unable to find test.password variable\r\n\r\nh3. Notes\r\nFor better password variable storage in database, plan password variable could not be transferred to deployment anymore\r\n\r\nh3. Workaround\r\nConfigure Deployment Environment Variable but password changes will need to modify multiple places",
      "summary": "Build plan password variable could not be transferred to deployment"
    }
  },
  {
    "key": "BAM-20944",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-05-12T13:23:20.000+0000",
      "description": "h3. Issue Summary\r\n\r\nBamboo checks if application links are operational when it starts. If an applink is down (for example when the remote application is down) then the link is marked as down. There is no later automated check of the state.\r\n\r\nh3. Suggestion\r\n\r\nAdd an automated periodic check.\r\n\r\nh3. Workaround\r\n\r\nUse the navlink refresh feature.",
      "summary": "Periodically check applink status"
    }
  },
  {
    "key": "BAM-20942",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-05-11T15:47:53.000+0000",
      "description": "h3. Problem Definition\r\n\r\n[Bamboo Specs Reference|https://docs.atlassian.com/bamboo-specs-docs/7.0.1/specs.html?yaml#miscellaneous-plugins]\r\n\r\nYAML specs examples for our built-in plugins are lacking.\r\n\r\nWe currently only have an example for {{clean-working-dir}}\r\n\r\nWhen using JAVA specs, it is possible to use the \"View as specs\" to see different configurations for the built-in plugins.  But there is no such tool for YAML specs.\r\n\r\n\r\nh3. Suggested Solution\r\n\r\nAdd examples for valid YAML specs confgurations for the built-in plugins.  (Build Expiry, Clover, etc.)\r\n\r\n\r\nh3. Workaround\r\n\r\nNot really a workaround, but using Java Specs.",
      "summary": "Document Request: YAML Specs for built-in plugins"
    }
  },
  {
    "key": "BAM-20941",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-05-11T13:36:35.000+0000",
      "description": "*Scenario*\r\n 1. Create a build job for a build plan.\r\n 2. Add a local agent.\r\n 3. Dedicate the agent to perform the build job.\r\n 4. Take the agent offline.\r\nWhen opening the requirement tab under plan configuration an error is shown \"No agents meet this job's requirements.\" \r\n\r\n*Suggestion*\r\nThe error message should display the cause of agent not being able to build, e.g: When the agent is offline.",
      "summary": "Add more information on the plan when dedicated agent is offline"
    }
  },
  {
    "key": "BAM-20940",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-05-11T11:39:42.000+0000",
      "description": "h3. Problem Definition\r\nRepository commit task currently supports Git and Mercurial repositories only. Subversion repositories will not be listed in the 'Repositories' dropdown.\r\n\r\nh3. Suggested Solution\r\nAdd support for Subversion repositories as well.\r\n \r\nh3. Workaround\r\nUse a [Script task|https://confluence.atlassian.com/bamboo/script-289277046.html] task to do a commit.",
      "summary": "Repository commit task to support Subversion repository"
    }
  }
]