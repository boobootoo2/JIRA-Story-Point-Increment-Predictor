[
  {
    "key": "BAM-21165",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-11-24T21:45:24.000+0000",
      "description": "h3. Issue Summary\r\nIf the user specified in the java code uses a different Letter case, an empty permission set will be published to the user in Bamboo.\r\n\r\nh3. Steps to Reproduce\r\n # Create a user *foo* in Bamboo\r\n # Write a specs code giving permissions to user *foo* (lowercase) to a random plan. i.e.\r\n{code:java}\r\n    public PlanPermissions planPermission() {\r\n        final PlanPermissions planPermission = new PlanPermissions(new PlanIdentifier(\"PROJ\", \"PLAN\"))\r\n                .permissions(new Permissions()\r\n                        .userPermissions(\"foo\", PermissionType.EDIT, PermissionType.VIEW, PermissionType.ADMIN, PermissionType.CLONE, PermissionType.BUILD));\r\n        return planPermission;\r\n    }\r\n{code}\r\n # Push the code to the repository (or use the IDE).\r\n # RSS will run and the permission will be assigned correctly.\r\n # Change the user name in the code implementation to something different, for example,\u00a0*FOO*. i.e.\r\n{code:java}\r\n    public PlanPermissions planPermission() {\r\n        final PlanPermissions planPermission = new PlanPermissions(new PlanIdentifier(\"PROJ\", \"PLAN\"))\r\n                .permissions(new Permissions()\r\n                        .userPermissions(\"FOO\", PermissionType.EDIT, PermissionType.VIEW, PermissionType.ADMIN, PermissionType.CLONE, PermissionType.BUILD));\r\n        return planPermission;\r\n    }\r\n{code}\r\n # Push the new version of the code\r\n\r\nh3. Expected Results\r\n # Bamboo handles the case correctly and grant permission to the user \"foo\" *or*\r\n # Specs fails gracefully with a message saying it was not able to find the user \"FOO\"\r\n\r\nh3. Actual Results\r\nBamboo identifies the user correctly but an empty permission set is published:\r\n !permissions.png!\r\n(!) As expected, the user in question will not have the proper permissions.\r\n(!) This also happens if you try \"Foo\", \"foO\" and etc.\r\nh3. Workaround\r\n\r\nMake sure to use the same letter case used to register the user in Bamboo or at the external user repository.",
      "summary": "Publishing plan permissions using Java Specs grants empty permission set to the user  "
    }
  },
  {
    "key": "BAM-21164",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-11-25T16:02:54.000+0000",
      "created": "2020-11-24T13:26:27.000+0000",
      "description": "h3. Issue Summary\r\n\r\nWhen running MSSQL database and upgrading to Bamboo 7.2.0, Bamboo start up fails and the following error is shown on the UI\r\n{noformat}\r\nTask for build 70202 failed with exception: Null value was assigned to a property [class com.atlassian.bamboo.plan.VcsLocationBambooSpecsStateImpl.specsNotFound] of primitive type setter of com.atlassian.bamboo.plan.VcsLocationBambooSpecsStateImpl.specsNotFound; nested exception is org.hibernate.PropertyAccessException: Null value was assigned to a property [class com.atlassian.bamboo.plan.VcsLocationBambooSpecsStateImpl.specsNotFound] of primitive type setter of com.atlassian.bamboo.plan.VcsLocationBambooSpecsStateImpl.specsNotFound\r\n{noformat}\r\n\u00a0\r\nh3. Steps to Reproduce\r\n # Run MSSQL as your database type for Bamboo\r\n # Upgrade to Bamboo 7.2.0\r\n # Start Bamboo\r\n\r\nh3. Expected Results\r\n\r\nBamboo would start up successfully after upgrading\r\nh3. Actual Results\r\n\r\nBamboo start up fails and the the below exception is thrown in the atlassian-bamboo.log file. Note, that the below stack trace has been truncated to show the most relevant parts.\r\n{noformat}\r\n2020-11-24 12:53:26,842 ERROR [18-UpgradeTaskBackgroundThread:pool-39-thread-1] [AbstractUpgradeManager] org.springframework.orm.hibernate5.HibernateSystemException: Null value was assigned to a property [class com.atlassian.bamboo.plan.VcsLocationBambooSpecsStateImpl.specsNotFound] of primitive type setter of com.atlassian.bamboo.plan.VcsLocationBambooSpecsStateImpl.specsNotFound; nested exception is org.hibernate.PropertyAccessException: Null value was assigned to a property [class com.atlassian.bamboo.plan.VcsLocationBambooSpecsStateImpl.specsNotFound] of primitive type setter of com.atlassian.bamboo.plan.VcsLocationBambooSpecsStateImpl.specsNotFound\r\norg.springframework.orm.hibernate5.HibernateSystemException: Null value was assigned to a property [class com.atlassian.bamboo.plan.VcsLocationBambooSpecsStateImpl.specsNotFound] of primitive type setter of com.atlassian.bamboo.plan.VcsLocationBambooSpecsStateImpl.specsNotFound; nested exception is org.hibernate.PropertyAccessException: Null value was assigned to a property [class com.atlassian.bamboo.plan.VcsLocationBambooSpecsStateImpl.specsNotFound] of primitive type setter of com.atlassian.bamboo.plan.VcsLocationBambooSpecsStateImpl.specsNotFound\r\n\tat org.springframework.orm.hibernate5.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:300)\r\n...\r\nCaused by: org.hibernate.PropertyAccessException: Null value was assigned to a property [class com.atlassian.bamboo.plan.VcsLocationBambooSpecsStateImpl.specsNotFound] of primitive type setter of com.atlassian.bamboo.plan.VcsLocationBambooSpecsStateImpl.specsNotFound\r\n\tat org.hibernate.property.access.spi.SetterFieldImpl.set(SetterFieldImpl.java:58)\r\n...\r\nCaused by: java.lang.IllegalArgumentException: Can not set boolean field com.atlassian.bamboo.plan.VcsLocationBambooSpecsStateImpl.specsNotFound to null value\r\n\tat sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:167)\r\n\tat sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:171)\r\n\tat sun.reflect.UnsafeBooleanFieldAccessorImpl.set(UnsafeBooleanFieldAccessorImpl.java:80)\r\n\tat java.lang.reflect.Field.set(Field.java:764)\r\n\tat org.hibernate.property.access.spi.SetterFieldImpl.set(SetterFieldImpl.java:52)\r\n\t... 64 more\r\n{noformat}\r\nh3. Workaround\r\n\r\n # Stop Bamboo\r\n # Make sure to create a back up of your existing Bamboo database\r\n # Connect to your Bamboo database and run the below query:\r\n ** \r\n{code:sql}\r\nUPDATE VCS_SPECS_STATE set SPECS_NOT_FOUND = 0 where SPECS_NOT_FOUND is null\r\n{code}\r\n # Start Bamboo",
      "summary": "Bamboo start up fails after upgrading to 7.2.0"
    }
  },
  {
    "key": "BAM-21163",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-11-24T13:03:14.000+0000",
      "description": "*Issue Summary:*\r\nIn Bamboo 6.10.3, need to have a visual difference between the build results that are totally completed and the ones that have pending stages to trigger. .\r\n\r\n*Steps to Reproduce:*\r\n# Login to Bamboo.\r\n# Click on any plan that have builds running.\r\n# Look at the extreme left for banner. \r\n# In both cases the banner is Green, and there is a subtle difference in the icon of the build (the finished build has the 'ok tick', while the manual stage pending has a circle inside).\r\n\r\n*Expected Results:*\r\n# There shouldn't be any error pop up message on clicking Run Plan. \r\n\r\n*Actual Results:*\r\n# Visual difference between builds completed vs builds with manual steps pending.\r\n\r\n*Workaround:*\r\nNone",
      "summary": "Make visual difference for a build that has a manual stage pending to be executed from a completely finished build"
    }
  },
  {
    "key": "BAM-21162",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-11-24T12:42:00.000+0000",
      "description": "h3. Issue Summary\r\n\r\nCurrently, Bamboo is only looking for a successful response code with a PowerShell script. So, by default, if you run a PowerShell script task with some non existing command, Bamboo will mark this task as successful.\r\nh3. Steps to Reproduce\r\n # Create a script task with powershell interpreter and coma content like \"idonotexist\"\r\n # Run the plan\r\n\r\nh3. Expected Results\r\n\r\nScript task fails\r\nh3. Actual Results\r\n\r\nScript task is green even though the above command will cause an error.\r\nh3. Workaround\r\n\r\nThere's a workaround of handing errors in a PowerShell script, for example, check exit code of commands or/and set\u00a0$ErrorActionPreference = \"Stop\"",
      "summary": "Better handle PowerShell command execution in Bamboo"
    }
  },
  {
    "key": "BAM-21161",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-11-20T08:06:48.000+0000",
      "description": "In the Bamboo web UI a plans execution log can is retrieved by accessing something like the following URI:\r\nhttps://<My Bamboo Host>/download/<PROJECT KEY>-<PLAN KEY>-BP/build_logs/NB\r\n\r\nI need an automated way to access those logs.",
      "summary": "REST API endpoint to download log from build result"
    }
  },
  {
    "key": "BAM-21160",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-11-19T05:29:02.000+0000",
      "description": "h3. Issue Summary\r\nDeleting a project does not remove agent dedications which means an agent can appear as dedicated even though its dedications list is empty. \r\n\r\nYou can verify the presence of this bug if this SQL query returns rows:\r\n{noformat}\r\nSELECT AA.*, Q.* FROM QUEUE Q\r\nJOIN AGENT_ASSIGNMENT AA ON Q.QUEUE_ID = AA.EXECUTOR_ID\r\nWHERE EXECUTABLE_TYPE = 'PROJECT' AND EXECUTABLE_ID NOT IN (SELECT PROJECT_ID FROM PROJECT);\r\n{noformat}\r\n\r\nh3. Steps to Reproduce\r\n# Create a project\r\n# Dedicate an agent to it\r\n# Delete the project\r\n# Agent remains dedicated\r\n\r\nh3. Expected Results\r\nAgent dedications for resources that no longer exist should be able to be cleared via the UI.\r\n\r\nh3. Actual Results\r\nDedications list is empty and agent cannot be freed up.\r\n\r\n\r\nh3. Workaround\r\nDelete and recreate the agent. You will lose any manually created capabilities on the agent as a result of this but they can be recreated.\r\n# *Bamboo Administration >> Agents >> select it >> Capabilities*\u00a0take a screenshot for reference if you had manually created some capabilities\r\n# *Bamboo Administration >> Agents >> select it >> Delete*\r\n#* For local agent, create it again\r\n#* For remote agent, restart it and it will come back as a new entity.\r\n# Fix any capabilities that might have been lost because they were manually added.\r\n",
      "summary": "Deleting a project does not remove agent dedications and dedications list is empty"
    }
  },
  {
    "key": "BAM-21159",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-11-17T15:02:47.000+0000",
      "description": "h3. Issue Summary\r\n\r\nCurrently when downloading an artifact from the UI it's not possible to resume the download in case of failure.\r\nh3. Steps to Reproduce\r\n # Start downloading a large artifact from the UI\r\n # Loose connectivity for a short period of time in order to have the download failing.\r\n # Click retry for resuming the download.\r\n\r\nh3. Expected Results\r\n\r\nThe download should resume from where it was interrupted\r\nh3. Actual Results\r\n\r\nThe download starts from the beginning.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Should be possible to resume a failed download of a large artifact"
    }
  },
  {
    "key": "BAM-21158",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-11-17T09:49:08.000+0000",
      "description": "On Bamboo we have from horizontal bar menu:\r\n\r\n- create deployment project\r\n\r\nWhat we really need is a\u00a0\r\n\r\n- clone deployment project\r\n\r\n\u00a0",
      "summary": "Clone Deployment Project"
    }
  },
  {
    "key": "BAM-21157",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-11-23T14:21:39.000+0000",
      "created": "2020-11-11T06:25:08.000+0000",
      "description": "h3. Issue Summary\r\n\r\nAfter upgrading Java to JDK 8u272 remote and elastic agents fail to connect to Bamboo server. There is often a NullPointerException during the SSL handshake. If connecting to Bamboo via a Tomcat SSL listener, the UI may fail to load with {{ERR_SSL_PROTOCOL_ERROR}} (in Chrome).\r\n\r\nThis appears to be [NPE in PSSSignatureSpi#init due to unchecked null SecureRandom \u00b7 Issue #633 \u00b7 bcgit/bc-java \u00b7 GitHub |https://github.com/bcgit/bc-java/issues/633] and fixed with the bouncy castle 1.65. Bamboo currently ships with Bouncy castle 1.64\r\nh3. Steps to Reproduce\r\n # Using Java 8 u262\r\n # Configure a Tomcat HTTPS listener\r\n # Configure Bamboo remote agents to use SSL: [Securing your remote agents - Bamboo Server 7.1 - Atlassian Documentation|https://confluence.atlassian.com/bamboo/securing-your-remote-agents-289277197.html] (this step is required so that the ActiveMQ broker loads BouncyCastle as a provider)\r\n ** This occurs with Bamboo's automatic JMS SSL management, not only custom certs.\r\n # Everything is working at this point\r\n # Upgrade Java on Bamboo server to JDK8 u272 and restart Bamboo\r\n\r\nh3. Expected Results\r\n\r\nAgent successfully exchanges ssl keys and connects.\r\nHTTPS connections are successful to Tomcat HTTPS listener.\r\nh3. Actual Results\r\n\r\nAgents will eventually (after they give up retrying in ~10mins of hanging at Registering with server) fail with the below in {{{}$BAMBOO_AGENT_HOME/atlassian-bamboo-agent.log{}}}:\r\n{noformat}\r\nINFO   | jvm 1    | 2020/11/17 14:32:39 | 2020-11-17 03:32:39,895 TRACE [ActiveMQ Transport: ssl://local/192.168.212.131:54663] [FailoverTransport] unconnected handleTransportFailure: javax.net.ssl.SSLException: Received fatal alert: internal_error\r\nINFO   | jvm 1    | 2020/11/17 14:32:39 | javax.net.ssl.SSLException: Received fatal alert: internal_error\r\nINFO   | jvm 1    | 2020/11/17 14:32:39 | \tat sun.security.ssl.Alert.createSSLException(Alert.java:133)\r\nINFO   | jvm 1    | 2020/11/17 14:32:39 | \tat sun.security.ssl.Alert.createSSLException(Alert.java:117)\r\nINFO   | jvm 1    | 2020/11/17 14:32:39 | \tat sun.security.ssl.TransportContext.fatal(TransportContext.java:311)\r\nINFO   | jvm 1    | 2020/11/17 14:32:39 | \tat sun.security.ssl.Alert$AlertConsumer.consume(Alert.java:293)\r\nINFO   | jvm 1    | 2020/11/17 14:32:39 | \tat sun.security.ssl.TransportContext.dispatch(TransportContext.java:185)\r\nINFO   | jvm 1    | 2020/11/17 14:32:39 | \tat sun.security.ssl.SSLTransport.decode(SSLTransport.java:149)\r\nINFO   | jvm 1    | 2020/11/17 14:32:39 | \tat sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1143)\r\nINFO   | jvm 1    | 2020/11/17 14:32:39 | \tat sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1054)\r\nINFO   | jvm 1    | 2020/11/17 14:32:39 | \tat sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:394)\r\nINFO   | jvm 1    | 2020/11/17 14:32:39 | \tat sun.security.ssl.SSLSocketImpl.ensureNegotiated(SSLSocketImpl.java:708)\r\nINFO   | jvm 1    | 2020/11/17 14:32:39 | \tat sun.security.ssl.SSLSocketImpl.access$100(SSLSocketImpl.java:72)\r\nINFO   | jvm 1    | 2020/11/17 14:32:39 | \tat sun.security.ssl.SSLSocketImpl$AppInputStream.read(SSLSocketImpl.java:791)\r\nINFO   | jvm 1    | 2020/11/17 14:32:39 | \tat org.apache.activemq.transport.tcp.TcpBufferedInputStream.fill(TcpBufferedInputStream.java:50)\r\nINFO   | jvm 1    | 2020/11/17 14:32:39 | \tat org.apache.activemq.transport.tcp.TcpTransport$2.fill(TcpTransport.java:634)\r\nINFO   | jvm 1    | 2020/11/17 14:32:39 | \tat org.apache.activemq.transport.tcp.TcpBufferedInputStream.read(TcpBufferedInputStream.java:59)\r\nINFO   | jvm 1    | 2020/11/17 14:32:39 | \tat org.apache.activemq.transport.tcp.TcpTransport$2.read(TcpTransport.java:619)\r\nINFO   | jvm 1    | 2020/11/17 14:32:39 | \tat java.io.DataInputStream.readInt(DataInputStream.java:387)\r\nINFO   | jvm 1    | 2020/11/17 14:32:39 | \tat org.apache.activemq.openwire.OpenWireFormat.unmarshal(OpenWireFormat.java:268)\r\nINFO   | jvm 1    | 2020/11/17 14:32:39 | \tat org.apache.activemq.transport.tcp.TcpTransport.readCommand(TcpTransport.java:240)\r\nINFO   | jvm 1    | 2020/11/17 14:32:39 | \tat org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:232)\r\nINFO   | jvm 1    | 2020/11/17 14:32:39 | \tat org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:215)\r\nINFO   | jvm 1    | 2020/11/17 14:32:39 | \tat java.lang.Thread.run(Thread.java:748)\r\n{noformat}\r\nServer-side exceptions similar to the below will show in {{$BAMBOO_HOME/logs/atlassian-bamboo.log}}\r\n{code:java}\r\n2020-11-11 08:31:57,330 ERROR [ActiveMQ BrokerService[bamboo] Task-14] [TransportConnector] Could not accept connection from tcp://192.168.1.131:41716 : javax.net.ssl.SSLException\r\n{code}\r\nThe below can be observed server-side in {{$BAMBOO_HOME/logs/atlassian-bamboo.log}} when connecting to the Tomcat SSL connector or with {{-Djavax.net.debug=all}} enabled to see the issue with ActiveMQ SSL (agents JMS):\r\n{noformat}\r\njava.lang.NullPointerException\r\n  \tat org.bouncycastle.crypto.signers.PSSSigner.generateSignature(Unknown Source)\r\n  \tat org.bouncycastle.jcajce.provider.asymmetric.rsa.PSSSignatureSpi.engineSign(Unknown Source)\r\n  \tat java.security.Signature$Delegate.engineSign(Signature.java:1382)\r\n  \tat java.security.Signature.sign(Signature.java:698)\r\n  \tat sun.security.ssl.ECDHServerKeyExchange$ECDHServerKeyExchangeMessage.<init>(ECDHServerKeyExchange.java:181)\r\n  \tat sun.security.ssl.ECDHServerKeyExchange$ECDHServerKeyExchangeProducer.produce(ECDHServerKeyExchange.java:499)\r\n  \tat sun.security.ssl.ClientHello$T12ClientHelloConsumer.consume(ClientHello.java:1020)\r\n  \tat sun.security.ssl.ClientHello$ClientHelloConsumer.onClientHello(ClientHello.java:727)\r\n  \tat sun.security.ssl.ClientHello$ClientHelloConsumer.consume(ClientHello.java:693)\r\n  \tat sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:377)\r\n  \tat sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:444)\r\n  \tat sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:422)\r\n  \tat sun.security.ssl.TransportContext.dispatch(TransportContext.java:182)\r\n  \tat sun.security.ssl.SSLTransport.decode(SSLTransport.java:149)\r\n  \tat sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1143)\r\n  \tat sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1054)\r\n  \tat sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:394)\r\n  \tat sun.security.ssl.SSLSocketImpl.ensureNegotiated(SSLSocketImpl.java:708)\r\n  \tat sun.security.ssl.SSLSocketImpl.access$100(SSLSocketImpl.java:72)\r\n  \tat sun.security.ssl.SSLSocketImpl$AppOutputStream.write(SSLSocketImpl.java:961)\r\n  \tat org.apache.activemq.transport.tcp.TcpBufferedOutputStream.flush(TcpBufferedOutputStream.java:115)\r\n  \tat java.io.DataOutputStream.flush(DataOutputStream.java:123)\r\n  \tat org.apache.activemq.transport.tcp.TcpTransport.oneway(TcpTransport.java:194)\r\n  \tat org.apache.activemq.transport.AbstractInactivityMonitor.doOnewaySend(AbstractInactivityMonitor.java:335)\r\n  \tat org.apache.activemq.transport.AbstractInactivityMonitor.oneway(AbstractInactivityMonitor.java:317)\r\n  \tat org.apache.activemq.transport.WireFormatNegotiator.sendWireFormat(WireFormatNegotiator.java:181)\r\n  \tat org.apache.activemq.transport.WireFormatNegotiator.sendWireFormat(WireFormatNegotiator.java:84)\r\n  \tat org.apache.activemq.transport.WireFormatNegotiator.start(WireFormatNegotiator.java:74)\r\n  \tat org.apache.activemq.transport.TransportFilter.start(TransportFilter.java:64)\r\n  \tat org.apache.activemq.broker.TransportConnection.start(TransportConnection.java:1072)\r\n  \tat org.apache.activemq.broker.TransportConnector$1$1.run(TransportConnector.java:218)\r\n  \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n  \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n  \tat java.lang.Thread.run(Thread.java:748)}\r\n{noformat}\r\nElastic agents may show:\r\n{noformat}\r\n2021-03-03 20:40:19,743 ERROR [tunnelserver:26224-1-thread-6] [TunnelAcceptor] Error while accepting tunnel connections.\r\njavax.net.ssl.SSLException: Received fatal alert: internal_error\r\nat sun.security.ssl.Alert.createSSLException(Alert.java:133)\r\nat sun.security.ssl.Alert.createSSLException(Alert.java:117)\r\nat sun.security.ssl.TransportContext.fatal(TransportContext.java:311)\r\nat sun.security.ssl.Alert$AlertConsumer.consume(Alert.java:293)\r\nat sun.security.ssl.TransportContext.dispatch(TransportContext.java:185)\r\nat sun.security.ssl.SSLTransport.decode(SSLTransport.java:149)\r\nat sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1143)\r\nat sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1054)\r\nat sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:394)\r\nat sun.security.ssl.SSLSocketImpl.ensureNegotiated(SSLSocketImpl.java:708)\r\nat sun.security.ssl.SSLSocketImpl.access$100(SSLSocketImpl.java:72)\r\nat sun.security.ssl.SSLSocketImpl$AppInputStream.read(SSLSocketImpl.java:791)\r\nat java.io.InputStream.read(InputStream.java:101)\r\nat com.atlassian.tunnel.tunnel.server.TunnelAcceptor.run(TunnelAcceptor.java:62)\r\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\nat java.lang.Thread.run(Thread.java:748)\r\n{noformat}\r\nh3. Workaround\r\n\r\n(!) {*}NOTE{*}: The following workarounds are applicable on Bamboo Server and Bamboo Elastic Agents.\r\nh5. *Option 1 - Rollback Java*\r\n\r\nRollback Java JDK8u272 to a previous version of JDK8. Also required for Bamboo Elastic Agents.\r\nh5. *Option 2 - Disable RSASSA-PSS algorithm*\r\n\r\n*Bamboo Server:*\r\n * Edit the {{$JAVA_HOME/jre/lib/security/java.security}} and add {{RSASSA-PSS}} to the {{{}jdk.tls.disabledAlgorithms{}}}:\r\n{code:java}\r\njdk.tls.disabledAlgorithms=SSLv3, RC4, DES, MD5withRSA, DH keySize < 1024, \\\r\nEC keySize < 224, 3DES_EDE_CBC, anon, NULL, RSASSA-PSS\r\n{code}\r\n\r\n * Or you can optionally create another file with the {{jdk.tls.disabledAlgorithms}} values listed above and refer to it by adding the following property to the {{{}$BAMBOO_INSTALL/bin/setenv.sh{}}}, in {{JVM_SUPPORT_RECOMMENDED_ARGS}}\r\n{code:java}\r\n-Djava.security.properties=/path/to/custom/java.security\r\n{code}\r\n\r\n*Bamboo Elastic Agent:*\r\n * Please read\u00a0[https://bugs.openjdk.java.net/browse/JDK-8226374] to understand why we need to change the Elastic Agent java settings\r\n * On the Elastic Agent, edit the {{$JAVA_HOME/jre/lib/security/java.security}} and add {{RSASSA-PSS}} to the {{jdk.tls.disabledAlgorithms}}\r\n{code:java}\r\njdk.tls.disabledAlgorithms=SSLv3, RC4, DES, MD5withRSA, DH keySize < 1024, \\\r\nEC keySize < 224, 3DES_EDE_CBC, anon, NULL, RSASSA-PSS{code}\r\n\r\n * It is also possible to use a custom {{java.security}} file as listed on the Bamboo Server example above. As each Elastic Agent setup is unique we'd rather leave this to the customer's discretion.\r\n\r\n\u00a0\r\n\r\nThis alone will fix the connection between agents and the server via the JMS broker \u2013 Bamboo Server only.\r\n\r\nIf you are experiencing SSL error with HTTPS requests directly to Tomcat, {*}in addition to disabling RSASSA-PSS above{*}, you'll also need to disable TLSv1.3 by setting {{{}sslEnabledProtocols=\"TLSv1.2\"{}}}. Example:\r\n{noformat}\r\n<Connector\r\n            port=\"8443\"\r\n            maxThreads=\"150\" minSpareThreads=\"25\"\r\n            connectionTimeout=\"20000\"\r\n            disableUploadTimeout=\"true\"\r\n            acceptCount=\"100\"\r\n            enableLookups=\"false\"\r\n            maxHttpHeaderSize=\"8192\"\r\n            useBodyEncodingForURI=\"true\"\r\n            URIEncoding=\"UTF-8\"\r\n            keystoreFile=\"/path/to/keystore.p12\"\r\n            keystorePass=\"changeit\"\r\n            scheme=\"https\" secure=\"true\" SSLEnabled=\"true\" sslProtocol=\"TLS\" \r\n            \r\n            sslEnabledProtocols=\"TLSv1.2\"\r\n\r\n            clientAuth=\"false\" />\r\n{noformat}",
      "summary": "bouncycastle throw NPE after upgrade to java 8 u272. linux agent fails to connect or UI won't load with ERR_SSL_PROTOCOL_ERROR"
    }
  },
  {
    "key": "BAM-21156",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-11-10T18:42:13.000+0000",
      "description": "Bamboo usually takes a lot of time to finish the import process. It would be great if Bamboo can import more data in less time.",
      "summary": "Speed up Bamboo import process"
    }
  },
  {
    "key": "BAM-21155",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-11-10T08:10:51.000+0000",
      "description": "h3. Issue Summary\r\n\r\nWhen performing svn branch detection, it is possible that there are connection issues (or any other issues preventing Bamboo to get svn branches). However, if this was a temporary connection issue, and subsequent connection test is ok, Bamboo does not throw original exception with the reason why it failed to detect branches and marks all vsc branches to be deleted and eventually deletes plan branches if automatic plan branch deletion is enabled.\r\n\r\nBamboo will try to detect branches:\u00a0\r\n{code:java}\r\nprotected boolean checkPathExists(final SVNClientManager clientManager, final SVNURL url) {\r\n    try {\r\n        SVNWCClient wcClient = clientManager.getWCClient();\r\n        wcClient.doInfo(url, SVNRevision.HEAD, SVNRevision.HEAD);\r\n    } catch (Exception e) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n{code}\r\nIf\u00a0wcClient.doInfo(url, SVNRevision.HEAD, SVNRevision.HEAD) fails, exception is caught and false is returned.\r\n\r\nThen, if path does not exist, Bamboo will test connection to svn repo and throw an exception if there are any issue with that. However, if failure to get branches was a network glitch, and by the time test connection is performed svn repo is available, Bamboo would return default branch as the only branch.\r\n{code:java}\r\nif (!checkPathExists(clientManager, branchesUrl)) {\r\n    if (manuallyDefinedDetectionPath) {\r\n        throw new RepositoryException(\"Path \" + branchesUrl + \" does not exist. Please check configuration of SVN repository in this job.\");\r\n    } else {\r\n        try {\r\n            clientManager.createRepository(svnRepositoryUrl, true).testConnection();\r\n        } catch (SVNException e) {\r\n            throw new RepositoryException(\"Error connecting to the repository\", e);\r\n        }\r\n        //if it passed connection test then it's branch root not configured, simply not detect branches\r\n        log.info(\"Path \" + branchesUrl + \" does not exist. Please check configuration of SVN repository. No branches found.\");\r\n        return Collections.singleton(defaultBranch);\r\n    }\r\n}\r\n{code}\r\nThis will make Bamboo mark vsc branches as deleted, and then delete plan branches according to configured policy (1 day in this example, i.e. same day):\u00a0\r\n{code:java}\r\n2020-11-10 08:25:06,195 INFO [http-nio-8085-exec-8] [SvnBranchDetector] Path http://localhost/svn/project1/branches does not exist. Please check configuration of SVN repository. No branches found.\r\n2020-11-10 08:25:12,285 INFO [9-BAM::PlanExec:pool-15-thread-3] [DefaultChangeDetectionManager] Found 1 open branches for SVN-SVN1\r\n2020-11-10 08:25:12,286 INFO [9-BAM::PlanExec:pool-15-thread-1] [DefaultChangeDetectionManager] Found 1 open branches for SVN-SVN3\r\n2020-11-10 08:25:12,288 INFO [http-nio-8085-exec-22] [AccessLogFilter] admin GET http://localhost:8085/ajax/planStatusHistoryNeighbouringSummaries.action?planKey=SVN-SVN&_=1604989393403 537091kb\r\n2020-11-10 08:25:12,288 INFO [9-BAM::PlanExec:pool-15-thread-2] [DefaultChangeDetectionManager] Found 1 open branches for SVN-SVN0\r\n2020-11-10 08:25:12,288 INFO [9-BAM::PlanExec:pool-15-thread-4] [DefaultChangeDetectionManager] Found 1 open branches for SVN-SVN2\r\n2020-11-10 08:25:12,292 INFO [9-BAM::PlanExec:pool-15-thread-3] [ChainBranchManagerImpl] Marking VCS branch branches/branch3 of chain branch SVN-SVN1 as removed because its name matches branches/branch3\r\n2020-11-10 08:25:12,293 INFO [9-BAM::PlanExec:pool-15-thread-2] [ChainBranchManagerImpl] Marking VCS branch branches/branch4 of chain branch SVN-SVN0 as removed because its name matches branches/branch4\r\n2020-11-10 08:25:12,295 INFO [9-BAM::PlanExec:pool-15-thread-4] [ChainBranchManagerImpl] Marking VCS branch branches/branch2 of chain branch SVN-SVN2 as removed because its name matches branches/branch2\r\n2020-11-10 08:25:12,295 INFO [9-BAM::PlanExec:pool-15-thread-1] [ChainBranchManagerImpl] Marking VCS branch branches/branch1 of chain branch SVN-SVN3 as removed because its name matches branches/branch1\r\n2020-11-10 08:25:12,372 INFO [9-BAM::PlanExec:pool-15-thread-2] [ChainBranchManagerImpl] Chain branch SVN-SVN0 was disabled because its VCS branch was deleted\r\n2020-11-10 08:25:12,375 INFO [9-BAM::PlanExec:pool-15-thread-1] [ChainBranchManagerImpl] Chain branch SVN-SVN3 was disabled because its VCS branch was deleted\r\n2020-11-10 08:25:12,385 INFO [9-BAM::PlanExec:pool-15-thread-3] [ChainBranchManagerImpl] Chain branch SVN-SVN1 was disabled because its VCS branch was deleted\r\n2020-11-10 08:25:12,388 INFO [9-BAM::PlanExec:pool-15-thread-4] [ChainBranchManagerImpl] Chain branch SVN-SVN2 was disabled because its VCS branch was deleted{code}\r\nThis results in plan branches deletion, and it is impossible to find out any reason for that since Bamboo does not throw an exception\u00a0\r\nh3. Steps to Reproduce\r\n * Start svn server, create a project with trunk and a few branches\r\n * In Bamboo, set up svn repo with a few branches (branches directory). Use all default settings (auto branch path detection)\r\n * Set up a plan with this linked repo and enable auto branch detection and deletion\r\n * When branch detection happens, stop with a debugger at wcClient.doInfo(url, SVNRevision.HEAD, SVNRevision.HEAD) in com.atlassian.bamboo.repository.svn.v2.AbstractSvnExecutor#checkPathExists:\r\n\r\n{code:java}\r\nprotected boolean checkPathExists(final SVNClientManager clientManager, final SVNURL url) {\r\n    try {\r\n        SVNWCClient wcClient = clientManager.getWCClient();\r\n        wcClient.doInfo(url, SVNRevision.HEAD, SVNRevision.HEAD);\r\n    } catch (Exception e) {\r\n        return false;\r\n    }\r\n    return true;\r\n{code}\r\n * Stop svn server to simulate a temporary network glitch\r\n * Set a break point at\u00a0clientManager.createRepository(svnRepositoryUrl, true).testConnection() in com.atlassian.bamboo.repository.svn.v2.SvnBranchDetector#getOpenBranches:\r\n\r\n{code:java}\r\nif (!checkPathExists(clientManager, branchesUrl)) {\r\n    if (manuallyDefinedDetectionPath) {\r\n        throw new RepositoryException(\"Path \" + branchesUrl + \" does not exist. Please check configuration of SVN repository in this job.\");\r\n    } else {\r\n        try {\r\n            clientManager.createRepository(svnRepositoryUrl, true).testConnection();\r\n        } catch (SVNException e) {\r\n            throw new RepositoryException(\"Error connecting to the repository\", e);\r\n        }\r\n        //if it passed connection test then it's branch root not configured, simply not detect branches\r\n        log.info(\"Path \" + branchesUrl + \" does not exist. Please check configuration of SVN repository. No branches found.\");\r\n        return Collections.singleton(defaultBranch);\r\n    }{code}\r\n * Start svn server\r\n * Resume application\r\n\r\nh3. Expected Results\r\n * Exception caught in\u00a0com.atlassian.bamboo.repository.svn.v2.AbstractSvnExecutor#checkPathExists is thrown and printed to log\r\n * Bamboo retries branch detection or gives up until next check\r\n * Bamboo does not make a decision to delete all plan branches because of a 1 second network glitch\r\n\r\nh3. Actual Results\r\n\r\nBamboo fails to get branches, test connection is successful, so it thinks branches have been deleted. Plans branches are marked for deletion and get deleted when due time comes (according to configured timeout in days). No exception is printed in log, thus no clue why getting branches failed.\r\nh3. Workaround\r\n\r\nIf path to branches is explicitly set in repo configuration, Bamboo behaves differently and throws an exception, and then keeps trying, so a 1 second network glitch will not trigger plan branch deletion:\r\n{code:java}\r\nif (manuallyDefinedDetectionPath) {\r\n    throw new RepositoryException(\"Path \" + branchesUrl + \" does not exist. Please check configuration of SVN repository in this job.\");\r\n}\r\n{code}",
      "summary": "SVN branch detection: just one failure in connection makes Bamboo delete plan branches"
    }
  },
  {
    "key": "BAM-21154",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-11-09T06:02:35.000+0000",
      "description": "It would be great if Bamboo can parse results of npm tests and:\r\n * show total number of tests\r\n * show passing tests\r\n * show failed tests\r\n * show quarantined tests (make it possible not to fail the task if certain tests fail)",
      "summary": "Parse NPM Tests"
    }
  },
  {
    "key": "BAM-21153",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-11-05T15:16:10.000+0000",
      "description": "Intermittent ssh Authentication failures are hard to isolate what is happening.  The logs can erroneously point to a failure in Bamboo.  If we were able to enable logging the ssh public key to the logs we could point to external network problems over time.  We could also then have a way to document key changes.",
      "summary": "Log public key on failed ssh session"
    }
  },
  {
    "key": "BAM-21152",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-03-05T11:41:57.000+0000",
      "created": "2020-11-05T10:39:13.000+0000",
      "description": "h3. Issue Summary\r\n\r\nNon-admin users get Access Denied errors when trying to clone a deployment environment with dedicated agents.\r\nh3. Steps to Reproduce\r\nh5. What permissions are needed?\r\n\r\nRegular users (i.e. users without administrative access) can clone deployment environments in Bamboo provided they have the following permissions:\r\n # *Access* permission under the _Bamboo admin > Overview > Security > Global permissions_ page.\r\n # *View* and *Edit* permissions on the deployment project.\r\n # *View* permission on the deployment environment they're trying to clone.\r\n\r\nh5. As a Bamboo admin\r\n # Create an environment inside one of your deployment projects.\r\n # Dedicate an agent to build that environment.\r\n # Create a new user (e.g. test-user).\r\n # Make sure the user has the permissions mentioned above and is NOT an admin or restricted admin.\r\n\r\nh5. As a regular user\r\n # Log in to Bamboo with the user account created in the previous step.\r\n # Edit the deployment project.\r\n # Clone the deployment environment created in the previous step.\r\n\r\nh3. Expected Results\r\n\r\nI can think of a few scenarios that differ from the results we have today.\r\n # Let users clone the environment and remove the agent dedication in the cloned environment.\r\n # Display a more meaningful error message to let users know why they cannot clone the environment\u00a0i.e. because there are dedicated agents they don't have access to manage.\r\n # Do not display the 'Clone' option to the user in the first place.\r\n\r\nh3. Actual Results\r\n\r\nUsers get the following Access Denied error and do not understand why they're unable to clone the environment.\r\n\r\n!Screenshot 2020-11-05 at 11.32.55.png|thumbnail!\r\nh3. Workaround\r\n # Ask an admin or restricted admin to remove the agent dedication and try to clone the environment again.\r\n # Ask an admin to clone the environment for you and remove the agent dedication in the cloned environment.\r\n # Dedicate the agent to build the deployment project instead of the deployment environment. This will allow regular users to clone the deployment environment.",
      "summary": "Cloning a deployment environment with dedicated agents leads to Access Denied errors"
    }
  },
  {
    "key": "BAM-21151",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-09-20T17:06:12.000+0000",
      "created": "2020-11-04T21:20:10.000+0000",
      "description": "It appears that the Tomcat version packaged wth 7.1.x is a bit out-dated\u00a0 and potnetially carries a known bug that can cause a denial of service.\r\n\r\nLikely in many companies that forces for putting special allowance and exceptional handling in place, and even though it seems rather errro-prone.\r\n\r\nThus, please update Tomcat to the latest or a recent version at least ,so to guarantee least vulnerability along with ease of use for Bamboo.",
      "summary": "Update Tomcat version used in Bamboo"
    }
  },
  {
    "key": "BAM-21150",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-11-03T16:49:46.000+0000",
      "description": "Currently, Bamboo jobs kicked off via a Scheduled Trigger do not have any support for overriding variables. It would be useful to allow overriding of these variables (just like \"Run customized\" allows) per trigger.\r\n\r\nIn my use case, I want to be able to trigger a plan multiple times a day, but with different variables/customizations on each run. Being able to save this configuration with the plan itself (as triggers) would greatly reduce the complexity of managing this plan otherwise.",
      "summary": "Add support for Customized Scheduled Triggers"
    }
  },
  {
    "key": "BAM-21149",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-11-03T00:40:10.000+0000",
      "description": "h3. Issue Summary\r\nBamboo will continue to send email notifications for a successful specs execution to the author of a commit that removes specs from the repo on periodic (not every, depends on orphan state removal) scans.\r\n\r\nh3. Steps to Reproduce\r\n# Create a plan managed by RSS\r\n# Remove your *bamboo-specs* folder and commit to repo: {{git rm -r bamboo-specs}}\r\n# Commits to this repo now generally skip RSS scans with the following message:\r\n{code}\r\n2020-10-26 06:05:12,593 INFO [15-BAM::SpecsDetection:pool-22-thread-3] [RssDetectionServiceImpl] Skipping Specs detection. Bamboo Specs have already been executed for a newer revision (current=0417b35ce4e2050c9e1e39590c754a993278a1a4, previous=0417b35ce4e2050c9e1e39590c754a993278a1a4) in repository 'REPRO-SPEC'.\r\n{code}\r\n# Trigger the orphaned specs state removal job:\r\n{code}\r\ncurl --user bamboo_admin -p -H \"Content-Type: application/json\" -X POST -d '{\"name\":\"removeOrphanedSpecsStateJob\", \"groupName\":\"removeOrphanedSpecsStateGroup\"}' http://localhost:8085/rest/admin/latest/scheduler/jobs/trigger\r\n{code}\r\n# The next commit (or manual scan) will trigger a RSS scan and email to the author of the removal commit\r\n# Even if you delete the plan that this spec manages to \"unhook\" it from RSS, the can will still be triggered by commits and notify for the first run that occurs once the orphaned spec state removal job kicks in.\r\n\r\nh3. Expected Results\r\nNo email is sent.\r\n\r\nh3. Actual Results\r\nEmail is sent to the author of the specs removal commit on some commits to the repository.\r\n\r\nh3. Workaround\r\nSince {{bamboo-specs}} have been removed from the repository, disable the Specs scan for the repository: *Linked Repository >> Bamboo Specs >> Allow Bamboo to scan this repository for YAML and Java Specs*",
      "summary": "Bamboo will continue to send email notifications for a commit that removes specs from the repo on periodic scans"
    }
  },
  {
    "key": "BAM-21148",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-11-02T14:33:54.000+0000",
      "description": "Customer is looking for a way for admins to define build time threshold that force stops and cleans up builds if they exceed a defined time.\u00a0\r\n\r\nFor example, admins do not want builds to run longer than 2 hours, no matter the type or goals of the build.\u00a0 This helps prevent users from abusing the system and hogging agent resources by running excessive QA tests or security scans.\r\n\r\nThere was an issue relating to this feature suggestion @\u00a0BAM-931 .\u00a0 This issue is flagged as done, but doesn't offer the ability to enforce a time-based threshold that only application administrators have access to set.\u00a0\u00a0",
      "summary": "Admin configuration to force stop builds that exceed a defined time threshold"
    }
  },
  {
    "key": "BAM-21147",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-11-03T15:02:00.000+0000",
      "created": "2020-11-02T08:07:53.000+0000",
      "description": "h3. Issue Summary\r\n\r\nIf there are no permissions explicitly configured for an entity in Bamboo (eg. plan, deployment project, repository), then permissions from another entity will be used for it during import\r\nh3. Steps to Reproduce\r\n # Create an entity in Bamboo for which permissions can be set, and make sure that it has no permissions explicitly configured, eg. environment like on the screenshot below:\r\n!image-2020-11-02-09-02-25-020.png|width=380,height=337!\r\n # Export Bamboo\u00a0\r\n # Import Bamboo from zip created in previous steps\r\n\r\nh3. Expected Results\r\n\r\nPermissions are the same as before import (i.e. no permissions are set)\r\nh3. Actual Results\r\n\r\nEntity has permissions from another (random) entity, eg. environment created in the first step could end up with permissions like this:\r\n\r\n!image-2020-11-02-09-06-58-035.png|width=300,height=298!\r\nh3. Workaround\r\n\r\n\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "If there are no permissions explicitly configured for an entity in Bamboo, then permissions from another entity will be used for it during import"
    }
  },
  {
    "key": "BAM-21146",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-10-30T05:09:29.000+0000",
      "description": "h3. Problem Definition\r\n\r\nCurrently in Bamboo, if a single repository is used frequently across plans and has long running fetch operations, e.g. {{git lfs fetch}} it can cause triggering delays as change detection requests wait for a cache lock since they all share the same cache.\r\n\r\nh3. Suggested Solution\r\n\r\nAllow change detection requests for other plans to be processed while others that would require a current cache lock are deferred.\r\n\r\n",
      "summary": "High traffic / commonly used repository can cause Plan Exec thread contention which delays triggers"
    }
  },
  {
    "key": "BAM-21145",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-10-29T20:42:45.000+0000",
      "description": "h3. Problem Definition\r\n\r\nBuild tasks must be edited individually\r\n\r\nh3. Suggested Solution\r\n\r\nAdd the ability within the UI to bulk edit all build tasks within a project of a certain type, to change settings.\r\n\r\nfor example: change which JDK is used for a build task.\r\n\r\nh3. Workaround\r\n\r\nUse Bamboo Specs, to control the configuration of build plans/tasks",
      "summary": "Add Capability to Bulk Edit Build tasks"
    }
  },
  {
    "key": "BAM-21144",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-10-29T19:12:23.000+0000",
      "description": "h3. Issue Summary\r\nView plan as Java Specs or View plan as YAML throws exceptions if the artifact configured in artifact subscription is not shared.\r\n\r\nh3. Steps to Reproduce\r\n(i) It's reproducible in Bamboo versions older than 6.10. But it can also happen if you have this configuration and then upgrade Bamboo to 7.1.\r\n # Create two jobs in one stage\r\n # Create one artifact on each job with the same name and make the first one shared and the other one non-shared\r\n # Create another stage and create a job in this stage\r\n # Then create an artifact dependency on the job in the second stage of this artifact\r\n # Click on the plan configuration >> Actions >> View plan as Java Specs or View plan as YAML\r\n\r\nor you can use the following Specs that will create the stages, jobs and the artifacts, you will just need to add the artifact dependency afterwards:\r\n\r\n{noformat}\r\nimport com.atlassian.bamboo.specs.api.BambooSpec;\r\nimport com.atlassian.bamboo.specs.api.builders.BambooKey;\r\nimport com.atlassian.bamboo.specs.api.builders.permission.PermissionType;\r\nimport com.atlassian.bamboo.specs.api.builders.permission.Permissions;\r\nimport com.atlassian.bamboo.specs.api.builders.permission.PlanPermissions;\r\nimport com.atlassian.bamboo.specs.api.builders.plan.Job;\r\nimport com.atlassian.bamboo.specs.api.builders.plan.Plan;\r\nimport com.atlassian.bamboo.specs.api.builders.plan.PlanIdentifier;\r\nimport com.atlassian.bamboo.specs.api.builders.plan.Stage;\r\nimport com.atlassian.bamboo.specs.api.builders.plan.artifact.Artifact;\r\nimport com.atlassian.bamboo.specs.api.builders.plan.branches.BranchCleanup;\r\nimport com.atlassian.bamboo.specs.api.builders.plan.branches.PlanBranchManagement;\r\nimport com.atlassian.bamboo.specs.api.builders.plan.configuration.AllOtherPluginsConfiguration;\r\nimport com.atlassian.bamboo.specs.api.builders.plan.configuration.ConcurrentBuilds;\r\nimport com.atlassian.bamboo.specs.api.builders.project.Project;\r\nimport com.atlassian.bamboo.specs.builders.task.ScriptTask;\r\nimport com.atlassian.bamboo.specs.util.BambooServer;\r\nimport com.atlassian.bamboo.specs.util.MapBuilder;\r\n\r\n@BambooSpec\r\npublic class PlanSpec {\r\n    \r\n    public Plan plan() {\r\n        final Plan plan = new Plan(new Project()\r\n                .key(new BambooKey(\"PROJECT\"))\r\n                .name(\"PROJECT\"),\r\n            \"PLAN\",\r\n            new BambooKey(\"PLAN\"))\r\n            .pluginConfigurations(new ConcurrentBuilds())\r\n            .stages(new Stage(\"stage1\")\r\n                    .jobs(new Job(\"job01\",\r\n                            new BambooKey(\"JOB1\"))\r\n                            .artifacts(new Artifact()\r\n                                    .name(\"artifact01\")\r\n                                    .copyPattern(\"**/*.zip\")\r\n                                    .location(\".\")\r\n                                    .shared(true)\r\n                                    .required(true))\r\n                            .tasks(new ScriptTask()\r\n                                    .inlineBody(\"echo \\\"starting...\\\"\")),\r\n                        new Job(\"job02\",\r\n                            new BambooKey(\"JOB2\"))\r\n                            .artifacts(new Artifact()\r\n                                    .name(\"artifact01\")\r\n                                    .copyPattern(\"**/*.class\")\r\n                                    .location(\".\")\r\n                                    .required(true))\r\n                            .tasks(new ScriptTask()\r\n                                    .inlineBody(\"echo \\\"starting...\\\"\"))),\r\n                new Stage(\"stage2\")\r\n                    .jobs(new Job(\"job03\",\r\n                            new BambooKey(\"JOB\"))\r\n                            .pluginConfigurations(new AllOtherPluginsConfiguration()\r\n                                    .configuration(new MapBuilder()\r\n                                            .put(\"custom\", new MapBuilder()\r\n                                                .put(\"auto\", new MapBuilder()\r\n                                                    .put(\"regex\", \"\")\r\n                                                    .put(\"label\", \"\")\r\n                                                    .build())\r\n                                                .put(\"buildHangingConfig.enabled\", \"false\")\r\n                                                .put(\"ncover.path\", \"\")\r\n                                                .put(\"clover\", new MapBuilder()\r\n                                                    .put(\"path\", \"\")\r\n                                                    .put(\"license\", \"\")\r\n                                                    .put(\"useLocalLicenseKey\", \"true\")\r\n                                                    .build())\r\n                                                .put(\"queue.priority\", \"DEFAULT\")\r\n                                                .build())\r\n                                            .build()))\r\n                            .tasks(new ScriptTask()\r\n                                    .inlineBody(\"echo \\\"starting...\\\"\"))))\r\n            .planBranchManagement(new PlanBranchManagement()\r\n                    .delete(new BranchCleanup())\r\n                    .notificationForCommitters())\r\n            .forceStopHungBuilds();\r\n        return plan;\r\n    }\r\n    \r\n    public PlanPermissions planPermission() {\r\n        final PlanPermissions planPermission = new PlanPermissions(new PlanIdentifier(\"PROJECT\", \"PLAN\"))\r\n            .permissions(new Permissions()\r\n                    .userPermissions(\"admin\", PermissionType.BUILD, PermissionType.CLONE, PermissionType.ADMIN, PermissionType.VIEW, PermissionType.EDIT));\r\n        return planPermission;\r\n    }\r\n    \r\n    public static void main(String... argv) {\r\n        BambooServer bambooServer = new BambooServer(\"http://bamboo-server:8085\");\r\n        final PlanSpec planSpec = new PlanSpec();\r\n        \r\n        final Plan plan = planSpec.plan();\r\n        bambooServer.publish(plan);\r\n        \r\n        final PlanPermissions planPermission = planSpec.planPermission();\r\n        bambooServer.publish(planPermission);\r\n    }\r\n}\r\n{noformat}\r\n\r\nh3. Expected Results\r\nExport the plan as Java Specs or YAML with success.\r\n\r\nh3. Actual Results\r\nBamboo shows errors in the UI and in the logs and fail to export the plan as Specs or YAML:\r\n{noformat}\r\nArtifact artifact01 subscribed in job job03 is not a shared artifact\r\n------------------------------\r\nArtifact artifact03 subscribed in job job03 is not a shared artifact\r\n------------------------------\r\nArtifact artifact03 subscribed in job job03 is not a shared artifact\r\n\tat com.atlassian.bamboo.specs.api.validators.common.ImporterUtils.checkNoErrors(ImporterUtils.java:54)\r\n\tat com.atlassian.bamboo.specs.api.model.plan.PlanProperties.validate(PlanProperties.java:194)\r\n\tat com.atlassian.bamboo.specs.api.model.plan.PlanProperties.<init>(PlanProperties.java:101)\r\n\tat com.atlassian.bamboo.specs.api.builders.plan.Plan.build(Plan.java:492)\r\n\tat com.atlassian.bamboo.specs.api.builders.plan.Plan.build(Plan.java:56)\r\n\tat com.atlassian.bamboo.specs.api.builders.CallEntityPropertiesBuilder.build(CallEntityPropertiesBuilder.java:10)\r\n\tat com.atlassian.bamboo.specs.api.util.EntityPropertiesBuilders.build(EntityPropertiesBuilders.java:14)\r\n\tat com.atlassian.bamboo.ww2.actions.build.admin.config.ViewPlanSpecs.code(ViewPlanSpecs.java:52)\r\n\tat com.atlassian.bamboo.ww2.actions.build.admin.config.ViewPlanSpecs.input(ViewPlanSpecs.java:29)\r\n{noformat}\r\n\r\nh3. Workaround\r\nThe workaround is to manually delete all the non-shared artifacts that are subscribed to any jobs and contain the same name as the shared artifact. The select query below can be used to see which artifacts are non-shared and are subscribed in the artifact dependency:\r\n\r\n{code:sql}\r\nSELECT B.FULL_KEY          AS FULL_KEY,\r\n       CS.NAME             AS STAGE_NAME,\r\n       B.TITLE             AS JOB_NAME,\r\n       ARTD.LABEL          AS ARTIFACT_NAME,\r\n       ARTD.COPY_PATTERN   AS COPY_PATTERN,\r\n       ARTD.SRC_DIRECTORY  AS SRC_DIRECTORY,\r\n       ARTD.CHAIN_ARTIFACT AS SHARED_ARTIFACT\r\nFROM ARTIFACT_DEFINITION ARTD \r\nINNER JOIN BUILD B ON ARTD.PRODUCER_JOB_ID = B.BUILD_ID\r\nINNER JOIN CHAIN_STAGE CS ON B.STAGE_ID = CS.STAGE_ID\r\nWHERE ARTD.CHAIN_ARTIFACT = FALSE\r\nAND ARTD.LABEL IN (SELECT ARTD1.LABEL\r\n                   FROM ARTIFACT_SUBSCRIPTION ARTS1 \r\n                   INNER JOIN ARTIFACT_DEFINITION ARTD1 ON ARTD1.ARTIFACT_DEFINITION_ID = ARTS1.ARTIFACT_DEFINITION_ID\r\n                   WHERE ARTD1.CHAIN_ARTIFACT = TRUE\r\n                   AND ARTD1.LABEL = ARTD.LABEL);\r\n{code}",
      "summary": "Export to Bamboo Specs failed: Artifact subscribed in job is not a shared artifact"
    }
  },
  {
    "key": "BAM-21143",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-12-01T10:31:11.000+0000",
      "created": "2020-10-28T15:16:18.000+0000",
      "description": "h3. Issue Summary\r\n\r\nIf you override a plan variable with nested variable, an error will occur in Variables tab on the branch configuration page.\r\nh3. Steps to Reproduce\r\n # Create a plan\r\n # Create a branch on that plan\r\n # Add a variable with Key\u00a0{{foo}}\u00a0to the Plan\r\n # Override the value of variable\u00a0{{foo}}, with a value including a Nested Variable eg:\u00a0{{$\\{system.test_variable_name}}}\r\n # Go to the Variables tab of the Branch configuration\r\n\r\nh3. Expected Results\r\n\r\nTab with variables is visible with correct overriden values.\r\nh3. Workaround\r\n\r\nPlease remove any references to nested variables, and leave the values of variables as the expanded variable.\r\nh3. Actual Results\r\n{noformat}\r\n-\r\n{noformat}\r\n\u00a0",
      "summary": "Overriding plan variable with nested variable results in branch config page error"
    }
  },
  {
    "key": "BAM-21142",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-10-28T09:22:24.000+0000",
      "description": "h3. Problem Definition\r\n\r\nBamboo masks a value in the build logs whenever it contains 'password', 'sshKey', 'secret' or 'passphrase' in the variable that is defined either globally or in plan/project level or in the deployment environment. However, it is not masked when they are displayed in Test result tab in the build log.\r\nh3. Suggested Solution\r\n\r\nMake test result tab mask sensitive values as it masks in the build log.\r\nh3. Why this is important\r\n\r\nPasswords might be displayed in Test results.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available.",
      "summary": "Test result section displays passwords in plain text without masking"
    }
  },
  {
    "key": "BAM-21141",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-10-27T21:05:59.000+0000",
      "description": "h3. Issue Summary\r\n\r\nBamboo allows to label a build plan or a build result with a label containing \"+\"\u00a0 character, but the label\u00a0 filtering\u00a0 does not work on that label.\r\nh3. Steps to Reproduce\r\n # Label some build results with \"one+two\"\r\n # Click on the label to filter build results with that label\r\n\r\nh3. Expected Results\r\n\r\nDisplay the list of build results labeled with \"one+two\"\r\nh3. Actual Results\r\n\r\nNo plans displayed for label \"one two\"\r\nh3. Workaround\r\n\r\nNone",
      "summary": "Filtering by label fails with some characters"
    }
  },
  {
    "key": "BAM-21140",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-10-27T18:59:03.000+0000",
      "description": "h3. Problem Definition\r\nEvery time a commit is made in a Specs repository, Bamboo will recompile all the plan specs in it, and for each, it will produce a log.\r\n\r\nFor repositories with many specs, this behavior can mess up with the builds logs, as new commits are made more frequently, and the build logs can get lost.\r\n\r\n\u00a0!Screen Shot 2020-10-27 at 15.58.08.png|thumnail!\r\n\r\nh3. Suggestion\r\nDon't show the specs update logs if a plan didn't change or create a new separated tab showing only the specs logs.",
      "summary": "Do not show specs update logs in plans that were not modified"
    }
  },
  {
    "key": "BAM-21139",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-07-28T12:14:54.000+0000",
      "created": "2020-10-27T11:30:47.000+0000",
      "description": "h3. Problem\r\n\r\nThe bamboo specs states cleanup process fails with foreign key constraint violation errors on the DEPLOYMENT_PROJECT table when attempting to remove a record inside the VCS_SPECS_STATE table.\r\n\r\n{noformat}\r\nCaused by: org.springframework.dao.DataIntegrityViolationException: could not execute batch; SQL [delete from VCS_SPECS_STATE where VCS_SPECS_STATE_ID=?]; constraint [BAMBOO.FK_M9NNB8AMB4KAI65ULI04DDT4M]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute batch\r\n{noformat}\r\n\r\nh3. Environment\r\n* Bamboo 7.1.1\r\n\r\nh3. Steps to Reproduce\r\n# Create a linked repository configuration in Bamboo pointing to a Bitbucket Server repository hosting your specs code.\r\n# Create a new empty project (SPECS) and build plan (STASH) in Bamboo.\r\n# Use the following YAML specs file to create a deployment project:\r\n{noformat}\r\n---\r\nversion: 2\r\ndeployment:\r\n  name: deployment\r\n  source-plan: SPECS-STASH\r\n \r\nrelease-naming: release-1\r\n \r\nenvironments:\r\n  - Production\r\n \r\nProduction:\r\n  triggers:\r\n    - build-success\r\n  tasks:\r\n    - clean\r\n    - artifact-download\r\n    - script:\r\n        - echo hello\r\n{noformat}\r\n# Scan the repository for specs code inside the linked repository configuration a few times (each time you scan new entries will be added to the VCS_SPECS_SOURCE and VCS_SPECS_STATE tables).\r\n# At this point a you should have a new deployment project.\r\n# Since you clicked the scan button a few times we now have orphaned specs states in the database and need to clean them up.\r\n# Trigger the specs states cleanup process.\r\n#* You can add the following [system attribute|https://confluence.atlassian.com/bamboo/configuring-your-system-properties-289277345.html] to modify the cadence of the specs states cleanup process. It's running every 2am by default. Let's make it run every 5 minutes.\r\n{noformat}\r\n-Dbamboo.orphaned.specs.states.cleanup.cron=\"0 0/5 * ? * *\"\r\n{noformat}\r\n# Restart Bamboo.\r\n# Confirm the schedule has changed by looking for the following information in the Bamboo logs:\r\n{noformat}\r\n2020-10-27 10:28:08,335 INFO [localhost-startStop-1] [RemoveOrphanedSpecsStateScheduler] Used '0 0/5 * ? * *' to schedule RemoveOrphanedSpecsStateJob. Next trigger time Tue Oct 27 10:30:00 GMT 2020\r\n{noformat}\r\n# After starting Bamboo wait 5 minutes for the process to kick in.\r\n\r\nh3. Expected Results\r\n\r\nThe specs states cleanup process should remove old/orphaned entries and leave the last entry that's associated to the deployment project in the database.\r\n\r\n{noformat}\r\n2020-10-27 10:35:00,020 INFO [scheduler_Worker-8] [BambooSpecsManagerImpl] Starting specs states cleanup\r\n2020-10-27 10:35:00,034 INFO [scheduler_Worker-8] [BambooSpecsManagerImpl] Removing orphaned specs states for repository 6029313 and branch develop\r\n2020-10-27 10:35:00,058 INFO [scheduler_Worker-8] [BambooSpecsManagerImpl] Removing orphaned specs states for repository 6029313 and branch master\r\n2020-10-27 10:35:00,158 INFO [scheduler_Worker-8] [BambooSpecsManagerImpl] Specs states cleanup finished. Removed 17 records\r\n2020-10-27 10:35:00,159 INFO [scheduler_Worker-8] [RemoveOrphanedSpecsStateJob] Completed removal of old Bamboo Specs states in 157.0 ms. Removed 17 record(s).\r\n{noformat}\r\n\r\nh3. Actual Results\r\n\r\nBamboo tries to remove the entry associated to the deployment project and fails to do so because there's an existing link there. It seems we're only checking build plans for existing links and not deployment projects:\r\n\r\n{noformat}\r\n2020-10-27 11:00:00,006 INFO [scheduler_Worker-3] [BambooSpecsManagerImpl] Starting specs states cleanup\r\n2020-10-27 11:00:00,013 INFO [scheduler_Worker-3] [BambooSpecsManagerImpl] Removing orphaned specs states for repository 6029313 and branch master\r\n2020-10-27 11:00:00,021 INFO [scheduler_Worker-3] [AbstractBatchImpl] HHH000010: On release of batch it still contained JDBC statements\r\n2020-10-27 11:00:00,022 ERROR [scheduler_Worker-3] [BatchingBatch] HHH000315: Exception executing batch [java.sql.BatchUpdateException: Batch entry 0 delete from VCS_SPECS_STATE where VCS_SPECS_STATE_ID=7110663 was aborted: ERROR: update or delete on table \"vcs_specs_source\" violates foreign key constraint \"fk_m9nnb8amb4kai65uli04ddt4m\" on table \"deployment_project\"\r\n  Detail: Key (vcs_specs_source_id)=(7143431) is still referenced from table \"deployment_project\".  Call getNextException to see other errors in the batch.], SQL: delete from VCS_SPECS_STATE where VCS_SPECS_STATE_ID=?\r\n2020-10-27 11:00:00,023 WARN [scheduler_Worker-3] [SqlExceptionHelper] SQL Error: 0, SQLState: 23503\r\n2020-10-27 11:00:00,023 ERROR [scheduler_Worker-3] [SqlExceptionHelper] Batch entry 0 delete from VCS_SPECS_STATE where VCS_SPECS_STATE_ID=7110663 was aborted: ERROR: update or delete on table \"vcs_specs_source\" violates foreign key constraint \"fk_m9nnb8amb4kai65uli04ddt4m\" on table \"deployment_project\"\r\n  Detail: Key (vcs_specs_source_id)=(7143431) is still referenced from table \"deployment_project\".  Call getNextException to see other errors in the batch.\r\n2020-10-27 11:00:00,024 ERROR [scheduler_Worker-3] [SqlExceptionHelper] ERROR: update or delete on table \"vcs_specs_source\" violates foreign key constraint \"fk_m9nnb8amb4kai65uli04ddt4m\" on table \"deployment_project\"\r\n  Detail: Key (vcs_specs_source_id)=(7143431) is still referenced from table \"deployment_project\".\r\n2020-10-27 11:00:00,025 ERROR [scheduler_Worker-3] [ExceptionMapperStandardImpl] HHH000346: Error during managed flush [org.hibernate.exception.ConstraintViolationException: could not execute batch]\r\n2020-10-27 11:00:00,027 ERROR [scheduler_Worker-3] [JobRunShell] Job removeOrphanedSpecsStateGroup.removeOrphanedSpecsStateJob threw an unhandled Exception:\r\norg.springframework.dao.DataIntegrityViolationException: could not execute batch; SQL [delete from VCS_SPECS_STATE where VCS_SPECS_STATE_ID=?]; constraint [fk_m9nnb8amb4kai65uli04ddt4m]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute batch\r\n\tat org.springframework.orm.hibernate5.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:247)\r\n\tat org.springframework.orm.hibernate5.HibernateTransactionManager.convertHibernateAccessException(HibernateTransactionManager.java:801)\r\n\tat org.springframework.orm.hibernate5.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:637)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:746)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:714)\r\n\tat sun.reflect.GeneratedMethodAccessor220.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:205)\r\n\tat com.sun.proxy.$Proxy109.commit(Unknown Source)\r\n\tat org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:152)\r\n\tat com.atlassian.bamboo.persistence.BambooTransactionHibernateTemplate.execute(BambooTransactionHibernateTemplate.java:28)\r\n\tat com.atlassian.bamboo.persistence.BambooTransactionHibernateTemplate.execute(BambooTransactionHibernateTemplate.java:33)\r\n\tat com.atlassian.bamboo.specs.BambooSpecsManagerImpl.removeOrphanedSpecStatesNoTx(BambooSpecsManagerImpl.java:129)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n        ...\r\nCaused by: java.sql.BatchUpdateException: Batch entry 0 delete from VCS_SPECS_STATE where VCS_SPECS_STATE_ID=7110663 was aborted: ERROR: update or delete on table \"vcs_specs_source\" violates foreign key constraint \"fk_m9nnb8amb4kai65uli04ddt4m\" on table \"deployment_project\"\r\n  Detail: Key (vcs_specs_source_id)=(7143431) is still referenced from table \"deployment_project\".  Call getNextException to see other errors in the batch.\r\n\tat org.postgresql.jdbc.BatchResultHandler.handleError(BatchResultHandler.java:148)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2212)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:509)\r\n\tat org.postgresql.jdbc.PgStatement.executeBatch(PgStatement.java:853)\r\n\tat org.postgresql.jdbc.PgPreparedStatement.executeBatch(PgPreparedStatement.java:1546)\r\n\tat org.apache.tomcat.dbcp.dbcp2.DelegatingStatement.executeBatch(DelegatingStatement.java:242)\r\n\tat org.apache.tomcat.dbcp.dbcp2.DelegatingStatement.executeBatch(DelegatingStatement.java:242)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchingBatch.performExecution(BatchingBatch.java:118)\r\n\t... 48 more\r\nCaused by: org.postgresql.util.PSQLException: ERROR: update or delete on table \"vcs_specs_source\" violates foreign key constraint \"fk_m9nnb8amb4kai65uli04ddt4m\" on table \"deployment_project\"\r\n  Detail: Key (vcs_specs_source_id)=(7143431) is still referenced from table \"deployment_project\".\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2468)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2211)\r\n\t... 54 more\r\n{noformat}\r\n\r\nh3. Workaround\r\n\r\nCurrently there are no known workarounds for this behaviour. A workaround will be added here when available.\r\n",
      "summary": "Bamboo specs states cleanup process fails with foreign key constraint violation errors"
    }
  },
  {
    "key": "BAM-21138",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-11-03T15:02:14.000+0000",
      "created": "2020-10-26T08:59:36.000+0000",
      "description": "h3. Issue Summary\r\n\r\nMoving stages in a plan fails\r\n\r\nh3. Steps to Reproduce\r\n# Create a plan with one than one stage.\r\n# Try to move the stage (to change the order bewtween them)\r\n\r\nh3. Expected Results\r\n\r\nStages are moved\r\n\r\nh3. Actual Results\r\n\r\nOperation fails with error:\r\n{noformat}\r\n2020-10-26 08:56:04,762 ERROR [http-nio-8085-exec-16] [ExceptionMappingInterceptor] null\r\njava.lang.UnsupportedOperationException\r\n\tat java.util.Collections$UnmodifiableCollection.remove(Collections.java:1060)\r\n\tat com.atlassian.bamboo.plan.stage.StageServiceImpl.moveStage(StageServiceImpl.java:219)\r\n\tat com.atlassian.bamboo.plan.stage.StageServiceImpl.lambda$null$1(StageServiceImpl.java:187)\r\n\tat org.springframework.orm.hibernate5.HibernateTemplate.doExecute(HibernateTemplate.java:384)\r\n\tat org.springframework.orm.hibernate5.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:350)\r\n\tat com.atlassian.bamboo.persistence.BambooTransactionHibernateTemplate$1.doInTransaction(BambooTransactionHibernateTemplate.java:36)\r\n\tat org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)\r\n\tat com.atlassian.bamboo.persistence.BambooTransactionHibernateTemplate.execute(BambooTransactionHibernateTemplate.java:28)\r\n\tat com.atlassian.bamboo.persistence.BambooTransactionHibernateTemplate.execute(BambooTransactionHibernateTemplate.java:33)\r\n\tat com.atlassian.bamboo.plan.stage.StageServiceImpl.lambda$moveStage$2(StageServiceImpl.java:178)\r\n\tat com.atlassian.bamboo.core.ScopedExclusionServiceHelper$4.apply(ScopedExclusionServiceHelper.java:147)\r\n\tat com.atlassian.bamboo.core.ScopedExclusionServiceImpl.withLock(ScopedExclusionServiceImpl.java:63)\r\n\tat com.atlassian.bamboo.core.ScopedExclusionServiceHelper.withLockedChain(ScopedExclusionServiceHelper.java:59)\r\n\tat com.atlassian.bamboo.plan.stage.StageServiceImpl.moveStage(StageServiceImpl.java:214)\r\n\tat com.atlassian.bamboo.ww2.actions.chains.MoveStageAction.move(MoveStageAction.java:79)\r\n\t(...)\r\n2020-10-26 08:56:04,767 ERROR [http-nio-8085-exec-16] [FiveOhOh] 500 Exception was thrown.\r\njava.lang.UnsupportedOperationException\r\n\tat java.util.Collections$UnmodifiableCollection.remove(Collections.java:1060)\r\n\tat com.atlassian.bamboo.plan.stage.StageServiceImpl.moveStage(StageServiceImpl.java:219)\r\n\tat com.atlassian.bamboo.plan.stage.StageServiceImpl.lambda$null$1(StageServiceImpl.java:187)\r\n\tat org.springframework.orm.hibernate5.HibernateTemplate.doExecute(HibernateTemplate.java:384)\r\n\tat org.springframework.orm.hibernate5.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:350)\r\n\tat com.atlassian.bamboo.persistence.BambooTransactionHibernateTemplate$1.doInTransaction(BambooTransactionHibernateTemplate.java:36)\r\n\tat org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)\r\n\tat com.atlassian.bamboo.persistence.BambooTransactionHibernateTemplate.execute(BambooTransactionHibernateTemplate.java:28)\r\n\tat com.atlassian.bamboo.persistence.BambooTransactionHibernateTemplate.execute(BambooTransactionHibernateTemplate.java:33)\r\n\tat com.atlassian.bamboo.plan.stage.StageServiceImpl.lambda$moveStage$2(StageServiceImpl.java:178)\r\n\tat com.atlassian.bamboo.core.ScopedExclusionServiceHelper$4.apply(ScopedExclusionServiceHelper.java:147)\r\n\tat com.atlassian.bamboo.core.ScopedExclusionServiceImpl.withLock(ScopedExclusionServiceImpl.java:63)\r\n\tat com.atlassian.bamboo.core.ScopedExclusionServiceHelper.withLockedChain(ScopedExclusionServiceHelper.java:59)\r\n\tat com.atlassian.bamboo.plan.stage.StageServiceImpl.moveStage(StageServiceImpl.java:214)\r\n\tat com.atlassian.bamboo.ww2.actions.chains.MoveStageAction.move(MoveStageAction.java:79)\r\n\t(...)\r\n{noformat}\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Moving stages in a plan fails"
    }
  },
  {
    "key": "BAM-21137",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-10-26T06:14:02.000+0000",
      "description": "h3. Issue Summary\r\n\r\nCurrently, Bamboo only parses <dependencies></dependencies> when automatic dependency management is enabled for a plan, and it indeed works as expected - builds of parent Maven projects trigger builds of child project.\r\n\r\nHowever, Bamboo does not take into consideration *<parent></parent>*, and since it's not considered as a dependency, child plans cannot be built automatically when a parent is built.\r\nh3. Steps to Reproduce\r\n # Create a plan with a repo that has one pom.xml. It will be parent\r\n\r\n{code:java}\r\n<project>\r\n    <modelVersion>4.0.0</modelVersion>\r\n    <groupId>com.atlassian</groupId>\r\n    <artifactId>test</artifactId>\r\n    <version>0.0.1-SNAPSHOT</version>\r\n    <packaging>pom</packaging>\r\n    <name>Example Parent</name>\r\n    <url>http://maven.apache.org</url>\r\n    <properties>\r\n        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\r\n        <junit.version>4.13.1</junit.version>\r\n        <spring.version>1.2.8</spring.version>\r\n    </properties>\r\n</project>\r\n{code}\r\n\r\n # Create a plan that has a repo with the child pom. xml that uses the above parent:\r\n\r\n{code:java}\r\n<project>\r\n    <modelVersion>4.0.0</modelVersion>\r\n    <parent>\r\n        <groupId>com.atlassian</groupId>\r\n        <artifactId>test</artifactId>\r\n        <version>0.0.1-SNAPSHOT</version>\r\n    </parent>\r\n    <artifactId>test-plugin1</artifactId>\r\n    <name>Test Plugin Using Parent</name>\r\n    <packaging>jar</packaging>\r\n    <dependencies>\r\n        <dependency>\r\n            <groupId>junit</groupId>\r\n            <artifactId>junit</artifactId>\r\n            <version>${junit.version}</version>\r\n            <scope>test</scope>\r\n        </dependency>\r\n    </dependencies>\r\n</project>\r\n{code}\r\n3. Add Maven dependency analyzer task for both. Enable automatic dependency management for both.\r\n\r\nh3. Expected Results\r\n\r\nWhen plan1 is built, it should trigger build of plan2.\r\nh3. Actual Results\r\n\r\nPlan2 build is not triggered when plan1 is successfully built.\r\nh3. \r\nWorkaround\r\n\r\nExplicitly add dependency on parent in <dependencies></dependencies>:\r\n\r\n\r\n{code:java}\r\n<dependency>\r\n    <groupId>com.atlassian</groupId>\r\n    <artifactId>test</artifactId>\r\n    <version>0.0.1-SNAPSHOT</version>\r\n <type>pom</type>\r\n</dependency>\r\n{code}",
      "summary": "Consider parent as a dependency in automatic maven deps management"
    }
  },
  {
    "key": "BAM-21136",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-10-23T21:13:07.000+0000",
      "description": "The Source Code Checkout task is providing an \"Include / exclude files\" in its section \"Change detection options\", but that should merely skip the listed files and/or directories for change detection.\r\n\r\n(i) The idea is to exculde files and/or directories from physically being fetched from Git central and that feature is currently not part of Bambo's Source Code Checkout task.\r\n\r\nAs an alterntative the following should be possible.\r\n * Guidelines can be given so that unnecessary files and directories are simply not part of repositories.\r\n * Besides .gitignore can be used (which is the typical appraoch by-passing that situation) - see also [Atlassian Tutorial \u2013 .gitignore|https://www.atlassian.com/git/tutorials/saving-changes/gitignore].\r\n * If used for e.g. a subsequent deployment, once the complete repository is copied in, the files and directories can be re-packaged in Bamboo's working directory (e.g. per a Bamboo Script task) and by that the the exclusions be carried out or\r\n * the Source code Checkout task as a whole can be scripted and utilizing e.g. _.git/info/sparse-checkout_ together with _git pull_.\r\n\r\nNonetheless, a +physical+ file and/or directory exlusion feature would be benificial in various Bamboo build and deployment scenarios.",
      "summary": "Source Code Checkout task should allow ignoring files and directories"
    }
  },
  {
    "key": "BAM-21135",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-10-22T19:51:30.000+0000",
      "description": "Hi Team,\r\n\r\n\u00a0\r\n\r\nI along with my team feels like Bamboo can be improved by adding this feature which will allow user to continue working on their work while they can subscribe an event.\r\n\r\n\u00a0\r\n\r\nLet say, user wants to get notified with a sound a branch build is completed. This will allow them to focus on other work and resume back the bamboo window once it is ready.",
      "summary": "Sound notification with subscribe feature when build finishes"
    }
  },
  {
    "key": "BAM-21134",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-11-03T15:02:43.000+0000",
      "created": "2020-10-22T16:28:06.000+0000",
      "description": "h3. Problem Definition\r\n\r\nWhen we navigate to a Deployment project and hit *View project as YAML Specs*, we are taken to the page with a misleading header *Bamboo Java Specs - ProjName* instead of *Bamboo YAML Specs*\r\n !image-2020-10-22-18-26-53-631.png!\r\nh3. Suggested Solution\r\n\r\nRename the header as *Bamboo YAML Specs - ProjName*",
      "summary": " Wrong header in yaml export of deployment project"
    }
  },
  {
    "key": "BAM-21133",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-10-20T12:58:59.000+0000",
      "description": "h3. Issue Summary\r\n\r\nIf you let Chrome remember username and password when logging in to Bamboo, this username will be randomly auto inserted into UI fields.\r\nh3. Steps to Reproduce\r\n\r\n\r\n1. Use Chrome to login to Bamboo\r\n2. When prompted, allow Chrome to save your username and password\r\n3. Configure a plan\r\n4. Select a Job\r\n5. Add a new \"Docker\" task\r\n6. Additional arguments field is populated with saved username\r\n\r\n!bamboo-docker-task.png!\r\n\r\nThe same behavior is observed on create a new plan page\r\n\r\n!image-2020-10-20-15-55-52-710.png!\r\nh3. Expected Results\r\n\r\nNo auto insertions\r\nh3. Actual Results\r\n\r\nUsername is auto inserted\r\nh3. Workaround\r\n\r\nNone",
      "summary": "Bamboo username which Chrome remembers is automatically inserted to random UI fields"
    }
  },
  {
    "key": "BAM-21132",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-10-19T05:47:07.000+0000",
      "created": "2020-10-19T05:46:48.000+0000",
      "description": "h3. Issue Summary\r\nQueued build will display as *undefined You do not have the permission to view this build.* in the *Build Activity* dashboard if branch expiry deletes its branch while queued\r\n\r\n(!) Please note, undefined is also a very normal to display in the build queue if you do not have permission to view the plan that the build is queued for. This should never display for Bamboo administrators though, since they have permission to all plans which is generally a sign you are affected by this bug.\r\n\r\nh3. Steps to Reproduce\r\n# Disable your agents so no builds can proceed\r\n# Create a branch plan and configure it to remove deleted branches after 0 days\r\n# Queue a build for it\r\n# Delete that branch in Bitbucket \r\n# Trigger branch expiry:\r\n{noformat}\r\ncurl -u <admin_user> -p -H \"Content-Type: application/json\" -X POST -d '{\"name\":\"branchExpiryJob\", \"groupName\":\"branchExpiryGroup\"}' http://localhost:8085/rest/admin/latest/scheduler/jobs/trigger\r\n{noformat}\r\n# Visit build activity dashboard: *Builds > Build Activity*\r\n\r\nh3. Expected Results\r\nBuild is removed from queue\r\n\r\nh3. Actual Results\r\nBuild stays in the queue and appears as *undefined You do not have the permission to view this build.*\r\n\r\nIf an agent becomes available, it will attempt to build it and clear the queue.\r\n\r\nh3. Workaround\r\nRestart Bamboo to clear the queue of undefined builds. \r\n\r\nIf a capable agent ever comes available to build it, it will also disappear but given that it remained in the queue for a long time already, it may be that a capable agent will never become available.",
      "summary": "Queued build will become undefined if branch expiry deletes its branch while queued"
    }
  },
  {
    "key": "BAM-21131",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-10-16T07:08:17.000+0000",
      "description": "h3. Issue Summary\r\n\r\nWhen executing tasks in Docker, a non root container user cannot cd or even ls the mounted working directory:\u00a0\r\n{code:java}\r\ndocker@2c56fb2fda8b:/tmp$ cat runInDocker6969616781478797756.sh \r\n#!/bin/sh\r\ncd '/home/eugene/Downloads/atlassian-bamboo-7.1.1/bamboo-home/xml-data/build-dir/TEST-TES4-JOB1'\r\numask 000\r\n'/home/eugene/Downloads/atlassian-bamboo-7.1.1/bamboo-home/temp/TEST-TES4-JOB1-47-ScriptBuildTask-1840878499782133846.sh'\r\nexit $?\r\n{code}\r\nAs a result, the script above fails with:\r\n{code:java}\r\n/tmp/runInDocker2036597224817806522.sh: 2: cd: can't cd to /home/eugene/Downloads/atlassian-bamboo-7.1.1/bamboo-home/xml-data/build-dir/TEST-TES4-JOB1\r\n/tmp/runInDocker2036597224817806522.sh: 4: /tmp/runInDocker2036597224817806522.sh: /home/eugene/Downloads/atlassian-bamboo-7.1.1/bamboo-home/temp/TEST-TES4-JOB1-44-ScriptBuildTask-1163266806075301163.sh: Permission denied\u00a0{code}\r\nh3. Steps to Reproduce\r\n # Create a job using\u00a0instructure/core:xenial\r\n # Add a script task (inline) or any other task\r\n # Run the plan\r\n\r\nh3. Expected Results\r\n\r\nPlan runs ok\r\nh3. Actual Results\r\n\r\nThe below exception is thrown in the xxxxxxx.log file:\r\n{noformat}\r\n/tmp/runInDocker2036597224817806522.sh: 2: cd: can't cd to /home/eugene/Downloads/atlassian-bamboo-7.1.1/bamboo-home/xml-data/build-dir/TEST-TES4-JOB1 /tmp/runInDocker2036597224817806522.sh: 4: /tmp/runInDocker2036597224817806522.sh: /home/eugene/Downloads/atlassian-bamboo-7.1.1/bamboo-home/temp/TEST-TES4-JOB1-44-ScriptBuildTask-1163266806075301163.sh: Permission denied\r\n{noformat}\r\nh3. Workaround\r\n\r\nUse images with root user or add --user=root to extra docker run args in job configuration",
      "summary": "Docker Runner: working directory unavailable if a container is run with non root user"
    }
  },
  {
    "key": "BAM-21130",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-10-15T23:06:34.000+0000",
      "description": "h3. Issue Summary\r\n\r\nArtifact download task fails to download artifacts from old releases if the artifact is renamed at the linked plan.\r\nh3. Steps to Reproduce\r\n # Create a plan that produces an artifact \"Test\"\r\n # Create a deployment project/environment linked to this plan\r\n # Run a build\r\n # Create release-1 and deploy it to the environment\r\n # Run a second build\r\n # Create release-2 and deploy it to the same environment\r\n # Go to the linked plan and change the artifact name to \"Test_change\"\r\n # Go back to the deployment project and try to rollback to release-1\r\n\r\nh3. Expected Results\r\n\r\nThe deployment succeeds\r\nh3. Actual Results\r\n\r\nThe artifact download task fails and the below error is thrown in the build logs:\r\n{noformat}\r\n15-Oct-2020 22:11:10\tBuild Deployment of 'release-1' on 'QA' started building on agent Agnt2, bamboo version: 7.1.1\r\n15-Oct-2020 22:11:10\t\r\n15-Oct-2020 22:11:10\tBuild working directory is /var/atlassian/application-data/bamboo/xml-data/build-dir/106856449-106954753\r\n15-Oct-2020 22:11:10\tExecuting build Deployment of 'release-1' on 'QA'\r\n15-Oct-2020 22:11:10\tStarting task 'Clean working directory task' of type 'com.atlassian.bamboo.plugins.bamboo-artifact-downloader-plugin:cleanWorkingDirectoryTask'\r\n15-Oct-2020 22:11:10\tCleaning working directory '/var/atlassian/application-data/bamboo/xml-data/build-dir/106856449-106954753'\r\n15-Oct-2020 22:11:10\tFinished task 'Clean working directory task' with result: Success\r\n15-Oct-2020 22:11:10\tStarting task 'Download release contents' of type 'com.atlassian.bamboo.plugins.bamboo-artifact-downloader-plugin:artifactdownloadertask'\r\n15-Oct-2020 22:11:10\tPreparing to download plan result AR-NC-1 artifact: Non required shared artifact: [Test_change], pattern: [**/*.txt]\r\n15-Oct-2020 22:11:10\tUnable to download artifact Non required shared artifact: [Test_change], pattern: [**/*.txt]\r\n15-Oct-2020 22:11:10\tTask configuration:\r\n15-Oct-2020 22:11:10\tartifactId_0 -> [-1]\r\n15-Oct-2020 22:11:10\tsourcePlanKey -> [AR-NC]\r\n15-Oct-2020 22:11:10\tlocalPath_0 -> []\r\n15-Oct-2020 22:11:10\tTask runtime configuration:\r\n15-Oct-2020 22:11:10\tsecurityToken -> [5a996be4bd5858c56dacc5ea37c149d7cd4cec03]\r\n15-Oct-2020 22:11:10\truntimeArtifactIds_0 -> [0]\r\n15-Oct-2020 22:11:10\tartifactName_0 -> [Test_change]\r\n15-Oct-2020 22:11:10\tartifactId_0 -> [106823681]\r\n15-Oct-2020 22:11:10\tresultKey -> [AR-NC-1]\r\n15-Oct-2020 22:11:10\tartifactLocation_0 -> []\r\n15-Oct-2020 22:11:10\tlocalPath_0 -> []\r\n15-Oct-2020 22:11:10\tartifactPattern_0 -> [**/*.txt]\r\n15-Oct-2020 22:11:10\tFinished task 'Download release contents' with result: Error\r\n15-Oct-2020 22:11:10\tFinalising the build...\r\n15-Oct-2020 22:11:10\tStopping timer.\r\n15-Oct-2020 22:11:10\tBuild 106856449-106954753-106528772 completed.\r\n15-Oct-2020 22:11:10\tFinished processing deployment result Deployment of 'release-1' on 'QA'\r\n{noformat}\r\nh3. Workaround\r\n\r\nRename the artifact back to the original name.",
      "summary": "Deployment of old releases fail after changing the artifact name."
    }
  },
  {
    "key": "BAM-21129",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-10-15T16:50:54.000+0000",
      "description": "h3. Problem Definition\r\nStarting from Bamboo 6.7, we started to capture Deployment project & environment configuration changes in audit log. However, any permission change in the deployment project or the environment is not preserved.\r\n\r\nh3. Suggested Solution\r\nAdd permission changes to audit log\r\n\r\nh3. Why this is important\r\nSome companies have a requirement to track when a specific user has got access to Prod Environment in a deployment project .\r\n \r\nh3. Workaround \r\nWe can partially track the changes via atlassian-bamboo-access.log",
      "summary": "Deployment project permission change should be captured audit log"
    }
  },
  {
    "key": "BAM-21128",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-11-23T14:21:37.000+0000",
      "created": "2020-10-15T13:19:31.000+0000",
      "description": "h3. Issue Summary\r\n\r\nMoving plan with build id greater than 2147483647 fails with a cryptic error\r\nh3. Steps to Reproduce\r\n # Create a plan with _build_id_ (in the _build_ table) larger than\u00a02147483647\r\n # Add at least 1 job to the plan\r\n # Try to move the plan to a different project using the\u00a0*Move Plans*\u00a0action\r\n\r\nh3. Expected Results\r\n\r\nPlan is moved to the new project\r\nh3. Actual Results\r\n\r\nMoving plan fails with an error:\u00a0 _String [<PROJECT KEY>-<JOB KEY>] is not a job key_\r\n!Screenshot 2020-10-15 at 15.15.56.png|width=506,height=161!\r\n\r\nAdditionally, the below exception is thrown in the atlassian-bamboo.log file:\r\n{noformat}\r\n2020-10-15 15:02:32,377 WARN [http-nio-6990-exec-5] [OgnlValueStack] Error setting value [[PLAN3]] with expression [planKeyMappings[2262139015]]2020-10-15 15:02:32,377 WARN [http-nio-6990-exec-5] [OgnlValueStack] Error setting value [[PLAN3]] with expression [planKeyMappings[2262139015]]java.lang.NumberFormatException: For input string: \"2262139015\" at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65) at java.lang.Integer.parseInt(Integer.java:583)\r\n...{noformat}\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Moving plan with build id greater than 2147483647 to another project fails"
    }
  },
  {
    "key": "BAM-21127",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-10-14T12:43:39.000+0000",
      "description": "h3. Current situation\r\nWhen a build is performed, Bamboo stores the code revision number in a variable. If this build was triggered by a merge (example: Branch Updater or Gatekeeper) the revision number of the merge is not stored in any variable.\r\n\r\nh3. Accepted solution\r\nStore this revision number in a variable. ",
      "summary": "Store the revision number of the branch a build is being merged from in a variable."
    }
  },
  {
    "key": "BAM-21126",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-10-14T10:57:24.000+0000",
      "description": "It looks like when defining a deployment trigger in cron format, overriding the branch is not supported. Can we add the functionality so when defining a branch in the yml specs, this maps to the current `Use a custom plan branch` option on the trigger configuration.\r\n\r\nsuggested syntax:\r\n{code:java}\r\ntriggers:\r\n  - cron:\r\n      expression: 0 0 * * ? * \r\n      branch: <branch>{code}",
      "summary": "Support custom branches for CRON deployment triggers in yml specs"
    }
  },
  {
    "key": "BAM-21125",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-10-15T11:50:34.000+0000",
      "created": "2020-10-14T06:35:06.000+0000",
      "description": "h3. Issue Summary\r\n\r\nYaml generated from a Bamboo plan that has artifact download task (in UI) isn't valid when it's used in a specs repo. artifact-download tasks is missing source-plan attribute.\r\n\r\nSpecs scan fails with an error: Unknown task type artifact-download\r\nh3. Steps to Reproduce\r\n # Create a plan with artifact download task (can be all artifacts or a specific one) which download artifacts from same plan\r\n # Export as YAML\r\n # Use yaml in bamboo-specs/bamboo.yaml and create a specs repository with it\r\n\r\n{code:java}\r\n---\r\nversion: 2\r\nplan:\r\n  project-key: VARS\r\n  key: GIT\r\n  name: git\r\nstages:\r\n- Default Stage:\r\n    manual: false\r\n    final: false\r\n    jobs:\r\n    - Default Job\r\nDefault Job:\r\n  key: JOB1\r\n  tasks:\r\n  - checkout:\r\n      force-clean-build: 'false'\r\n  - script:\r\n      interpreter: SHELL\r\n      scripts:\r\n      - echo \"Hello\" > hello.md\r\n  - artifact-download:\r\n      artifacts:\r\n      - name: artifact\r\n  artifacts:\r\n  - name: artifact\r\n    pattern: hello.md\r\n    shared: true\r\n    required: true{code}\r\nh3. Expected Results\r\n\r\nSpecs scan is successful\r\nh3. Actual Results\r\n{noformat}\r\n14-Oct-2020 06:26:03\tBamboo YAML import failed: Document structure is incorrect: Default Job / tasks / [2]: Unknown task type artifact-download\r\n{noformat}\r\nh3. Workaround\r\n\r\nAdd source-plan to artifact-download task since it's missing when YAML export happens.",
      "summary": "YAML Specs export: Missing source-plan which results in unknown task type artifact-download when importing"
    }
  },
  {
    "key": "BAM-21123",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-10-06T11:41:33.000+0000",
      "created": "2020-10-12T10:02:17.000+0000",
      "description": "h3. Issue Summary\r\n\r\nThe issue can be reproduced with Docker runner only. Changes to bamboo.yaml in a branch are not used when a build is kicked off in Docker\r\nh3. Steps to Reproduce\r\n # Create a specs Bitbucket repository with run.sh and bamboo-specs/bamboo.yaml\r\n # Add one just one task to the job - ./run.sh, i.e. execute the script (inline)\r\n # Push a new branch to a Bitbucket repo. Rename run.sh to run-branch.sh, update bamboo.yaml to run the updated script (new name)\r\n # Either create a plan branch manually or enable auto plan branch creation\r\n\r\nh3. Expected Results\r\n\r\nThe build should execute run-branch.sh\r\nh3. Actual Results\r\n\r\nExecution of run.sh is attempted, i.e. master task is used. The build fails since script task tries to execute run.sh which does not exist in a new branch.\r\n\r\nApparently, when a file like TEST-SPEC0-JOB1-3-ScriptBuildTask-1875714466825985243.sh is generated, it uses the wrong specs even though\u00a0xml-data/build-dir/TEST-SPEC0-JOB1 has the right bamboo.yaml.\r\nh3. Workaround\r\n\r\nNone",
      "summary": "Yaml Specs: Plan branch uses master configuration"
    }
  },
  {
    "key": "BAM-21122",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-10-12T06:56:25.000+0000",
      "description": "h3. Current Situation\r\nCurrently when we create a Checkout task in a deployment environment, this will checkout the default repository branch, and its latest commit. \r\n\r\nh3. Accepted solution\r\nWe need more options on this task to make the CI+CD cycle more coherent.\r\nIf the deployment has a build associated, and that build checked out the repository, then the Checkout task should check out the same:\r\n- Branch\r\n- Commit \r\n(or at least the possibility to choose with branch and commit to check out).\r\n\r\n(i) If this is implemented, the Repository Tag task will be able to apply tags to the correct branch and commit. ",
      "summary": "The checkout task for deployment should offer more configuration options"
    }
  },
  {
    "key": "BAM-21121",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-11-23T14:20:59.000+0000",
      "created": "2020-10-07T22:08:29.000+0000",
      "description": "h3. Problem Definition\r\nWhen a linked repository is saved, it invalidates cache for all associated plans, causing performance degradation. \r\n\r\nh3. Suggested Solution\r\nImprove the background activities for when a linked repository is saved. Saving the linked repository should not be a cause for performance degradation across the entire application. \r\nh4. Why this is important \r\nA linked repository used by 40,000 plans for example, when saved will cause Bamboo to become extremely slow as it will invalidate all plan cache that the repo is associated to. \r\nh3. Workaround \r\nCreate multiple linked repositories instead of having one linked repository serving a large number of plans",
      "summary": "Improve performance when a linked repository serving multiple plans is saved"
    }
  },
  {
    "key": "BAM-21120",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-10-05T18:14:41.000+0000",
      "description": "h3. Problem Definition\r\n\r\nCurrently, Bamboo does not support the storage of the System-wide encryption keys in AWS Secrets Manager or AWS KMS. In some environments, all encryption keys need to be stored in AWS Secrets Manager or AWS KMS.\r\n\r\nh3. Suggested Solution\r\n\r\nAdd support for this in Bamboo. \r\n",
      "summary": "Store Bamboo full system encryption keys in AWS Secrets Manager or AWS KMS"
    }
  },
  {
    "key": "BAM-21119",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-10-05T09:18:29.000+0000",
      "description": "Customers hosting Bamboo in Azure would definitely benefit from using [https://docs.microsoft.com/en-us/azure/azure-sql/azure-sql-iaas-vs-paas-what-is-overview]\u00a0which isn't among officially supported databases. Moreover, due to a different versioning convention an upgrade task checking compatibility fails even though Azure SQL is based on a supported version of MS SQL Server.",
      "summary": "Support Azure SQL"
    }
  },
  {
    "key": "BAM-21118",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-10-02T10:18:47.000+0000",
      "description": "Currently, Bamboo uses a very old Jenkins library to analyze warnings in Puppet [https://github.com/jenkinsci/warnings-plugin/blob/master/src/main/java/hudson/plugins/warnings/parser/PuppetLintParser.java]\r\n\r\nThis library uses an outdated regex to catch errors and warnings in output of running puppet scripts. As a result, the output from recent Puppet versions cannot be analysed by Build warnings parser - Puppet lint, so no errors or warnings are detected, even if they do exist.\r\n\r\n\u00a0",
      "summary": "Build Warnings Parser: Update Puppet lint with a more up to date library"
    }
  },
  {
    "key": "BAM-21117",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-10-01T14:33:35.000+0000",
      "description": "h3. Issue Summary\r\n\r\nCurrently Yaml Specs files can use \"include\" at the first level, not being able to call \"include\" in subsequent Yaml files. \r\n\r\nh3. Accepted solution.\r\nAdd the possibility to call include more than once. Example:\r\n\r\nbamboo.yml\r\n{noformat}\r\n!include 'secondFile.yml'\r\n{noformat}\r\n\r\nsecondFile.yml\r\n{noformat}\r\n!include 'thirdFile.yml'\r\n{noformat}\r\n\r\nthirdFile.yml\r\n{noformat}\r\nversion: 2\r\n...\r\n{noformat}",
      "summary": "Currently Yaml Specs files can use \"include\" at the first level, not being able to call \"include\" in subsequent Yaml files. "
    }
  },
  {
    "key": "BAM-21116",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-10-01T14:14:20.000+0000",
      "description": "h3. Issue Summary\r\n\r\nBamboo Yaml Specs fails to publish using \"include\" and more than one document in a file\r\n\r\nh3. Steps to Reproduce\r\n(This test was done using Bitbucket server as repository host)\r\n# Prepare Bamboo and Bitbucket server by integrating them with an application link.\r\n# Create in Bitbucket a repository to use for Yaml Specs.\r\n# In the file bamboo-specs/bamboo.yaml, paste:\r\n{noformat}\r\nversion: 2\r\nplan:\r\n  project-key: PR\r\n  key: PL\r\n  name: Testing\r\n\r\n \r\n\r\nstages:\r\n  - Stage1:\r\n      jobs:\r\n        - Job1\r\n\r\nJob1:\r\n  tasks:\r\n    - script:\r\n        - echo 'Hello from YAML Specs 2'\r\n\r\n ---\r\nversion: 2\r\nplan: PR-PL\r\nplan-permissions:\r\n  - users: mate\r\n    permissions: admin\r\n{noformat}\r\n# In Bamboo, configure this repository as a Linked repository with specs enabled. \r\n# The scan will succeed. \r\nPhase 2:\r\n# Rename bamboo.yaml to newFile.yaml.\r\n# Create bamboo.yaml with the content\r\n{noformat}\r\n!include 'newFile.yaml'\r\n{noformat}\r\n# Commit changes.\r\n\r\nh3. Expected Results\r\nSame successful publishing as before\r\n\r\nh3. Actual Results\r\n\r\nPublishing fails with error\r\n{noformat}\r\n01-Oct-2020 14:12:12\tBamboo YAML import failed: Invalid format of the YAML file: while parsing a block mapping\r\n01-Oct-2020 14:12:12\t in 'reader', line 1, column 1:\r\n01-Oct-2020 14:12:12\t    version: 2\r\n01-Oct-2020 14:12:12\t    ^\r\n01-Oct-2020 14:12:12\texpected <block end>, but found '<scalar>'\r\n01-Oct-2020 14:12:12\t in 'reader', line 19, column 2:\r\n01-Oct-2020 14:12:12\t     ---\r\n01-Oct-2020 14:12:12\t     ^\r\n01-Oct-2020 14:12:12\t\r\n01-Oct-2020 14:12:12\t\r\n01-Oct-2020 14:12:12\tDo you need help? Please visit the http://docs.atlassian.com/bamboo/docs-0700/Bamboo+Specs+troubleshooting page.\r\n01-Oct-2020 14:12:12\t\r\n{noformat}\r\n\r\nh3. Workaround\r\n\r\nSplit Yaml documents into multiple files",
      "summary": "Bamboo Yaml Specs fails to publish using \"include\" and more than one document in a file"
    }
  },
  {
    "key": "BAM-21114",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-10-06T13:19:18.000+0000",
      "created": "2020-10-01T10:29:00.000+0000",
      "description": "h3. Issue Summary\r\n\r\nWhen editing a variable value that is being overwritten, the display field for a variable name changes.\r\nh3. Steps to Reproduce\r\n # Create a plan with at least 2 variables. Example:\r\n ## Var1 = Value1\r\n ## Var2 = Value2\r\n # Create a plan branch.\r\n # In the plan branch, section \"Variables\", overwrite the value of Var2.\r\n # Refresh the page.\r\n # For the new entry on screen for Var2, click on the value field.\r\n\r\nh3. Expected Results\r\n\r\nNothing will change. User will be able to set a new value.\r\nh3. Actual Results\r\n\r\nIn the UI, the variable name will change to another value.\r\n\r\nNote: Builds for plan branches will be affected by this.\r\nh3. Workaround\r\n - Option 1: delete and re-create the variable.\r\n - Option 2: fix the field for the variable name manually.",
      "summary": "When editing a variable value that is being overwritten, the display field for a variable name changes."
    }
  },
  {
    "key": "BAM-21113",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-10-01T10:03:27.000+0000",
      "description": "The panel element (aui-page-panel) is restricted to a width of 980px, this forces users to continue working in very small multi text boxes, e.g. for inline script tasks, even on large screens.\r\n\r\nIf possible change this to a relative width of 95% (with a minimal width of 980px) to improve UX on larger screens.\r\n\r\n\u00a0",
      "summary": "scale width as percentage of screen instead of fixed value of 980px"
    }
  },
  {
    "key": "BAM-21112",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-09-30T20:38:26.000+0000",
      "description": "Currently navigation as Bamboo Admin to an existin Bamboo plan's Plan configuration page and there on tab \"Branches\" under \"Create plan branch\", it is merel possible to select +one+ of these 3 options\r\n * \"When pull request is created\"\r\n * \"When new branch in repository is created\"\r\n * \"When new branch in repository is created and matches expression\" (adding regex)\r\n\r\nand not combinations of the Pull Request (PR) and with a Git branch creation event.\r\n\r\nThe only way trying to work arond that is by selecting the more important one for plan branch creation and trying to \"emulate\" the other one.\r\n\r\n\"Emulate\" because neither PR nor Git branch creation currently exist in Bamboo as build triggers, so it would need to be replaces by either a commit / push, a polling, or a scheduled / cron type trigger which are those being currently available.",
      "summary": "Allow choosing more than one create plan branch option"
    }
  },
  {
    "key": "BAM-21111",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-09-30T17:50:36.000+0000",
      "description": "Currently it is not possible to do that.\r\n\r\nIf you use Bamboo's dedication feature, for \"Build plan\" (and not \"Build project\", \"Build job\" and all further options being offered under _Cog >> Agents >> select an agent there >> tab \"Dedicate agent\"_) you can just select \"parent plans\".\r\n\r\n(i) As a workaround for that Bamboo behavior you could create separate plans for those branches and add a requirement with a custom capability, that is available only on that agent.\r\n\r\n(!) Making the plan branch feature \"complete\" it should be great to to allow selecing any such just as it is possble for created Bamboo build plans. And there should be many use-cases for this feature.",
      "summary": "Dedicate a plan branch to a Bamboo agent"
    }
  },
  {
    "key": "BAM-21110",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-09-30T14:29:40.000+0000",
      "description": "When upgrading Bamboo, we keep the Bamboo home directory; however, the installation directory is not the same, so every upgrade requires to update some configuration files stored in the installation folder. \r\n\r\nFor example, the server.xml, which contains network configuration for Bamboo needs to be updated when upgrading.\r\n\r\nSuggestion: Keep the configuration files stored in the Bamboo home directory.",
      "summary": "Keep all the configuration files stored in Bamboo home"
    }
  },
  {
    "key": "BAM-21109",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-11-23T14:20:58.000+0000",
      "created": "2020-09-30T14:20:32.000+0000",
      "description": "Add an option to configure build triggers in YAML specs.\u00a0\r\n\r\nCurrently it is not supported and when you try to export the build plan which has triggers into YAML specs, you see the following:\r\n{code:java}\r\ntriggers:\r\n# Trigger type TriggerProperties{name='After deployment', description='test', enabled=true} is not supported yet\r\n{code}",
      "summary": "Configure build triggers with YAML specs"
    }
  },
  {
    "key": "BAM-21108",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-11-23T14:20:58.000+0000",
      "created": "2020-09-29T13:53:04.000+0000",
      "description": "Often in field \"Local Path\" of Bamboo's SCP task configuration, an absolute path is set, though the path there need to be relative to this plan's working directory.\r\n\r\n(i) This is clearly pointed out in KB\u00a0[Using the SCP task in Bamboo|https://confluence.atlassian.com/bamboo/using-the-scp-task-in-bamboo-305759795.html].\r\n\r\nIf set wrong, the SCP task will simply fail, typically with an error like \"There were no files to upload\" or something close to that being written out in the plan's build log.\r\n\r\n(/) A way to likely help avoid that happening is to\r\n # either simlply display something like \"Local Path of the file to copy needs to be relative to your Bamboo plan's working directory\" below field \"Local Path\".\r\n # Or, alternatively and coming along with a bit more programming effort, the path entered there should be verified so to not be a relative path starting at this plan's working directory.\r\n ** On verification fail, the logged out error should then be something like \"No relative Local Path in SCP task. Please fix that.\"",
      "summary": "Make clear that \"Local Path\" in SCP task needs to be relative"
    }
  },
  {
    "key": "BAM-21107",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-10-01T09:18:09.000+0000",
      "created": "2020-09-29T12:19:29.000+0000",
      "description": "We have a lot of different scripts (40+) which are all built the same way, but are contained in different repositories. \r\n\r\nIt would be great if multiple build plans could reuse a shared build plan for similar projects.\r\nI.e. there could be one build plan for go, one for rscripts, one for C# one for php\u00a0\r\n\r\nI could imagine that either the whole build plan is embedded and you can't do any customization apart from variables. Or that a build plan is called in between stages, and you can put other stages before / after it.\r\n\r\nThis should not replace the need to create build plan, but make it possible that a lot of repositories share the same build plan without a need to configure 40+ build plans on a change.",
      "summary": "Shared build plans for similar repositories"
    }
  },
  {
    "key": "BAM-21106",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-09-29T09:19:51.000+0000",
      "description": "h3. Issue Summary\r\n\r\nBy default when plan is not having build expiry option ticked - then all is fine.\r\n\r\nAfter start playing with changing various options on build expiry and then unchecking all checkbox - for some reason dslForPlan and java bamboo specs are still pertaining those configurations as they were selected.\r\nh3. Steps to Reproduce\r\n # Go to Plan\r\n # Click 'Other' tab\r\n # Check 'Override global build expiry configuration'\r\n # Enter 5 days, max builds: 5.\r\n # Uncheck 'Override global build expiry configuration'\r\n # Verify dsl / bamboo java specs\r\n\r\nh3. Expected Results\r\n\r\nNo additional buildExpiry configuration is present in java bamboo specs.\r\nh3. Actual Results\r\n\r\nThe below config is visible in java bamboo specs:\r\nh5. Bamboo specs:\r\n{noformat}\r\n                                .put(\"buildExpiryConfig\", new MapBuilder()\r\n                                    .put(\"period\", \"days\")\r\n                                    .put(\"expiryTypeBuildLog\", \"false\")\r\n                                    .put(\"labelsToKeep\", \"\")\r\n                                    .put(\"maximumBuildsToKeep\", \"5\")\r\n                                    .put(\"enabled\", \"true\")\r\n                                    .put(\"duration\", \"5\")\r\n                                    .put(\"expiryTypeNothing\", \"false\")\r\n                                    .put(\"expiryTypeResult\", \"false\")\r\n                                    .put(\"buildsToKeep\", \"\")\r\n                                    .build())\r\n{noformat}\r\nh5. Dsl:\r\n{code:java}\r\n   buildExpiry(period:'days',duration:'5')\r\n{code}\r\nh3. Workaround\r\n\r\n\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available\r\n\r\n\u00a0\r\n\r\nPartial Workaround:\r\n # Tick 'Override global build expiry configuration'\r\n # Tick 'Do not expire anything for this plan'\r\n # Save\r\n # Untick\u00a0'Do not expire anything for this plan'\r\n # Untick\u00a0'Override global build expiry configuration'\r\n # Save\r\n # It clears somehow configuration but dsl is different from bamboo specs and it should be gone at all.\r\n\r\n{code:java}\r\n                                    .build())\r\n                                .put(\"buildExpiryConfig\", new MapBuilder()\r\n                                    .put(\"maximumBuildsToKeep\", \"5\")\r\n                                    .put(\"expiryTypeResult\", \"false\")\r\n                                    .build())\r\n{code}\r\n{code:java}\r\n   buildExpiry(notExpire:'true',period:'days')\r\n\r\n{code}\r\n\u00a0",
      "summary": "Unchecking build expiry configuration in Other tab (Expiry) pertains in java bamboo specs / dslNode"
    }
  },
  {
    "key": "BAM-21105",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-09-29T05:48:27.000+0000",
      "description": "Since [https://marketplace.atlassian.com/apps/1214713/sbt-task-plugin-for-bamboo?hosting=server&tab=overview]\u00a0is not officially supported, it may be risky for enterprises to rely on it, since it may not get updated for the newer versions which will make Bamboo upgrades problematic in future.\r\n\r\nIt'd be great to have this plugin officially supported and/or bundled with Bamboo.",
      "summary": "Officially support SBT Task Plugin"
    }
  },
  {
    "key": "BAM-21104",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-09-29T07:49:29.000+0000",
      "created": "2020-09-29T01:11:46.000+0000",
      "description": "In 7.1.2 the Linked Repositories list is not sorted in any discernable way. It's not alphabetical, it's not by internal ID, it appears to be completely random. We have a lot of linked repositories and to try and find any single one always means scrolling through the list and scanning for the one I need, or using the find in page feature of the browser.\r\n\r\n\u00a0\r\n\r\nPlease either sort this list alphabetically by default, or give admins/users controls to sort as required.",
      "summary": "Linked Repositories page is not sorted/ordered"
    }
  },
  {
    "key": "BAM-21103",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-09-28T13:44:51.000+0000",
      "description": "Currently, it is possible to bring Bamboo server down (if live logs transmission is on) by producing a huge build log file. Hung detection mechanism does not work in this case since the build may be doing smth in an infinite loop and produce output.\r\n\r\nIt would be nice to have some configuration that would prevent the system (both Bamboo server and agent) from going down in such cases, i.e. be fault tolerant. A mistake in code should not make an entire system (or a remote agent) unresponsive due to No space left on device and other issues related to handing huge log files.\r\n\r\nThe suggestion is to have build logs file size caps in place and either stop writing output to a log file or mark the build as hung to let Bamboo server stop it.",
      "summary": "Mark builds as hung based on build log size"
    }
  },
  {
    "key": "BAM-21102",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-09-25T22:29:51.000+0000",
      "description": "h3. Problem Definition\r\n\r\nTemporary files on remote agents are removed when a build is completed or fails.\r\n\r\nFor troubleshooting steps it may be necessary to revew these files.\r\n{{bamboo-agent-home/temp}}\r\n\r\nh3. Suggested Solution\r\n\r\nAdd a configurable startup flag to disable temp files being deleted after a job completes.\r\n\r\nh3. Workaround\r\n\r\nCurrently to capture the temp files you would need to watch the folder, and grab files as they're created before the build finishes.",
      "summary": "Add a Setting to disable temporary file deletion on Remote Agents"
    }
  },
  {
    "key": "BAM-21101",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-09-25T14:12:11.000+0000",
      "description": "Steps to reproduce:\r\n * Create a project from the UI\r\n\r\n * Use\r\n{code:java}\r\n curl -k -u admin -H \"Accept:*/json\" http://localhost:8085/rest/api/latest/project/TEST -X GET {code}\r\nReplay is:\r\n{code:java}\r\n{\"message\":\"Project TEST not found.\",\"status-code\":404}{code}\r\n\r\nThe expected replay should contain the project information independently on passing showEmpty=true as an argument.\r\n\r\nWorkaround\r\n\r\nAdd the argument showEmpty=true to the call:\r\n{code}\r\n curl -k -u admin -H \"Accept:*/json\" http://localhost:8085/rest/api/latest/project/TEST.json?showEmpty=true -X GET\r\n{code}",
      "summary": "Rest API /project returns 404 when the project is empty"
    }
  },
  {
    "key": "BAM-21100",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-07-30T13:34:46.000+0000",
      "created": "2020-09-25T08:15:02.000+0000",
      "description": "h3. Issue Summary\r\nAgents fail to connect to Bamboo due to a blocking ActiveMQ thread trying to run Hipchat notifications hanging.\r\n\r\nh3. Steps to Reproduce\r\n # Setup Hipchat notifications for agent online: *Bamboo Administration >> System Notifications >> Agent Online*\r\n # Try and connect a remote agent to the server\r\n\r\nh3. Expected Results\r\nThe remote agent connects\r\n\r\nh3. Actual Results\r\n\r\nThe agent hangs on:\r\n{noformat}\r\n2020-09-24 20:50:56,948 INFO [AgentRunnerThread] [AgentRegistrationBean] Registering agent on the server,\r\n{noformat}\r\n\r\nEventually resulting in a timeout or the following:\r\n{noformat}\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'agentRegistrationBean': Invocation of init method failed; nested exception is org.springframework.remoting.RemoteTimeoutException: Receive timeout after 300000 ms for RemoteInvocation: method name 'registerAgent'; parameter types [com.atlassian.bamboo.buildqueue.RemotableRemoteAgentDefinition]\r\n\tat org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:139)\r\n...\r\n\tat org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:95)\r\n\tat com.atlassian.bamboo.v2.build.agent.remote.RemoteAgent$1.<init>(RemoteAgent.java:214)\r\n\tat com.atlassian.bamboo.v2.build.agent.remote.RemoteAgent.initApplicationContext(RemoteAgent.java:214)\r\n\tat com.atlassian.bamboo.v2.build.agent.remote.RemoteAgent.start(RemoteAgent.java:82)\r\n\t... 6 more\r\nCaused by: org.springframework.remoting.RemoteTimeoutException: Receive timeout after 300000 ms for RemoteInvocation: method name 'registerAgent'; parameter types [com.atlassian.bamboo.buildqueue.RemotableRemoteAgentDefinition]\r\n\tat org.springframework.jms.remoting.JmsInvokerClientInterceptor.onReceiveTimeout(JmsInvokerClientInterceptor.java:391)\r\n\tat org.springframework.jms.remoting.JmsInvokerClientInterceptor.executeRequest(JmsInvokerClientInterceptor.java:259)\r\n\tat org.springframework.jms.remoting.JmsInvokerClientInterceptor.invoke(JmsInvokerClientInterceptor.java:204)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)\r\n\tat com.sun.proxy.$Proxy21.registerAgent(Unknown Source)\r\n...\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleElement.invoke(InitDestroyAnnotationBeanPostProcessor.java:366)\r\n\tat org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:309)\r\n\tat org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:136)\r\n\t... 22 more\r\n{noformat}\r\nor\r\n{noformat}\r\n2020-09-24 20:55:57,289 WARN [ActiveMQ Transport: tcp://mybamboo/10.0.0.1:54663@49760] [FailoverTransport] Transport (tcp://mybamboo:54663?wireFormat.maxInactivityDuration=300000) failed , attempting to automatically reconnect: java.net.SocketException: Connection reset\r\n{noformat}\r\n\r\nThe agent appears in the Bamboo administration as idle however it never builds, with logs on the Bamboo side showing the agent reconnecting after a period of inactivity (everytime the agent wrapper restarts)\r\n\r\nTaking thread dumps of Bamboo server reveals a ActiveMQ Session task thread stuck on the following:\r\n{noformat}\r\n\"ActiveMQ Session Task-594\" #4080 prio=7 os_prio=0 tid=0x00007f6e1c0f9000 nid=0x4b924 runnable [0x00007f6dfe8da000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\tat java.net.PlainSocketImpl.socketConnect(Native Method)\r\n...\r\n\tat sun.security.ssl.SSLSocketFactoryImpl.createSocket(SSLSocketFactoryImpl.java:153)\r\n\tat org.apache.commons.httpclient.protocol.SSLProtocolSocketFactory.createSocket(SSLProtocolSocketFactory.java:117)\r\n\tat org.apache.commons.httpclient.protocol.SSLProtocolSocketFactory.createSocket(SSLProtocolSocketFactory.java:157)\r\n\tat org.apache.commons.httpclient.HttpConnection.open(HttpConnection.java:707)\r\n\tat org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:387)\r\n\tat org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)\r\n\tat org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)\r\n\tat org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323)\r\n\tat com.atlassian.bamboo.hipchat.HipchatNotificationTransport.sendNotification(HipchatNotificationTransport.java:94)\r\n\tat com.atlassian.bamboo.notification.NotificationDispatcherImpl.dispatchNotifications(NotificationDispatcherImpl.java:45)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n...\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n...\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)\r\n\tat com.sun.proxy.$Proxy775.dispatchNotifications(Unknown Source)\r\n\tat com.atlassianlab.bamboo.plugins.agentnotification.AgentNotificationListener.handleEvent(AgentNotificationListener.java:77)\r\n\tat com.atlassianlab.bamboo.plugins.agentnotification.AgentNotificationListener.onAgentOnlineHandler(AgentNotificationListener.java:43)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat com.atlassian.event.internal.SingleParameterMethodListenerInvoker.invoke(SingleParameterMethodListenerInvoker.java:42)\r\n\tat com.atlassian.event.internal.AsynchronousAbleEventDispatcher.lambda$null$0(AsynchronousAbleEventDispatcher.java:37)\r\n\tat com.atlassian.event.internal.AsynchronousAbleEventDispatcher$$Lambda$308/98241094.run(Unknown Source)\r\n\tat com.atlassian.event.internal.AsynchronousAbleEventDispatcher$$Lambda$167/956046950.execute(Unknown Source)\r\n\tat com.atlassian.event.internal.AsynchronousAbleEventDispatcher.dispatch(AsynchronousAbleEventDispatcher.java:85)\r\n\tat com.atlassian.bamboo.event.spi.BambooEventDispatcher.dispatch(BambooEventDispatcher.java:34)\r\n\tat com.atlassian.event.internal.LockFreeEventPublisher$Publisher.dispatch(LockFreeEventPublisher.java:215)\r\n\tat com.atlassian.event.internal.LockFreeEventPublisher.publish(LockFreeEventPublisher.java:88)\r\n\tat com.atlassian.bamboo.event.TxAwareEventPublisher.publish(TxAwareEventPublisher.java:20)\r\n\tat com.atlassian.bamboo.buildqueue.manager.RemoteAgentManagerImpl.registerAgent(RemoteAgentManagerImpl.java:127)\r\n\t- locked <0x000000072952f600> (a com.atlassian.bamboo.buildqueue.manager.RemoteAgentManagerImpl)\r\n\tat com.atlassian.bamboo.buildqueue.manager.RemoteAgentManagerImpl.registerAgent(RemoteAgentManagerImpl.java:102)\r\n\t- locked <0x000000072952f600> (a com.atlassian.bamboo.buildqueue.manager.RemoteAgentManagerImpl)\r\n...\r\n\tat org.springframework.jms.listener.SimpleMessageListenerContainer$$Lambda$260/599236859.onMessage(Unknown Source)\r\n\tat org.apache.activemq.ActiveMQMessageConsumer.dispatch(ActiveMQMessageConsumer.java:1404)\r\n\t- locked <0x000000072952e4a0> (a java.lang.Object)\r\n\tat org.apache.activemq.ActiveMQSessionExecutor.dispatch(ActiveMQSessionExecutor.java:131)\r\n\tat org.apache.activemq.ActiveMQSessionExecutor.iterate(ActiveMQSessionExecutor.java:202)\r\n\tat org.apache.activemq.thread.PooledTaskRunner.runTask(PooledTaskRunner.java:133)\r\n\tat org.apache.activemq.thread.PooledTaskRunner$1.run(PooledTaskRunner.java:48)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n{noformat}\r\nAll other ActiveMQ Session task threads are blocked on this.\r\n\r\nh3. Workaround\r\n\r\nh6. Workaround 1\r\nDisable the Bamboo Hipchat plugin:\r\n* Navigate to Manage apps\r\n* Select System\r\n* Find the Bamboo Hipchat Plugin and press disable\r\n* Restart Bamboo\r\n\r\nh6. Workaround 2\r\n# Remove any *HipChat* notifications at *Bamboo Administration >> System Notifications* for *Agent Online* and *Agent offline*\r\n# Restart Bamboo",
      "summary": "Agent registration hangs due to hipchat notification plugin"
    }
  },
  {
    "key": "BAM-21099",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-09-25T04:09:43.000+0000",
      "description": "h2. Problem Definition\r\nCurrently the auto increment only increments the last number of a release version. If autoincrement goes to say, 2.3.1 but then a release manager manually creates a release of 3.0.0, the next version will not be 3.0.1 but will still be 2.3.2. It's not feasible when the deployment is under Bamboo Specs to constantly be updating the Spec to fix the last version when doing a manual release in this fashion.\r\n\r\nh2. Suggested Solution\r\nIntroduce an increment most recent release version setting rather than the last incremented version.",
      "summary": "Autoincrement release version increment based on most recent deployed version"
    }
  },
  {
    "key": "BAM-21096",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-09-23T09:33:58.000+0000",
      "description": "After upgrading to 7.1, we do not see comment icon next Build Number on Build Dashboard once any users comment in build then we have to go to specific plan. We cannot determine that any comments are put or not. We can see it on 5.14 version.\r\n\r\nCan we can enable it? Please give me any suggestions for this.",
      "summary": "Comment icon is showing next Build Number on Build Dashboard"
    }
  },
  {
    "key": "BAM-21095",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-09-23T05:54:09.000+0000",
      "description": "Currently it is only possible to use a ready to pull image for a Docker Runner in Bamboo. Other CI platforms like Jenkins, Drone.io or CircleCI have a feature to first build an image that will be used as a build environment in form of a running container.\r\n\r\nThis way a user:\r\n * can have environment definition in Git\r\n * can test any changes to build env this way\r\n * may not worry about Docker registry, since this will be a trow away image\r\n\r\n\u00a0",
      "summary": "Use Dockerfile to build an image for Docker Runner"
    }
  },
  {
    "key": "BAM-21094",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-09-23T02:54:46.000+0000",
      "description": "h3. Issue Summary\r\nAfter successful deployment trigger no longer works after cloning a deployment project\r\n\r\nh3. Steps to Reproduce\r\n # Create a deployment project and two environments\r\n# Add an \"After successful deployment\" trigger to the second environment that triggers upon the first completing\r\n# Clone the deployment project\r\n# Run the first environment in the resulting cloned project\r\n\r\nh3. Expected Results\r\nThe second environment triggers after the first runs\r\n\r\nh3. Actual Results\r\nThe second environment does not trigger.\r\n\r\nh3. Workaround\r\nVisit the trigger configuration at *Deployment Environment >> Triggers* in the cloned project and *Save* it again. It will fix the trigger definition and it will start triggering again.",
      "summary": "After successful deployment trigger no longer works after cloning a deployment project"
    }
  },
  {
    "key": "BAM-21090",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-09-22T05:42:45.000+0000",
      "description": "With a huge number of releases it is really difficult to navigate the releases page. It would be convenient to have pagination to easily navigate through releases.",
      "summary": "Pagination for releases page"
    }
  },
  {
    "key": "BAM-21089",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-09-21T19:03:52.000+0000",
      "description": "With Bamboo 6.7 the \"Build Warning Parser\" task was introduced.\r\n\r\n\u00a0\r\n\r\nsadly it does not support yamllint - which would be useful to validate changes on yaml specs by running yamllint against them.\r\n\r\nIt's also kind of strange that puppet-lint is implemented but yamllint not which is very common to be used in combination.\r\n\r\n\u00a0\r\n\r\nAlternative to adding only yamllint to the drop down would be to implement BAM-20473 as that would create the possibility to create own parsing patterns.",
      "summary": "Build Warning Parser support yamllint"
    }
  },
  {
    "key": "BAM-21088",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-09-22T13:17:56.000+0000",
      "created": "2020-09-18T07:15:23.000+0000",
      "description": "h3. Issue Summary\r\nBranch plan override variable user interface have a few problems\r\n\r\nh3. Steps to Reproduce\r\n# Navigate to {{Plan Configuration >> Variables}}\r\n# Create two variables:\r\n|| Variable Name || Value ||\r\n| test1 | first |\r\n| test2 | second |\r\n# Navigate to {{Plan Branch Configuration >> Variables}}\r\n# The first value shown in the drop down Variable Name is \"plan.variables.available.placeholder\" (only happens to Bamboo 7.1.2)\r\nThis selected value will have error \"You must enter a valid key\" if user try to add it\r\n# Add variable \"test1\" with value \"first\" \r\n# Click on Edit to the value \"first\" to change it to be \"newvalue\"\r\nSomehow, Variable Name \"test1\" is shown as \"test2\"\r\n# Click on Save\r\nVariable Name is shown as \"test1\" again\r\n# Refresh the page\r\n# Add both variables \"test1\" and \"test2\" to override\r\n# Edit the Variable Name or Value for \"test1\" or \"test2\"\r\n# Try to create new Variable for the branch plan\r\n\r\nh3. Expected Results\r\n* Step 4 should not have value \"plan.variables.available.placeholder\"\r\n* Step 6 Variable Name should not automatically changed to \"test2\" when editing the Variable Value\r\n* Step 8 refreshing the page should show Variable Name \"test1\" with Variable Value \"newvalue\"\r\n* Step 11 should not be possible to add new variable to branch plan: BAM-17604\r\n\r\nh3. Actual Results\r\n* Step 8 refreshing the page shows Variable Name \"test2\" with Variable Value \"newvalue\" even though it is supposed to be \"test1\"\r\n* Step 10 after adding all variables to override, editing Variable Value does not cause Variable Name to have drop down list anymore. Variable Name field have become Text field. Variable Name can be edited to become a new variable that does not exist previously\r\n* Step 11 is possible to create new variable for branch plan after adding all variables to override\r\n\r\nh3. Workaround\r\nIf want to modify Variable Value that have been added to override, delete the Variable from the list of Override first and then use the ADD function to change the Variable Value",
      "summary": "Branch Override Variable User Interface Bug"
    }
  },
  {
    "key": "BAM-21085",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-01-22T15:41:20.000+0000",
      "created": "2020-09-17T11:49:50.000+0000",
      "description": "h3. Issue Summary\r\nS3 artifact's folders (from Windows) are being published as links in Linux, not as folders (full path link until the file instead of links to each folder)\r\n\r\nh3. Steps to Reproduce\r\n# Configure S3 Artifcat at {{Administration >> Plans >> Artifact handlers}}\r\n# Use Windows Remote Agent to generate artifact that have multiple level folders\r\n# Use Linux Remote Agent to perform Artifact Download task\r\n\r\nh3. Expected Results\r\nEach folder within the artifact should be a link to the next folder within the tree until the final file is reached. e.g.\r\n{code}--folder1\r\n      |_folder2\r\n             |_folder3\r\n                    |_file.ext{code}\r\n\r\nh3. Actual Results\r\nThe first level within the artifact is a full link to the file directly. e.g.\r\n{code}folder1\\folder2\\folder3\\file.ext{code}\r\n\r\nh3. Note\r\nOld bug BAM-16379\r\n\r\nh3. Workaround\r\nDo not use S3 Artifact setting at Administration or configure certain plan to avoid using it at Plan Configuration",
      "summary": "S3 Artifact folders produced on Windows are being published as files"
    }
  },
  {
    "key": "BAM-21084",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-09-17T04:41:27.000+0000",
      "created": "2020-09-17T04:41:07.000+0000",
      "description": "h3. Issue Summary\r\n{{$BAMBOO_AGENT_HOME/temp/log_spool}} folder is not cleaned on Windows remote agents even after the fix for:\r\n* [BAM\\-19715: Agent Home \"/tmp/log_spool\" directory is not cleaned by Bamboo (fixed in Bamboo 6.8.0)|https://jira.atlassian.com/browse/BAM-19715]\r\n\r\nh3. Steps to Reproduce\r\n# Run some builds on a Windows remote agent\r\n\r\nh3. Expected Results\r\n{{$BAMBOO_AGENT_HOME/temp/log_spool}} files are removed.\r\n\r\nh3. Actual Results\r\n{{$BAMBOO_AGENT_HOME/temp/log_spool}} files are not removed and gradually build over time, using significant disk space.\r\n\r\nh3. Workaround\r\nClear the directory manually.",
      "summary": "log_spool folder is not cleaned on Windows remote agents"
    }
  },
  {
    "key": "BAM-21083",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-09-15T11:17:44.000+0000",
      "description": "To be able to use deployment webhooks to push a meaningful notification into Teams/Slack the deployment project name is needed. Weirdly this variable has been omitted.\r\n\r\nEverything else comes with .id and .name variants except the project.\r\n\r\nAs per\u00a0[Using webhooks - Atlassian Documentation|https://confluence.atlassian.com/bamboo/using-webhooks-1018270680.html]\r\n{code:java}\r\n${bamboo.webhook.template.id} - ${bamboo.webhook.template.name}\r\n${bamboo.deploy.environment.id} - ${bamboo.deploy.environment.name}\r\n${bamboo.deploy.version.id} - ${bamboo.deploy.version.name}\r\n${bamboo.deploy.project.id} - missing{code}\r\nPlease provide a\u00a0*bamboo.deploy.project.name* variable.\r\n\r\n\u00a0",
      "summary": "Deployment Webhook: Missing bamboo.deploy.project.name"
    }
  },
  {
    "key": "BAM-21082",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-10-15T11:50:35.000+0000",
      "created": "2020-09-15T09:08:25.000+0000",
      "description": "h3. Issue Summary\r\n\r\nPrior to 7.1, the linked repositories list was ordered alphabetically\r\nh3. Steps to Reproduce\r\n # Open the linked repositories list\r\n\r\nh3. Expected Results\r\n\r\nAlphabetically ordered list\r\nh3. Actual Results\r\n\r\nLinked Repositories list are ordered by creation time\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Linked Repositories list are ordered by creation time"
    }
  },
  {
    "key": "BAM-21079",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-09-14T16:27:41.000+0000",
      "description": "h3. Summary\r\n\r\nScheduled triggers sometimes collide with the branch expiry process and don't trigger anymore.\r\nh3. Expected results\r\n\r\nBamboo triggers the scheduled trigger.\r\nh3. Actual Results\r\n\r\nThe trigger thread (QuartzTriggerJob) get stuck if the branch expiry (BranchExpiryJob) is running at the same time.\r\nh3. Workaround\r\n\r\nChange the scheduled trigger time to a different time that the branch expiry (default value is at 3 am).",
      "summary": "Scheduled triggers sometimes collide with the branch expiry"
    }
  },
  {
    "key": "BAM-21077",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-09-10T21:01:59.000+0000",
      "description": "Currently Bamboo uses ant file copy parern which is less expressive than regex. Using regex would allow more flexibility when defining artifacts.",
      "summary": "Change artifact definition patern from ant to regex"
    }
  },
  {
    "key": "BAM-21076",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-10-15T11:49:32.000+0000",
      "created": "2020-09-10T17:44:32.000+0000",
      "description": "Currently linking\u00a0Jira issues to a test result is only available for users with ADMIN permission:\r\n\r\n!Screen Shot 2020-09-04 at 14.49.15.png|width=818,height=254!\r\n\r\nAll users with BUILD permission able to quarantine build results should be able to link\u00a0Jira issues.\r\n\r\nh3. Workaround\r\n\r\nUpdate file BAMBOO_INSTALL_DIR/atlassian-bamboo/lib/tests.ftl\r\n\r\nfind code\r\n\r\n{code}\r\n...\r\n     [#if hasAdministrationPermission]\r\n         [@displayTestToJiraActions linkedJiraIssueKey=linkedJiraIssueKey testCaseId=testResult.testCase.id planResultKey=testResult.testClassResult.buildResultsSummary.planResultKey returnUrl=currentUrl /]\r\n    [/#if]\r\n...\r\n{code}\r\nand update it by removal {{if}} statement to have \r\n{code}\r\n...\r\n[@displayTestToJiraActions linkedJiraIssueKey=linkedJiraIssueKey testCaseId=testResult.testCase.id planResultKey=testResult.testClassResult.buildResultsSummary.planResultKey returnUrl=currentUrl /]\r\n...\r\n{code}\r\n\u00a0",
      "summary": "Allow non admins to link jira issues to a test result"
    }
  },
  {
    "key": "BAM-21075",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-09-09T16:00:31.000+0000",
      "description": "h3. Issue Summary\r\n\r\nNo initial build is run on a cloned Bamboo build plan when cloning an existing plan by pressing button \"Save and continue\" and not button \"Clone\".\r\n\r\nHence for that new and cloned build plan no build on the linked repository's master branch is run and thus no Git repository cache exists for it.\r\n\r\nApparently Bamboo's change detection is causing an issue here, so that on a first Git merge attempt the cloned plan is not triggered per the set commit trigger.\r\nh3. Steps to Reproduce\r\n # Clone a plan as dewcribed above, then you need to enable the build plan => No initial build on master (/)\r\n # Create a new Git branch e.g. \"Feature-3\" => That is creating a Bamboo plan branch with that same name and there triggers a build (/)\u00a0[<---- per \"When new branch in repository is created\" event being set in Plan configuration]\r\n # Edit any file on this \"Feature-3\" branch, commit the change and create a PR for this change => That triggers a build on this \"PR-commit\" branch (/) [<---- again, per the \"When new branch in repository is created\" event]\r\n # Merge this change back to feature branch \"Feature-3\" which makes everything correct on Bitbucket Server (so a successful code merge) and triggers another build for \"Feature-3\" (/)\u00a0[<---- now per commit trigger inherited from master plan]\r\n # *Merge \"Feature-3\" to master* => That should trigger a build on the cloned build plan, on master, but does not (x)\r\n # *Merge again \"Feature-3\" to master* (after source code edit and PR) => Now it triggers a build on the cloned build plan, on master, on a second and any subsequent attempts (/)\r\n\r\nh3. Expected Results\r\n\r\nBuild running in step 5 already.\r\nh3. Actual Results\r\n\r\nNo build is triggered in step 5 from above.\r\n\r\nAfter the first \"Feature-3\" to master merge attempt the below shows up in Bamboo's Server log:\r\n{noformat}\r\n2020-09-09 11:05:50,424 INFO [18-BAM::Default Agent::Agent:pool-38-thread-1] [BuildAgentControllerImpl] Agent 360449 checking build queue for executables...\r\n 2020-09-09 11:06:21,261 INFO [http-nio-8085-exec-18] [AuthenticatorImpl] Authenticated app 'Bitbucket:2865828853' as user 'null' successfully\r\n 2020-09-09 11:06:51,263 INFO [http-nio-8085-exec-15] [AuthenticatorImpl] Authenticated app 'Bitbucket:2865828853' as user 'null' successfully\r\n 2020-09-09 11:06:51,265 INFO [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-10] [PullRequestAwareEventListener] Received pull request opened event [ c-source, from: refs/heads/Feature-33, to: refs/heads/master]\r\n{noformat}\r\nOn Bitbucket Server side the merge succeeds and build on master is not triggered in Bamboo. Now on the second (and any further) merge attempt, the following is logged out, basically just as above:\r\n{noformat}\r\n2020-09-09 11:13:24,819 INFO [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-10] [PullRequestAwareEventListener] Received pull request merged event [ c-source, from: refs/heads/Feature-33, to: refs/heads/master]\r\n{noformat}\r\nBut in this case, the build really occurs on Bamboo side and consequently \"Sending build notification to Stash\" is going back to Bitbucket Server as re-printed below.\r\n{noformat}\r\n2020-09-09 11:13:25,227 INFO [9-BAM::PlanExec:pool-15-thread-3] [ChangeDetectionListenerAction] : Change detection found 3 changes for plan BAD-BUIL\r\n 2020-09-09 11:13:25,227 INFO [9-BAM::PlanExec:pool-15-thread-3] [DefaultDependencyBlockingManager] Checking if parents [] have changes...\r\n2020-09-09 11:13:25,253 INFO [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-11] [BitbucketServerBuildStatusUpdater] Sending build notification to Stash (build key: BAD-BUIL-15, repository: NEW Bitbucket Server C-Source)\r\n2020-09-09 11:13:25,254 INFO [9-BAM::PlanExec:pool-15-thread-3] [ChainExecutionManagerImpl] Build BAD-BUIL-JOB1-15 has been dispatched\r\n{noformat}\r\nSo that proofs that Bitbucket Server is notifying equally (per \"Received pull request opened event\"), for a fist and all subsequent merge attempts from that feature branch to master, but Bamboo Server is behaving differently on first one compared to all further ones.\r\n\r\n*The difference seems to be Bamboo's change detection. It does not kick in on the first attempt, but on the second and next ones it does.*\r\nh3. Workaround\r\n\r\nRunning a first \"dummy build\" after cloning (or clone so that it runs that first build automatically) and either delete that first build or simply ignore it.",
      "summary": "First merge attempt of feature brach to master fails on cloned build plan if no previus build on master run"
    }
  },
  {
    "key": "BAM-21074",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-11-23T14:20:57.000+0000",
      "created": "2020-09-09T11:55:51.000+0000",
      "description": "Bamboo API doesn't allow to configure if Notification recipient should be available for Deployment environments only",
      "summary": "API to display Notification recipient for Deployments only"
    }
  },
  {
    "key": "BAM-21073",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-09-08T14:40:18.000+0000",
      "created": "2020-09-08T14:07:36.000+0000",
      "description": "h3. Issue Summary\r\n\r\nAfter Bamboo 7.x every new plan branch created in a plan using Bamboo Specs is a [divergent branch|https://confluence.atlassian.com/bamboo/working-with-branch-divergence-994314811.html] and has its own separate configuration in the database. Bamboo is switching the branch where a deployment project should be trying to get artifacts from every time a new plan branch is created using Bamboo Specs in the source build plan. This wasn't a problem before 7.x because all plan branches were inheriting the same configuration from the main plan branch.\r\n\r\nThis renders deployment releases to fail because a new plan branch can have a completely different set of tasks and artifact definition compared to the main plan branch (usually named *master*).\r\nh3. Steps to Reproduce\r\n # Install Bamboo 7.0.x.\r\n # Integrate it with Bitbucket Server.\r\n # Create a project named Bamboo with key *BAM* in Bamboo.\r\n # Use the following RSS Bamboo YAML Specs:\r\n{noformat:title=bamboo.yaml}\r\n---\r\n# Build plan\r\nversion: 2\r\nplan:\r\n  project-key: BAM\r\n  name: Bamboo Specs\r\n  key: SPECS\r\n\r\nbranches:\r\n  create: for-new-branch\r\n\r\nstages:\r\n  - Default Stage:\r\n      jobs: \r\n        - Build\r\nBuild:\r\n  tasks:\r\n    - script:\r\n        - echo hello > test.txt\r\n  artifacts:\r\n    - name: test.txt\r\n      pattern: test.txt\r\n      shared: true\r\n      required: true\r\n\r\n---\r\nversion: 2\r\ndeployment:\r\n  name: deployment\r\n  source-plan: BAM-SPECS\r\n \r\nrelease-naming: release-1\r\n \r\nenvironments:\r\n  - Production\r\n \r\nProduction:\r\n  triggers:\r\n    - build-success\r\n  tasks:\r\n    - clean\r\n    - artifact-download\r\n    - script:\r\n        - echo hello\r\n{noformat}\r\n\r\n # Create a repository configuration in Bamboo pointing to your Bitbucket Server repository storing the *bamboo-specs/bamboo.yaml* file.\r\n # Scan the repository in Bamboo to create (a) build plan and (b) deployment project.\r\n # The build plan and deployment project will be created and automatically triggered.\r\n # Create a new branch in your Bitbucket Server repository and modify the yaml file to remove the artifact definition:\r\n{noformat:title=bamboo.yaml}\r\n---\r\n# Build plan\r\nversion: 2\r\nplan:\r\n  project-key: BAM\r\n  name: Bamboo Specs\r\n  key: SPECS\r\n\r\nbranches:\r\n  create: for-new-branch\r\n\r\nstages:\r\n  - Default Stage:\r\n      jobs: \r\n        - Build\r\nBuild:\r\n  tasks:\r\n    - script:\r\n        - echo hello > test.txt\r\n\r\n---\r\nversion: 2\r\ndeployment:\r\n  name: deployment\r\n  source-plan: BAM-SPECS\r\n \r\nrelease-naming: release-1\r\n \r\nenvironments:\r\n  - Production\r\n \r\nProduction:\r\n  triggers:\r\n    - build-success\r\n  tasks:\r\n    - clean\r\n    - artifact-download\r\n    - script:\r\n        - echo hello\r\n{noformat}\r\n\r\n # Push the changes to Bitbucket Server.\r\n # Bamboo will automatically create a new branch plan in BAM-SPECS. The deployment project will now be incorrectly linked to your plan branch and will start displaying the following warning message in the UI:\r\n !Screen Shot 2020-09-08 at 10.47.16.png|thumbnail!\r\n ** Despite the warning message the artifact definition does exit under the main plan branch of the source build plan. It is not removed. The problem now is that the deployment project is looking at the newly created divergent plan branch that has no artifact definition.\r\n # Trigger a new build in BAMBOO-SPECS for the main plan branch (not the newly created divergent plan branch).\r\n # The build will succeed and publish the artifact, which will automatically trigger the deployment release...\r\n\r\nh3. Expected Results\r\n\r\nDeployment release successfully downloads the artifact that was just produced by the recently triggered build on BAMBOO-SPECS.\r\nh3. Actual Results\r\n\r\nDeployment release fails to download the artifact because it's now looking for it under the new divergent plan branch instead of the main plan branch that literally just produced it.\r\n\r\nThe below exception is thrown in the build logs:\r\n{noformat}\r\nsimple\t08-Sep-2020 12:57:45\tStarting task 'Download release contents' of type 'com.atlassian.bamboo.plugins.bamboo-artifact-downloader-plugin:artifactdownloadertask'\r\nsimple\t08-Sep-2020 12:57:45\tPreparing to download plan result BAM-SPECS-6 artifact: Non required shared artifact: [test.txt], pattern: [test.txt]\r\nerror\t08-Sep-2020 12:57:45\tUnable to download artifact Non required shared artifact: [test.txt], pattern: [test.txt]\r\n{noformat}\r\nRe-running a failed deployment won't fix the problem because the release is now linked to and trying to download the artifact from the wrong branch.\r\nh3. Workaround\r\n # Re-scan the repository for Specs code inside Bamboo.\r\n ** This will temporarily switch the deployment project link back to the main plan branch and will force the deployment project to start looking for artifacts produced by the main branch.\r\n # Clone the deployment project.\r\n ** The clone basically creates a new deployment project in the database while carrying some of the data over from the other deployment project. The deployment project will point to the main plan branch in the source build plan to look for artifacts after the clone operation.\r\n\r\n(!) Those are temporary workarounds. The deployment project might start looking for artifacts in the wrong place again if a new divergent plan branch is created.\r\nh3. Solution\r\n\r\nUpgrade Bamboo to version\u00a0*7.1.1 or higher*.",
      "summary": "Deployment release fails trying to download artifact from wrong branch when using Bamboo Specs"
    }
  },
  {
    "key": "BAM-21072",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-09-07T19:05:13.000+0000",
      "created": "2020-09-07T12:49:26.000+0000",
      "description": "It would be great if Bamboo can automatically build only particular Bitbucket PRs, just like it creates plan branches using regexp.",
      "summary": "Create plan branches for particular PRs only"
    }
  },
  {
    "key": "BAM-21071",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-09-04T16:46:08.000+0000",
      "description": "h3. Problem Definition\r\nThe current *Deploy -> All deployment projects* page displays just the list of deployment projects, environment name and the latest release happened in that project. There is no page that lists all the recent deployments happened in an environment like we have a Build dashboard for all the plans.\r\n\r\nh3. Suggested Solution\r\nIntroduce a Dashboard for deployment that lists all the recent deployment related activities happened in an environment that can be sorted by \"completed date\".\r\n\r\nh3. Why is this important?\r\nWhen there are hundreds of deployment environments, this dashboard helps in showing what happened in last X minutes/hours",
      "summary": "Introduce Deployment dashboard to display recent deployment activities"
    }
  },
  {
    "key": "BAM-21070",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-09-04T14:17:30.000+0000",
      "description": "h3. Problem Definition\r\n\r\nWhen we look at the build dashboard, we see some relative dates like below instead of showing the absolute dates. It is challenging to find the actual date by hovering the mouse over the relative date to know the actual build date.\u00a0\r\n !image-2020-09-04-16-07-25-878.png|thumbnail!\r\nh3. Suggested Solution\r\n\r\nIntroduce a JVM argument to toggle this behaviour. For instance, something like adding '-Datlassian.bamboo.build.showabsolutedates=true' to JVM argument should display absolute value in the dashboard and in other places where the relative date values are stored.\r\nh3. Why this is important\r\n\r\nWhen we have a lot of builds in the dashboard and when Bamboo displays like '1 month ago' or so, it gets challenging to get a gist of the exact date.\r\nh3. Workaround\r\n\r\nHover the mouse over the relative date and we see the absolute value.",
      "summary": "Add a configuration option to show absolute dates next to builds"
    }
  },
  {
    "key": "BAM-21069",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-09-03T17:27:38.000+0000",
      "created": "2020-09-02T14:08:51.000+0000",
      "description": "It would be\u00a0very helpful if Bamboo would automatically route jobs or add some sort of capability/requirement to jobs based on the script task interpreter to make sure they get executed in the right place (e.g. Windows or Linux). This is to avoid a situation where, for instance, a job with script task interpreter set to _Windows PowerShell_ is sent to a remote agent running on Linux.\r\n\r\nAt the moment Bamboo sends those jobs to any available agent unless you work with (a) [agent dedication|https://confluence.atlassian.com/bamboo/dedicating-an-agent-629015108.html] and/or (b) [requirements|https://confluence.atlassian.com/bamboo0609/administering-bamboo/agents-and-capabilities/configuring-capabilities/about-capabilities-and-requirements]. This can become troublesome and difficult to maintain in large Bamboo deployments.",
      "summary": "Automatic routing of jobs to Windows or Linux agents based on the script task interpreter"
    }
  },
  {
    "key": "BAM-21068",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-10-15T11:50:34.000+0000",
      "created": "2020-09-01T20:05:28.000+0000",
      "description": "h3. Issue Summary\r\nWhen attempting to add a Webhook Build notification, the screen just sends a \"URL must not be empty\" error message, rather than saving the notification config.\r\n !image-2020-09-01-15-00-53-822.png|thumbnail! \r\nh3. Steps to Reproduce\r\n# Edit Build\r\n# Go to *Notifications* tab\r\n# Add Notification\r\n# Choose the following options:\r\nRecipient Type: Webhooks\r\nWebhook name: Build webhook\r\nURL: any url here\r\n\r\nh3. Expected Results\r\nNotification is saved, and notifications sent to webhook\r\n\r\nh3. Actual Results\r\n\r\n !image-2020-09-01-15-00-53-822.png|thumbnail! \r\n\r\nno messages logged in {{atlassian-bamboo.log}} or {{catalina.out}}\r\n\r\nHAR file from recreation will be attached in comments\r\n\r\nExperiencing this issue in Safari, Chrome, and Firefox.  not tested in IE, or Edge\r\n\r\nh3. Workaround\r\n\r\n* disable https://marketplace.atlassian.com/apps/1213289/slack-notifications-for-bamboo plugin or\r\n* use Bamboo Specs for Webhook notification configuration",
      "summary": "Attempting to create a Webhook based Build notification fails with \"URL must not be empty\" error"
    }
  },
  {
    "key": "BAM-21067",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-09-01T06:15:46.000+0000",
      "description": "When using the\u00a0 webhook functionality in Bamboo 7.1 the ${bamboo.trigger.name.for.sentence} variable contains a description of how the build was invoked. For a manual build we see a message similar to\u00a0*was manually triggered by user1*.\u00a0\r\n\r\nIf the job was rerun then we see the not as informative *build.triggerreason.rerunBuild*.\r\n\r\nAssociated with all build results Bamboo stores a *trigger_reason* in the *buildresultsummary* table. When manually built we also see extra information stored within the *buildresultsummary_customdata*.\u00a0\r\n\r\nThis feature request is to have more information stored and reported for the *rerun* of a plan so that the we get a message like *was rerun by user1*.\r\n\r\n\u00a0",
      "summary": "Rerun job should provide more information in trigger reason"
    }
  },
  {
    "key": "BAM-21066",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-08-31T12:08:21.000+0000",
      "description": "Currently, it is only possible to override a branch for a default repository\u00a0[https://docs.atlassian.com/bamboo-specs-docs/7.1.1/specs.html?yaml#overriding-branch-of-a-linked-repository].\r\n\r\nIt would be great if it was possible to do the same for non default repositories in the plan using specs, i.e. specify repo name and branch in yaml.\r\n\r\n\u00a0\r\n\r\nNote: Java Specs have this functionality",
      "summary": "Allow overriding branches for non default repositories in YML specs"
    }
  },
  {
    "key": "BAM-21065",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-08-31T05:24:25.000+0000",
      "description": "h3. Issue Summary\r\nDELETE on queue REST API to stop an in-progress build does work as specified (the API reference states that it stops build execution). Instead, the behaviour is as follows:\r\n* The job remains in progress after the first delete call if its only job in the stage\r\n* If there are multiple jobs in the stage, it looks to be cancelled but looking at the job result will cause a refresh spam\r\n* The command the agent is running continues.\r\n\r\nA second delete call will change the job status to cancelled, however the agent will still be running the command.\r\n\r\nh3. Steps to Reproduce\r\n# Create a single stage plan with two jobs\r\n# Add a script task:\r\n{code}\r\nsleep 120;\r\n{code}\r\n# Perform a build\r\n# Issue a DELETE to the API:\r\n{code}\r\nBAMBOO_USERNAME=\r\nBAMBOO_BASE_URL=\r\nBAMBOO_JOB_BUILD_KEY=\r\ncurl -vvv --user $BAMBOO_USERNAME -X DELETE $BAMBOO_BASE_URL/rest/api/latest/queue/$BAMBOO_JOB_BUILD_KEY\r\n{code}\r\n# Viewing the job result in the UI will create a browser refresh loop\r\n# The job is still running on the agent\r\n# Issue a second DELETE to the API:\r\n{code}\r\nBAMBOO_USERNAME=\r\nBAMBOO_BASE_URL=\r\nBAMBOO_JOB_BUILD_KEY=\r\ncurl -vvv --user $BAMBOO_USERNAME -X DELETE $BAMBOO_BASE_URL/rest/api/latest/queue/$BAMBOO_JOB_BUILD_KEY\r\n{code}\r\n# The refresh loop is broken now and the job result is cancelled but the actual job is still in progress on the agent.\r\n\r\nh3. Expected Results\r\nThe job execution is stopped and the result is cancelled, in the same fashion as if you had hit *Stop Job* in the UI.\r\n\r\nh3. Actual Results\r\nRefresh loops when viewing the job and despite the job eventually being cancelled, its still running and consuming an agent.\r\n\r\nh3. Workaround\r\nOnce in this state, you need to wait for the job to complete. In future, you can stop the job from the UI (*Build result > Select Job > Actions > Stop Job*) instead of the REST API. \r\n\r\nIf an automated stop is required, you can use the same Struts action Bamboo uses from the UI, however it should be avoided unless necessary since its usage may change in future versions without warning:\r\n{code}\r\nBAMBOO_BASE_URL=https://localhost:8085\r\nBAMBOO_JOB_BUILD_KEY=PROJ-PLAN-JOB1-1\r\nBAMBOO_USERNAME=bamboo\r\ncurl --user $BAMBOO_USERNAME -X POST \"$BAMBOO_BASE_URL/build/admin/stopPlan.action?planResultKey=$BAMBOO_JOB_BUILD_KEY\" \\\r\n  -H 'Content-Type: application/x-www-form-urlencoded' \\\r\n  -H 'X-Atlassian-Token: no-check'\r\n{code}",
      "summary": "DELETE on queue REST API to stop an in-progress build does not work as specified"
    }
  },
  {
    "key": "BAM-21064",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-08-28T12:43:05.000+0000",
      "description": "It would be nice to have the option to enable/disable Crowd SSO from the user interface. At the moment changes need to be done manually to the following files:\r\n * <BAMBOO_INSTAL>/atlassian-bamboo/WEB-INF/classes/seraph-config.xml\r\n * <BAMBOO_HOME>/xml-data/configuration/crowd.properties\r\n\r\nThe details are outlined in the [Setting up Bamboo with Crowd using SSO|https://confluence.atlassian.com/bamkb/setting-up-bamboo-with-crowd-using-sso-946633280.html] documentation.\r\n\r\nIt would be very helpful if (a) Bamboo admins could change settings from the UI or (b) at the very least have a flag in the UI to inform what type of authenticator is being used and whether Crowd SSO is enabled/disabled.",
      "summary": "Add option to enable/disable Crowd SSO to the Bamboo administration section"
    }
  },
  {
    "key": "BAM-21063",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-08-28T02:47:27.000+0000",
      "description": "h3. Issue Summary\r\nBuilds can be queued before active objects import into a fresh instance completes. Impact is mostly unknown. If the build that makes it into the queue relies on an Active Objects entity, it may fail. \r\n\r\nh3. Steps to Reproduce\r\n# Create a plan with a repository and repository polling, set the interval really low (like 1s)\r\n# Export the instance to XML\r\n# Stop the instance\r\n# Create a new Bamboo instance\r\n# Before importing, commit to the repository so it finds a change\r\n# Progress through wizard and import the XML backup from Step 2\r\n\r\nh3. Expected Results\r\nServer transitions to PAUSED and no builds make it into the queue before Active Objects import.\r\n\r\nh3. Actual Results\r\nServer transitions to PAUSING (not paused) as the build gets into the queue before the Active Objects import begins.\r\n\r\nThe below can be observed in the logs:\r\n{noformat}\r\n2020-08-26 08:46:47,718 INFO [9-BAM::PlanExec:pool-15-thread-1] [ChangeDetectionListenerAction] : Change detection found 4 changes for plan ABC-SOM\r\n2020-08-26 08:46:48,281 INFO [9-BAM::PlanExec:pool-15-thread-1] [ChainExecutionManagerImpl] Build ABC-SOM-JOB1-29 has been dispatched\r\n2020-08-26 08:46:48,315 INFO [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-7] [BuildQueueManagerImpl] Attempting to queue abc - something - Default Job #29 (ABC-SOM-JOB1-29).\r\n2020-08-26 08:46:48,315 INFO [9-BAM::PlanExec:pool-15-thread-1] [ChainExecutionManagerImpl] Build ABC-SOM-JUST-29 has been dispatched\r\n2020-08-26 08:46:48,316 INFO [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-7] [ExecutionPhaseServiceImpl] abc - something - Default Job #29 (ABC-SOM-JOB1-29) queued\r\n2020-08-26 08:46:48,342 INFO [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-1] [BuildQueueManagerImpl] Attempting to queue abc - something - just #29 (ABC-SOM-JUST-29).\r\n2020-08-26 08:46:48,344 INFO [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-1] [ExecutionPhaseServiceImpl] abc - something - just #29 (ABC-SOM-JUST-29) queued\r\n2020-08-26 08:46:48,352 INFO [http-nio-8703-exec-24] [ServerLifecycleManagerImpl] Server state changed to 'PAUSING' from 'RUNNING'\r\n2020-08-26 08:46:48,353 INFO [http-nio-8703-exec-24] [ImmutablePlanCacheServiceImpl] Plan cache is being disabled, all plans keys have been reset\r\n2020-08-26 08:46:48,355 INFO [9-BAM::PlanExec:pool-15-thread-2] [ExecutionLimitsServiceImpl] : ABC-SOM cannot be run because the system is PAUSING\r\n2020-08-26 08:46:48,363 INFO [http-nio-8703-exec-24] [XmlMigrator] Importing with mapper: com.atlassian.bamboo.migration.stream.activeobjects.ActiveObjectsMapper@702feb33\r\n2020-08-26 08:46:48,363 WARN [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-7] [ImmutablePlanCacheServiceImpl] Attempt to load plan ABC-SOM while cache is disabled\r\n2020-08-26 08:46:48,364 ERROR [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-7] [ImmutablePlanCacheServiceImpl] \r\ncom.atlassian.bamboo.plan.cache.ImmutablePlanCacheServiceImpl$PlanCacheDisabledException: Plan cache is disabled\r\n\tat com.atlassian.bamboo.plan.cache.ImmutablePlanCacheServiceImpl$1.load(ImmutablePlanCacheServiceImpl.java:112)\r\n{noformat}\r\n\r\nh3. Workaround\r\nDisable all build triggers before performing the export.",
      "summary": "Builds can be queued before active objects import (into a fresh instance) completes"
    }
  },
  {
    "key": "BAM-21062",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-08-28T01:43:23.000+0000",
      "description": "h3. Problem Definition\r\n\r\nCurrently in Bamboo, there is no way to configure secure administrator sessions (websudo) like in Jira and Confluence to require administrators to reinput their password when accessing the administrator configuration which creates a temporary secure session. Example:\r\n* [Jira: Configuring secure administrator sessions|https://confluence.atlassian.com/adminjiraserver/configuring-secure-administrator-sessions-938847890.html]\r\n\r\nh3. Suggested Solution\r\nSecure admin session implementation like Jira and Confluence.\r\n\r\nh3. Workaround\r\nNone",
      "summary": "Implement secure administrator sessions (websudo) in Bamboo"
    }
  },
  {
    "key": "BAM-21059",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-09-03T07:14:39.000+0000",
      "created": "2020-08-27T13:14:01.000+0000",
      "description": "h3. Issue Summary\r\n\r\nSome variable related tables still use varchar(4000) while they should use CLOB.\r\nh3. Steps to Reproduce\r\n # Have a version of Bamboo installed, prior to 7.1.1, where it is possible to upgrade to 7.1.1.\r\n # Create a password variable with a long value (close to the 4000 char limit).\r\n # Upgrade Bamboo to version 7.1.1.\r\n\r\nh3. Expected Results\r\n\r\nBamboo upgrades with no errors.\r\nh3. Actual Results\r\n\r\nThe upgrade process fails. In the logs we can see:\u00a0\r\n{noformat}\r\n2020-08-27 11:58:22,955 INFO [18-UpgradeTaskBackgroundThread:pool-40-thread-1] [AbstractUpgradeManager] ---------------------------------------------------------------\r\n2020-08-27 11:58:22,955 INFO [18-UpgradeTaskBackgroundThread:pool-40-thread-1] [AbstractUpgradeManager] 70102 : Encrypt data in VARIABLE_CONTEXT table (post-bootstrap)\r\n2020-08-27 11:58:22,955 INFO [18-UpgradeTaskBackgroundThread:pool-40-thread-1] [AbstractUpgradeManager] ---------------------------------------------------------------\r\n(...)\r\n2020-08-27 11:58:23,893 INFO [18-UpgradeTaskBackgroundThread:pool-40-thread-1] [AbstractVariableDataEncryptionTask] Variable 'variable_name' has value length 3096 and encrypted value length 4152 is more than db column size - 4000 characters. Please decrease its size\r\n2020-08-27 11:58:23,897 WARN [18-UpgradeTaskBackgroundThread:pool-40-thread-1] [SqlExceptionHelper] SQL Error: 0, SQLState: 22001\r\n2020-08-27 11:58:23,898 ERROR [18-UpgradeTaskBackgroundThread:pool-40-thread-1] [SqlExceptionHelper] ERROR: value too long for type character varying(4000)\r\n2020-08-27 11:58:23,902 ERROR [18-UpgradeTaskBackgroundThread:pool-40-thread-1] [AbstractUpgradeManager] org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; nested exception is org.hibernate.exception.DataException: could not execute statement\r\norg.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; nested exception is org.hibernate.exception.DataException: could not execute statement\r\n\tat org.springframework.orm.hibernate5.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:251)\r\n\tat org.springframework.orm.hibernate5.HibernateTemplate.doExecute(HibernateTemplate.java:387)\r\n\tat org.springframework.orm.hibernate5.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:350)\r\n\tat com.atlassian.bamboo.persistence.BambooTransactionHibernateTemplate$1.doInTransaction(BambooTransactionHibernateTemplate.java:36)\r\n\tat org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)\r\n\tat com.atlassian.bamboo.persistence.BambooTransactionHibernateTemplate.execute(BambooTransactionHibernateTemplate.java:28)\r\n\tat com.atlassian.bamboo.persistence.BambooTransactionHibernateTemplate.execute(BambooTransactionHibernateTemplate.java:33)\r\n\tat com.atlassian.bamboo.upgrade.tasks.AbstractVariableDataEncryptionTask.updateVariableValuesByValue(AbstractVariableDataEncryptionTask.java:133)\r\n(...)\t\r\nCaused by: org.hibernate.exception.DataException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:118)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:178)\r\n\tat org.hibernate.engine.query.spi.NativeSQLQueryPlan.performExecuteUpdate(NativeSQLQueryPlan.java:107)\r\n\tat org.hibernate.internal.SessionImpl.executeNativeUpdate(SessionImpl.java:1593)\r\n\tat org.hibernate.query.internal.NativeQueryImpl.doExecuteUpdate(NativeQueryImpl.java:292)\r\n\tat org.hibernate.query.internal.AbstractProducedQuery.executeUpdate(AbstractProducedQuery.java:1594)\r\n\tat com.atlassian.bamboo.upgrade.tasks.AbstractVariableDataEncryptionTask.encryptVariableValue(AbstractVariableDataEncryptionTask.java:176)\r\n(...)\r\nCaused by: org.postgresql.util.PSQLException: ERROR: value too long for type character varying(4000)\r\n\r\n(...)\r\n\r\n{noformat}\r\nh3. Workaround\r\n\r\nFor versions prior 7.1.1: Currently there is no known workaround for this behavior. A workaround will be added here when available\r\n\r\nFor version 7.1.1:\u00a0[^atlassian-bamboo-web-7.1.1-varsizepatch.jar]\r\n # Stop Bamboo.\r\n # Download the file:\r\n # Run the following queries:\r\n{noformat}\r\nALTER TABLE VARIABLE_CONTEXT ALTER COLUMN VARIABLE_VALUE TYPE text;\r\nALTER TABLE VARIABLE_BASELINE_ITEM ALTER COLUMN VARIABLE_VALUE TYPE text;\r\nALTER TABLE VARIABLE_SUBSTITUTION ALTER COLUMN VARIABLE_VALUE TYPE text;\r\nALTER TABLE STAGE_VARIABLE_CONTEXT ALTER COLUMN VARIABLE_VALUE TYPE text;\r\n{noformat}\r\n\r\n # Navigate to the folder <bamboo_server_directory>/atlassian-bamboo/WEB-INF/lib/. You will find a file called atlassian-bamboo-web-7.1.1.jar. Back it up.\r\n # Place the new jar in that folder, and change its name to atlassian-bamboo-web-7.1.1.jar, to make it look like the previous one.\r\n # Start Bamboo again.",
      "summary": "All VARIABLE_VALUE columns should use clob instead of varchar(4000)"
    }
  },
  {
    "key": "BAM-21058",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-08-27T11:59:15.000+0000",
      "description": "It would be nice to include the name of the main branch in email notifications in the same way we do for branches other than the default one.\r\n\r\nHere's an example of an email message sent by Bamboo from a build that succeeded on my main plan branch (e.g. master):\r\n\r\n!Screen Shot 2020-08-27 at 08.54.56.png|thumbnail!\r\n\r\nHere's an example of an email message sent by Bamboo from a build that succeeded on my branch named testing123:\r\n\r\n!Screen Shot 2020-08-27 at 08.55.14.png|thumbnail!",
      "summary": "Include name of the main branch in email notifications"
    }
  },
  {
    "key": "BAM-21057",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-09-01T13:37:26.000+0000",
      "created": "2020-08-26T20:55:42.000+0000",
      "description": "h3. Issue Summary\r\n\r\nPlan branch does not inherit the quarantined tests from master if the master plan already ran the same tests in a job that was deleted.\r\nh3. Steps to Reproduce\r\n # Create a plan with Junit tests;\r\n # Run the tests and make sure that at least one will fail;\r\n # Quarantined the failed tests;\r\n # Delete the job that runs the tests;\r\n # Create a new job to run the same tests;\r\n # Run the plan and quarantine the failed test;\r\n # Create a plan branch.\r\n\r\nh3. Expected Results\r\n\r\nThe plan branch creation succeeds and has the same quarantined tests from master, also the initial build runs.\r\nh3. Actual Results\r\n\r\nThe plan branch is created; however, the tests are not quarantined and the initial build does not run.\r\n In the atlassian-bamboo.log we can see the following error:\r\n{noformat}\r\n2020-08-25 18:50:32,115 ERROR [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-5] [AsynchronousAbleEventDispatcher] There was an exception thrown trying to dispatch event [com.atlassian.stash.plugin.remote.event.StashBranchCreatedRemoteEvent@1e5604b5[branchName=release,repositoryProject=TEST,repositorySlug=bamboo,committer=brosa,sourceId=faee5b0d-761b-3d47-8b03-576bfe6b70f3,sourceUrl=http://bitbucket51611:7990]] from the invoker [SingleParameterMethodListenerInvoker{method=public void com.atlassian.bamboo.plugins.stash.events.BranchCreatedEventListener.onCreateRepositoryBranchEvent(com.atlassian.stash.plugin.remote.event.StashBranchCreatedRemoteEvent), listener=com.atlassian.bamboo.plugins.stash.events.BranchCreatedEventListener@58790647}]\r\njava.lang.RuntimeException: java.lang.IllegalStateException\r\n\tat com.atlassian.event.internal.SingleParameterMethodListenerInvoker.invoke(SingleParameterMethodListenerInvoker.java:50)\r\n\tat com.atlassian.event.internal.AsynchronousAbleEventDispatcher$1$1.run(AsynchronousAbleEventDispatcher.java:46)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat com.atlassian.bamboo.utils.BambooRunnables$1.run(BambooRunnables.java:48)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper.runWith(ImpersonationHelper.java:26)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper.runWithSystemAuthority(ImpersonationHelper.java:17)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper$1.run(ImpersonationHelper.java:41)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\nCaused by: java.lang.IllegalStateException\r\n\tat java.util.Optional.orElseThrow(Optional.java:290)\r\n\tat com.atlassian.bamboo.build.creation.ChainBranchCreationServiceImpl.cloneQuarantinedTestsFromMaster(ChainBranchCreationServiceImpl.java:350)\r\n\tat com.atlassian.bamboo.build.creation.ChainBranchCreationServiceImpl.triggerCreationCompleteEvents(ChainBranchCreationServiceImpl.java:377)\r\n\tat com.atlassian.bamboo.plan.branch.BranchDetectionServiceImpl.createChainBranch(BranchDetectionServiceImpl.java:903)\r\n\tat com.atlassian.bamboo.plan.branch.BranchDetectionServiceImpl.createOrEnableChainBranch(BranchDetectionServiceImpl.java:699)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:197)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat com.atlassian.bamboo.security.acegi.intercept.aopalliance.AuthorityOverrideMethodSecurityInterceptor.invoke(AuthorityOverrideMethodSecurityInterceptor.java:22)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)\r\n\tat com.sun.proxy.$Proxy291.createOrEnableChainBranch(Unknown Source)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat com.atlassian.plugin.util.ContextClassLoaderSettingInvocationHandler.invoke(ContextClassLoaderSettingInvocationHandler.java:26)\r\n\tat com.sun.proxy.$Proxy353.createOrEnableChainBranch(Unknown Source)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n        ...\r\n{noformat}\r\nAlso, in the test_class table, we can check the deleted job being referenced at the master_job_id column.\r\nh3. Workaround\r\n\r\nCurrently, there's no workaround for this issue.\r\n\r\nh3. Solution\r\n\r\nUpgrade Bamboo to 7+ version.",
      "summary": "Plan branch does not inherit the quarantined tests from master"
    }
  },
  {
    "key": "BAM-21056",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-08-26T15:02:31.000+0000",
      "description": "h3. Issue Summary\r\n\r\nJobs that run after a manual stage (with no jobs) report misleading statuses when they are successful. Symptoms are (a) Bamboo reports the job was successful, (b) the progress bar is always grey and (c) the icon that shows up next to the job title is the one used for builds that wasn't executed yet.\r\n * This does not happen when one of the jobs fail. If one of the jobs fail, all other jobs report the correct status, progress bar and have the correct icon next to them.\r\n * This does not happen when a manual stage has jobs in it. It only affects builds with manual stages that are empty.\r\n\r\nh3. Steps to Reproduce\r\n# Create a plan with the following structure:\r\n ** 1st stage should be a regular stage.\r\n *** Add a job to this stage with a task that will succeed:\r\n{noformat:title=Example - Script task}\r\necho 'this is my 1st job'\r\n{noformat}\r\n ** 2nd stage should be a *manual* stage.\r\n *** Leave this stage empty with *no* jobs.\r\n ** 3rd stage should be a regular stage.\r\n *** Add a job to this stage with a task that will succeed:\r\n{noformat:title=Example - Script task}\r\necho 'this is my 2nd job'\r\n{noformat}\r\n# Run the plan\r\n# Wait for the build to stop at the manual stage\r\n# Run the manual stage\r\n\r\nh3. Expected Results\r\n * The job from the 3rd stage succeeds and Bamboo displays a green icon next to it as well as a green progress bar.\r\n\r\nh3. Actual Results\r\n * The job from the 3rd stage succeeds but Bamboo displays a grey icon next to it as well as a grey progress bar:\r\n\r\n!Screen Shot 2020-08-26 at 12.00.24.png|thumbnail!\r\nh3. Workaround\r\n\r\nIn order to workaround this problem you can either (a) remove that manual stage or (b) turn it into a regular stage. Job statuses show up correctly if the build plan is run automatically from start to finish after turning the manual stage into a regular stage.\r\n\r\nh3. Notes\r\n\r\nThe statuses of those jobs and build plan are correctly entered into the Bamboo database. There doesn't seem to be any issues there. The problem seems to be restricted to the user interface.",
      "summary": "Jobs that run after a manual stage (with no jobs) report misleading statuses when they are successful"
    }
  },
  {
    "key": "BAM-21055",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-08-26T12:41:53.000+0000",
      "description": "When migrating plan repositories e.g. to Bitbucket Cloud (or any other no Bitbucket Server repository), for the \"Remote trigger\" type, a WebHook and a \"Trigger IP address\" has to be specified.\r\n\r\nFor not needing to update that IP address manually and plan per plan, a global Bamboo setting would be great allowing to whitelist that IP address used for \"Remote trigger\".\r\n\r\nThis could, for example, be just another tab under _Cog >> Overview >> Repository settings_.\r\n\r\nWhat is currently possible is to utilize Bamboo's bulk actions, like so:\r\n * As Bamboo Admin user navigate to _Cog >> Overview >> Bulk action_ and there select \"_Replace triggers_\" and press button \"Next\".\r\n * Select the plans wished underneath your projects of choice and press button \"Next\" again.\r\n * That brings you to a page where you can select \"Trigger type\". Choose \"Remote trigger\" there and find opening field \"Trigger IP addresses\" where you can perform the change.\r\n\r\nAnother great alternative to providing a place for global Bamboo setting for changing that IP trigger address might be prividing an appropriate REST API endpoint. Or even both.",
      "summary": "Option to set a trigger IP address globally and for all repository types"
    }
  },
  {
    "key": "BAM-21054",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-10-15T11:50:35.000+0000",
      "created": "2020-08-26T05:59:03.000+0000",
      "description": "h3. Issue Summary\r\n\r\nChanging/Editing branch variable values in Bamboo, ends up changing another variable value\r\nh3. Steps to Reproduce\r\n # Navigate to {{Plan Configuration >> Variables}}\r\n # Create two variables:\r\n||Variable Name||Value||\r\n|test1|first|\r\n|test2|second|\r\n\r\n # Navigate to {{Plan Branch Configuration >> Variables}}\r\n # Add variable \"test1\" with value \"first\"\r\n # Click on Edit to the value \"first\" to change it to be \"newvalue\"\r\n Somehow, Variable Name \"test1\" is shown as \"test2\". It seems that it changes to to the first not-overwritten variable.\r\n # Click on Save\r\n Variable Name is shown as \"test1\" again\r\n # Refresh the page\r\n # Add both variables \"test1\" and \"test2\" to override\r\n # Edit the Variable Name or Value for \"test1\" or \"test2\"\r\n # Try to create new Variable for the branch plan\r\n\r\nh3. Expected Results\r\n * Step 5 Variable Name should not automatically changed to \"test2\" when editing the Variable Value\r\n * Step 7 refreshing the page should show Variable Name \"test1\" with Variable Value \"newvalue\"\r\n * Step 10 should not be possible to add new variable to branch plan: BAM-17604\r\n\r\nh3. Actual Results\r\n * Step 7 refreshing the page shows Variable Name \"test2\" with Variable Value \"newvalue\" even though it is supposed to be \"test1\"\r\n * Step 9 after adding all variables to override, editing Variable Value does not cause Variable Name to have drop down list anymore. Variable Name field have become Text field. Variable Name can be edited to become a new variable that does not exist previously\r\n * Step 10 is possible to create new variable for branch plan after adding all variables to override\r\n\r\nh3. Workaround\r\n\r\nIf want to modify Variable Value that have been added to override, delete the Variable from the list of Override first and then use the ADD function to change the Variable Value\r\n\r\n\u00a0",
      "summary": "Changing/Editing branch variable values in Bamboo, ends up changing another variable value"
    }
  },
  {
    "key": "BAM-21053",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-10-15T11:50:34.000+0000",
      "created": "2020-08-25T13:37:25.000+0000",
      "description": "h3. Issue Summary\r\nIf Bamboo 7.0.x have incorrect deployment project artifact linked data, it is not fixed during upgrade to Bamboo 7.1.x\r\n\r\nh3. Steps to Reproduce\r\n# Install Bamboo 7.0.2\r\n# Integrate with Bitbucket Server\r\n# Use the following RSS Bamboo YAML Specs:\r\n{noformat}\r\n---\r\n# Build plan\r\nversion: 2\r\nplan:\r\n  project-key: SPECS\r\n  name: bamboo specs\r\n  key: STASH\r\n\r\nbranches:\r\n  create: for-new-branch\r\n\r\nstages:\r\n  - Default Stage:\r\n      jobs: \r\n        - Build\r\nBuild:\r\n  tasks:\r\n    - script:\r\n        - echo hello > test.txt\r\n  artifacts:\r\n    - name: test.txt\r\n      pattern: test.txt\r\n      shared: true\r\n      required: true\r\n\r\n---\r\nversion: 2\r\ndeployment:\r\n  name: deployment\r\n  source-plan: SPECS-STASH\r\n \r\nrelease-naming: release-1\r\n \r\nenvironments:\r\n  - Production\r\n \r\nProduction:\r\n  triggers:\r\n    - build-success\r\n  tasks:\r\n    - clean\r\n    - artifact-download\r\n    - script:\r\n        - echo hello\r\n{noformat}\r\n# Run Specs build in Bamboo to create the build plan and deployment project\r\n# Create a new branch in Bitbucket Server\r\nIt will automatically create branch plan in Bamboo. The Specs build in the branch plan incorrectly linked deployment project with the branch plan\r\n# Run master build plan or deployment project\r\nIt works fine\r\n# Upgrade Bamboo to version 7.1.1\r\n# Delete the branch plan in Bamboo\r\n# Run the build plan or deployment project\r\n\r\nh3. Expected Results\r\nDeployment manage to download the artifact successfully\r\n\r\nh3. Actual Results\r\nThe below exception is thrown in the deployment log file:\r\n{noformat}\r\nsimple\t25-Aug-2020 06:21:23\tStarting task 'Artifact download' of type 'com.atlassian.bamboo.plugins.bamboo-artifact-downloader-plugin:artifactdownloadertask'\r\nsimple\t25-Aug-2020 06:21:23\tPreparing to download plan result SPECS-STASH-2 artifact: Non required shared artifact: [test.txt], pattern: [test.txt]\r\nerror\t25-Aug-2020 06:21:23\tUnable to download artifact Non required shared artifact: [test.txt], pattern: [test.txt]\r\n\r\n{noformat}\r\n\r\nh3. Notes\r\n* The incorrect deployment project linked bug have been fixed in Bamboo 7.1.1 but the problematic data isn't fixed during the upgrade\r\n* If there are 100 repositories with Specs and incorrect linked data, it will be troublesome to rerun Specs builds for all affected repositories\r\n\r\nh3. Workaround\r\n# Use the following SQL to look for affected repositories:\r\n{code:sql}\r\nSELECT vl.NAME as repository_name\r\nFROM VCS_LOCATION vl\r\nJOIN VCS_SPECS_STATE vss ON vss.VCS_LOCATION_ID=vl.VCS_LOCATION_ID\r\nJOIN VCS_SPECS_SOURCE vsso ON vsso.VCS_SPECS_STATE_ID=vss.VCS_SPECS_STATE_ID\r\nJOIN DEPLOYMENT_PROJECT dp ON dp.VCS_SPECS_SOURCE_ID=vsso.VCS_SPECS_SOURCE_ID\r\nJOIN DEPLOYMENT_PROJECT_ITEM dpi ON dpi.DEPLOYMENT_PROJECT_ID=dp.DEPLOYMENT_PROJECT_ID\r\nJOIN DEPLOYMENT_PROJECT_ITEM_BA dpib ON dpib.BAM_ARTIFACT_ITEM_ID=dpi.DEPLOYMENT_PROJECT_ITEM_ID\r\nJOIN ARTIFACT_DEFINITION ad ON ad.ARTIFACT_DEFINITION_ID=dpib.ARTIFACT_DEFINITION_ID\r\nJOIN BUILD bj ON bj.BUILD_ID=ad.PRODUCER_JOB_ID\r\nJOIN CHAIN_STAGE cs ON cs.STAGE_ID=bj.STAGE_ID\r\nJOIN BUILD bb ON bb.BUILD_ID=cs.BUILD_ID\r\nWHERE bb.BUILD_TYPE='CHAIN_BRANCH'\r\nGROUP BY vl.NAME;\r\n{code}\r\n# Rerun Specs build for the repository in the main branch again",
      "summary": "Incorrect deployment project artifact linked data not fixed during upgrade"
    }
  },
  {
    "key": "BAM-21052",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-08-25T08:50:58.000+0000",
      "description": "*Issue Summary:*\r\n In Bamboo 7.0.4 and 7.1.4, we can see an error pop up message in Firefox browser when we click on {{Run Plan}}.\r\n\r\n*Steps to Reproduce:*\r\n # Login to Bamboo in Firefox.\r\n # Navigate to any plan and click on {{Run Plan}}.\r\n\r\n*Expected Results:*\r\n # There shouldn't be any error pop up message on clicking Run Plan.\r\n\r\n*Actual Results:*\r\n # You will see an error pop up message saying - {{An unexpected error has occurred}}.\r\n # This is very intermittent and vanishes within 10 secs without doing anything. Also this is not observed in IE and Chrome.\r\n\r\n*Workaround:*\r\n Temporary work around:\u00a0a plugin that needs to be added as an add-on in Bamboo. To do this,\r\n\r\n*A) For Bamboo 7.0.4:*\r\n # Download this file: [^atlassian-bamboo-plugin-web-resources-7.0.4-PS-64012.jar]\r\n # Navigate to the Administration section -> \"Manage Apps\"\r\n # Click on \"upload app\" and load the file you just downloaded.\r\n\r\n*B) For newer versions of Bamboo (7.0.5+):*\r\n # Stop Bamboo\r\n # Go to\u00a0*<BAMBOO-INSTALL>/atlassian-bamboo/WEB-INF/atlassian-bundled-plugins/*\r\n # Move the\u00a0*_atlassian-bamboo-plugin-web-resources-7.1.4.jar_*\u00a0out from this folder to another directory different from the Bamboo install one\r\n # Copy the\u00a0[^atlassian-bamboo-plugin-web-resources-7.0.4-PS-64012.jar]\u00a0file to that folder (atlassian-bundled-plugins)\r\n # Start Bamboo",
      "summary": "Pop Up error when clicking on Run Plan in Firefox browser for Bamboo 7.0.4"
    }
  }
]