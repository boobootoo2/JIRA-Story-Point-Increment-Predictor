[
  {
    "key": "BAM-20821",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-02-12T07:01:46.000+0000",
      "created": "2020-02-12T07:00:49.000+0000",
      "description": "h3. Issue Summary\r\nOnce {{DEPLOYMENT_PROJECT.deployment_project_id}} (primary key) surpasses 32bit int, cannot create a release from {{createDeploymentVersion.action}}.\r\n\r\nh3. Steps to Reproduce\r\n# When deployment_project_id reaches 2,147,483,648 (max int + 1), perform a release\r\n# Attempt to create a release from *Deployment Environment >> ... >> Create Release*  or *Build Result >> Create Release*\r\n\r\nh3. Expected Results\r\nCan use the *Create Release* UI without an error.\r\n\r\nh3. Actual Results\r\nThe UI will show *Can not create release, no deployment project with id 0 could be found* or the user will get *Access Denied*\r\n\r\nThe below exceptions are thrown in the atlassian-bamboo.log file:\r\n{noformat}\r\n2020-02-12 06:08:32,914 ERROR [http-nio-8085-exec-19] [runtime] Error executing FreeMarker template\r\nFreeMarker template error:\r\nThe following has evaluated to null or missing:\r\n==> linkedPlan  [in template \"page/deployment/version/createDeploymentVersion.ftl\" at line 34, column 29]\r\n\r\n----\r\nTip: If the failing expression is known to be legally refer to something that's sometimes null or missing, either specify a default value like myOptionalVar!myDefault, or use [#if myOptionalVar??]when-present[#else]when-missing[/#if]. (These only cover the last step of the expression; to cover the whole expression, use parenthesis: (myOptionalVar.foo)!myDefault, (myOptionalVar.foo)??\r\n----\r\n\r\n----\r\nFTL stack trace (\"~\" means nesting-related):\r\n\t- Failed at: ${soy.render(\"bamboo.web.resources:ba...  [in template \"page/deployment/version/createDeploymentVersion.ftl\" at line 33, column 17]\r\n\t- Reached through: @ww.form id=\"createDeploymentVersion\"...  [in template \"page/deployment/version/createDeploymentVersion.ftl\" at line 20, column 1]\r\n{noformat}\r\n{noformat}\r\n2020-02-12 06:08:32,924 ERROR [http-nio-8085-exec-19] [runtime] Error executing FreeMarker template\r\nFreeMarker template error:\r\nNo compatible overloaded variation was found; declared parameter types and argument value types mismatch.\r\nThe FTL type of the argument values were: string (wrapper: f.t.SimpleScalar), Null.\r\nThe Java type of the argument values were: String, Null.\r\nThe matching overload was searched among these members:\r\n    com.atlassian.bamboo.ww2.BambooActionSupport.hasPlanPermission(String, com.atlassian.bamboo.plan.PlanIdentifier),\r\n    com.atlassian.bamboo.ww2.BambooActionSupport.hasPlanPermission(String, String)\r\n\r\n----\r\nTip: You seem to use BeansWrapper with incompatibleImprovements set below 2.3.21. If you think this error is unfounded, enabling 2.3.21 fixes may helps. See version history for more.\r\n----\r\n\r\n----\r\nFTL stack trace (\"~\" means nesting-related):\r\n\t- Failed at: #if action.hasPlanPermission(\"READ\", ...  [in template \"page/deployment/version/createDeploymentVersion.ftl\" at line 38, column 5]\r\n\t- Reached through: @ww.form id=\"createDeploymentVersion\"...  [in template \"page/deployment/version/createDeploymentVersion.ftl\" at line 20, column 1]\r\n----\r\n\r\nJava stack trace (for programmers):\r\n{noformat}\r\n\r\nIn case of Access Denied:\r\n{noformat}\r\n2020-08-07 18:00:00,001 INFO [http-nio-8085-exec-1] [AccessLogFilter] username GET http://localhost:8085/deploy/createDeploymentVersion.action?deploymentProjectId=2148663301&planKey=PROJ-PLAN&buildNumber=9&returnUrl=/browse/PROJ-PLAN-9 10816080kb\r\n2020-08-07 18:00:00,001 INFO [http-nio-8085-exec-1] [WebworkAclVoter] Voter(WW_READ, [READ]) voting to deny access to user 'username' - domainObject on com.atlassian.bamboo.deployments.versions.actions.CreateDeploymentVersion@75fe4bc8 is null\r\n2020-08-07 18:00:00,001 WARN [http-nio-8085-exec-1] [AuthorizationLoggerListener] Authorization failed: org.acegisecurity.AccessDeniedException: Access is denied; authenticated principal: org.acegisecurity.adapters.PrincipalAcegiUserToken@630e1b20: Username: EmbeddedCrowdUser{name='username', displayName='Full Name', directoryId=#######}; Password: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_USER; secure object: com.atlassian.bamboo.deployments.versions.actions.CreateDeploymentVersion@75fe4bc8; configuration attributes: [WW_READ, GLOBAL_READ]\r\n{noformat}\r\n\r\nh3. Workaround\r\nCreate a release from the {{selectVersionForExecute.action}} which can be reached via *Deployment Dashboard or after clicking an Environment >> Deploy Icon (It looks like a Cloud with an arrow)*",
      "summary": "Cannot create a release from createDeploymentVersion.action once DEPLOYMENT_PROJECT primary key surpasses 32bit int"
    }
  },
  {
    "key": "BAM-20820",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-02-12T06:52:18.000+0000",
      "created": "2020-02-12T06:50:00.000+0000",
      "description": "h3. Issue Summary\r\nOnce primary key surpasses 32bit int deployment logs are named differently and cannot be directly accessed via the UI.\r\n\r\nThe log file is saved with the signed 32bit deployment result id on disk however the link expects the actual big int filename.\r\n\r\nFor example: \r\n2012545028-2154037258-2170683537.log becomes 2012545028-2154037258--2124283705.log because the last number, 2170683537 == -2124283705 after the conversion.\r\n\r\nWhen attempting to download the deployment log, you get *Page not found*.\r\n\r\nh3. Steps to Reproduce\r\n# When deployment_result_id reaches 2,147,483,648 (max int + 1), perform a release\r\n# Attempt to download the log \r\n\r\nh3. Expected Results\r\nThe log can be downloaded.\r\n\r\nh3. Actual Results\r\nThe log is visible as a snippet in the deployment result.\r\nWhen attempting to download the full deployment log, you get *Page not found*.\r\n\r\nThe below exception is thrown in the atlassian-bamboo.log file:\r\n{noformat}\r\n2020-02-12 04:11:22,520 ERROR [http-apr-8085-exec-38] [AbstractDownloadStrategy] File does not exist/can't be read: /var/bamboo-home/xml-data/builds/2012545028-2154037258/download-data/build_logs/2012545028-2154037258-2170683537.log\r\n{noformat}\r\n\r\nh3. Workaround\r\n# Click *Download* log\r\n# When presented with the Page not found, truncate the log file from the URL. Example:\r\n# {{$BAMBOO_BASE_URL/deployment-download/2154037258/build_logs/2012545028-2154037258-2170683537.log}} *becomes*\r\n# {{$BAMBOO_BASE_URL/deployment-download/2154037258/build_logs}}\r\n# You will now be presented with a directory listing of *all* the log files for that environment; choose the one with the matching timestamp of the deployment result.",
      "summary": "Deployment logs are named with a negative value and cannot be directly accessed via the UI, once DEPLOYMENT_RESULT primary key surpasses 32bit int"
    }
  },
  {
    "key": "BAM-20819",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-03-11T01:44:32.000+0000",
      "created": "2020-02-11T21:40:52.000+0000",
      "description": "h3. Problem Definition\r\nThe health checks can't be cleared, so alerts still appear in cases when customizations are made, eg: as workarounds.\r\n\r\nh3. Suggested Solution\r\nAdd an option to clear or acknowledge warnings from health checks. \r\n \r\nh3. Workaround \r\nThere is no workaround at this time.",
      "summary": "Add option to clear health checks on Troubleshooting and Support Instance Health checks"
    }
  },
  {
    "key": "BAM-20818",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-02-10T21:52:55.000+0000",
      "description": "h3. Problem Definition\r\n\r\nOnly users that has the global permission \"admin\" can manage Users Groups. The problem is that there is no functionality that allows a user to manage their Users Groups, without having access to the other administrator menus.\r\n\r\nh3. Suggested Solution\r\n\r\nCreate a new feature in which the Bamboo allows a User to manage your own Users Groups, without having access to the other administrator menus. (Like a group owner role)",
      "summary": "Add the permission to manage user groups"
    }
  },
  {
    "key": "BAM-20817",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-02-10T04:46:46.000+0000",
      "description": "Currently, Bamboo requires the user to specify a specific User when configuring Elastic Bamboo.\r\n\r\n* [Configuring Elastic Bamboo|https://confluence.atlassian.com/bamboo/configuring-elastic-bamboo-289277120.html]\r\n\r\nThis feature request is to allow a user to specify an IAM Role instead of a specific user when configuring Elastic Bamboo. There is an existing  feature request to allow Bamboo to use an IAM Role in all API requests to AWS \\[[BAM-17341: Using 'Assume Role' for AWS API calls instead of traditional authentication key ID and secret key|https://jira.atlassian.com/projects/BAM/issues/BAM-17341]] but this does not explicitly address Configuring Elastic Bamboo and hence is hard for the users to find and vote on.",
      "summary": "Configure elastic bamboo with IAM role."
    }
  },
  {
    "key": "BAM-20816",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-02-07T10:20:58.000+0000",
      "description": "h2. Problem definition\r\n\r\nAn existing Linked repository definition in Bamboo has a set type and cannot be changed (the Repository host field). When moving from a repository provider to another the type of the repository requires to be changed. Currently this requires removal of the existing definition and creation of a new definition.\r\nh2. Suggested solution\r\n\r\nAdd the possibility to convert a repository from one type to another.",
      "summary": "Add the option to change the type of an existing linked repository definition"
    }
  },
  {
    "key": "BAM-20815",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-02-06T23:05:54.000+0000",
      "description": "h3. Problem Definition\r\nCurrently, there is no option to pass Jira Issue ID to a Bamboo plan.\r\n\r\nh3. Suggested Solution\r\nIntroduce a Bamboo variable for Jira like ${bamboo.jira.issueID}\r\n\r\nh3. Workaround\r\nIntroduce a script task to fetch the Issue ID from Jira via REST call.\r\n",
      "summary": "Variable to pass Jira Issue ID to Bamboo plan"
    }
  },
  {
    "key": "BAM-20814",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-02-07T08:28:12.000+0000",
      "created": "2020-02-06T22:38:47.000+0000",
      "description": "h3. Problem Definition\r\nCurrently there's no way to setup notifications based on remote agent / build queue activity\r\nh3. Suggested Solution\r\nPlease add notifications based on build activities / remote agent activity\r\nh4. Why this is important \r\nAs administrator I need to receive notifications when builds are queued to help determine whether new agents are needed\r\nh3. Workaround \r\nCurrently, you can setup monitor queue activity through the UI (Build Activity) or setup a cron job script using Bamboo rest API\r\n",
      "summary": "As administrator I need to receive notifications based on queue activity"
    }
  },
  {
    "key": "BAM-20813",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-03-19T13:08:20.000+0000",
      "created": "2020-02-06T22:18:49.000+0000",
      "description": "h3. Issue Summary\r\nWhen upgrading Bamboo to a version with Embedded Crowd (6.6+), if the LDAP configuration in {{<bamboo-home>/xml-data/configuration/atlassian-user.xml}} does not contain a {{<port>}} value, the post-bootstrap upgrade task 60601 will fail with an error:\r\n{noformat}\r\n2020-02-06 14:22:40,534 ERROR [17-UpgradeTaskBackgroundThread:pool-33-thread-1] [AbstractUpgradeManager] com.atlassian.crowd.exception.runtime.OperationFailedException: For input string: \"null\"\r\ncom.atlassian.crowd.exception.runtime.OperationFailedException: For input string: \"null\"\r\n{noformat}\r\n\r\nh3. Steps to Reproduce\r\n# Install Bamboo 6.2-6.5\r\n# Configure an {{atlassian-user.xml}} file with an LDAP directory\r\n# Remove (or comment out) the {{<port>}} value from the {{atlassian-user.xml}}\r\n# Upgrade to Bamboo 6.6-6.10.4\r\n\r\nh3. Expected Results\r\nUpgrade will be successful, and new Bamboo version starts\r\n\r\nh3. Actual Results\r\nThe upgrade tasks fail, and the following exception is thrown in the {{atlassian-bamboo.log}} file:\r\n{noformat}\r\n2020-02-06 14:22:40,534 ERROR [17-UpgradeTaskBackgroundThread:pool-33-thread-1] [AbstractUpgradeManager] com.atlassian.crowd.exception.runtime.OperationFailedException: For input string: \"null\"\r\ncom.atlassian.crowd.exception.runtime.OperationFailedException: For input string: \"null\"\r\n\tat com.atlassian.crowd.embedded.core.CrowdDirectoryServiceImpl.testConnection(CrowdDirectoryServiceImpl.java:102)\r\n\tat com.atlassian.bamboo.crowd.DelegatingCrowdDirectoryService.testConnection(DelegatingCrowdDirectoryService.java:33)\r\n\tat com.atlassian.bamboo.upgrade.tasks.v6_6.ec.LdapRepositoryConfigurationMigrator.migrateAndTestConnection(LdapRepositoryConfigurationMigrator.java:283)\r\n{noformat}\r\n\r\nh3. Workaround\r\n\r\nUpdate {{atlassian-user.xml}} to include the {{<port>...</port>}}.",
      "summary": "Upgrading to Embedded Crowd with an LDAP configuration missing port will fail with a confusing error"
    }
  },
  {
    "key": "BAM-20812",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-02-06T16:03:50.000+0000",
      "description": "This request is to implement a checkbox or other control to use the bamboo plan key as the unique docker container name in bamboo. This will make it easier to create new plans and not have overlapping docker container names across plans that have been cloned.",
      "summary": "Allow docker container names to plan key as name (checkbox)"
    }
  },
  {
    "key": "BAM-20811",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-02-06T09:16:56.000+0000",
      "description": "Users should be able to specify what type a global variable is. At the moment, Bamboo decides for itself to mask variables named password. If a sensitive variable not named password is stored, it will be stored in clear text with no option to mask it.",
      "summary": "Global Variables: Choose variable type"
    }
  },
  {
    "key": "BAM-20809",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-03-12T11:00:27.000+0000",
      "created": "2020-02-05T23:02:56.000+0000",
      "description": "h3. Issue Summary\r\nConcurrent builds overwrite test_case last_build_number causing duplication of tests\r\nh3. Steps to Reproduce\r\n# Enable concurrent builds;\r\n# Configure a plan that has tests and parsing, plus a script task \"sleep ${bamboo_timing}\" and set the variable timing to 1; This script task is not connected to the bug, it's just an easy way to simulate shorter and longer builds;\r\n# Run the plan with customized options (#1), overriding the timing variable to something like 30;\r\n# Immediatly after running, run the plan again (#2), generating parallel builds of the same plan;\r\n# The later run (#2) will finish before the earlier run (#1). When the build #1 finishes, it will override the last_build_number on the test cases of this plan;\r\n# Run the plan again;\r\n\r\n\r\nh3. Expected Results\r\nTest is not duplicated\r\nh3. Actual Results\r\nWe have the duplicated test given Bamboo didn't find last_build_number of #2; It will start counting the tests as if it'd never existed.\r\n\r\nh3. Workaround\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Concurrent builds overwrite test_case last_build_number causing duplication of tests"
    }
  },
  {
    "key": "BAM-20808",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-02-05T13:59:08.000+0000",
      "description": "Bamboo should support branch-specific repository stored specs for Git repository",
      "summary": "Specs for branches for Git repository"
    }
  },
  {
    "key": "BAM-20807",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-02-05T13:58:33.000+0000",
      "description": "Bamboo should support branch-specific repository stored specs for Bitbucket Cloud repository",
      "summary": "Specs for branches for Bitbucket Cloud"
    }
  },
  {
    "key": "BAM-20806",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-02-05T01:38:31.000+0000",
      "description": "h3. Problem Definition\r\n\r\nBamboo currently does not have a way to filter commits.\r\n\r\nh3. Suggested Solution\r\n\r\nAdd functionality to have Bamboo ignore commits based on a specified parameter. Perhaps a regex.\r\n",
      "summary": "Add functionality to have Bamboo filter commits"
    }
  },
  {
    "key": "BAM-20805",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-02-04T20:41:33.000+0000",
      "description": "h3. Issue Summary\r\n\r\nRemote agents are unable to force stop spawned processes. \r\n\r\nh3. Steps to Reproduce\r\n # Create a build to executed on a remote agent\r\n # The build process hangs, takes longer than expected, or becomes otherwise unresponsive\r\n # There is currently no method for the agent to stop or force stop the process\r\n\r\nh3. Expected Results\r\n\r\nIt's expected that a remote agent should be able to kill a hung process.\r\n\r\nh3. Actual Results\r\n\r\nThe agent is unable to stop the spawned process because it has no parameters to determine if the process has hung.\r\n\r\nh3. Workaround\r\n\r\nThe current workaround is to manually stop the process using a command such as \u201ckill -9\u201d or configuring a [hanging build event| https://confluence.atlassian.com/bamboo/configuring-the-hanging-build-event-289277188.html].",
      "summary": "Hung builds on remote agents are unable to stop spawned processes"
    }
  },
  {
    "key": "BAM-20804",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-03-19T13:08:19.000+0000",
      "created": "2020-02-04T15:38:17.000+0000",
      "description": "h3. Issue Summary\r\n\r\nWhen accessing telemetry links for any plans under Wallboard -> All plans, the ftl scripts throw the following error:\r\n{noformat}\r\n2020-01-07 04:13:02,629 ERROR [http-nio-80-exec-69] [runtime] Error executing FreeMarker template\r\nFreeMarker template error:\r\nThe following has evaluated to null or missing:\r\n==> buildsToList  [in template \"telemetry.ftl\" at line 35, column 10]\r\n{noformat}\r\ncaused by a NULL buildsToList.\r\nh3. Steps to Reproduce\r\n # Access \"All plans\" telemetry directly without going via a Project (when being logged out).\r\n\r\nh3. Expected Results\r\n\r\nNo error and show only the wallboard entries that has anonymous user read access.\r\nh3. Actual Results\r\n\r\nThe below error is thrown in the log file:\r\n{noformat}\r\n2020-01-07 04:13:02,629 ERROR [http-nio-80-exec-69] [runtime] Error executing FreeMarker template FreeMarker template error: The following has evaluated to null or missing: ==> buildsToList [in template \"telemetry.ftl\" at line 35, column 10]\r\n{noformat}\r\nh3. Workaround\r\n\r\nAdd the below lines and restart Bamboo\r\n{noformat:title=telemetry.ftl}\r\n<div id=\"wallboard\">\r\n[#if filteredBuilds??] <!-- this Line is new -->\r\n[#assign buildsToList= filteredBuilds] {noformat}\r\n\u00a0",
      "summary": "Telemetry FTL NullPointerException"
    }
  },
  {
    "key": "BAM-20803",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-11-23T14:20:59.000+0000",
      "created": "2020-02-03T20:24:31.000+0000",
      "description": "h3. Problem Definition\r\n\r\nAnyTask is not supported by Bamboo YAML Specs according to the documentation below:\r\n [https://docs.atlassian.com/bamboo-specs-docs/6.9.0/specs.html?yaml#configuring-unsupported-tasks]\r\nh3. Suggested Solution\r\n\r\nAdd AnyTask to YAML Bamboo Specs.\r\nh3. Workaround\r\n\r\nCurrently is only possible to create AnyTask by using Java Specs, such as:\r\n{code:java}\r\nMap<String, String> configuration = new MapBuilder<String, String>()\r\n    .put(\"existingRequirement\", \"isLinux\")\r\n    .put(\"regexMatchValue\", \"true\")\r\n    .put(\"requirementKey\", \"\")\r\n    .put(\"requirementMatchType\", \"match\")\r\n    .put(\"requirementMatchValue\", \"\")\r\n    .build();\r\nAnyTask anyTask = new AnyTask(new AtlassianModule(\"com.atlassian.bamboo.plugin.requirementtask:task.requirements\"))\r\n    .configuration(configuration);\r\n{code}",
      "summary": "Export AnyTask as YAML Specs"
    }
  },
  {
    "key": "BAM-20802",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-02-03T11:26:42.000+0000",
      "description": "h3. Problem definition\r\n\r\nThe ChainExecutionManagerImpl may leave external processes hanging and not clean it up when the external git command times out:\r\n{noformat}\r\n[ChainExecutionManagerImpl] Exception during merge: process timed out: command ['C:\\Program Files\\Git\\cmd\\git.exe' submodule update --init --recursive] failed with code -1. Working directory was [XXX]. [Submodule 'submodule/s' (YYY) registered for path 'submodule/s'\r\n...\r\n{noformat}\r\n\r\nh3. Suggested solution\r\n\r\nCleanup external processes and if unsuccessful log the error.\r\n",
      "summary": "Cleanup VCS spawned processes when they timeout in ChainExecutionManager"
    }
  },
  {
    "key": "BAM-20801",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-02-03T00:17:15.000+0000",
      "description": "h2. Problem Definition\r\n\r\nThe plan execution thread pool is critical to triggering and change detection operations within Bamboo and is prone to contention as workloads increase and change detection operations enter unhealthy completion times. Being able to monitor this via JMX would be beneficial so customers can be proactive in sizing it rather than reactive.\r\n\r\nCurrently it's only monitorable via thread dumps and the UI at {{$BAMBOO_BASE_URL/admin/viewBambooInternals.action}}\r\n\r\nh2. Suggested Solution\r\n\r\nImplement MBeans that track Plan Exec thread pool stats such as running workers and queue size so that it can be monitored via JMX tooling.",
      "summary": "Make Plan Exec thread pool stats monitorable via JMX"
    }
  },
  {
    "key": "BAM-20800",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-07-24T10:22:52.000+0000",
      "created": "2020-01-31T04:05:14.000+0000",
      "description": "h3. Issue Summary\r\nIn a multi-repository scenario with Bitbucket Repository Triggered, Bamboo still publishes a change detection required event when a remote event is received for a repository that is disabled on the trigger. This causes an unnecessary change detection to be performed on the other triggering repositories, compounded significantly when there are large number of branch plans and can flood the plan exec queue.\r\n\r\nh3. Steps to Reproduce\r\n# Create a plan with two repositories pointed at master and two plan branches\r\n# Each branch will point at their respective branch for the primary repository and master for the secondary\r\n# Configure the trigger so that its only enabled for the primary repository.\r\n# Push a change to master on the secondary repository\r\n\r\nh3. Expected Results\r\nThe remote event is ignored and no change detection is performed, as the repository the event is received for is not a triggering repository.\r\n\r\nh3. Actual Results\r\nBamboo publishes 6 change detection events; two for the master plan and each plan branch even though the secondary repository isn't a triggering repository. The primary repository is checked with a {{ls-remote}} even though the change happened on the secondary repository that was disabled for triggering:\r\nExample:\r\n{noformat}\r\n2020-01-31 15:14:49,305 DEBUG [http-nio-8085-exec-7] [RemoteEventConsumerResource] Received request c131a543-f75a-4716-84a9-89ea34dc4384 to capability stash-branch-changed-remote-event\r\n2020-01-31 15:14:49,306 DEBUG [http-nio-8085-exec-7] [RemoteEventConsumerResource] Publishing event com.atlassian.stash.plugin.remote.event.StashBranchChangedRemoteEvent@596772c[branchName=master,repositoryProject=NEW,repositorySlug=changedet,committer=charlie,sourceId=1d35a314-afef-3b70-bccd-3faa4609591b,sourceUrl=http://localhost:7990/bitbucket] from request c131a543-f75a-4716-84a9-89ea34dc4384 to capability stash-branch-changed-remote-event\r\n2020-01-31 15:14:49,307 DEBUG [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-4] [BranchChangedEventListener] Received Bitbucket Server ref changed event NEW/changedet::master\r\n2020-01-31 15:14:49,638 DEBUG [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-4] [BranchChangedEventListener] publishing change detection event for PROJ-PLAN\r\n2020-01-31 15:14:49,638 DEBUG [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-4] [BranchChangedEventListener] publishing change detection event for PROJ-PLAN0\r\n2020-01-31 15:14:49,638 DEBUG [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-4] [BranchChangedEventListener] publishing change detection event for PROJ-PLAN1\r\n2020-01-31 15:14:49,638 DEBUG [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-4] [BranchChangedEventListener] publishing change detection event for PROJ-PLAN\r\n2020-01-31 15:14:49,638 DEBUG [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-4] [BranchChangedEventListener] publishing change detection event for PROJ-PLAN0\r\n2020-01-31 15:14:49,638 DEBUG [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-4] [BranchChangedEventListener] publishing change detection event for PROJ-PLAN1\r\n2020-01-31 15:14:49,651 DEBUG [9-BAM::PlanExec:pool-15-thread-3] [GitCommandProcessor] Running in /opt/atlassian/bamboo/current/temp: [/usr/bin/git ls-remote ssh://5c7fffa9-016e-4948-9d33-50b6b3091980@127.0.0.1:40009/lfs/git-hw.git]\r\n2020-01-31 15:14:49,878 DEBUG [9-BAM::PlanExec:pool-15-thread-3] [GitCommandProcessor] ls-remote ssh://5c7fffa9-016e-4948-9d33-50b6b3091980@127.0.0.1:40009/lfs/git-hw.git took 226.8 ms\r\n2020-01-31 15:14:49,878 INFO [9-BAM::PlanExec:pool-15-thread-2] [ChangeDetectionListenerPROJion] No changes found for 'PROJ-PLAN0'\r\n2020-01-31 15:14:49,878 INFO [9-BAM::PlanExec:pool-15-thread-3] [ChangeDetectionListenerPROJion] No changes found for 'PROJ-PLAN1'\r\n2020-01-31 15:14:49,878 INFO [9-BAM::PlanExec:pool-15-thread-1] [ChangeDetectionListenerPROJion] No changes found for 'PROJ-PLAN'\r\n{noformat}\r\n\r\nh3. Workaround\r\nConvert the repository that you don't want to trigger off, to a plain *Git* type repository instead of *Bitbucket Server*.",
      "summary": "In a multi-repository scenario Bamboo still publishes a change detection required event when a remote event is received for a repository that is disabled on the trigger"
    }
  },
  {
    "key": "BAM-20799",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-01-30T01:35:50.000+0000",
      "description": "We have shell scripts that check {{$BAMBOO_DEPLOY_ROLLBACK}} in a number of ways. I'd like to be confident that we're checking against the right value. I believe that a correct form is:\r\n{noformat}\r\nif [ \"$bamboo_deploy_rollback\" = \"true\" ];\r\n{noformat}\r\nand would like documentation to confirm that.\r\n\r\n[The documentation states|https://confluence.atlassian.com/bamboo/bamboo-variables-289277087.html] that:\r\n{quote}bamboo.deploy.rollback True if the release being deployed is older than the release being replaced.\r\n{quote}\r\nFrom [the source|https://stash.atlassian.com/projects/BAM/repos/bamboo/browse/components/bamboo-core/src/main/java/com/atlassian/bamboo/variable/substitutor/VariableSubstitutorImpl.java?until=ce5c25c106413c6e71388325bdb6aee499b98eb9&untilPath=components%2Fbamboo-core%2Fsrc%2Fmain%2Fjava%2Fcom%2Fatlassian%2Fbamboo%2Fvariable%2Fsubstitutor%2FVariableSubstitutorImpl.java#442], I believe that this will specificially be {{true}} (lowercase), or {{false}}, and always present.\r\n\r\nCould you update the documentation to make clear that it's upper/lowercase, and whether it will otherwise be set to {{false}} or missing? Ideally, formatted as {{<code>}} to make clear that it's a literal value.\r\n\r\nFYI; the (incorrect?) tests we're using in other scripts are:\r\n{noformat}\r\nif $bamboo_deploy_rollback = True\r\n{noformat}\r\nwhich is bad sh syntax, but accidentally works because {{true}} will execute {{/bin/true}}, and:\r\n{noformat}\r\nif [ $bamboo_deploy_rollback = True ];\r\n{noformat}\r\nwhich is correct shell syntax, but case-sensitively assumes {{True}}, and will actually fail with {{true}}.",
      "summary": "Clarify the exact values of 'bamboo.deploy.rollback' in documentation"
    }
  },
  {
    "key": "BAM-20798",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-01-29T19:42:56.000+0000",
      "description": "Bamboo contains a total of 5 levels of permissions.\r\n\r\nFor _global permissions_ there exists a \"Create\" option that targets creating new build plans, projects and deployment projects in Bamboo. (!) However, this represents a global permission and it is not specific for creating deployment projects only.\r\n\r\n*In order to give \"autonomy\" to development teams or org individuals setting up their own deployment project, a dedicated \"Create depolyment project\" permission is missing.*\r\n\r\nAdding to this, the available _deployment project permissions_ are \"View\" and \"Edit\" and _deployment environment permissions_ come along with \"View\", \"Edit\" and \"Deploy\" only.\r\n\r\n(i) That said, the +improvement suggestion+ is like so:\r\n * Either add option \"Create\" to _deployment project permissions_ explicitly allowing the creation of new deployment projects and also of new deployment environment inside any deployment project\r\n * Or add option \"Create deployment project\" to _deployment project permissions_ and option \"Create deployment environment\" as a new _deployment environment permission_\r\n\r\n(!) What's typically done as a workaround so far is to posses a Bamboo admin or at least one Bamboo user with global permissions \"Create\" who's initially setting up deployment project(s), so that individual users and/or groups with \"Edit\" permission on deployment project and deployment environment level can adapt these to their needs.",
      "summary": "Adding permission for users/groups to create own deployment projects"
    }
  },
  {
    "key": "BAM-20797",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-01-28T16:58:23.000+0000",
      "description": "After a project is deleted by using the GUI, the project is not actually deleted inside Bamboo. There is a background task, that actually deletes the project. When trying to create the Project again shortly after, e.G. by Bamboo Specs, an Exception with message \"no value present\" appears. One has to wait for the background task to run. Especially during development processes with Plan maintenance automation, where you try things out, such waiting times are a blocker.\r\n\r\n\u00a0\r\n\r\n*Observed behavior*\r\n\r\nThe creation of a project, with a the same key as the one of a recently deleted project, fails until the background deletion task did run. No useful error message is displayed. No interaction by the user could speed the process up.\r\n\r\n\u00a0\r\n\r\n*Expected behavior*\r\n\r\nAn understandable error message should be displayed. Example: \"The project can not be created, since another project with the same key is marked for deletion, but has not been deleted yet. Waiting for background deletion task ...\"\r\n\r\nA functionality to run the deletion task manually is provided by the GUI.\r\n\r\n\u00a0\r\n\r\n*Elaborated improvement suggestion*\r\n\r\nMake the deletion process triggering smarter ;)",
      "summary": " Trigger project deletion background task manually"
    }
  },
  {
    "key": "BAM-20796",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-01-27T22:52:47.000+0000",
      "description": "A deployment environment in Bamboo offers 4 types of triggers.\r\n\r\nThe types \"After successful build plan\" and \"After successful stage\" both contain a section \"Branch to trigger this deployment\" in the trigger configuration pop-up. By checking \"Use a custom plan branch\" you can select and hence filter available branches to be triggered.\r\n\r\nThis is missing in trigger type \"After successful deployment\" and in some scenarios it might be just useful whereas in others it is necessary to e.g. protect chained and thus dependent deployment environments from branches that are not targetted for these sub-sequent deployments.\r\n\r\nHere an example: A build plan is run by the master branch and also by a variety of plan branches. These repository branches and thus the Bamboo plan branches are separated into \"dev' and \"non-dev\", they all trigger a DEV deployment environment, but only \"non-dev\" branches shall be allowed to continue e.g. to a PROD deployment environment.",
      "summary": "Add branch filter to deployment trigger \"After successful deployment\""
    }
  },
  {
    "key": "BAM-20795",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-01-27T16:53:19.000+0000",
      "description": "Microsoft compilers and build tools expect some input files (such as the RSP file) to be encoded as UTF-8 BOM. Bamboo currently generates RSP files for the MsBuild task which are encoded UTF-8 no BOM.\r\n\r\nAdd UTF-8 BOM encoding option in the task configuration UI such that the user can select to generate a UTF-8 BOM RSP file which is more portable.\r\n\r\n*Workaround*\r\n Use a script task instead of MsBuild task. The script should: a) create the RSP file with the correct encoding, then b) call MSBuild and pass the resulting file as an argument.\r\n\r\nNote: Make sure to set the correct code page for the shell from the script with the command:\r\n{noformat}\r\n chcp 65001 {noformat}\r\n\u00a0before creating the RSP file.",
      "summary": "Add option to encode UTF-8 BOM for MsBuild RSP file generation"
    }
  },
  {
    "key": "BAM-20794",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-01-27T12:59:40.000+0000",
      "description": "h3. Issue Summary\r\n\r\n\u00a0\r\n\r\nCurrently it's not possible in Bamboo to see who is currently logged in, so an administrator cannot know whether it's a good time to restart the server (or perform any other kind of maintenance) .\r\n\r\nThere should be a way for an admin to see who is currently logged in.",
      "summary": "As an administrator I want to be able to see who is currently logged in to Bamboo so that I can see if it is safe to perform maintenance"
    }
  },
  {
    "key": "BAM-20793",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-01-24T21:50:55.000+0000",
      "description": "h3. Problem Definition\r\nScheduled Triggers set using Cron displays 1 hour off\r\nh3. Suggested Solution\r\nImprove display to match how the triggers will actually run\r\nh4. Why this is important \r\nCreates confusion and seems to not work as expected\r\n",
      "summary": "Improve Display of Scheduled Triggers"
    }
  },
  {
    "key": "BAM-20792",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-01-24T13:46:46.000+0000",
      "description": "h3. Summary\r\n\r\nWhen Bamboo downloads artifacts, it reads the folder/path specified in the artifact definition. If this folder had any files (from previous artifacts or just unrelated files) those will be included in the artifact as well. \r\n\r\nExample:\r\n# Plan A has an artifact definition of \"*.*\" (it picks up all files generated).\r\n# Plan A runs and generates a file called \"first_file.txt\".\r\n# Plan B downloads artifact generated by plan A. Plan B just downloaded one file: first_file.txt.\r\n# Plan A runs again and generates a file called \"second_file.txt\".\r\n# Plan B downloads artifact generated by plan A. Plan B just downloaded two files: first_file.txt and second_file.txt.\r\n\r\nh3. Notes\r\nSometimes the option \"Clean working directory after each build\" is not possible to use. \r\n\r\nh3. Accepted solution.\r\nHave an option to clean artifact directories, or all files and folders generated by the build. ",
      "summary": "Prevent artifacts from including files from previous artifacts. "
    }
  },
  {
    "key": "BAM-20791",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-01-24T13:35:05.000+0000",
      "description": "Similar to 'Run customized...\" users should be able to re-define variables when restarting failed jobs and rerunning build.\r\n\r\nUse case: job failed because of incorrect or outdated variables.",
      "summary": "Allow manual overrides of variables when restarting/rerunning builds"
    }
  },
  {
    "key": "BAM-20790",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-01-24T13:23:30.000+0000",
      "description": "By default, Bamboo creates snapshot of global and plan variables when starting a build. This is done in order to make sure that build environment does not change between restarts. This is not, however, a desirable behavior in all cases, the credentials being one example.\r\n\r\nAs of Bamboo 7.0, this no longer applies to 'password' variables. Those values are taken straight from their definition.\r\n\r\nProposal: make it possible to explicitly mark variables as 'transient' (or 'volatile': exact wording TBD), that is, variables that are not a part of the snapshot and need to be always taken straight from the definition.",
      "summary": "Force selected variables to be refreshed when build is rerun or restarted "
    }
  },
  {
    "key": "BAM-20788",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-01-22T17:00:59.000+0000",
      "description": "h3. Problem Definition\r\nStarting from Bamboo 5.14,  X-FRAME-Option is enabled in HTTP response headers in order to provide clickjacking protection. There are instances when we need to disable this explicitly (like when application links break) and it is not easy to do this at this point of time.\r\n\r\nh3. Suggested Solution\r\nIntroduce an argument for JVM, so that we can disable like below (similar to Jira or Confluence):\r\n{noformat:title=}\r\nJVM_SUPPORT_RECOMMENDED_ARGS=\"-Dcom.atlassian.bamboo.clickjacking.protection.disabled=true\"\r\n{noformat}\r\n\r\nh3. Workaround \r\nExplicitly update in web.xml file to disable this filter.",
      "summary": "Option to disable clickjacking protection in Bamboo"
    }
  },
  {
    "key": "BAM-20787",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-03-12T11:01:47.000+0000",
      "created": "2020-01-22T15:55:33.000+0000",
      "description": "h3. Issue Summary\r\n\r\nNew Tanuki Wrapper version was released since Bamboo 6.10 release. Next release should use newest version\r\n\r\n\u00a0",
      "summary": "Bump Tanuki Wrapper to 3.5.41"
    }
  },
  {
    "key": "BAM-20786",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-03-25T10:10:53.000+0000",
      "created": "2020-01-21T22:05:06.000+0000",
      "description": "h3. Problem Definition\r\n\r\nThe [Exporting existing plans to Bamboo Specs|https://confluence.atlassian.com/bamboo0603/exporting-existing-plans-to-bamboo-specs-939492089.html] documentation is showing inaccurate information about sensitive data. Recent versions Bamboo will encrypt the variables instead of replacing them with \"/* PUT YOUR SENSITIVE INFORMATION HERE*/\" placeholder.\r\nh3. Suggested Solution\r\n\r\nUpdate the documentation to reflect the current behavior:\r\n * All sensitive data will be encrypted by Bamboo starting with \"BAMSCRT...\"\r\n i.e:\r\n{code:java}\r\n.variables(new Variable(\"password\",\r\n                    \"BAMSCRT@0@0@9PYZokrmkX1ooi7qqOOtrw==\")){code}",
      "summary": "Bamboo specs documentation showing inaccurate information"
    }
  },
  {
    "key": "BAM-20785",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-03-12T11:00:27.000+0000",
      "created": "2020-01-21T06:16:38.000+0000",
      "description": "h3. Issue Summary\r\nA regression since Bamboo 6.9.0 means that Bamboo is unable to remove files during clean working directory with Unicode characters in the filename unless the {{LC_CTYPE}} is configured to a UTF8 charset. \r\n\r\nThis can also cause repository stored specs scans to hang. The first scan will work since the checkout directory is empty however all the rest will fail and cause a \"hanging\" scan that never completes.\r\n\r\nh3. Steps to Reproduce\r\n# Set locale to non-UTF8:\r\n{code}\r\nlocalectl set-locale LANG=C\r\n{code}\r\n# Set JVM to UTF-8\r\n{code}\r\n-Dfile.encoding=utf-8 -Dsun.jnu.encoding=utf-8\r\n{code}\r\n# Add script task:\r\n{code}\r\ntouch file\u00f6.txt\r\n{code}\r\n# Enable Cleanup working directory after completion at *Job > Miscellaneous*\r\n\r\nh3. Expected Results\r\nClean working directory should remove the file.\r\n\r\nRepository Stored Specs scans should succeed.\r\n\r\nh3. Actual Results\r\nFile is not removed.\r\n\r\nStill reports success:\r\n{code}\r\nsimple\t01-Jan-2020 01:01:01\tSuccessfully removed working directory at '/home/bamboo-home/xml-data/build-dir/TEST-BAMBOO-JOB1'\r\n{code}\r\n* BAM-20784\r\n\r\nRSS scans hang and the below is shown in the {{atlassian-bamboo.log}}:\r\n{noformat}\r\n2020-03-25 11:18:10,550 WARN [15-BAM::SpecsDetection:pool-23-thread-4] [AbstractGitExecutor] Deleting directory /var/atlassian-bamboo/xml-data/build-dir/serverSide/REPOSITORY_STORED_SPECS/repository-757432471/checkout\r\n2020-03-25 11:18:10,550 ERROR [15-BAM::SpecsDetection:pool-23-thread-4] [AbstractGitExecutor] Unable to delete files: [directory], expect trouble\r\n2020-03-25 11:18:10,567 INFO [15-BAM::SpecsDetection:pool-23-thread-4] [RssDetectionRunnable] Exception while executing RSS detection for repository 757432471\r\ncom.atlassian.bamboo.plugins.stash.repository.StashRepositoryException: com.atlassian.bamboo.plugins.git.GitCommandException: command [/usr/bin/git remote set-url origin file:///var/atlassian-bamboo/xml-data/build-dir/_git-repositories-cache/xxxxxxxxxxxxxxx] failed with code 128. Working directory was [/var/atlassian-bamboo/xml-data/build-dir/serverSide/REPOSITORY_STORED_SPECS/repository-757432471/checkout]., stderr:\r\nfatal: Not a git repository (or any parent up to mount point /var/)\r\nStopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).\r\n\tat com.atlassian.bamboo.plugins.stash.v2.BitbucketServerWorkingCopyManager.updateToLatestRevision(BitbucketServerWorkingCopyManager.java:149)\r\n\tat com.atlassian.bamboo.configuration.external.RepositoryStoredSpecsServiceImpl.lambda$runBambooSpecs$0(RepositoryStoredSpecsServiceImpl.java:255)\r\n\tat com.atlassian.bamboo.variable.CustomVariableContextImpl.withVariableSubstitutor(CustomVariableContextImpl.java:207)\r\n\tat com.atlassian.bamboo.configuration.external.RepositoryStoredSpecsServiceImpl.lambda$runBambooSpecs$1(RepositoryStoredSpecsServiceImpl.java:259)\r\n\tat com.atlassian.bamboo.util.CacheAwareness.withValuesOlderThanTimestampReloaded(CacheAwareness.java:126)\r\n\tat com.atlassian.bamboo.configuration.external.RepositoryStoredSpecsServiceImpl.runBambooSpecs(RepositoryStoredSpecsServiceImpl.java:257)\r\n\tat com.atlassian.bamboo.configuration.external.RssDetectionServiceImpl.runRssDetection(RssDetectionServiceImpl.java:267)\r\n\tat com.atlassian.bamboo.configuration.external.detection.RssDetectionRunnable.run(RssDetectionRunnable.java:42)\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat com.atlassian.bamboo.utils.BambooRunnables$1.run(BambooRunnables.java:48)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper.runWith(ImpersonationHelper.java:26)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper.runWithSystemAuthority(ImpersonationHelper.java:17)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper$1.run(ImpersonationHelper.java:41)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n{noformat}\r\n\r\nh3. Workaround\r\n# Set locale to a UTF-8 variant:\r\n{code}\r\nlocalectl set-locale LANG=en_US.UTF-8\r\n{code}\r\n#*  Or just the {{LC_CTYPE}} if preferred:\r\n{code}\r\nexport LC_CTYPE=en_US.UTF-8\r\n{code}\r\n# Restart Bamboo\r\n\r\nNOTE: This can also occur if the environment variable doesn't include the variable *LANG=en_US.UTF-8*. In this case, the fix will be adding it or fix if it's incorrect. \r\n",
      "summary": "Bamboo is unable to clean filenames with unicode characters unless OS locale is set to UTF8 "
    }
  },
  {
    "key": "BAM-20784",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-01-21T06:13:07.000+0000",
      "description": "h3. Issue Summary\r\nClean working directory (task, source-code checkout and post-build) can report success despite being unable to remove all files. \r\n\r\nh3. Steps to Reproduce\r\n# Set locale to non-UTF8:\r\n{code}\r\nlocalectl set-locale LANG=C\r\n{code}\r\n# Set JVM to UTF-8\r\n{code}\r\n-Dfile.encoding=utf-8 -Dsun.jnu.encoding=utf-8\r\n{code}\r\n# Add script task:\r\n{code}\r\ntouch file\u00f6.txt\r\n{code}\r\n# Enable Cleanup working directory after completion at *Job > Miscellaneous*\r\n\r\nh3. Expected Results\r\nClean working directory should report a failure to clean the directory completely.\r\n\r\nh3. Actual Results\r\n{code}\r\nsimple\t01-Jan-2020 01:01:01\tSuccessfully removed working directory at '/home/bamboo-home/xml-data/build-dir/TEST-BAMBOO-JOB1'\r\n{code}\r\n\r\nh3. Workaround\r\nNone",
      "summary": "Clean working directory can report success despite being unable to remove all files"
    }
  },
  {
    "key": "BAM-20783",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-01-20T10:44:55.000+0000",
      "description": "h3. Issue Summary\r\n\r\nWhen Bamboo saves chain state to file as part of seamless restart feature it might conflict with buildContext being still modified by plugin\r\nh3. Steps to Reproduce\r\n # Enable seamless restart feature\r\n # Install plugin which modifies runtimeTaskDefinition context when build starts\r\n # Check logs and for some build it might produce error\r\n\r\nh3. Expected Results\r\n\r\nChain state is persisted to file and can be read on server restart\r\nh3. Actual Results\r\n\r\nChain state is not persisted and chain is not restored on server restart\r\n\r\nThe below exception is thrown in the atlassian-bamboo.log file:\r\n{noformat}\r\n2020-01-13 22:00:06,394 INFO [10-BAM::PlanExec:pool-17-thread-2] [ChainExecutionManagerImpl:875] Build PROJECT-PLAN-JOB-1989 has been dispatched\r\n2020-01-13 22:00:06,454 INFO [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-15] [BuildQueueManagerImpl:140] Attempting to queue Chain name\r\n #1989 (PROJECT-PLAN-JOB-1989).\r\n2020-01-13 22:00:06,456 INFO [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-15] [ExecutionPhaseServiceImpl:37] Chain name #1989 (PROJECT-PLAN-JOB-1989) queued\r\n2020-01-13 22:00:06,456 ERROR [10-BAM::PlanExec:pool-17-thread-2] [BuildContextXStreamConverter:51] Error context: /com.atlassian.bamboo.chains.ChainStateImpl/buildStates/entry/com.atlassian.bamboo.chains.\r\nChainBuildStateImpl/buildContext/runtimeTaskDefinitions\r\n2020-01-13 22:00:06,456 WARN [10-BAM::PlanExec:pool-17-thread-2] [AbstractXStreamPersister:101] Exception caught while persisting com.atlassian.bamboo.chains.ChainState for PROJECT-PLAN-1989 - clean\r\ning persister state\r\njava.util.ConcurrentModificationException\r\n        at java.util.ArrayList$Itr.checkForComodification(ArrayList.java:909)\r\n        at java.util.ArrayList$Itr.next(ArrayList.java:859)\r\n        at com.thoughtworks.xstream.converters.collections.CollectionConverter.marshal(CollectionConverter.java:73)\r\n        at com.atlassian.bamboo.serialization.xstream.AbstractXStreamConverterAdapter.marshal(AbstractXStreamConverterAdapter.java:28)\r\n        at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:69)\r\n        at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:58)\r\n        at com.thoughtworks.xstream.core.AbstractReferenceMarshaller$1.convertAnother(AbstractReferenceMarshaller.java:84)\r\n        at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.marshallField(AbstractReflectionConverter.java:274)\r\n        at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.writeField(AbstractReflectionConverter.java:250)\r\n        at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.<init>(AbstractReflectionConverter.java:213)\r\n        at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doMarshal(AbstractReflectionConverter.java:144)\r\n        at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.marshal(AbstractReflectionConverter.java:90)\r\n        at com.atlassian.bamboo.serialization.xstream.BuildContextXStreamConverter.marshal(BuildContextXStreamConverter.java:41)\r\n        at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:69)\r\n        at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:58)\r\n        at com.thoughtworks.xstream.core.AbstractReferenceMarshaller$1.convertAnother(AbstractReferenceMarshaller.java:84)\r\n        at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.marshallField(AbstractReflectionConverter.java:274)\r\n        at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.writeField(AbstractReflectionConverter.java:250)\r\n        at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.<init>(AbstractReflectionConverter.java:213)\r\n        at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doMarshal(AbstractReflectionConverter.java:144)\r\n        at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.marshal(AbstractReflectionConverter.java:90)\r\n        ...\r\n        at com.thoughtworks.xstream.XStream.toXML(XStream.java:1281)\r\n        at com.atlassian.bamboo.persister.xstream.AbstractXStreamPersister.save(AbstractXStreamPersister.java:94)\r\n        at com.atlassian.bamboo.chains.ChainExecutionManagerImpl.lambda$saveState$4(ChainExecutionManagerImpl.java:1200)\r\n        at io.atlassian.util.concurrent.ManagedLocks$ManagedLockImpl.withLock(ManagedLocks.java:302)\r\n        at com.atlassian.bamboo.chains.ChainExecutionManagerImpl.saveState(ChainExecutionManagerImpl.java:1199)\r\n        at com.atlassian.bamboo.chains.ChainExecutionManagerImpl.access$1200(ChainExecutionManagerImpl.java:127)\r\n        at com.atlassian.bamboo.chains.ChainExecutionManagerImpl$4.run(ChainExecutionManagerImpl.java:674)\r\n        at io.atlassian.util.concurrent.ManagedLocks$ManagedLockImpl.withLock(ManagedLocks.java:302)\r\n        at com.atlassian.bamboo.chains.ChainExecutionManagerImpl.execute(ChainExecutionManagerImpl.java:581)\r\n        at com.atlassian.bamboo.chains.ChainExecutionManagerImpl.tryStartChainState(ChainExecutionManagerImpl.java:340)\r\n        at com.atlassian.bamboo.chains.ChainExecutionManagerImpl.delayedStart(ChainExecutionManagerImpl.java:232)\r\n        at sun.reflect.GeneratedMethodAccessor1819.invoke(Unknown Source)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n{noformat}\r\nh3. Workaround\r\n\r\n\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Concurrent modification of build context when persist state to file"
    }
  },
  {
    "key": "BAM-20781",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-01-16T22:52:48.000+0000",
      "description": "h3. Issue Summary\r\n\r\nWhen Bamboo compresses large numbers of files for artifact transfer, it does not release the file descriptors so memory (disk space) is still used. This can quickly lead to {{java.io.IOException: No space left on device}}\r\nh3. Steps to Reproduce\r\n # Create a build using S3 Artifact Handler\r\n # Create a task that generates over 100 large files into a subdirectory\r\n # Define an Artifact definition with copy pattern {{**.*}} in the subdirectory\r\n # Create a job that requires this artifact\r\n # Run both jobs multiple times (the error will eventually be seen here)\r\n\r\nh3. Expected Results\r\n\r\nBuilds all complete as expected\r\nh3. Actual Results\r\n\r\nThe below exception is thrown in the atlassian-bamboo-agent.log file:\r\n{noformat}\r\nINFO   | jvm 1    | 2020/01/10 16:36:22 | 2020-01-10 16:36:21,935 WARN [0-BAM::Remote Agent::Agent:pool-3-thread-1] [AbstractArtifactManager] Unable to retrieve artifact large_artifact for TEST-TEST-JOB1-1 via com.atlassian.bamboo.build.artifact.S3ArtifactHandler@1aaadad8\r\nINFO   | jvm 1    | 2020/01/10 16:36:22 | java.io.IOException: No space left on device\r\nINFO   | jvm 1    | 2020/01/10 16:36:22 | \tat sun.nio.ch.FileDispatcherImpl.write0(Native Method)\r\nINFO   | jvm 1    | 2020/01/10 16:36:22 | \tat sun.nio.ch.FileDispatcherImpl.write(FileDispatcherImpl.java:60)\r\n{noformat}\r\nh3. Workaround\r\n\r\nRestart the Remote agent",
      "summary": "Bamboo artifact extraction does not release file descriptors on large zip files"
    }
  },
  {
    "key": "BAM-20780",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-01-16T01:25:41.000+0000",
      "created": "2020-01-16T01:24:27.000+0000",
      "description": "h3. Issue Summary\r\nTest cases are duplicated after a build is ran on a customized revision\r\n\r\nh3. Steps to Reproduce\r\n# Build will run multiple times and tests are entered once and updated in the *test_case* table as expected\r\n# Run a customized build with a different commit, tests are updated in the *test_case* table as expected\r\n# Run the plan once again, tests are updated in the *test_case* table as expected\r\n# Run a customized build with a different commit, tests are updated in the *test_case* table as expected\r\n# Run the plan once again, tests are {color:red}*duplicated*{color}\r\nh3. Expected Results\r\nThe *test_case* should only be entered once per plan and be updated with additional build runs\r\nh3. Actual Results\r\nThe test cases are duplicated which affects the ability to track consistently\r\n\r\nh3. Workaround\r\n\r\nUpgrade to Bamboo 6.8.1 - This doesn't fix retroactively ",
      "summary": "Tests cases are duplicated after run with a customized revision"
    }
  },
  {
    "key": "BAM-20779",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-09-03T07:14:40.000+0000",
      "created": "2020-01-15T20:30:47.000+0000",
      "description": "h3. Issue Summary\r\n\r\nIf there is a single artifact matching the copy patterns and contains % or ; in the file name, Bamboo will fail to download and will show a \"Page not found\" error\r\nh3. Steps to Reproduce\r\n # Set a script task with the following command:\r\n{noformat}\r\ntouch example%test.war{noformat}\r\n # Create an artifact with the following copy pattern {{**/*.war}}\r\n # Run a build\r\n # On the build results go to artifacts and try to download\r\n\r\nh3. Expected Results\r\n\r\nThe artifact downloads.\r\nh3. Actual Results\r\n\r\n!image-2020-01-15-17-21-39-441.png!\r\nh3. Workaround\r\n\r\nSet a script task to create an artifact matching the same copy pattern. If there is more than one artifact the following screen will be shown and the artifact file will be downloadable:\r\n !image-2020-01-15-17-28-31-454.png!",
      "summary": "Some special characters prevent artifacts from being downloaded from the UI"
    }
  },
  {
    "key": "BAM-20778",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-01-15T10:57:57.000+0000",
      "description": "h3. Problem Definition:\r\n\r\nThere is no possibility to add Sub-Tasks to the drop-down (at least when linking a task).\r\n # Go to test results of a failed build\r\n # Click on the options field on the very right side of a failed test\r\n # Select \"Link with Jira Issue\" or \"Create an issue for test\"\r\n # Open drop-down \"Issue Type\"\r\n # Possible issue types: Task, Story, Bug, Epic\r\n\r\nh3. Suggested Solution\r\n\r\nIssue Type should contain Sub-Task\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available\r\n\r\n\u00a0\r\n\r\n\u00a0\r\n\r\n\u00a0",
      "summary": "Sub-Task can be created from bamboo build."
    }
  },
  {
    "key": "BAM-20776",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-01-14T15:54:22.000+0000",
      "description": "h3. Problem Definition\r\n\r\nThe Bamboo uninstall.exe doesn't check if the windows service is running before removing Bamboo.\r\nh3. Suggested Solution\r\n\r\nThe uninstall.exe should verify:\r\n * The location of .exe configured in the windows service and if doesn't match the path of the uninstall.exe, it should not remove the service.\r\n * The status of Bamboo service, if it is running, it should not remove the service as well.",
      "summary": "Windows uninstall wizard should verify the service"
    }
  },
  {
    "key": "BAM-20774",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-01-09T16:00:14.000+0000",
      "description": "h3. Problem Definition\r\nIf a scheduled backup is triggered while build or branch expiry is already running, the two processes will collide, causing backup to fail with NullPointerExceptions due to already deleted items.\r\n\r\nh3. Suggested Options\r\n# If the backup and expiry are scheduled to trigger at the same time, delay the expiry process\r\n# Show a warning of other scheduled items at the same time on the scheduling page\r\n# Add Maintenance Mode (like Bitbucket Server)\r\n\r\nh3. Workaround \r\nStagger the backup and expiry jobs.",
      "summary": "Prevent collisions between Backup and Expiry"
    }
  },
  {
    "key": "BAM-20773",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-01-08T15:29:50.000+0000",
      "description": "Trying to find if I can fetch secrets and keys from azure key vault when building and deploying from Bamboo.\r\nDo you know if there is any plugin or process where we can fetch secrets from AKV?\r\n\r\n",
      "summary": "Bamboo Integration with Azure Key Vault"
    }
  },
  {
    "key": "BAM-20772",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-01-08T15:13:15.000+0000",
      "description": "h3. Issue Summary\r\nIf name of the testcase is all caps, the last letter of the name is made lower case.\r\n\r\nh3. Steps to Reproduce\r\n # Add this sample JUnit xml file to your sample build\r\n # Replace the name \"fail\" below line with all caps - \"THIS IS A DESCRIPTION\" like below.\r\n{noformat:title=}\r\n  <testcase classname=\"tests.ATest\" name=\"name=\"THIS IS A DESCRIPTION\"\" time=\"0.0020\">\r\n    <failure type=\"junit.framework.AssertionFailedError\">junit.framework.AssertionFailedError: \r\n\tat tests.ATest.fail(ATest.java:9)\r\n{noformat}\r\n* Run the build and you will see the result like below.\r\n!image-2020-01-08-16-06-05-792.png|thumbnail!\r\n\r\nh3. Expected Results\r\nThe case name has to be listed as THIS IS A DESCRIPTION\"\r\n\r\nh3. Actual Results\r\n\r\nThe Description section shows as \"THIs Is a DESCRIPTION\".\r\n\r\nh3. Workaround\r\nThere is none.",
      "summary": "If name of the testcase is all caps, the last letter of the word is displayed in lower case"
    }
  },
  {
    "key": "BAM-20771",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-01-08T13:46:01.000+0000",
      "description": "h3. Issue Summary\r\nAfter enabling login credentials via URL parameters, it still does not work with REST API\r\n\r\nh3. Steps to Reproduce\r\n# Add \"-Dbamboo.allow.url.parameters.login=true\" into {{setenv.sh}}\r\n# Restart Bamboo\r\n# Remove anonymous permission from Global Permissions\r\n# Run the following command:\r\n{noformat}\r\ncurl -v \"http://localhost:8085/rest/api/latest/server?os_username=admin&os_password=admin\"\r\n\r\n{noformat}\r\n\r\nh3. Expected Results\r\nIt will works fine\r\n\r\nh3. Actual Results\r\nIt fail with status code 401:\r\n{noformat}\r\n<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><status><status-code>401</status-code><message>Client must be authenticated to access this resource.</message></status>\r\n\r\n{noformat}\r\n\r\nh3. Notes\r\n* The same REST API tested to work fine in Bamboo version 6.5.0\r\n* Enabling login credentials via URL parameters tested to work with non-REST API URL\r\n\r\nh3. Workaround\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Login credentials via URL parameters does not work with REST API"
    }
  },
  {
    "key": "BAM-20770",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-01-06T16:36:54.000+0000",
      "description": "Looking in the database is not useful for administrators who may not have access to DB connectivity.  In order to perform lookups in both directions (but _especially_ against a given storage tag), an API endpoint should be advertised.",
      "summary": "Provide Bamboo API endpoints to look up key <-> storage tag in either direction"
    }
  },
  {
    "key": "BAM-20769",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-01-06T10:00:49.000+0000",
      "description": "h3. Problem Definition\r\nBitbucket Cloud repository have option to enable [Wiki|https://confluence.atlassian.com/bitbucket/wikis-221449748.html] repository but Bamboo server \"Bitbucket Cloud\" repository does not have an option to use this wiki repository\r\n\r\nh3. Suggested Solution\r\nBamboo server \"Bitbucket Cloud\" repository should have an option to use Wiki repository instead of the main repository\r\n",
      "summary": "Support Bitbucket Cloud Wiki repository"
    }
  },
  {
    "key": "BAM-20768",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-01-03T05:31:23.000+0000",
      "description": "h3. Issue Summary\r\nUsing username and password and \"Git\" type repository could not authenticate with Bitbucket Cloud Wiki repository\r\n\r\nh3. Steps to Reproduce\r\n# Navigate to {{Administration >> Build Resources >> Linked repositories}}\r\n# Click on \"Add repository\"\r\n# Select \"Git\" repository\r\n# Use the Bitbucket Cloud Wiki repository, for example https://bitbucket.org/user/repo.git/wiki\r\n# Select the option \"Username and password\"\r\n# Fill in the credential (or with Bitbucket Cloud App password)\r\n# Test the connection\r\n\r\nh3. Expected Results\r\nConnection test successful\r\n\r\nh3. Actual Results\r\nConnection test fail with the below exception is thrown in the atlasssian-bamboo.log file:\r\n{noformat}\r\n2020-01-03 13:04:17,631 INFO [http-nio-8085-exec-2] [RepositoryResource] Failed to connect to repository (type: Git, location: https://bitbucket.org/user/repo.git/wiki, time: 3.908 s, errors: [remote: Your credentials lack one or more required privilege scopes.\r\nfatal: unable to access 'https://user@bitbucket.org/user/repo.git/wiki/': The requested URL returned error: 403])\r\n\r\n{noformat}\r\n\r\nh3. Workaround\r\nUse SSH URL with SSH key instead of HTTPS",
      "summary": "Unable to authenticate Bitbucket Cloud Wiki repository with username and password"
    }
  },
  {
    "key": "BAM-20767",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-01-02T22:47:56.000+0000",
      "description": "h2. Problem Definition\r\nWhen Bamboo is installed via our [AWS Installer|https://confluence.atlassian.com/bamboo/running-bamboo-server-in-aws-858705568.html], it starts against a JRE rather than a JDK. This causes issues since a {{JDK}} is a requirement for Bamboo Specs stored in a Repository (RSS) or compilation fails:\r\n{code}\r\n23-Dec-2019 08:11:13 [ERROR] COMPILATION ERROR :\r\n23-Dec-2019 08:11:13 [INFO] -------------------------------------------------------------\r\n23-Dec-2019 08:11:13 [ERROR] No compiler is provided in this environment. Perhaps you are running on a JRE rather than a JDK?\r\n{code}\r\n\r\nh2. Suggested Solution\r\nBundle a JDK instead of a JRE.\r\n\r\nh2. Workaround\r\n# SSH into the EC2 instance\r\n# Install Adopt OpenJDK 8: \r\n#* https://adoptopenjdk.net/releases.html\r\n#* https://adoptopenjdk.net/installation.html\r\n# Edit {{/etc/environment}} and add a line to point to the Adopt OpenJDK installation directory\r\n{code}\r\nexport JAVA_HOME=<jdk-path-here>\r\n{code}\r\n# Restart the Bamboo service:\r\n{code}\r\nservice bamboo restart\r\n{code}",
      "summary": "Bamboo AWS installer should bundle with a JDK rather JRE"
    }
  },
  {
    "key": "BAM-20766",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-01-02T19:43:55.000+0000",
      "description": "h3. Problem Definition\r\n\r\nCurrently Bamboo does not support ARM platforms for Bamboo server and for remote agents.\r\nh3. Suggested Solution\r\n\r\nAdd support to ARM platforms to Bamboo server and to remote agents.",
      "summary": "Support ARM platforms"
    }
  },
  {
    "key": "BAM-20765",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2020-01-02T15:33:28.000+0000",
      "description": "I got an error to the tune of \"Can't find any repository matching (myusername/xyz)\" when uploading my specs to Bamboo.\r\n\r\nI had made an assumption that I was adding a linked repository to my plan via the `Plan#planRepository` method. That turned out to be incorrect; I should have been using `Plan#linkedRepository` instead.\r\n\r\nI had set up \"xyz\" as a linked repository. However, what I now understand is that Bamboo contacted a remote repository host on my behalf (in this case: Bitbucket), could not find \"myusername/xyz\" on it, and returned this error.\r\n\r\nMy assumption would have been immediately obvious to me if the error message had included more context. Something like:\r\n\r\n\"Could not find a repository matching (myusername/xyz) on bitbucket.org. Check whether https://bitbucket.org/myusername/xyz exists and is accessible to this Bamboo instance.\"",
      "summary": "Add more helpful context to bamboo-specs exceptions when configuring repositories"
    }
  },
  {
    "key": "BAM-20764",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-12-30T16:50:00.000+0000",
      "description": "h3. Issue Summary\r\n\r\nThe new authentication with the personal access token is not working when we attempt to download an artifact with curl.\r\nh3. Steps to Reproduce\r\n # Create a plan with a shared artifact\r\n # Run a build\r\n # Create a personal access token with full access for a Bamboo admin user\r\n # Try to download the artifact with the following command:\r\n\r\n{code:java}\r\ncurl -H \"Authorization: Bearer <ACCESS_TOKEN>\" \\\r\n     -X GET '<BAMBOO_URL>/browse/<BUILD-KEY>/artifact/shared/<ARTIFACT_NAME>/<ARTIFACT_FILE>' > <ARTIFACT_FILE>{code}\r\n\r\nh3. Expected Results\r\n\r\nThe artifact will be download or the command will fail.\r\nh3. Actual Results\r\n\r\nThe artifact is not downloaded and the command succeeds\r\nh3. Workaround\r\n\r\nUse plain text authentication (user + password).\r\n{code:java}\r\ncurl --user <USER>:<PASSWORD>\r\n     -X GET '<BAMBOO_URL>/browse/<BUILD-KEY>/artifact/shared/<ARTIFACT_NAME>/<ARTIFACT_FILE>' > <ARTIFACT_FILE>{code}\r\n\u00a0",
      "summary": "Attempting to download an artifact using \"curl + personal access token\" returns nothing and the command succeeds"
    }
  },
  {
    "key": "BAM-20762",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-12-27T15:32:41.000+0000",
      "description": "h3. Issue Summary\r\nBamboo Specs, both executing from the IDE and using RSS will fail if the linked repository used by the plan is deleted from Bamboo and created back with the same name.\r\nh3. Steps to Reproduce\r\n # Create a plan via specs using a linked repository\r\n # Delete the linked repository\r\n # Recreate the liked repository with the same name\r\n # Run the specs again or commit a change to the specs-enabled repository\r\n\r\nh3. Expected Results\r\nThe plan will be updated with the new repository ID\r\nh3. Actual Results\r\nThe plan will not be published and the below exception is thrown in the atlassian-bamboo.log file:\r\n{noformat}\r\n2019-12-27 15:14:49,841 INFO [http-nio-8085-exec-20] [AccessLogFilter] root GET http://bamboo:8085/rest/api/latest/repository/22937601/scan/status?_=1577459087618 1565798kb\r\n2019-12-27 15:14:54,739 INFO [http-nio-8085-exec-25] [AccessLogFilter] root GET http://bamboo:8085/rest/api/latest/repository/80838661/scan/status?_=1577459087619 1546183kb\r\n2019-12-27 15:14:56,284 INFO [14-repository-stored-specs:pool-21-thread-1] [RepositoryStoredSpecsServiceImpl] Bamboo Specs execution took 4.977 s\r\n2019-12-27 15:14:56,580 INFO [15-BAM::SpecsDetection:pool-22-thread-1] [HungBuildPlanConfigurationPlugin] setting default values for edit page. custom.com.atlassian.bamboo.plugin.hungbuildkiller.hung.enabled\r\n2019-12-27 15:14:56,621 INFO [15-BAM::SpecsDetection:pool-22-thread-1] [HungBuildPlanConfigurationPlugin] setting default values for edit page. custom.com.atlassian.bamboo.plugin.hungbuildkiller.hung.enabled\r\n2019-12-27 15:14:56,654 WARN [15-BAM::SpecsDetection:pool-22-thread-1] [RepositoryStoredSpecsServiceImpl]\r\njava.lang.IllegalArgumentException: com.atlassian.bamboo.specs.api.exceptions.PropertiesValidationException: planRepository / branchtest: Repository parent can not be changed.\r\n\tat com.atlassian.bamboo.configuration.external.PlanConfigImportServiceImpl.lambda$validateAndCreateRepositoryObjects$8(PlanConfigImportServiceImpl.java:809)\r\n\tat com.atlassian.bamboo.variable.CustomVariableContextImpl.withVariableSubstitutor(CustomVariableContextImpl.java:196)\r\n\tat com.atlassian.bamboo.configuration.external.PlanConfigImportServiceImpl.validateAndCreateRepositoryObjects(PlanConfigImportServiceImpl.java:786)\r\n\tat com.atlassian.bamboo.configuration.external.PlanConfigImportServiceImpl.lambda$modifyTopLevelPlanFunction$2(PlanConfigImportServiceImpl.java:513)\r\n\tat com.atlassian.bamboo.core.ScopedExclusionServiceImpl.tryWithLock(ScopedExclusionServiceImpl.java:74)\r\n\tat com.atlassian.bamboo.configuration.external.PlanConfigImportServiceImpl.modifyExistingTopLevelPlan(PlanConfigImportServiceImpl.java:405)\r\n\tat com.atlassian.bamboo.configuration.external.PlanConfigImportServiceImpl.lambda$importPlan$0(PlanConfigImportServiceImpl.java:370)\r\n\tat org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)\r\n\tat com.atlassian.bamboo.persistence.BambooTransactionHibernateTemplate.execute(BambooTransactionHibernateTemplate.java:28)\r\n\tat com.atlassian.bamboo.configuration.external.PlanConfigImportServiceImpl.importPlan(PlanConfigImportServiceImpl.java:351)\r\n\tat com.atlassian.bamboo.configuration.external.RepositoryStoredSpecsServiceImpl.importPlanProperties(RepositoryStoredSpecsServiceImpl.java:1052)\r\n\tat com.atlassian.bamboo.configuration.external.RepositoryStoredSpecsServiceImpl.importBambooYamlForPlan(RepositoryStoredSpecsServiceImpl.java:1023)\r\n\tat com.atlassian.bamboo.configuration.external.RepositoryStoredSpecsServiceImpl.lambda$importBambooYamlsOfAllTypes$6(RepositoryStoredSpecsServiceImpl.java:797)\r\n\tat com.atlassian.bamboo.configuration.external.RepositoryStoredSpecsServiceImpl.importBambooYamlsWithImporter(RepositoryStoredSpecsServiceImpl.java:835)\r\n\tat com.atlassian.bamboo.configuration.external.RepositoryStoredSpecsServiceImpl.importBambooYamlsOfAllTypes(RepositoryStoredSpecsServiceImpl.java:804)\r\n\tat com.atlassian.bamboo.configuration.external.RepositoryStoredSpecsServiceImpl.processSpecs(RepositoryStoredSpecsServiceImpl.java:567)\r\n\tat com.atlassian.bamboo.configuration.external.RepositoryStoredSpecsServiceImpl.runBambooSpecs(RepositoryStoredSpecsServiceImpl.java:308)\r\n\tat com.atlassian.bamboo.configuration.external.RssDetectionServiceImpl.runRssDetection(RssDetectionServiceImpl.java:284)\r\n\tat com.atlassian.bamboo.configuration.external.detection.RssDetectionRunnable.run(RssDetectionRunnable.java:42)\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat com.atlassian.bamboo.utils.BambooRunnables$1.run(BambooRunnables.java:48)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper.runWith(ImpersonationHelper.java:26)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper.runWithSystemAuthority(ImpersonationHelper.java:17)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper$1.run(ImpersonationHelper.java:41)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\nCaused by: com.atlassian.bamboo.specs.api.exceptions.PropertiesValidationException: planRepository / branchtest: Repository parent can not be changed.\r\n\tat com.atlassian.bamboo.vcs.configuration.service.VcsRepositoryConfigurationServiceImpl.validatePlanRepository(VcsRepositoryConfigurationServiceImpl.java:1255)\r\n\tat com.atlassian.bamboo.configuration.external.PlanConfigImportServiceImpl.lambda$validateAndCreateRepositoryObjects$8(PlanConfigImportServiceImpl.java:798)\r\n\t... 27 more\r\n{noformat}\r\nh3. Workaround\r\nh5. 1. If using repository-stored Specs (RSS)\r\n * Delete the plan from Bamboo UI before committing the new changes to the repository\r\n\r\nh5. 2. If running specs from the IDE/Maven.\r\n * Delete the repository at plan's repository settings before executing the specs code again.",
      "summary": "Bamboo Specs fails if the linked repository assigned to the plan is deleted and created back with the same name"
    }
  },
  {
    "key": "BAM-20761",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-12-26T17:22:52.000+0000",
      "description": "h3. Problem\r\n\r\nUsers some times are searching for configurations and finding our main pages which were designed for UI configuration. Now that we have specs It is difficult for the users to make a parallel of UI and specs configuration because they are in totally different locations.\r\nh3. Suggested solution\r\n\r\nFind a way to share a link to specs reference in most of the configuration pages from official documents. It could be in the sidebar or even in the footer. That would help users to find the specs reference.",
      "summary": "Pages describing UI configurations should also reference specs"
    }
  },
  {
    "key": "BAM-20760",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-12-23T20:54:58.000+0000",
      "description": "h3. Problem\r\n\r\nWhen we have multiple repositories it is often common that we need to know which repository triggered the build. This allows us to skip part of the work done in the build and saving time/money.\r\nh3. Suggested solution\r\n\r\nAdd a new variable that tells which branch triggered the build\r\nh3. Note\r\n\r\nThis information is already available as you can see in this Community post:\r\n * [Determine which Repo triggered a build|https://community.atlassian.com/t5/Bamboo-questions/Determine-which-Repo-triggered-a-build/qaq-p/1108462?utm_source=atlcomm&utm_medium=email&utm_campaign=immediate_general_reply&utm_content=topic]\r\n\r\n(!)\u00a0Without this variable, we can't use the\u00a0[Conditional tasks for Bamboo|https://marketplace.atlassian.com/apps/1219706/conditional-tasks-for-bamboo?hosting=server&tab=overview]\u00a0plugin to decide which task we want to avoid when a specific repo is triggered. This plugin only accepts Bamboo default variables, not injected ones. In other words, if we compare the variables as shared in the linked Community post we will not be able to use the information with an injected variable.",
      "summary": "Add a new variable that tells us which repository triggered the build (used when a plan has multiple repos)"
    }
  },
  {
    "key": "BAM-20759",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-03-12T11:00:27.000+0000",
      "created": "2019-12-20T12:00:28.000+0000",
      "description": "h3. Issue Summary\r\nWhen a plan with SCP Task or SSH task is exported as SPECS, neither port is exported\r\n\r\nh3. Steps to Reproduce\r\n # Create a plan\r\n # Add SCP or SSH task\r\n # In the advanced option of the task config, add port number\r\n# Navigate to Plan Configuration -> Actions->View plan as Java Specs \r\n\r\nh3. Expected Results\r\n The SSH task or SCP task configuration should contain the defined port method\r\nh3. Actual Results\r\nNo port information is exported\r\n\r\nh3. Workaround\r\n\r\nManually add the port methods",
      "summary": "SPECS Export missing SSH and SCP port method"
    }
  },
  {
    "key": "BAM-20758",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-03-12T11:00:27.000+0000",
      "created": "2019-12-20T11:14:47.000+0000",
      "description": "h3. Issue Summary\r\nAfter selecting the option \"Use a custom plan branch\" and save the \"After successful build plan\" trigger with a branch, editing the trigger to \"Use the main plan branch\" does not change the Java Specs in View as Java Specs\r\n\r\nh3. Steps to Reproduce\r\n# Create a \"After successful build plan\" trigger for a deployment environment\r\n# Configure the trigger to \"Use a custom plan branch\" with non-default branch\r\n# Save the setting\r\n# Edit the same trigger to change it to \"Use the main plan branch\"\r\n# Click on \"View as Java Specs\"\r\n\r\nh3. Expected Results\r\nThe trigger setting in the Java Specs does not refer to the branch plan\r\n\r\nh3. Actual Results\r\nThe Java Specs shows the branch plan:\r\n{noformat}\r\n                    .triggers(new AfterSuccessfulBuildPlanTrigger()\r\n                            .triggerByBranch(\"develop\"))\r\n{noformat}\r\n\r\nh3.Notes\r\nAfter cloning environment, trigger setting changes are not reflected in View as Java Specs\r\n\r\nh3. Workaround\r\nDelete the trigger and recreate it again",
      "summary": "Incorrect deployment trigger setting in View as Java Specs"
    }
  },
  {
    "key": "BAM-20757",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-04-15T12:38:38.000+0000",
      "created": "2019-12-20T06:26:03.000+0000",
      "description": "h3. Issue Summary\r\nView Deployment project as Java Specs fails if source build plan is removed and plan still has an After Successful Build Plan trigger pointed at a different plan to the removed source plan. If the trigger was pointed to the removed plan, it would have been deleted by the plan deletion.\r\n\r\nh3. Steps to Reproduce\r\n# Setup a deployment project with source build plan: *Plan A*\r\n# Add an environment with a trigger *After Successful Build Plan* > Configure it to point to a *custom plan branch*\r\n# Change the source build plan to: *Plan B*\r\n# Delete the build plan *Plan B* so that the deployment project no longer has a source build plan but still has a After Successful Build Plan pointed at *Plan A*\r\n# Allow a few moments for the background deletion service to remove the plan\r\n# View Deployment project as Java Specs\r\n\r\nh3. Expected Results\r\nYou can still view the Java Spec for the Deployment Project.\r\n\r\nh3. Actual Results\r\nYou can't view the Java Spec for the Deployment Project.\r\n\r\nThe below exception is thrown in the {{atlassian-bamboo.log}} file:\r\n{noformat}\r\n2019-12-16 23:32:01,083 ERROR [http-nio-8085-exec-27] [ViewDeploymentProjectSpecs]\r\njava.lang.NullPointerException\r\n        at com.atlassian.bamboo.trigger.exporters.AfterSuccessfulPlanTriggerExporter.toSpecsEntity(AfterSuccessfulPlanTriggerExporter.java:129)\r\n        at com.atlassian.bamboo.configuration.external.helpers.TriggerDefinitionExportHelper.toSpecsEntity(TriggerDefinitionExportHelper.java:78)\r\n        at com.atlassian.bamboo.configuration.external.DeploymentExportServiceImpl.lambda$generateEnvironment$7(DeploymentExportServiceImpl.java:155)\r\n        at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\r\n        at java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n        at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n        at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\r\n        at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\r\n        at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n...\r\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n        at java.lang.Thread.run(Thread.java:748)\r\n{noformat}\r\n\r\nh3. Workaround\r\n\r\nh6. Option 1\r\nRe-associate the deployment project to a build plan: *Deployment Project Configuration > Edit Build Plan*\r\n\r\nh6. Option 2\r\nGo through each Deployment Environment on the project > Triggers and remove any After Successful Plan Triggers",
      "summary": "View Deployment project as Java Specs fails if source build plan is removed and environment still has an After Successful Build Plan trigger"
    }
  },
  {
    "key": "BAM-20756",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-12-20T06:15:06.000+0000",
      "description": "h3. Issue Summary\r\nWhen triggering a build using the Queue API, if the body contains any unexpected JSON the system will attempt to deserialize it into an java.util.ArrayList and fail.\r\n\r\nThis results in the build not executing. The body content is not required to trigger the build, so unexpected valid JSON should not cause the command to stop.\r\n\r\nExample: Using the Bitbucket server webhook to trigger builds without change detection.\r\n\r\nh3. Steps to Reproduce\r\n # POST to the [Queue API|https://docs.atlassian.com/atlassian-bamboo/REST/5.5.0/#d2e823] with a valid JSON payload.\r\n\r\nh3. Expected Results\r\nThe server begins building the plan.\r\n\r\nh3. Actual Results\r\nThe server returns an error 400 with the following:\r\n{noformat}\r\n{\"message\":\"Can not deserialize instance of java.util.ArrayList out of VALUE_STRING token\\n at [Source: org.apache.catalina.connector.CoyoteInputStream@47331eb5; line: 1, column: 2]\",\"status-code\":400}\r\n{noformat}\r\n\r\nNothing is shown in the bamboo log files.\r\n\r\nh3. Workaround\r\n\r\n* Remove any POST data\r\n* Use change detection utilizing [repository triggers|https://confluence.atlassian.com/bamboo/trigger-a-bamboo-build-from-bitbucket-cloud-using-webhooks-873949130.html].\r\n\r\nIf you have control over the POST payload, ensure each value is in an array. E.g:\r\n{code}\r\n{\r\n     \"bamboo.variable.1\": [\"somevalue\"],\r\n     \"bamboo.variable.2\": [\"somevalue\"]\r\n}\r\n{code}",
      "summary": "Triggering a build using the Queue API can cause deserialize error"
    }
  },
  {
    "key": "BAM-20755",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-12-20T06:05:46.000+0000",
      "description": "Currently when using remote triggers, we cannot access the webhook payload data that triggers change detection.\r\n\r\nThis can be useful information to be used in build and deployment workflows. Example, using [pull request webhook payload|https://confluence.atlassian.com/bitbucketserver/event-payload-938025882.html#Eventpayload-Pullrequestevents] to determine the source branch name.",
      "summary": "Remote trigger type to pass webhook payload to build plans"
    }
  },
  {
    "key": "BAM-20754",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-12-19T19:07:10.000+0000",
      "description": "Add support for\u00a0Queue Priority Plugin in Bamboo.",
      "summary": "Support for Queue Priority Plugin"
    }
  },
  {
    "key": "BAM-20753",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-03-12T11:01:47.000+0000",
      "created": "2019-12-19T14:00:45.000+0000",
      "description": "h3. Problem\r\n\r\nIt is very common that deployments and plans last for more than a year. When that happens it becomes hard (some times impossible)to determine in which year the logs message was generated if you just use the Bamboo UI.\r\n\r\nh3. Suggested solution\r\n\r\nAdd the year part of the timestamp in the UI.\r\n\r\nh3. Workaround\r\n\r\nGet this information from the *audit_log* table.\r\n\r\n\r\n\r\n",
      "summary": "Timestamps in audit logs entries should show the year"
    }
  },
  {
    "key": "BAM-20752",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-12-19T09:58:09.000+0000",
      "description": "h3. Summary\r\nCurrently Bamboo docker-bamboo-agent-base has no way to passing  JVM_OPTS when running container\r\n\r\nh3. Recommendation\r\nEnhance the installer to pass JVM options",
      "summary": "No possibility to pass JVM_OPTS when running docker-bamboo-agent-base"
    }
  },
  {
    "key": "BAM-20751",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-12-19T10:01:48.000+0000",
      "created": "2019-12-19T08:17:33.000+0000",
      "description": "h2. Context\r\n\r\nAccording to the [docker hub page|https://hub.docker.com/r/atlassian/bamboo-server] a known issue with the current Bamboo Docker container is that it does not have support for a reverse proxy setup. This is a little weird as we currently have a setup which includes:\r\n * Jira Software\r\n * Confluence\r\n * Bitbucket\r\n\r\nAll of the above\u00a0 have support for reverse proxies but for some reason Bamboo doesn't.\r\nh3. User Story\r\n\r\nAs a DevOps engineer\r\n I want to configure Bamboo Server on my infrastructure using a reverse proxy\r\n So that Bamboo can be accessed securely and meet my organisations security standards\r\nh3. Acceptance Criteria\r\n # Reverse Proxy settings can be passed as Variables for the Docker container\r\n ## {{ATL_PROXY_NAME\u00a0(default: NONE)}}\r\n ## {{ATL_PROXY_PORT\u00a0(default: NONE)}}\r\n ## {{ATL_TOMCAT_PORT\u00a0(default: 8080)}}\r\n ## {{ATL_TOMCAT_SCHEME\u00a0(default: http)}}\r\n ## {{ATL_TOMCAT_SECURE\u00a0(default: false)}}\r\n ## {{ATL_TOMCAT_CONTEXTPATH\u00a0(default: NONE)}}\r\n # Additional Tomcat options are also supported\r\n ## {{ATL_TOMCAT_MGMT_PORT}} (default: 8005)\r\n ## {{ATL_TOMCAT_MAXTHREADS}} (default: 100)\r\n ## {{ATL_TOMCAT_MINSPARETHREADS}} (default: 10)\r\n ## {{ATL_TOMCAT_CONNECTIONTIMEOUT}} (default: 20000)\r\n ## {{ATL_TOMCAT_ENABLELOOKUPS}} (default: false)\r\n ## {{ATL_TOMCAT_PROTOCOL}} (default: HTTP/1.1)\r\n ## {{ATL_TOMCAT_ACCEPTCOUNT}} (default: 10)\r\n # Bamboo Server can be accessed via Reverse Proxy\r\n\r\n\u00a0",
      "summary": "Reverse Proxy Support for Bamboo Docker Container"
    }
  },
  {
    "key": "BAM-20750",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-12-19T01:32:31.000+0000",
      "description": "h3. Problem Definition\r\n* When selecting over 42 items, the chart does not show the top chart and the bottom chart only displays up to 15 items\r\n* The *Data table* tab doesn't scroll to the right to show more data\r\nh3. Suggested Solution\r\nImprove the display of the chart\r\nImprove the *Data table* tab \r\nh4. Why this is important \r\nIf too many items is selected the charts are not useful\r\nh3. Workaround \r\n(Optional)",
      "summary": "Improve Bamboo Reporting graphics and list"
    }
  },
  {
    "key": "BAM-20749",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-02-26T20:42:38.000+0000",
      "created": "2019-12-18T23:48:35.000+0000",
      "description": "h3. Problem Definition\r\n\r\nHung Build Killer is configured globally.  There is not an option in YAML based specs to disable the Hung Build Killer for an individual Plan.\r\n\r\nThe checkmark exists to disable the HBK for plans which are not configured using a Specs definition.\r\n\r\nIf a single Build Plan is known to take longer than the configured global settings, HBK will end the build before it is completed.\r\n\r\nh3. Suggested Solution\r\n\r\nAdd the capability to Specs to disable/override HBK on the individual Plan level.\r\n\r\nh3. Workaround\r\na) configure global HBK settings to allow for the longest build of all current build plans.\r\n\r\nb) Switch to Java Specs.  In Java Specs, you can use {{.ignoreHungBuilds()}} to disable HBK for the plan.\r\n\r\n",
      "summary": "Add option in Bamboo Specs to override global HBK settings on the Plan level."
    }
  },
  {
    "key": "BAM-20748",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-10-15T11:49:32.000+0000",
      "created": "2019-12-18T19:20:37.000+0000",
      "description": "As per [Deprecated APIs and authentication - GitHub Developer Guide|https://developer.github.com/changes/2019-11-05-deprecated-passwords-and-authorizations-api/], GitHub will shortly deprecate password authentication to their API.\r\n\r\nAs Bamboo uses this method of authentication to get information about the repositories via API, the plugin should be adjusted so personal access token can be used while adding new GitHub repositories to Bamboo.\r\n\r\nI.e\r\n\r\nRequests on the following API endpoint that is currently used by Bamboo will stop working:\r\n\r\n[https://api.github.com/user/repos?per_page=100]\r\n\r\n\u00a0\r\n\r\n\u00a0\r\n\r\nAll password authentication will return a status code of\u00a0*401*\u00a0starting:\r\n * November 13, 2020 at 4:00 PM UTC",
      "summary": "Add the ability to use personal access token authentication at Github plugin "
    }
  },
  {
    "key": "BAM-20747",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-12-17T23:06:11.000+0000",
      "description": "h3. Problem Definition\r\nThe Jenkins importer is quite old and haven't been updated in quite some time\r\nh3. Suggested Solution\r\nPlease update the Jenkins importer\r\n\r\nh3. Why this is important\r\n* Customers who want to migrate from Jenkins need to build their plans from scratch",
      "summary": "Improve Jenkins Importer"
    }
  },
  {
    "key": "BAM-20746",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-03-12T11:00:26.000+0000",
      "created": "2019-12-17T12:02:09.000+0000",
      "description": "h3. Issue Summary\r\n\r\nCan't use multimodule Maven project for repository stored specs\r\nh3. Steps to Reproduce\r\n # Create bamboo-specs folder with 2 modules: common and main\r\n # Add repository to Bamboo\r\n # Configure Bamboo Specs\r\n # Click Scan button\r\n\r\nh3. Expected Results\r\n\r\nBamboo builds Specs project and import plans/deployments\r\nh3. Actual Results\r\n\r\nThe below exception is thrown in the xxxxxxx.log file:\r\n{noformat}\r\nCaused by: java.lang.IllegalStateException: Cannot nest secure method invocations\r\n17-Dec-2019 12:28:33\t    at com.atlassian.bamboo.specs.maven.sandbox.PrivilegedThreads.setThreadPermissionCheckers (PrivilegedThreads.java:24)\r\n17-Dec-2019 12:28:33\t    at com.atlassian.bamboo.specs.maven.sandbox.BambooSpecsSecurityManager.setPermissionCheckers (BambooSpecsSecurityManager.java:66)\r\n17-Dec-2019 12:28:33\t    at com.atlassian.bamboo.specs.maven.sandbox.SecureMethodInvoker.startPerThreadSecurity (SecureMethodInvoker.java:20)\r\n17-Dec-2019 12:28:33\t    at com.atlassian.bamboo.specs.maven.sandbox.SpecsRunner.runSpecs (SpecsRunner.java:43)\r\n17-Dec-2019 12:28:33\t    at com.atlassian.bamboo.specs.maven.RunBambooSpecsMojo.execute (RunBambooSpecsMojo.java:88)\r\n17-Dec-2019 12:28:33\t    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:134)\r\n{noformat}\r\nh3. Workaround\r\n\r\nUse single module Maven project",
      "summary": "Can't use multimodule Maven project for repository stored specs"
    }
  },
  {
    "key": "BAM-20745",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-12-17T04:11:28.000+0000",
      "created": "2019-12-17T04:10:25.000+0000",
      "description": "The version of the Application Links plugin used in Bamboo before version 6.8.2 allows remote attackers to obtain information about configured application links via a missing permissions check. See https://ecosystem.atlassian.net/browse/APL-1386 for more details.",
      "summary": "Information disclosure in the listEntityLinks servlet resource of the Application links plugin - CVE-2019-15011"
    }
  },
  {
    "key": "BAM-20743",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-01-17T15:42:41.000+0000",
      "created": "2019-12-16T07:12:40.000+0000",
      "description": "h3. Issue Summary\r\nSince Bamboo 6.10.2, the Java version is validated against unsupported versions. However, this doesn't work on a fresh install as validation tasks aren't run until after the setup wizard but unsupported Java versions will cause issues preventing you to get to that phase.\r\n\r\nh3. Steps to Reproduce\r\n# Install Java 11 (unsupported)\r\n# Start a fresh Bamboo instance with MySQL and try to progress through the setup wizard\r\n\r\nh3. Expected Results\r\nBamboo Java version validation reports an error before even getting to the setup wizard\r\n\r\nh3. Actual Results\r\nSetup wizard is presented however unsupported Java version causes issues progressing through the database setup.\r\n\r\nThe below exception is thrown in the atlassian-bamboo.log file:\r\n{noformat}\r\n2019-12-13 08:07:28,393 ERROR [http-nio-8085-exec-10] [DefaultDispatcherErrorHandler] Exception occurred during processing request: Unable to instantiate Action, com.atlassian.bamboo.ww2.actions.setup.SetupDatabaseConnectionAction,  defined for 'performSetupDatabaseConnection' in namespace '/setup'Error creating bean with name 'reloadableBeanFactories' defined in class path resource [applicationContextPlugin.xml]: BeanPostProcessor before instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.transaction.config.internalTransactionAdvisor': Cannot resolve reference to bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0' while setting bean property 'transactionAttributeSource'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0': BeanPostProcessor before instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'customBuildCompleteActionAdvisor' defined in class path resource [applicationContextManagers.xml]: Cannot resolve reference to bean 'hibernateInterceptor' while setting bean property 'advice'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'hibernateInterceptor' defined in class path resource [applicationContextPersistence.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [applicationContextPersistence.xml]: Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: javax/xml/bind/JAXBException\r\nUnable to instantiate Action, com.atlassian.bamboo.ww2.actions.setup.SetupDatabaseConnectionAction,  defined for 'performSetupDatabaseConnection' in namespace '/setup'Error creating bean with name 'reloadableBeanFactories' defined in class path resource [applicationContextPlugin.xml]: BeanPostProcessor before instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.transaction.config.internalTransactionAdvisor': Cannot resolve reference to bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0' while setting bean property 'transactionAttributeSource'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0': BeanPostProcessor before instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'customBuildCompleteActionAdvisor' defined in class path resource [applicationContextManagers.xml]: Cannot resolve reference to bean 'hibernateInterceptor' while setting bean property 'advice'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'hibernateInterceptor' defined in class path resource [applicationContextPersistence.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [applicationContextPersistence.xml]: Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: javax/xml/bind/JAXBException - action - file:/sandbox-local/bamboo/data/www/bamboo/atlassian-bamboo-6.10.4/atlassian-bamboo/WEB-INF/classes/struts.xml:505:128\r\n\tat com.opensymphony.xwork2.DefaultActionInvocation.createAction(DefaultActionInvocation.java:320)\r\n\tat com.opensymphony.xwork2.DefaultActionInvocation.init(DefaultActionInvocation.java:401)\r\n\tat com.opensymphony.xwork2.DefaultActionProxy.prepare(DefaultActionProxy.java:201)\r\n\tat org.apache.struts2.factory.StrutsActionProxy.prepare(StrutsActionProxy.java:57)\r\n\tat org.apache.struts2.factory.StrutsActionProxyFactory.createActionProxy(StrutsActionProxyFactory.java:32)\r\n....\r\nCaused by: java.lang.ClassNotFoundException: javax.xml.bind.JAXBException\r\n\tat org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1364)\r\n\tat org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1185)\r\n\t... 99 more\r\n{noformat}\r\n\r\nh3. Workaround\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Bamboo doesn't check Java version on startup for a fresh install"
    }
  },
  {
    "key": "BAM-20742",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-12-10T15:01:18.000+0000",
      "description": "In the plan summary, all builds are graphed in the Plan Statistics Graph.  The Plan Statistics Graph should be broken into two graphs.  One graph showing the Specs configuration build.  The other graph showing all of the Scheduled and Manual builds.  This allows the Specs configuration build to not skew the % of Success of the other builds.  This also provides easy data on how Specs configuration builds are working, or not working.\r\n",
      "summary": "Separate graph for Specs builds"
    }
  },
  {
    "key": "BAM-20741",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-03-12T11:00:28.000+0000",
      "created": "2019-12-10T07:01:30.000+0000",
      "description": "h3. Issue Summary\r\nUsing Perforce repository in branch plan will make it unable to run with NullPointerException\r\n\r\nh3. Steps to Reproduce\r\n# Create a plan with Perforce repository\r\n# Create a branch plan\r\n# Run the branch plan\r\n\r\nh3. Expected Results\r\nThe branch plan will run successfully\r\n\r\nh3. Actual Results\r\nThe below exception is thrown in the atlassian-bamboo.log file:\r\n{noformat}\r\n2019-12-10 14:14:38,872 ERROR [6-DelayedChangeDetectionThread:pool-12-thread-20] [ChainExecutionManagerImpl] Plan 'TEST-PER0' could not be started. Exception: java.lang.NullPointerException\r\ncom.atlassian.bamboo.repository.RepositoryException: java.lang.NullPointerException\r\n\tat com.atlassian.bamboo.v2.trigger.DefaultChangeDetectionManager.collectInitialStateForBranchBuild(DefaultChangeDetectionManager.java:362)\r\n\tat com.atlassian.bamboo.v2.trigger.DefaultChangeDetectionManager.collectAllChangesSinceLastBuild(DefaultChangeDetectionManager.java:160)\r\n\tat com.atlassian.bamboo.v2.trigger.DefaultChangeDetectionManager.collectAllChangesSinceLastBuild(DefaultChangeDetectionManager.java:190)\r\n\tat com.atlassian.bamboo.v2.trigger.ManualBuildDetectionAction.performDelayedChangeDetection(ManualBuildDetectionAction.java:154)\r\n\tat com.atlassian.bamboo.chains.ChainExecutionManagerImpl$1.getChainState(ChainExecutionManagerImpl.java:249)\r\n\tat com.atlassian.bamboo.chains.ChainExecutionManagerImpl.tryStartChainState(ChainExecutionManagerImpl.java:323)\r\n\tat com.atlassian.bamboo.chains.ChainExecutionManagerImpl.delayedStart(ChainExecutionManagerImpl.java:241)\r\n\tat sun.reflect.GeneratedMethodAccessor1574.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:197)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:92)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)\r\n\tat com.sun.proxy.$Proxy239.delayedStart(Unknown Source)\r\n\tat sun.reflect.GeneratedMethodAccessor1574.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:206)\r\n\tat com.sun.proxy.$Proxy239.delayedStart(Unknown Source)\r\n\tat com.atlassian.bamboo.plan.PlanExecutionManagerImpl$1$1$1.lambda$call$0(PlanExecutionManagerImpl.java:375)\r\n\tat com.atlassian.bamboo.util.CacheAwareness.lambda$withValuesOlderThanTimestampReloaded$1(CacheAwareness.java:101)\r\n\tat com.atlassian.bamboo.util.CacheAwareness.withValuesOlderThanTimestampReloaded(CacheAwareness.java:126)\r\n\tat com.atlassian.bamboo.util.CacheAwareness.withValuesOlderThanTimestampReloaded(CacheAwareness.java:100)\r\n\tat com.atlassian.bamboo.util.CacheAwareness.withValuesOlderThanTimestampReloaded(CacheAwareness.java:151)\r\n\tat com.atlassian.bamboo.plan.PlanExecutionManagerImpl$1$1$1.call(PlanExecutionManagerImpl.java:374)\r\n\tat com.atlassian.bamboo.plan.PlanExecutionManagerImpl$1$1$1.call(PlanExecutionManagerImpl.java:367)\r\n\tat io.atlassian.util.concurrent.ManagedLocks$ManagedLockImpl.withLock(ManagedLocks.java:293)\r\n\tat com.atlassian.bamboo.plan.PlanExecutionLockServiceImpl.lock(PlanExecutionLockServiceImpl.java:75)\r\n\tat com.atlassian.bamboo.plan.PlanExecutionManagerImpl.doWithProcessLock(PlanExecutionManagerImpl.java:652)\r\n\tat com.atlassian.bamboo.plan.PlanExecutionManagerImpl.access$400(PlanExecutionManagerImpl.java:131)\r\n\tat com.atlassian.bamboo.plan.PlanExecutionManagerImpl$1$1.run(PlanExecutionManagerImpl.java:363)\r\n\tat com.atlassian.bamboo.utils.BambooRunnables$1.run(BambooRunnables.java:48)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper.runWith(ImpersonationHelper.java:26)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper.runWithSystemAuthority(ImpersonationHelper.java:17)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper$1.run(ImpersonationHelper.java:41)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\nCaused by: java.lang.NullPointerException\r\n\tat com.atlassian.bamboo.v2.trigger.DefaultChangeDetectionManager.lambda$collectInitialStateForBranchBuild$1(DefaultChangeDetectionManager.java:350)\r\n\tat com.atlassian.bamboo.variable.CustomVariableContextImpl.withVariableSubstitutor(CustomVariableContextImpl.java:185)\r\n\tat com.atlassian.bamboo.v2.trigger.DefaultChangeDetectionManager.collectInitialStateForBranchBuild(DefaultChangeDetectionManager.java:348)\r\n\t... 39 more\r\n{noformat}\r\n\r\nh3. Notes\r\n* Even though P4 does not have branch support in Bamboo, Bamboo will still perform the same checkout as the master plan - works fine in Bamboo 6.9.2 or older\r\n* Caused by the changes in https://jira.atlassian.com/browse/BAM-12984\r\n* After restarting Bamboo server, the branch plan that fail will works fine\r\n\r\nh3. Workaround\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Unable to use Perforce repository in branch plan"
    }
  },
  {
    "key": "BAM-20740",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-12-09T13:19:27.000+0000",
      "description": "h3. Issue Summary\r\n\r\nBamboo disables a plan if it was not published by RSS\r\n\r\n\u00a0\r\nh3. Steps to Reproduce\r\n # Create a Specs plan that handles and publishes two plans: PlanA and PlanB.\r\n # Publish both plans (by doing a commit or scanning the repository from Bamboo).\r\n (no we have two new plans in Bamboo)\r\n # Comment the publishing of PlanB. We want to force RSS to only publish PlanA.\r\n # Run the Specs build again.\r\n\r\nh3. Expected Results\r\n - PlanA will show the updated changes.\r\n\r\nh3. Actual Results\r\n - PlanA will show the updated changes.\r\n - PlanB is disabled.\r\n\r\nNo errors nor meaningful messages in logs.\r\nh3. Workaround\r\n\r\nNo workaround available",
      "summary": "Bamboo disables a plan if it was not published by RSS"
    }
  },
  {
    "key": "BAM-20739",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-12-06T19:20:51.000+0000",
      "description": "Bamboo 6.10 currently supports the MySQL versions 5.6.3 and 5.7, though not yet 8.0 which is on the market since almost 1 and a half years.\r\n\r\nWould be great to test compatibility for it with an upcoming new Bamboo release and, if passing, officially support it.\r\n\r\n\u00a0",
      "summary": "Bamboo support for MySQL 8.0"
    }
  },
  {
    "key": "BAM-20738",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-12-05T11:28:55.000+0000",
      "description": "h3. Problem Definition\r\n\r\nWhen a Tomcat deployment task is used, Tomcat expects certain roles for the bamboo user to be added in conf/tomcat-users.xml between the <tomcat-users> tags for a successful deployment. When this is not added, the task throws the following not-so-helpful error\r\n{noformat}\r\nsimple\t29-Nov-2019 16:41:56\tDeploying application with war file 'ROOT.war' to context '/' to server 'http://www.hostURL:3237/manager/'\r\nsimple\t29-Nov-2019 16:41:56\tConfirm expected Tomcat manager location.\r\nsimple\t29-Nov-2019 16:41:56\tTrying to retrieve Tomcat details from http://www.hostURL:3237/manager//text/serverinfo\r\nerror\t29-Nov-2019 16:41:56\tServer info returned status code: 403\r\nerror\t29-Nov-2019 16:41:56\tTry likely variations of Tomcat manager location.\r\nsimple\t29-Nov-2019 16:41:56\tTrying to retrieve Tomcat details from http://www.hostURL:3237/manager//serverinfo\r\nerror\t29-Nov-2019 16:41:56\tServer info returned status code: 404\r\nerror\t29-Nov-2019 16:41:56\tCould not detect Tomcat version from server info, trusting configuration of Tomcat 7 or greater\r\nerror\t29-Nov-2019 16:41:57\tCould not deploy application: Data transfer interrupted (broken pipe) (Write failed)\r\nerror\t29-Nov-2019 16:41:57\tjava.net.SocketException: Data transfer interrupted (broken pipe) (Write failed)\r\nerror\t29-Nov-2019 16:41:57\t\tat java.net.SocketOutputStream.socketWrite0(Native Method)\r\nerror\t29-Nov-2019 16:41:57\t\tat java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:111)\r\nerror\t29-Nov-2019 16:41:57\t\tat java.net.SocketOutputStream.write(SocketOutputStream.java:155)\r\nerror\t29-Nov-2019 16:41:57\t\tat java.io.BufferedOutputStream.write(BufferedOutputStream.java:122)\r\n{noformat}\r\nThe error message with 403 and 404 did not give a meaningful hint.\r\nh3. Suggested Solution\r\n\r\nIt would be better to elaborate this error by catching a 403 and insert a hint towards a maybe missing role followed by the stack trace.\r\n\r\nThe need for these roles are however mentioned in our [documentation here|https://confluence.atlassian.com/bamboo0604/using-tomcat-with-bamboo-for-continuous-deployment-947176491.html]\r\n",
      "summary": "Tomcat deployment task to throw useful message"
    }
  },
  {
    "key": "BAM-20737",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-12-04T23:51:47.000+0000",
      "description": "h2. Problem Definition\r\nRunning a custom build in Bamboo with a specific revision will always perform a full fetch. Since Git 2.5, Git servers can enable {{uploadpack.allowReachableSha1InWant}} to allow fetching from a reachable SHA1. \r\n\r\nBitbucket Server supports it since 5.5.\r\n\r\nh2. Suggested Solution\r\nWe could cut down checkout times for custom builds if we tried to fetch from the specific SHA1 and only falling back to a full fetch if it fails.",
      "summary": "Leverage Git servers that enable allowReachableSha1InWant for custom builds instead of always doing a full fetch"
    }
  },
  {
    "key": "BAM-20736",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-12-03T02:47:46.000+0000",
      "created": "2019-12-03T02:46:18.000+0000",
      "description": "h3. Issue Summary\r\nBamboo always performs a full repository fetch when building new commits even when *Fetch whole repository* is unchecked.\r\n\r\nh3. Steps to Reproduce\r\n# Set up a plan with a Git repository and checkout task\r\n# Push a new commit\r\n# Run the build\r\n\r\nh3. Expected Results\r\nBamboo fetches only the branch specified on the repository\r\n\r\nh3. Actual Results\r\nBamboo always performs a full repository fetch, even though the revision exists on the configured branch. The below is observed in the build log :\r\n{noformat}\r\nsimple\t03-Dec-2019 02:40:20\tEnforcing full fetch as requested revision has not been found on the configured branch\r\n...\r\nsimple\t03-Dec-2019 02:40:20\t/usr/bin/git ... fetch --tags http://bitbucket:7990/scm/git/repo.git +refs/heads/*:refs/heads/* --update-head-ok --progress --verbose\r\n{noformat}\r\n\r\nCheckout times are increased and extra load is placed on repository hosts.\r\n\r\nh3. Note\r\nThis is normal behaviour if building with a custom revision and that revision doesn't exist on the branch configured on the repository. It may explain why you continue to see this message if running a fixed version of Bamboo with certain builds.\r\n\r\nh3. Workaround\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Bamboo always performs a full fetch when building new commits"
    }
  },
  {
    "key": "BAM-20735",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-01-22T15:41:22.000+0000",
      "created": "2019-11-28T19:21:58.000+0000",
      "description": "h3. Issue Summary\r\n\r\nUnique constraint violation o table *auth_attempt_info* when synchronizing an external user repository if there are failed prior attempts of login\r\nh3. Steps to Reproduce\r\n # On Bamboo, try to login with the user \"Foo\" using a wrong password (the user doesn't necessarily need to exist).\r\n # Try to log in again with the user \"foo\" (respect the lower \"F\"), again, using a wrong password.\r\n # On crowd, create a user called \"Foo\".\r\n # On Bamboo, go to {{Cog>Overview>User Directories}} and force a synchronization.\r\n # Back on Crowd, Rename the user \"Foo\" to \"foo\".\r\n # Force a synchronization in Bamboo again.\r\n\r\nh3. Expected Results\r\n\r\nThe synchronization will be executed without any errors\r\nh3. Actual Results\r\n\r\nWhen Bamboo updates the entries on the *auth_attempt_info* table, it will try to update both entries added on steps 1 and 2 to use the same name from step 5, violating the unique constraint.\r\n The synchronization fails and the following is thrown in the logs:\r\n{noformat}\r\n2019-11-28 19:04:19,601 ERROR [atlassian-scheduler-quartz2.local_Worker-4] [DbCachingDirectoryPoller] Error occurred while refreshing the cache for directory [ 72056833 ].\r\norg.hibernate.exception.GenericJDBCException: could not extract ResultSet\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:47)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:69)\r\n\tat org.hibernate.loader.Loader.getResultSet(Loader.java:2167)\r\n\tat org.hibernate.loader.Loader.executeQueryStatement(Loader.java:1930)\r\n\tat org.hibernate.loader.Loader.executeQueryStatement(Loader.java:1892)\r\n\tat org.hibernate.loader.Loader.doQuery(Loader.java:937)\r\n\tat org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:340)\r\n\tat org.hibernate.loader.Loader.doList(Loader.java:2689)\r\n\tat org.hibernate.loader.Loader.doList(Loader.java:2672)\r\n\tat org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2506)\r\n\tat org.hibernate.loader.Loader.list(Loader.java:2501)\r\n\tat org.hibernate.loader.criteria.CriteriaLoader.list(CriteriaLoader.java:109)\r\n\tat org.hibernate.internal.SessionImpl.list(SessionImpl.java:1959)\r\n\tat org.hibernate.internal.CriteriaImpl.list(CriteriaImpl.java:370)\r\n\tat org.hibernate.internal.CriteriaImpl.uniqueResult(CriteriaImpl.java:392)\r\n\tat com.atlassian.crowd.dao.user.UserDAOHibernate.findByNameInternal(UserDAOHibernate.java:485)\r\n\tat com.atlassian.crowd.dao.user.UserDAOHibernate.findByName(UserDAOHibernate.java:174)\r\n\tat com.atlassian.crowd.dao.user.UserDAOHibernate.update(UserDAOHibernate.java:398)\r\n\tat com.atlassian.crowd.dao.user.UserDAOHibernate.update(UserDAOHibernate.java:59)\r\n\tat com.atlassian.crowd.directory.CachingDirectory.updateUser(CachingDirectory.java:144)\r\n\tat com.atlassian.crowd.directory.DbCachingRemoteChangeOperations.updateUsers(DbCachingRemoteChangeOperations.java:287)\r\n\tat sun.reflect.GeneratedMethodAccessor2360.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:197)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)\r\n\tat com.sun.proxy.$Proxy1668.updateUsers(Unknown Source)\r\n\tat com.atlassian.crowd.directory.DirectoryCacheImplUsingChangeOperations.addOrUpdateCachedUsers(DirectoryCacheImplUsingChangeOperations.java:57)\r\n\tat com.atlassian.crowd.directory.ldap.cache.RemoteDirectoryCacheRefresher.synchroniseAllUsers(RemoteDirectoryCacheRefresher.java:95)\r\n\tat com.atlassian.crowd.directory.synchronisation.cache.AbstractCacheRefresher.synchroniseAll(AbstractCacheRefresher.java:45)\r\n\tat com.atlassian.crowd.directory.ldap.cache.EventTokenChangedCacheRefresher.synchroniseAll(EventTokenChangedCacheRefresher.java:62)\r\n\tat com.atlassian.crowd.directory.DbCachingRemoteDirectory.synchroniseCache(DbCachingRemoteDirectory.java:1039)\r\n\tat com.atlassian.crowd.manager.directory.DirectorySynchroniserImpl.lambda$synchronise$0(DirectorySynchroniserImpl.java:80)\r\n\tat com.atlassian.crowd.audit.NoOpAuditLogContext.withAuditLogSource(NoOpAuditLogContext.java:17)\r\n\tat com.atlassian.crowd.manager.directory.DirectorySynchroniserImpl.synchronise(DirectorySynchroniserImpl.java:78)\r\n\tat sun.reflect.GeneratedMethodAccessor1077.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:197)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)\r\n\tat com.sun.proxy.$Proxy168.synchronise(Unknown Source)\r\n\tat com.atlassian.crowd.directory.DbCachingDirectoryPoller.pollChanges(DbCachingDirectoryPoller.java:45)\r\n\tat com.atlassian.crowd.manager.directory.monitor.poller.DirectoryPollerJobRunner.runJob(DirectoryPollerJobRunner.java:85)\r\n\tat com.atlassian.scheduler.core.JobLauncher.runJob(JobLauncher.java:153)\r\n\tat com.atlassian.scheduler.core.JobLauncher.launchAndBuildResponse(JobLauncher.java:118)\r\n\tat com.atlassian.scheduler.core.JobLauncher.launch(JobLauncher.java:97)\r\n\tat com.atlassian.scheduler.quartz2.Quartz2Job.execute(Quartz2Job.java:32)\r\n\tat org.quartz.core.JobRunShell.run(JobRunShell.java:202)\r\n\tat org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)\r\nCaused by: org.postgresql.util.PSQLException: ERROR: current transaction is aborted, commands ignored until end of transaction block\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2468)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2211)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:309)\r\n\tat org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:446)\r\n\tat org.postgresql.jdbc.PgStatement.execute(PgStatement.java:370)\r\n\tat org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:149)\r\n\tat org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:108)\r\n\tat com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeQuery(NewProxyPreparedStatement.java:431)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:60)\r\n\t... 57 more\r\nCaused by: org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint \"uk_bm0lb4ya9whq89box05jyqjo1\"\r\n  Detail: Key (user_name)=(gerhard) already exists.\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2468)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2211)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:309)\r\n\tat org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:446)\r\n\tat org.postgresql.jdbc.PgStatement.execute(PgStatement.java:370)\r\n\tat org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:149)\r\n\tat org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:124)\r\n\tat com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeUpdate(NewProxyPreparedStatement.java:462)\r\n\tat com.atlassian.bamboo.user.rename.UserRenameHelper.updateUserInTable(UserRenameHelper.java:38)\r\n\tat com.atlassian.bamboo.user.rename.UserRenameHelper.updateUserInTable(UserRenameHelper.java:23)\r\n\tat com.atlassian.bamboo.user.rename.UserRenameHelper.renameUserInAuthAttemptInfo(UserRenameHelper.java:60)\r\n\tat com.atlassian.bamboo.user.rename.UserRenameServiceImpl.doRenameUser(UserRenameServiceImpl.java:174)\r\n\tat com.atlassian.bamboo.user.rename.UserRenameServiceImpl.access$200(UserRenameServiceImpl.java:37)\r\n\tat com.atlassian.bamboo.user.rename.UserRenameServiceImpl$1.lambda$null$0(UserRenameServiceImpl.java:127)\r\n\tat org.hibernate.jdbc.WorkExecutor.executeWork(WorkExecutor.java:37)\r\n\tat org.hibernate.internal.SessionImpl$1.accept(SessionImpl.java:2389)\r\n\tat org.hibernate.internal.SessionImpl$1.accept(SessionImpl.java:2386)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.coordinateWork(JdbcCoordinatorImpl.java:320)\r\n\tat org.hibernate.internal.SessionImpl.doWork(SessionImpl.java:2408)\r\n\tat org.hibernate.internal.SessionImpl.doWork(SessionImpl.java:2393)\r\n\tat sun.reflect.GeneratedMethodAccessor2361.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.orm.hibernate5.HibernateTemplate$CloseSuppressingInvocationHandler.invoke(HibernateTemplate.java:1226)\r\n\tat com.sun.proxy.$Proxy319.doWork(Unknown Source)\r\n\tat com.atlassian.bamboo.user.rename.UserRenameServiceImpl$1.lambda$doInTransactionWithoutResult$1(UserRenameServiceImpl.java:119)\r\n\tat org.springframework.orm.hibernate5.HibernateTemplate.doExecute(HibernateTemplate.java:383)\r\n\tat org.springframework.orm.hibernate5.HibernateTemplate.execute(HibernateTemplate.java:335)\r\n\tat com.atlassian.bamboo.user.rename.UserRenameServiceImpl$1.doInTransactionWithoutResult(UserRenameServiceImpl.java:118)\r\n\tat org.springframework.transaction.support.TransactionCallbackWithoutResult.doInTransaction(TransactionCallbackWithoutResult.java:36)\r\n\tat org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)\r\n\tat com.atlassian.bamboo.user.rename.UserRenameServiceImpl.lambda$renameUser$0(UserRenameServiceImpl.java:115)\r\n\tat com.atlassian.bamboo.core.ScopedExclusionServiceImpl.withLock(ScopedExclusionServiceImpl.java:63)\r\n\tat com.atlassian.bamboo.user.rename.UserRenameServiceImpl.renameUser(UserRenameServiceImpl.java:102)\r\n\tat com.atlassian.bamboo.user.rename.UserRenameServiceImpl.onUserRenamedEvent(UserRenameServiceImpl.java:162)\r\n\tat sun.reflect.GeneratedMethodAccessor2369.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat com.atlassian.event.internal.SingleParameterMethodListenerInvoker.invoke(SingleParameterMethodListenerInvoker.java:36)\r\n\tat com.atlassian.event.internal.AsynchronousAbleEventDispatcher$1$1.run(AsynchronousAbleEventDispatcher.java:46)\r\n\tat com.google.common.util.concurrent.MoreExecutors$DirectExecutorService.execute(MoreExecutors.java:299)\r\n\tat com.atlassian.event.internal.AsynchronousAbleEventDispatcher.dispatch(AsynchronousAbleEventDispatcher.java:105)\r\n\tat com.atlassian.bamboo.event.spi.BambooEventDispatcher.dispatch(BambooEventDispatcher.java:34)\r\n\tat com.atlassian.event.internal.LockFreeEventPublisher$Publisher.dispatch(LockFreeEventPublisher.java:260)\r\n\tat com.atlassian.event.internal.LockFreeEventPublisher.publish(LockFreeEventPublisher.java:102)\r\n\tat com.atlassian.bamboo.event.TxAwareEventPublisher.publish(TxAwareEventPublisher.java:20)\r\n\tat java.util.ArrayList.forEach(ArrayList.java:1257)\r\n\tat com.atlassian.crowd.core.event.DelegatingMultiEventPublisher.publishAll(DelegatingMultiEventPublisher.java:19)\r\n\tat com.atlassian.crowd.directory.DbCachingRemoteChangeOperations.publishEvents(DbCachingRemoteChangeOperations.java:880)\r\n\tat com.atlassian.crowd.directory.DbCachingRemoteChangeOperations.publishEvent(DbCachingRemoteChangeOperations.java:874)\r\n\tat com.atlassian.crowd.directory.DbCachingRemoteChangeOperations.updateUsers(DbCachingRemoteChangeOperations.java:277)\r\n\t... 38 more\r\n{noformat}\r\n\r\nOr:\r\n{noformat}\r\n...\r\nCaused by: org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint \"auth_attempt_info_user_name_key\"\r\n  Detail: Key (user_name)=(user) already exists.\r\n        at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2412)\r\n        at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2125)\r\n        at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:297)\r\n        at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:428)\r\n        at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:354)\r\n        at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:169)\r\n        at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:136)\r\n        at com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeUpdate(NewProxyPreparedStatement.java:384)\r\n        at com.atlassian.bamboo.user.rename.UserRenameHelper.updateUserInTable(UserRenameHelper.java:26)\r\n        at com.atlassian.bamboo.user.rename.UserRenameHelper.updateUserInTable(UserRenameHelper.java:18)\r\n        at com.atlassian.bamboo.user.rename.UserRenameHelper.renameUserInAuthAttemptInfo(UserRenameHelper.java:48)\r\n...\r\n{noformat}\r\n\r\nh3. Workaround\r\n\r\nAs the *auth_attempt_info* only stores the failed login attempts, it's safe to delete its content directly from the database:\r\n # Stop Bamboo\r\n # Backup Bamboo database\r\n # Run the following\r\n{code:sql}\r\ndelete from auth_attempt_info;\r\n{code}\r\n # Start Bamboo Back.\r\n # Try to run the synchronization again.",
      "summary": "Unique constraint violation while syncing an external user repository"
    }
  },
  {
    "key": "BAM-20734",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-09-24T11:03:34.000+0000",
      "created": "2019-11-27T11:59:17.000+0000",
      "description": "While I am configuring the Notification email from the Project level . Mail is not triggering to our outlook . Could you please help with this?",
      "summary": "Email Notification is not working "
    }
  },
  {
    "key": "BAM-20732",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-11-26T12:14:07.000+0000",
      "description": "It would be great to have feature where you can see how long a build has been queuing before it got built. This would allow us to easier see when it time to expand our bamboo license with more agent. I found this article to work around it, but since this will only add the information in logs, many developers would not be able to see the results very easy, which is why i suggest adding this feature request in the UI for everyone to see how much time is wasted just waiting for an agent to become ready.",
      "summary": "Time waiting to build impossible to see via UI"
    }
  },
  {
    "key": "BAM-20731",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-11-26T10:33:41.000+0000",
      "description": "I would like to be able to see how the runtime of a specific job changes over time (meaning commit history), as one datapoint per build, which can then be grouped by week, month, etc.",
      "summary": "report runtime of job over time"
    }
  },
  {
    "key": "BAM-20730",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-11-26T11:47:42.000+0000",
      "created": "2019-11-26T10:24:13.000+0000",
      "description": "h3. Issue Summary\r\n\r\nBitbucket Server trigger stops working for a particular master or branch plan randomly. Restarting Bamboo will make it work again.\r\nh3. Steps to Diagnose\r\n # Enable debug logging:\r\n{noformat}\r\ncom.atlassian.bamboo.plugins.stash.events.BranchChangedEventListener\r\ncom.atlassian.bamboo.plan.NonBlockingPlanExecutionServiceImpl\r\n{noformat}\r\n\r\n # atlassian-bamboo.log file shows that Bamboo receive Bitbucket Server trigger but did not start queue polling job even though the previous build have finished and it does not receive any other trigger:\r\n{noformat}\r\n2019-10-18 11:56:37,720 DEBUG [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-6] [BranchChangedEventListener] Received Bitbucket Server ref changed event PROJ/reponame::branchname\r\n2019-10-18 11:56:37,722 DEBUG [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-6] [BranchChangedEventListener] publishing change detection event for PROJ-PLAN2\r\n2019-10-18 11:56:37,722 DEBUG [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-6] [BranchChangedEventListener] publishing change detection event for PROJ-PLAN2\r\n2019-10-18 11:56:37,723 DEBUG [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-9] [NonBlockingPlanExecutionServiceImpl] Did not start queue polling job, CHAIN:PROJ-PLAN2 is already being executed\r\n2019-10-18 11:56:37,723 DEBUG [AtlassianEvent::0-BAM::EVENTS:pool-1-thread-4] [NonBlockingPlanExecutionServiceImpl] Did not start queue polling job, CHAIN:PROJ-PLAN2 is already being executed\r\n\r\n{noformat}\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Master or branch plan Bitbucket Server triggered stop working "
    }
  },
  {
    "key": "BAM-20729",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-11-25T21:29:19.000+0000",
      "description": "h3. Issue Summary\r\n\r\nWhen an SSH task is running on a local agent, if there's a network event which causes the SSH connection to fail, hanging the build, Bamboo fails to properly close the connection.  Leaving the build in an 'unknown' state\r\n\r\nh3. Steps to Reproduce\r\n # configure plan using local agent to SSH into a remote server\r\n # run build\r\n # while build is running force network disconnect between Bamboo server, and target server.\r\n\r\nh3. Expected Results\r\n\r\nBamboo closes the SSH session\r\n\r\nh3. Actual Results\r\n\r\nlog entries included below\r\n\r\nh3. Workaround\r\n\r\nStop and restart the Bamboo application to reset the Local Agent status",
      "summary": "Local agent doesn't hang-up SSH session after network interruption"
    }
  },
  {
    "key": "BAM-20728",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-12-12T12:32:37.000+0000",
      "created": "2019-11-23T05:17:16.000+0000",
      "description": "Hi,\r\n\r\nAt present the Bamboo doesn't support IAM Roles for the Elastic Agents.\r\n\r\nAlso we were not able to add the Custom Tags to the Elastic Agents created by Bamboo.\u00a0\r\n\r\nThis helps in Easy Monitoring and Control over secured AWS Environments.\r\n\r\nThanks!",
      "summary": "Enable Bamboo to Support IAM Roles and Tags for Elastic Instances"
    }
  },
  {
    "key": "BAM-20727",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-07-30T13:34:53.000+0000",
      "created": "2019-11-22T18:26:10.000+0000",
      "description": "Currently Bamboo offers 5 plan permissions, which are\u00a0\"View\", \"Edit\", \"Build\", \"Clone\" and \"Admin\".\r\n * Permission \"View\" does not let you see a plan configuration.\r\n * With permission \"Edit\" you can see, but also modify a plan's configuration.\r\n\r\nIt might be interesting and useful for various user scenarios and teams to have a permission that allow more than \"View\" and less than \"Edit\", namely *show what \"Edit\" does but without allowing to edit anything of it*.\r\n\r\nI would suggest to call such a new plan permission *\"Read\"* as it represents a read-only \"Edit\" option.",
      "summary": "Adding plan permission \"Read\""
    }
  },
  {
    "key": "BAM-20726",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-11-21T10:16:24.000+0000",
      "description": "h3. Summary\r\nPresently Bamboo supports creation of filter with basic configuration with REST API, but does not  allow to configure quick filter's rules.\r\n\r\nh3. Suggestion\r\nIt a highly automated environment, It would be nice to allow filter's rule to be configured or updated through REST API.\r\n ",
      "summary": "Ability to create quick filter's rules with API"
    }
  },
  {
    "key": "BAM-20725",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-11-20T22:37:35.000+0000",
      "created": "2019-11-20T22:35:56.000+0000",
      "description": "h3. Issue Summary\r\nExpiry and Notifications in Bamboo 6.8.0 can fail with LazyInitializationException\r\n\r\nh3. Steps to Reproduce\r\n(!) There are unknown data conditions around pre-existing variable data. It doesn't affect all instances\r\n# Enable scheduled global expiry or manually run expiry\r\n\r\n\r\nh3. Expected Results\r\nExpiry completes.\r\n\r\nh3. Actual Results\r\n\r\nThe below exception is thrown in the atlassian-bamboo.log file:\r\n{noformat}\r\n2019-11-15 00:00:38,491 INFO [scheduler_Worker-4] [JobRunShell] Job ExpiryGroup.ExpiryJob threw a JobExecutionException: \r\norg.quartz.JobExecutionException: java.util.concurrent.ExecutionException: org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.atlassian.bamboo.variable.baseline.VariableContextBaselineImpl.variables, could not initialize proxy - no Session [See nested exception: java.util.concurrent.ExecutionException: org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.atlassian.bamboo.variable.baseline.VariableContextBaselineImpl.variables, could not initialize proxy - no Session]\r\n\tat com.atlassian.bamboo.build.expiry.ExpirySchedulerImpl$ExpiryJob.execute(ExpirySchedulerImpl.java:139)\r\n\tat org.quartz.core.JobRunShell.run(JobRunShell.java:202)\r\n\tat com.atlassian.bamboo.utils.BambooRunnables$1.run(BambooRunnables.java:48)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper.runWith(ImpersonationHelper.java:26)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper.runWithSystemAuthority(ImpersonationHelper.java:17)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper$1.run(ImpersonationHelper.java:41)\r\n\tat org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)\r\nCaused by: java.util.concurrent.ExecutionException: org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.atlassian.bamboo.variable.baseline.VariableContextBaselineImpl.variables, could not initialize proxy - no Session\r\n\tat java.util.concurrent.FutureTask.report(FutureTask.java:122)\r\n\tat java.util.concurrent.FutureTask.get(FutureTask.java:192)\r\n\tat com.atlassian.bamboo.build.expiry.ExpirySchedulerImpl$ExpiryJob.execute(ExpirySchedulerImpl.java:123)\r\n\t... 6 more\r\nCaused by: org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.atlassian.bamboo.variable.baseline.VariableContextBaselineImpl.variables, could not initialize proxy - no Session\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:597)\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:216)\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:576)\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.read(AbstractPersistentCollection.java:147)\r\n\tat org.hibernate.collection.internal.PersistentBag.toArray(PersistentBag.java:309)\r\n\tat com.google.common.collect.Iterables.toArray(Iterables.java:328)\r\n\tat com.google.common.collect.Ordering.immutableSortedCopy(Ordering.java:842)\r\n\tat com.atlassian.bamboo.variable.baseline.VariableContextBaselineImpl.getVariables(VariableContextBaselineImpl.java:89)\r\n\tat com.atlassian.bamboo.deployments.versions.DeploymentVersionImpl.<init>(DeploymentVersionImpl.java:48)\r\n\tat com.atlassian.bamboo.deployments.versions.service.DeploymentVersionServiceImpl.getDeploymentVersion(DeploymentVersionServiceImpl.java:927)\r\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\r\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499)\r\n\tat com.atlassian.bamboo.deployments.versions.service.DeploymentVersionServiceImpl.findVersionsBetween(DeploymentVersionServiceImpl.java:739)\r\n\tat com.atlassian.bamboo.deployments.versions.service.DeploymentVersionLinkedJiraIssuesServiceImpl.compareVersionsByJiraIssues(DeploymentVersionLinkedJiraIssuesServiceImpl.java:146)\r\n\tat com.atlassian.bamboo.deployments.versions.service.DeploymentVersionLinkedJiraIssuesServiceImpl.getIssuesChangedForDeploymentResult(DeploymentVersionLinkedJiraIssuesServiceImpl.java:133)\r\n\tat com.atlassian.bamboo.deployments.results.service.DeploymentResultDeletionServiceImpl.delete(DeploymentResultDeletionServiceImpl.java:77)\r\n\tat sun.reflect.GeneratedMethodAccessor4348.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:197)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat com.atlassian.bamboo.security.acegi.intercept.aopalliance.AuthorityOverrideMethodSecurityInterceptor.invoke(AuthorityOverrideMethodSecurityInterceptor.java:24)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)\r\n\tat com.sun.proxy.$Proxy312.delete(Unknown Source)\r\n\tat com.atlassian.bamboo.deployments.expiry.DeploymentExpiryServiceImpl.expireDeploymentResult(DeploymentExpiryServiceImpl.java:309)\r\n\tat com.atlassian.bamboo.deployments.expiry.DeploymentExpiryServiceImpl.expireDeploymentProject(DeploymentExpiryServiceImpl.java:222)\r\n\tat com.atlassian.bamboo.deployments.expiry.DeploymentExpiryServiceImpl.lambda$triggerDeploymentsExpiration$0(DeploymentExpiryServiceImpl.java:112)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat com.atlassian.bamboo.utils.BambooRunnables$1.run(BambooRunnables.java:48)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper.runWith(ImpersonationHelper.java:26)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper.runWithSystemAuthority(ImpersonationHelper.java:17)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper$1.run(ImpersonationHelper.java:41)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n{noformat}\r\n\r\nh3. Workaround\r\n\r\nNone",
      "summary": "Expiry and Notifications in Bamboo 6.8.0 can fail with LazyInitializationException"
    }
  },
  {
    "key": "BAM-20724",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-11-20T20:56:00.000+0000",
      "description": "For consistency, and to SIGNIFICANTLY reduce recovery, as well as redelivery requirements for time and observation, a git repo could be used to retain server-wide configuration, and retain the bamboo-home directory such that the server could be restored from this warm backup.\r\nNoting that this server would only need to retain deviations from the vanilla files, and that the installation could be sourced from the tar.gz file from Atlassian itself, this is not a particularly costly addition, though naturally change control would be critical, it would make the Bamboo server, redelivery automated, and would reduce the storage cost vs a full backup substantially.\r\n\r\nIt would also mean that delivery of a duplicate server, for the same owner would cost no overhead for installation, so expanding the product could be done with much less, time, effort and administration, allowing Atlassian to benefit from customers easily expanding their products with additional licenses, and would give Atlassian Bamboo a huge step forward, with regards to security, providing a server backup & redelivery, out-of-the-box.",
      "summary": "Having configuration/backup for Bamboo to provide server (re)delivery stored in a git repo provides an opportunity for licensing"
    }
  },
  {
    "key": "BAM-20723",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-11-20T07:34:47.000+0000",
      "description": "Currently logs in Bamboo are rotated based on size, but they should be rotated on a daily basis, regardless of size",
      "summary": "Switch to daily log rotation instead of file size based rotation"
    }
  },
  {
    "key": "BAM-20721",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-11-15T22:08:04.000+0000",
      "description": "h3. Problem Definition\r\n\r\nBamboo doesn't create a linked Jira issue in the build if the user clicks on Run plan button.\r\nh3. Suggested Solution\r\n\r\nBamboo should link a Jira issue automatically when it detects that the latest revision has a linked Jira issue. This should work like the Run customized button.\r\nh3. Workarounds\r\n\r\nRun Bamboo build using Run customized button and put the latest revision on it.",
      "summary": "\"Run plan\" button should link a Jira issue automatically"
    }
  },
  {
    "key": "BAM-20720",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-11-15T14:48:32.000+0000",
      "description": "In Bamboo version 6.9.0 the\u00a0generated Jira link found in the header of a build is no longer just opening the plain Jira issue but it will open the \"Related Builds\" pop up on top of that issue.\r\n\r\nThe change that caused this can be found in the JiraIssueUtils class inside the\u00a0getPanelParameter() method. A \"...&devStatusDetailDialog=build\" parameter has been added to the generated Jira link.\r\n\r\nNo other changes have been made in\u00a0JiraIssueUtils at the same time, so I'm wondering what the reasons for this change have been?\r\n\r\nI would like to ask you to go back to the original behaviour of the link, that is to just open the Jira issue, nothing more.\r\n\r\nBecause in an overwhelming number of times (read: \"always\") I would want to go from a build to the related Jira issue to, guess what, take a look at the Jira issue. What I don't want is to see is a list of builds that are related to the issue, because most of the time the list will consist of only just one entry, containing the exact build where I just came from.\r\n\r\n\u00a0\r\n\r\nRemoving this additional parameter should really be an easy task, so please kindly consider this request to make a few customers happy.\r\n\r\n\u00a0",
      "summary": "Jira link opens \"related builds\" pop up (which is quite annoying)"
    }
  },
  {
    "key": "BAM-20719",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-11-15T09:55:34.000+0000",
      "description": "h3. Summary\r\n\r\nWhen a new plan is created, we only have the option to create tasks in the UI. For more configuration options, we need to go into the plan and proceed from there.\r\n\r\nh3. Accepted solution\r\nHave more configuration options when the plan/job is created, including:\r\n- Requirements.\r\n- \"Clean working directory after each build\"\r\n- \"Override default hanging build detection criteria\"",
      "summary": "More configuration options when creating new plan/job"
    }
  },
  {
    "key": "BAM-20718",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-11-13T21:21:51.000+0000",
      "description": "h3. Problem Definition\r\n\r\nBamboo currently doesn't grant permissions to new projects that are created in Specs repository.\r\nh3. Suggested Solution\r\n\r\nIf a new deployment project is created in YAML Specs, Bamboo should grant automatically permissions to modify this deployment project to Specs repository.",
      "summary": "Grant permissions to new projects created in Bamboo YAML Specs"
    }
  },
  {
    "key": "BAM-20717",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2021-02-24T13:42:40.000+0000",
      "created": "2019-11-13T21:07:51.000+0000",
      "description": "h3. Problem Definition\r\n\r\nBamboo currently doesn't have an option to allow Bamboo Specs only to create new projects and not have access to all projects. Bamboo provides the following configuration only:\r\n\r\n*Access all projects*\r\nAllows this repository to access all projects and to create new projects.\r\nh3. Suggested Solution\r\n\r\nSplit the Access all projects permissions to:\r\n - Access to all projects\r\n - Create new projects",
      "summary": "Create a new Bamboo Specs project permission to allow Specs to \"create new projects\""
    }
  },
  {
    "key": "BAM-20716",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2019-11-21T12:33:05.000+0000",
      "created": "2019-11-13T16:40:14.000+0000",
      "description": "h3. Issue Summary\r\nLinks generated for GitHub Enterprise Repositories point to github.com\r\n\r\nh3. Steps to Reproduce\r\n # Link GHE repo\r\n # Click links from application\r\n\r\nh3. Expected Results\r\nUses git URL specified in GHE configuration\r\n\r\nh3. Actual Results\r\nUses github.com\r\n\r\nh3. Workaround\r\n\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available",
      "summary": "Links generated for GitHub Enterprise Repositories point to github.com"
    }
  },
  {
    "key": "BAM-20715",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-11-13T09:19:11.000+0000",
      "description": "h3. Summary\r\nThe current behavior of Bamboo Server Automatic branch merging  is only possible with one default git repository only.\r\nh3. Recommendation\r\n* A feature to configure *Branch Updater* and *Gatekeeper* for merge changes from all repositories which were cloned in build plan \r\n* An option to select list of repositories  to track for Automatic branch merging",
      "summary": "Automatic branch merging for multiple git repositories"
    }
  },
  {
    "key": "BAM-20714",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": "2020-03-19T13:08:20.000+0000",
      "created": "2019-11-12T06:41:52.000+0000",
      "description": "h3. Issue Summary\r\nOpening stop build in a new tab for a queued build will cause an XSRF failure and inconsistent build state, the build will not be shown as complete until the OrphanedBuildMonitor cleans it after 720 seconds. If this is performed on a *re-run* build, there will be a NullPointerException too and OrphanedBuildMonitor cannot clean it and Bamboo needs to be restarted or the build is infinitely in a queued state.\r\n\r\nh3. Steps to Reproduce\r\n# Run a plan and allow it to complete\r\n# Disable all agents so build waits in queue\r\n# Re-run the same build\r\n# In Chrome > Right Click Stop Build > Open in new tab \r\n# {{XSRF: A mutative operation was attempted}} error because opening stop build in a new tab as the browser performs a {{GET}} instead of {{POST}}. \r\n# Now try to stop the build normally (without opening it a in a new tab)\r\n# NullPointerException\r\n\r\nh3. Expected Results\r\nShouldn't be able to get into this state. Perhaps {{stopPlan.action}} should be completely protected (in-memory caches and stopping the build) from unsupported HTTP methods like {{GET}} since it performs mutative actions.\r\n\r\nh3. Actual Results\r\nUpon opening {{Stop Build}} in a new tab (even for non re-runs) a {{GET}} request cannot mutate the build state from {{QUEUED}} -> {{NotBuilt}}:\r\n{noformat}\r\nRequest information:\r\nRequest URL: http://localhost:8085/build/admin/stopPlan.action\r\nScheme: http\r\nServer: localhost\r\nPort: 8085\r\nURI: /build/admin/stopPlan.action\r\nServlet path: /build/admin/stopPlan.action\r\nPath info:\r\nQuery string: planResultKey=ART-STP-6&returnUrl=%2Fbrowse%2FART-STP-6\r\nStack Trace:\r\n\r\njava.lang.IllegalStateException: XSRF: A mutative operation was attempted on BuildResultsSummaryImpl(id=230916098) within a non-mutative HTTP request: http://localhost:8085/build/admin/stopPlan.action?planResultKey=ART-STP-6&returnUrl=%2Fbrowse%2FART-STP-6 : [[BUILD, 2019-11-12 17:12:24.943, ART-STP-JOB1, Default Job, 6, Unknown, Queued, null, null, null, 0, 0, 0, com.atlassian.bamboo.plugin.system.triggerReason:ManualBuildTriggerReason, [], NONE, 0, 230948865, 2, 2019-11-12 17:12:53.318, false, false, false, false, -1, [], {buildTimeStamp=2019-11-12T17:12:40.040+11:00, CUCUMBER_JSON_REPORT=null, RerunBuildTriggerReason.noOfRetries=2, ManualBuildTriggerReason.userName=bamboo, dependenciesDisabled=false, bamboo.system.getTestsToPass=, buildKey=ART-STP-JOB1, buildNumber=6, ManualBuildTriggerReason.stageName=Default Stage, plan.storageTag=plan-230522883, TEST_JIRA_REPORT=null}, [], [], VariableContextBaselineImpl{hash=e8508a53b88c2de74f603bcdaad2db3c221386ca}, [com.atlassian.bamboo.resultsummary.CustomDataRow@405b71a7, com.atlassian.bamboo.resultsummary.CustomDataRow@405b71a7, com.atlassian.bamboo.resultsummary.CustomDataRow@405b71a7, com.atlassian.bamboo.resultsummary.CustomDataRow@405b71a7, com.atlassian.bamboo.resultsummary.CustomDataRow@405b71a7, com.atlassian.bamboo.resultsummary.CustomDataRow@405b71a7, com.atlassian.bamboo.resultsummary.CustomDataRow@405b71a7, com.atlassian.bamboo.resultsummary.CustomDataRow@405b71a7, com.atlassian.bamboo.resultsummary.CustomDataRow@405b71a7, com.atlassian.bamboo.resultsummary.CustomDataRow@405b71a7, com.atlassian.bamboo.resultsummary.CustomDataRow@405b71a7], [], [], [], [], 61008, TestResultsSummaryImpl{successfulTestCaseCount=0, failedTestCaseCount=0, totalTestCaseCount=0, brokenTestCaseCount=0, existingFailedTestCount=0, fixedTestCaseCount=0, quarantinedTestCaseCount=0, skippedTestCaseCount=0, totalTestDuration=0}, null, com.atlassian.bamboo.chains.ChainResultsSummaryImpl@277c9bc0[planKey=ART-STP,buildNumber=6], [], []]]->\r\n->[[BUILD, 2019-11-12 17:12:24.943, ART-STP-JOB1, Default Job, 6, Unknown, Queued, null, null, null, 0, 0, 0, com.atlassian.bamboo.plugin.system.triggerReason:ManualBuildTriggerReason, [], NONE, 0, 230948865, 2, 2019-11-12 17:12:53.318, false, false, false, false, null, [], {buildTimeStamp=2019-11-12T17:12:40.040+11:00, CUCUMBER_JSON_REPORT=null, RerunBuildTriggerReason.noOfRetries=2, ManualBuildTriggerReason.userName=bamboo, dependenciesDisabled=false, bamboo.system.getTestsToPass=, buildKey=ART-STP-JOB1, buildNumber=6, ManualBuildTriggerReason.stageName=Default Stage, plan.storageTag=plan-230522883, TEST_JIRA_REPORT=null}, [], [], VariableContextBaselineImpl{hash=e8508a53b88c2de74f603bcdaad2db3c221386ca}, [com.atlassian.bamboo.resultsummary.CustomDataRow@405b71a7, com.atlassian.bamboo.resultsummary.CustomDataRow@405b71a7, com.atlassian.bamboo.resultsummary.CustomDataRow@405b71a7, com.atlassian.bamboo.resultsummary.CustomDataRow@405b71a7, com.atlassian.bamboo.resultsummary.CustomDataRow@405b71a7, com.atlassian.bamboo.resultsummary.CustomDataRow@405b71a7, com.atlassian.bamboo.resultsummary.CustomDataRow@405b71a7, com.atlassian.bamboo.resultsummary.CustomDataRow@405b71a7, com.atlassian.bamboo.resultsummary.CustomDataRow@405b71a7, com.atlassian.bamboo.resultsummary.CustomDataRow@405b71a7, com.atlassian.bamboo.resultsummary.CustomDataRow@405b71a7], [], [], [], [], 61008, TestResultsSummaryImpl{successfulTestCaseCount=0, failedTestCaseCount=0, totalTestCaseCount=0, brokenTestCaseCount=0, existingFailedTestCount=0, fixedTestCaseCount=0, quarantinedTestCaseCount=0, skippedTestCaseCount=0, totalTestDuration=0}, null, com.atlassian.bamboo.chains.ChainResultsSummaryImpl@277c9bc0[planKey=ART-STP,buildNumber=6], [], []]]\r\n\r\n\tat com.atlassian.bamboo.utils.XsrfUtils.fail(XsrfUtils.java:27)\r\n\tat com.atlassian.bamboo.hibernate.ReadOnlyGetMethodEnforcer.fail(ReadOnlyGetMethodEnforcer.java:125)\r\n\tat com.atlassian.bamboo.hibernate.ReadOnlyGetMethodEnforcer.onFlushDirty(ReadOnlyGetMethodEnforcer.java:76)\r\n...\r\n\tat com.atlassian.bamboo.v2.build.agent.LocalBuildResultProcessor.processBuildResult(LocalBuildResultProcessor.java:138)\r\n\tat com.atlassian.bamboo.v2.build.agent.LocalResultProcessorImpl.processResult(LocalResultProcessorImpl.java:30)\r\n\tat com.atlassian.bamboo.v2.build.queue.BuildQueueManagerImpl.removeBuildFromQueue(BuildQueueManagerImpl.java:227)\r\n\tat com.atlassian.bamboo.build.DefaultStopBuildManager.cancelBuild(DefaultStopBuildManager.java:113)\r\n\tat com.atlassian.bamboo.chains.JobExecutionManagerImpl.requestStop(JobExecutionManagerImpl.java:43)\r\n\tat com.atlassian.bamboo.chains.ChainExecutionManagerImpl$4.run(ChainExecutionManagerImpl.java:743)\r\n\tat io.atlassian.util.concurrent.ManagedLocks$ManagedLockImpl.withLock(ManagedLocks.java:302)\r\n\tat com.atlassian.bamboo.chains.ChainExecutionManagerImpl.stop(ChainExecutionManagerImpl.java:736)\r\n\tat com.atlassian.bamboo.chains.ChainExecutionManagerImpl.stop(ChainExecutionManagerImpl.java:722)\r\n...\r\n{noformat}\r\n\r\nUpon trying to stop this build normally with a {{POST}} and when {{OrphanedBuildMonitor}} attempts to clean it due to the state mismatch\r\nThe below exception is thrown in the atlassian-bamboo.log file and UI:\r\n{noformat}\r\njava.lang.NullPointerException\r\n\tat com.atlassian.bamboo.build.logger.LazyBuildLogFileWriterImpl.write(LazyBuildLogFileWriterImpl.java:41)\r\n\tat com.atlassian.bamboo.build.logger.BuildLoggerImpl.onAddLogEntry(BuildLoggerImpl.java:44)\r\n\tat com.atlassian.bamboo.build.logger.AbstractBuildLogger.addLogEntry(AbstractBuildLogger.java:128)\r\n\tat com.atlassian.bamboo.build.logger.AbstractBuildLogger.addBuildLogEntry(AbstractBuildLogger.java:86)\r\n\tat com.atlassian.bamboo.build.DefaultStopBuildManager.cancelBuild(DefaultStopBuildManager.java:108)\r\n\tat com.atlassian.bamboo.chains.JobExecutionManagerImpl.requestStop(JobExecutionManagerImpl.java:43)\r\n\tat com.atlassian.bamboo.chains.ChainExecutionManagerImpl$4.run(ChainExecutionManagerImpl.java:743)\r\n\tat io.atlassian.util.concurrent.ManagedLocks$ManagedLockImpl.withLock(ManagedLocks.java:302)\r\n\tat com.atlassian.bamboo.chains.ChainExecutionManagerImpl.stop(ChainExecutionManagerImpl.java:736)\r\n\tat com.atlassian.bamboo.chains.ChainExecutionManagerImpl.stop(ChainExecutionManagerImpl.java:722)\r\n..\r\n{noformat}\r\n{noformat}\r\n2019-11-11 15:09:28,590 INFO [scheduler_Worker-1] [DefaultErrorHandler] Recording an error: Build ART-STP-JOB1-5 had to be cancelled: it was marked as queued but was not present in the queue for (at least) the past 720 seconds. : ART-STP-JOB1\r\n2019-11-11 15:09:28,593 ERROR [scheduler_Worker-1] [OrphanedBuildMonitorJob] Unable to log build cancellation: \r\njava.lang.NullPointerException\r\n\tat com.atlassian.bamboo.build.logger.LazyBuildLogFileWriterImpl.write(LazyBuildLogFileWriterImpl.java:41)\r\n\tat com.atlassian.bamboo.build.logger.BuildLoggerImpl.onAddLogEntry(BuildLoggerImpl.java:44)\r\n\tat com.atlassian.bamboo.build.logger.AbstractBuildLogger.addLogEntry(AbstractBuildLogger.java:128)\r\n\tat com.atlassian.bamboo.build.logger.AbstractBuildLogger.addErrorLogEntryInternal(AbstractBuildLogger.java:98)\r\n\tat com.atlassian.bamboo.build.logger.AbstractBuildLogger.addErrorLogEntry(AbstractBuildLogger.java:93)\r\n\tat com.atlassian.bamboo.build.logger.AbstractBuildLogger.addErrorLogEntry(AbstractBuildLogger.java:143)\r\n\tat com.atlassian.bamboo.build.monitoring.OrphanedBuildMonitorJob.logCancellation(OrphanedBuildMonitorJob.java:257)\r\n\tat com.atlassian.bamboo.build.monitoring.OrphanedBuildMonitorJob.cleanUpBuildsAndDeploymentsWithInconsistentQueuedStatus(OrphanedBuildMonitorJob.java:242)\r\n\tat com.atlassian.bamboo.build.monitoring.OrphanedBuildMonitorJob.execute(OrphanedBuildMonitorJob.java:97)\r\n\tat org.quartz.core.JobRunShell.run(JobRunShell.java:202)\r\n\tat com.atlassian.bamboo.utils.BambooRunnables$1.run(BambooRunnables.java:48)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper.runWith(ImpersonationHelper.java:26)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper.runWithSystemAuthority(ImpersonationHelper.java:17)\r\n\tat com.atlassian.bamboo.security.ImpersonationHelper$1.run(ImpersonationHelper.java:41)\r\n\tat org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)\r\n{noformat}\r\n\r\nh3. Workaround\r\nFor a build that was re-run, once the XSRF error is encountered -- Bamboo will need to be restarted to clear up the build result, otherwise it will appear as queued indefinitely because the orphaned build monitor encounters a NullPointerException for re-runs affected by this.\r\n\r\nIf the build was a first time build and the XSRF error is encountered, after 720 seconds the Bamboo orphaned build monitor will successfully clear up the build result.",
      "summary": "Opening stop build in a new tab for a queued build will cause an XSRF failure and inconsistent build state"
    }
  },
  {
    "key": "BAM-20713",
    "fields": {
      "project": {
        "self": "https://jira.atlassian.com/rest/api/2/project/11011",
        "id": "11011",
        "key": "BAM",
        "name": "Bamboo",
        "projectTypeKey": "software",
        "avatarUrls": {
          "48x48": "https://jira.atlassian.com/secure/projectavatar?pid=11011&avatarId=105290",
          "24x24": "https://jira.atlassian.com/secure/projectavatar?size=small&pid=11011&avatarId=105290",
          "16x16": "https://jira.atlassian.com/secure/projectavatar?size=xsmall&pid=11011&avatarId=105290",
          "32x32": "https://jira.atlassian.com/secure/projectavatar?size=medium&pid=11011&avatarId=105290"
        },
        "projectCategory": {
          "self": "https://jira.atlassian.com/rest/api/2/projectCategory/10031",
          "id": "10031",
          "description": "",
          "name": "Atlassian Products"
        }
      },
      "resolutiondate": null,
      "created": "2019-11-08T16:12:14.000+0000",
      "description": "h3. Issue Summary\r\nWhen starting Bamboo, occasionally some services will fail to load within a set timeout\r\n\r\nh3. Steps to Reproduce\r\n(i) This is intermittent, and we have not been able to reliably reproduce this error\r\n # Start Bamboo\r\n # Wait for failure to appear while starting up\r\n\r\nh3. Expected Results\r\nBamboo starts up normally\r\nh3. Actual Results\r\n\r\nThe below exception is thrown in the {{atlassian-bamboo.log}} file:\r\n{noformat}\r\n2019-10-23 21:56:08,757 ERROR [https-jsse-nio-8443-exec-10] [DefaultServletModuleManager] Unable to create new reference LazyLoadedFilterReference{descriptor=com.atlassian.bamboo.plugins.rest:com.atlassian.bamboo.plugins.rest.resource-filter (Provides Bamboo builds information.), filterConfig=com.atlassian.plugin.servlet.filter.PluginFilterConfig@7289a72e}\r\ncom.atlassian.util.concurrent.LazyReference$InitializationException: com.atlassian.bamboo.plugin.osgi.OsgiServiceProxyFactoryImpl$ServiceTimeoutExceeded: Timeout exceeded waiting for service - com.atlassian.analytics.api.services.AnalyticsConfigService\r\n{noformat}\r\n\r\nh3. Workaround\r\n\r\n Currently there is no known workaround for this behavior other than restarting Bamboo. A more significant workaround will be added here when available",
      "summary": "Bamboo occasionally fails to startup due to \"timeout exceeded waiting for service\""
    }
  }
]